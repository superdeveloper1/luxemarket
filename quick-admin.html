<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quick Admin - LuxeMarket</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
            <h1 class="text-3xl font-bold text-gray-900 mb-6">Quick Admin Panel</h1>
            
            <!-- Add Product Form -->
            <div class="bg-blue-50 p-4 rounded-lg mb-6">
                <h2 class="text-xl font-semibold mb-4">Add New Product</h2>
                <form id="productForm" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Product Name</label>
                        <input type="text" id="name" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Price</label>
                        <input type="number" id="price" step="0.01" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Category</label>
                        <select id="category" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option value="">Select Category</option>
                            <option value="Electronics">Electronics</option>
                            <option value="Fashion">Fashion</option>
                            <option value="Shoes">Shoes</option>
                            <option value="Furniture">Furniture</option>
                            <option value="Accessories">Accessories</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Image URL</label>
                        <input type="url" id="image" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="https://example.com/image.jpg">
                    </div>
                    
                    <div class="md:col-span-2">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Description</label>
                        <textarea id="description" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Colors (comma separated)</label>
                        <input type="text" id="colors" placeholder="Red, Blue, Green" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Sizes (comma separated)</label>
                        <input type="text" id="sizes" placeholder="XS, S, M, L, XL or 7, 8, 9, 10, 11" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    
                    <div class="md:col-span-2">
                        <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-md transition-colors">
                            Add Product
                        </button>
                    </div>
                </form>
            </div>
            
            <!-- Status Messages -->
            <div id="status" class="hidden p-4 rounded-md mb-4"></div>
            
            <!-- Products List -->
            <div class="bg-gray-50 p-4 rounded-lg">
                <h2 class="text-xl font-semibold mb-4">Current Products</h2>
                <div id="productsList" class="space-y-2">
                    <!-- Products will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // Simple ProductManager
        const PRODUCT_STORAGE_KEY = 'luxemarket_products';
        const CURRENT_DATA_VERSION = 'v1.9';

        const ProductManager = {
            init: () => {
                const storedVersion = localStorage.getItem('luxemarket_data_version');
                if (!localStorage.getItem(PRODUCT_STORAGE_KEY) || storedVersion !== CURRENT_DATA_VERSION) {
                    localStorage.setItem(PRODUCT_STORAGE_KEY, JSON.stringify([]));
                    localStorage.setItem('luxemarket_data_version', CURRENT_DATA_VERSION);
                }
            },

            getAll: () => {
                ProductManager.init();
                try {
                    return JSON.parse(localStorage.getItem(PRODUCT_STORAGE_KEY)) || [];
                } catch (e) {
                    return [];
                }
            },

            save: (product) => {
                const products = ProductManager.getAll();
                const newId = Math.max(...products.map(p => Number(p.id) || 0), 0) + 1;
                const newProduct = { 
                    ...product, 
                    id: newId, 
                    rating: 4.5, 
                    reviews: Math.floor(Math.random() * 100) + 10 
                };
                products.push(newProduct);
                localStorage.setItem(PRODUCT_STORAGE_KEY, JSON.stringify(products));
                return newProduct;
            },

            delete: (id) => {
                const products = ProductManager.getAll();
                const filtered = products.filter(p => p.id !== Number(id));
                localStorage.setItem(PRODUCT_STORAGE_KEY, JSON.stringify(filtered));
            }
        };

        // Helper functions
        function showStatus(message, type = 'success') {
            const status = document.getElementById('status');
            status.className = `p-4 rounded-md mb-4 ${type === 'success' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}`;
            status.textContent = message;
            status.classList.remove('hidden');
            setTimeout(() => status.classList.add('hidden'), 3000);
        }

        function parseColors(colorString) {
            if (!colorString) return [];
            return colorString.split(',').map(c => {
                const name = c.trim();
                const colorMap = {
                    'red': '#EF4444', 'blue': '#3B82F6', 'green': '#10B981',
                    'black': '#000000', 'white': '#FFFFFF', 'gray': '#6B7280',
                    'yellow': '#F59E0B', 'purple': '#8B5CF6', 'pink': '#EC4899',
                    'brown': '#8B4513', 'navy': '#1E3A8A', 'orange': '#F97316'
                };
                return {
                    name: name,
                    hex: colorMap[name.toLowerCase()] || '#6B7280'
                };
            });
        }

        function parseSizes(sizeString) {
            if (!sizeString) return [];
            return sizeString.split(',').map(s => s.trim()).filter(s => s);
        }

        function loadProducts() {
            const products = ProductManager.getAll();
            const container = document.getElementById('productsList');
            
            if (products.length === 0) {
                container.innerHTML = '<p class="text-gray-500">No products yet. Add some products above!</p>';
                return;
            }

            container.innerHTML = products.map(product => `
                <div class="bg-white p-4 rounded-md border flex justify-between items-center">
                    <div class="flex items-center space-x-4">
                        <img src="${product.image}" alt="${product.name}" class="w-16 h-16 object-cover rounded">
                        <div>
                            <h3 class="font-semibold">${product.name}</h3>
                            <p class="text-gray-600">$${product.price} â€¢ ${product.category}</p>
                            ${product.colors && product.colors.length > 0 ? `<p class="text-sm text-gray-500">Colors: ${product.colors.map(c => c.name).join(', ')}</p>` : ''}
                            ${product.sizes && product.sizes.length > 0 ? `<p class="text-sm text-gray-500">Sizes: ${product.sizes.join(', ')}</p>` : ''}
                        </div>
                    </div>
                    <button onclick="deleteProduct(${product.id})" class="bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded text-sm">
                        Delete
                    </button>
                </div>
            `).join('');
        }

        function deleteProduct(id) {
            if (confirm('Are you sure you want to delete this product?')) {
                ProductManager.delete(id);
                loadProducts();
                showStatus('Product deleted successfully!');
            }
        }

        // Form submission
        document.getElementById('productForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            const product = {
                name: document.getElementById('name').value,
                price: parseFloat(document.getElementById('price').value),
                category: document.getElementById('category').value,
                image: document.getElementById('image').value,
                description: document.getElementById('description').value,
                colors: parseColors(document.getElementById('colors').value),
                sizes: parseSizes(document.getElementById('sizes').value)
            };

            try {
                const savedProduct = ProductManager.save(product);
                showStatus(`Product "${savedProduct.name}" added successfully!`);
                e.target.reset();
                loadProducts();
            } catch (error) {
                showStatus('Error adding product: ' + error.message, 'error');
            }
        });

        // Load products on page load
        document.addEventListener('DOMContentLoaded', loadProducts);
    </script>
</body>
</html>