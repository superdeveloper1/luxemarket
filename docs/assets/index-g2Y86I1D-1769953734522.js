(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function P_(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var uh={exports:{}},Ma={},dh={exports:{}},De={};var ug;function R_(){if(ug)return De;ug=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),I=Symbol.iterator;function N(R){return R===null||typeof R!="object"?null:(R=I&&R[I]||R["@@iterator"],typeof R=="function"?R:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,O={};function F(R,S,le){this.props=R,this.context=S,this.refs=O,this.updater=le||M}F.prototype.isReactComponent={},F.prototype.setState=function(R,S){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,S,"setState")},F.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function $(){}$.prototype=F.prototype;function z(R,S,le){this.props=R,this.context=S,this.refs=O,this.updater=le||M}var Y=z.prototype=new $;Y.constructor=z,L(Y,F.prototype),Y.isPureReactComponent=!0;var ne=Array.isArray,G=Object.prototype.hasOwnProperty,ce={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function T(R,S,le){var de,fe={},_e=null,Ae=null;if(S!=null)for(de in S.ref!==void 0&&(Ae=S.ref),S.key!==void 0&&(_e=""+S.key),S)G.call(S,de)&&!C.hasOwnProperty(de)&&(fe[de]=S[de]);var Be=arguments.length-2;if(Be===1)fe.children=le;else if(1<Be){for(var Ge=Array(Be),$t=0;$t<Be;$t++)Ge[$t]=arguments[$t+2];fe.children=Ge}if(R&&R.defaultProps)for(de in Be=R.defaultProps,Be)fe[de]===void 0&&(fe[de]=Be[de]);return{$$typeof:r,type:R,key:_e,ref:Ae,props:fe,_owner:ce.current}}function A(R,S){return{$$typeof:r,type:R.type,key:S,ref:R.ref,props:R.props,_owner:R._owner}}function D(R){return typeof R=="object"&&R!==null&&R.$$typeof===r}function P(R){var S={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(le){return S[le]})}var U=/\/+/g;function E(R,S){return typeof R=="object"&&R!==null&&R.key!=null?P(""+R.key):S.toString(36)}function ie(R,S,le,de,fe){var _e=typeof R;(_e==="undefined"||_e==="boolean")&&(R=null);var Ae=!1;if(R===null)Ae=!0;else switch(_e){case"string":case"number":Ae=!0;break;case"object":switch(R.$$typeof){case r:case e:Ae=!0}}if(Ae)return Ae=R,fe=fe(Ae),R=de===""?"."+E(Ae,0):de,ne(fe)?(le="",R!=null&&(le=R.replace(U,"$&/")+"/"),ie(fe,S,le,"",function($t){return $t})):fe!=null&&(D(fe)&&(fe=A(fe,le+(!fe.key||Ae&&Ae.key===fe.key?"":(""+fe.key).replace(U,"$&/")+"/")+R)),S.push(fe)),1;if(Ae=0,de=de===""?".":de+":",ne(R))for(var Be=0;Be<R.length;Be++){_e=R[Be];var Ge=de+E(_e,Be);Ae+=ie(_e,S,le,Ge,fe)}else if(Ge=N(R),typeof Ge=="function")for(R=Ge.call(R),Be=0;!(_e=R.next()).done;)_e=_e.value,Ge=de+E(_e,Be++),Ae+=ie(_e,S,le,Ge,fe);else if(_e==="object")throw S=String(R),Error("Objects are not valid as a React child (found: "+(S==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":S)+"). If you meant to render a collection of children, use an array instead.");return Ae}function Ce(R,S,le){if(R==null)return R;var de=[],fe=0;return ie(R,de,"","",function(_e){return S.call(le,_e,fe++)}),de}function je(R){if(R._status===-1){var S=R._result;S=S(),S.then(function(le){(R._status===0||R._status===-1)&&(R._status=1,R._result=le)},function(le){(R._status===0||R._status===-1)&&(R._status=2,R._result=le)}),R._status===-1&&(R._status=0,R._result=S)}if(R._status===1)return R._result.default;throw R._result}var Fe={current:null},oe={transition:null},B={ReactCurrentDispatcher:Fe,ReactCurrentBatchConfig:oe,ReactCurrentOwner:ce};function X(){throw Error("act(...) is not supported in production builds of React.")}return De.Children={map:Ce,forEach:function(R,S,le){Ce(R,function(){S.apply(this,arguments)},le)},count:function(R){var S=0;return Ce(R,function(){S++}),S},toArray:function(R){return Ce(R,function(S){return S})||[]},only:function(R){if(!D(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},De.Component=F,De.Fragment=t,De.Profiler=o,De.PureComponent=z,De.StrictMode=i,De.Suspense=p,De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B,De.act=X,De.cloneElement=function(R,S,le){if(R==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+R+".");var de=L({},R.props),fe=R.key,_e=R.ref,Ae=R._owner;if(S!=null){if(S.ref!==void 0&&(_e=S.ref,Ae=ce.current),S.key!==void 0&&(fe=""+S.key),R.type&&R.type.defaultProps)var Be=R.type.defaultProps;for(Ge in S)G.call(S,Ge)&&!C.hasOwnProperty(Ge)&&(de[Ge]=S[Ge]===void 0&&Be!==void 0?Be[Ge]:S[Ge])}var Ge=arguments.length-2;if(Ge===1)de.children=le;else if(1<Ge){Be=Array(Ge);for(var $t=0;$t<Ge;$t++)Be[$t]=arguments[$t+2];de.children=Be}return{$$typeof:r,type:R.type,key:fe,ref:_e,props:de,_owner:Ae}},De.createContext=function(R){return R={$$typeof:h,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},R.Provider={$$typeof:l,_context:R},R.Consumer=R},De.createElement=T,De.createFactory=function(R){var S=T.bind(null,R);return S.type=R,S},De.createRef=function(){return{current:null}},De.forwardRef=function(R){return{$$typeof:m,render:R}},De.isValidElement=D,De.lazy=function(R){return{$$typeof:w,_payload:{_status:-1,_result:R},_init:je}},De.memo=function(R,S){return{$$typeof:v,type:R,compare:S===void 0?null:S}},De.startTransition=function(R){var S=oe.transition;oe.transition={};try{R()}finally{oe.transition=S}},De.unstable_act=X,De.useCallback=function(R,S){return Fe.current.useCallback(R,S)},De.useContext=function(R){return Fe.current.useContext(R)},De.useDebugValue=function(){},De.useDeferredValue=function(R){return Fe.current.useDeferredValue(R)},De.useEffect=function(R,S){return Fe.current.useEffect(R,S)},De.useId=function(){return Fe.current.useId()},De.useImperativeHandle=function(R,S,le){return Fe.current.useImperativeHandle(R,S,le)},De.useInsertionEffect=function(R,S){return Fe.current.useInsertionEffect(R,S)},De.useLayoutEffect=function(R,S){return Fe.current.useLayoutEffect(R,S)},De.useMemo=function(R,S){return Fe.current.useMemo(R,S)},De.useReducer=function(R,S,le){return Fe.current.useReducer(R,S,le)},De.useRef=function(R){return Fe.current.useRef(R)},De.useState=function(R){return Fe.current.useState(R)},De.useSyncExternalStore=function(R,S,le){return Fe.current.useSyncExternalStore(R,S,le)},De.useTransition=function(){return Fe.current.useTransition()},De.version="18.3.1",De}var dg;function tf(){return dg||(dg=1,dh.exports=R_()),dh.exports}var hg;function j_(){if(hg)return Ma;hg=1;var r=tf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(m,p,v){var w,I={},N=null,M=null;v!==void 0&&(N=""+v),p.key!==void 0&&(N=""+p.key),p.ref!==void 0&&(M=p.ref);for(w in p)i.call(p,w)&&!l.hasOwnProperty(w)&&(I[w]=p[w]);if(m&&m.defaultProps)for(w in p=m.defaultProps,p)I[w]===void 0&&(I[w]=p[w]);return{$$typeof:e,type:m,key:N,ref:M,props:I,_owner:o.current}}return Ma.Fragment=t,Ma.jsx=h,Ma.jsxs=h,Ma}var fg;function D_(){return fg||(fg=1,uh.exports=j_()),uh.exports}var c=D_(),qa=tf();const J=P_(qa);var Dc={},hh={exports:{}},Jt={},fh={exports:{}},mh={};var mg;function V_(){return mg||(mg=1,(function(r){function e(oe,B){var X=oe.length;oe.push(B);e:for(;0<X;){var R=X-1>>>1,S=oe[R];if(0<o(S,B))oe[R]=B,oe[X]=S,X=R;else break e}}function t(oe){return oe.length===0?null:oe[0]}function i(oe){if(oe.length===0)return null;var B=oe[0],X=oe.pop();if(X!==B){oe[0]=X;e:for(var R=0,S=oe.length,le=S>>>1;R<le;){var de=2*(R+1)-1,fe=oe[de],_e=de+1,Ae=oe[_e];if(0>o(fe,X))_e<S&&0>o(Ae,fe)?(oe[R]=Ae,oe[_e]=X,R=_e):(oe[R]=fe,oe[de]=X,R=de);else if(_e<S&&0>o(Ae,X))oe[R]=Ae,oe[_e]=X,R=_e;else break e}}return B}function o(oe,B){var X=oe.sortIndex-B.sortIndex;return X!==0?X:oe.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,m=h.now();r.unstable_now=function(){return h.now()-m}}var p=[],v=[],w=1,I=null,N=3,M=!1,L=!1,O=!1,F=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Y(oe){for(var B=t(v);B!==null;){if(B.callback===null)i(v);else if(B.startTime<=oe)i(v),B.sortIndex=B.expirationTime,e(p,B);else break;B=t(v)}}function ne(oe){if(O=!1,Y(oe),!L)if(t(p)!==null)L=!0,je(G);else{var B=t(v);B!==null&&Fe(ne,B.startTime-oe)}}function G(oe,B){L=!1,O&&(O=!1,$(T),T=-1),M=!0;var X=N;try{for(Y(B),I=t(p);I!==null&&(!(I.expirationTime>B)||oe&&!P());){var R=I.callback;if(typeof R=="function"){I.callback=null,N=I.priorityLevel;var S=R(I.expirationTime<=B);B=r.unstable_now(),typeof S=="function"?I.callback=S:I===t(p)&&i(p),Y(B)}else i(p);I=t(p)}if(I!==null)var le=!0;else{var de=t(v);de!==null&&Fe(ne,de.startTime-B),le=!1}return le}finally{I=null,N=X,M=!1}}var ce=!1,C=null,T=-1,A=5,D=-1;function P(){return!(r.unstable_now()-D<A)}function U(){if(C!==null){var oe=r.unstable_now();D=oe;var B=!0;try{B=C(!0,oe)}finally{B?E():(ce=!1,C=null)}}else ce=!1}var E;if(typeof z=="function")E=function(){z(U)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,Ce=ie.port2;ie.port1.onmessage=U,E=function(){Ce.postMessage(null)}}else E=function(){F(U,0)};function je(oe){C=oe,ce||(ce=!0,E())}function Fe(oe,B){T=F(function(){oe(r.unstable_now())},B)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(oe){oe.callback=null},r.unstable_continueExecution=function(){L||M||(L=!0,je(G))},r.unstable_forceFrameRate=function(oe){0>oe||125<oe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<oe?Math.floor(1e3/oe):5},r.unstable_getCurrentPriorityLevel=function(){return N},r.unstable_getFirstCallbackNode=function(){return t(p)},r.unstable_next=function(oe){switch(N){case 1:case 2:case 3:var B=3;break;default:B=N}var X=N;N=B;try{return oe()}finally{N=X}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(oe,B){switch(oe){case 1:case 2:case 3:case 4:case 5:break;default:oe=3}var X=N;N=oe;try{return B()}finally{N=X}},r.unstable_scheduleCallback=function(oe,B,X){var R=r.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?R+X:R):X=R,oe){case 1:var S=-1;break;case 2:S=250;break;case 5:S=1073741823;break;case 4:S=1e4;break;default:S=5e3}return S=X+S,oe={id:w++,callback:B,priorityLevel:oe,startTime:X,expirationTime:S,sortIndex:-1},X>R?(oe.sortIndex=X,e(v,oe),t(p)===null&&oe===t(v)&&(O?($(T),T=-1):O=!0,Fe(ne,X-R))):(oe.sortIndex=S,e(p,oe),L||M||(L=!0,je(G))),oe},r.unstable_shouldYield=P,r.unstable_wrapCallback=function(oe){var B=N;return function(){var X=N;N=B;try{return oe.apply(this,arguments)}finally{N=X}}}})(mh)),mh}var pg;function O_(){return pg||(pg=1,fh.exports=V_()),fh.exports}var gg;function M_(){if(gg)return Jt;gg=1;var r=tf(),e=O_();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(n,s){h(n,s),h(n+"Capture",s)}function h(n,s){for(o[n]=s,n=0;n<s.length;n++)i.add(s[n])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},I={};function N(n){return p.call(I,n)?!0:p.call(w,n)?!1:v.test(n)?I[n]=!0:(w[n]=!0,!1)}function M(n,s,a,d){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return d?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function L(n,s,a,d){if(s===null||typeof s>"u"||M(n,s,a,d))return!0;if(d)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function O(n,s,a,d,f,g,_){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=d,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=n,this.type=s,this.sanitizeURL=g,this.removeEmptyString=_}var F={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){F[n]=new O(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];F[s]=new O(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){F[n]=new O(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){F[n]=new O(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){F[n]=new O(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){F[n]=new O(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){F[n]=new O(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){F[n]=new O(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){F[n]=new O(n,5,!1,n.toLowerCase(),null,!1,!1)});var $=/[\-:]([a-z])/g;function z(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace($,z);F[s]=new O(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace($,z);F[s]=new O(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace($,z);F[s]=new O(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){F[n]=new O(n,1,!1,n.toLowerCase(),null,!1,!1)}),F.xlinkHref=new O("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){F[n]=new O(n,1,!1,n.toLowerCase(),null,!0,!0)});function Y(n,s,a,d){var f=F.hasOwnProperty(s)?F[s]:null;(f!==null?f.type!==0:d||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(L(s,a,f,d)&&(a=null),d||f===null?N(s)&&(a===null?n.removeAttribute(s):n.setAttribute(s,""+a)):f.mustUseProperty?n[f.propertyName]=a===null?f.type===3?!1:"":a:(s=f.attributeName,d=f.attributeNamespace,a===null?n.removeAttribute(s):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,d?n.setAttributeNS(d,s,a):n.setAttribute(s,a))))}var ne=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,G=Symbol.for("react.element"),ce=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),P=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),ie=Symbol.for("react.suspense_list"),Ce=Symbol.for("react.memo"),je=Symbol.for("react.lazy"),Fe=Symbol.for("react.offscreen"),oe=Symbol.iterator;function B(n){return n===null||typeof n!="object"?null:(n=oe&&n[oe]||n["@@iterator"],typeof n=="function"?n:null)}var X=Object.assign,R;function S(n){if(R===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);R=s&&s[1]||""}return`
`+R+n}var le=!1;function de(n,s){if(!n||le)return"";le=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(K){var d=K}Reflect.construct(n,[],s)}else{try{s.call()}catch(K){d=K}n.call(s.prototype)}else{try{throw Error()}catch(K){d=K}n()}}catch(K){if(K&&d&&typeof K.stack=="string"){for(var f=K.stack.split(`
`),g=d.stack.split(`
`),_=f.length-1,k=g.length-1;1<=_&&0<=k&&f[_]!==g[k];)k--;for(;1<=_&&0<=k;_--,k--)if(f[_]!==g[k]){if(_!==1||k!==1)do if(_--,k--,0>k||f[_]!==g[k]){var j=`
`+f[_].replace(" at new "," at ");return n.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",n.displayName)),j}while(1<=_&&0<=k);break}}}finally{le=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?S(n):""}function fe(n){switch(n.tag){case 5:return S(n.type);case 16:return S("Lazy");case 13:return S("Suspense");case 19:return S("SuspenseList");case 0:case 2:case 15:return n=de(n.type,!1),n;case 11:return n=de(n.type.render,!1),n;case 1:return n=de(n.type,!0),n;default:return""}}function _e(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case C:return"Fragment";case ce:return"Portal";case A:return"Profiler";case T:return"StrictMode";case E:return"Suspense";case ie:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case P:return(n.displayName||"Context")+".Consumer";case D:return(n._context.displayName||"Context")+".Provider";case U:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Ce:return s=n.displayName||null,s!==null?s:_e(n.type)||"Memo";case je:s=n._payload,n=n._init;try{return _e(n(s))}catch{}}return null}function Ae(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _e(s);case 8:return s===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Be(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ge(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function $t(n){var s=Ge(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),d=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,g=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(_){d=""+_,g.call(this,_)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return d},setValue:function(_){d=""+_},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Ni(n){n._valueTracker||(n._valueTracker=$t(n))}function $o(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),d="";return n&&(d=Ge(n)?n.checked?"true":"false":n.value),n=d,n!==a?(s.setValue(n),!0):!1}function Br(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Si(n,s){var a=s.checked;return X({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function xl(n,s){var a=s.defaultValue==null?"":s.defaultValue,d=s.checked!=null?s.checked:s.defaultChecked;a=Be(s.value!=null?s.value:a),n._wrapperState={initialChecked:d,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Ci(n,s){s=s.checked,s!=null&&Y(n,"checked",s,!1)}function Ls(n,s){Ci(n,s);var a=Be(s.value),d=s.type;if(a!=null)d==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(d==="submit"||d==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?dt(n,s.type,a):s.hasOwnProperty("defaultValue")&&dt(n,s.type,Be(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function qo(n,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var d=s.type;if(!(d!=="submit"&&d!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,a||s===n.value||(n.value=s),n.defaultValue=s}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function dt(n,s,a){(s!=="number"||Br(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var at=Array.isArray;function wn(n,s,a,d){if(n=n.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=s.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&d&&(n[a].defaultSelected=!0)}else{for(a=""+Be(a),s=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,d&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function Ho(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return X({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Wo(n,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(at(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}n._wrapperState={initialValue:Be(a)}}function _l(n,s){var a=Be(s.value),d=Be(s.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),s.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),d!=null&&(n.defaultValue=""+d)}function zr(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function Go(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ki(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?Go(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var $r,wl=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,d,f){MSApp.execUnsafeLocalFunction(function(){return n(s,a,d,f)})}:n})(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for($r=$r||document.createElement("div"),$r.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=$r.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function Fs(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var qr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},El=["Webkit","ms","Moz","O"];Object.keys(qr).forEach(function(n){El.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),qr[s]=qr[n]})});function Hr(n,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||qr.hasOwnProperty(n)&&qr[n]?(""+s).trim():s+"px"}function Ai(n,s){n=n.style;for(var a in s)if(s.hasOwnProperty(a)){var d=a.indexOf("--")===0,f=Hr(a,s[a],d);a==="float"&&(a="cssFloat"),d?n.setProperty(a,f):n[a]=f}}var Ko=X({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function En(n,s){if(s){if(Ko[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function Pi(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wr=null;function Ri(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var hr=null,fr=null,it=null;function Qo(n){if(n=Ea(n)){if(typeof hr!="function")throw Error(t(280));var s=n.stateNode;s&&(s=Ql(s),hr(n.stateNode,n.type,s))}}function Gr(n){fr?it?it.push(n):it=[n]:fr=n}function Kr(){if(fr){var n=fr,s=it;if(it=fr=null,Qo(n),s)for(n=0;n<s.length;n++)Qo(s[n])}}function bl(n,s){return n(s)}function Il(){}var Mn=!1;function Tl(n,s,a){if(Mn)return n(s,a);Mn=!0;try{return bl(n,s,a)}finally{Mn=!1,(fr!==null||it!==null)&&(Il(),Kr())}}function Us(n,s){var a=n.stateNode;if(a===null)return null;var d=Ql(a);if(d===null)return null;a=d[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(n=n.type,d=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!d;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var Qr=!1;if(m)try{var Yr={};Object.defineProperty(Yr,"passive",{get:function(){Qr=!0}}),window.addEventListener("test",Yr,Yr),window.removeEventListener("test",Yr,Yr)}catch{Qr=!1}function Nl(n,s,a,d,f,g,_,k,j){var K=Array.prototype.slice.call(arguments,3);try{s.apply(a,K)}catch(re){this.onError(re)}}var mr=!1,Ln=null,ji=!1,hn=null,Sl={onError:function(n){mr=!0,Ln=n}};function Cl(n,s,a,d,f,g,_,k,j){mr=!1,Ln=null,Nl.apply(Sl,arguments)}function Yo(n,s,a,d,f,g,_,k,j){if(Cl.apply(this,arguments),mr){if(mr){var K=Ln;mr=!1,Ln=null}else throw Error(t(198));ji||(ji=!0,hn=K)}}function bn(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function Jo(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function kl(n){if(bn(n)!==n)throw Error(t(188))}function Al(n){var s=n.alternate;if(!s){if(s=bn(n),s===null)throw Error(t(188));return s!==n?null:n}for(var a=n,d=s;;){var f=a.return;if(f===null)break;var g=f.alternate;if(g===null){if(d=f.return,d!==null){a=d;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===a)return kl(f),n;if(g===d)return kl(f),s;g=g.sibling}throw Error(t(188))}if(a.return!==d.return)a=f,d=g;else{for(var _=!1,k=f.child;k;){if(k===a){_=!0,a=f,d=g;break}if(k===d){_=!0,d=f,a=g;break}k=k.sibling}if(!_){for(k=g.child;k;){if(k===a){_=!0,a=g,d=f;break}if(k===d){_=!0,d=g,a=f;break}k=k.sibling}if(!_)throw Error(t(189))}}if(a.alternate!==d)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:s}function Pl(n){return n=Al(n),n!==null?Bs(n):null}function Bs(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=Bs(n);if(s!==null)return s;n=n.sibling}return null}var Xo=e.unstable_scheduleCallback,Di=e.unstable_cancelCallback,zs=e.unstable_shouldYield,pr=e.unstable_requestPaint,Je=e.unstable_now,Bu=e.unstable_getCurrentPriorityLevel,Vi=e.unstable_ImmediatePriority,Zo=e.unstable_UserBlockingPriority,$s=e.unstable_NormalPriority,ea=e.unstable_LowPriority,Oi=e.unstable_IdlePriority,qs=null,en=null;function Rl(n){if(en&&typeof en.onCommitFiberRoot=="function")try{en.onCommitFiberRoot(qs,n,void 0,(n.current.flags&128)===128)}catch{}}var tn=Math.clz32?Math.clz32:Hs,Fn=Math.log,fn=Math.LN2;function Hs(n){return n>>>=0,n===0?32:31-(Fn(n)/fn|0)|0}var Un=64,Jr=4194304;function qe(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function gr(n,s){var a=n.pendingLanes;if(a===0)return 0;var d=0,f=n.suspendedLanes,g=n.pingedLanes,_=a&268435455;if(_!==0){var k=_&~f;k!==0?d=qe(k):(g&=_,g!==0&&(d=qe(g)))}else _=a&~f,_!==0?d=qe(_):g!==0&&(d=qe(g));if(d===0)return 0;if(s!==0&&s!==d&&(s&f)===0&&(f=d&-d,g=s&-s,f>=g||f===16&&(g&4194240)!==0))return s;if((d&4)!==0&&(d|=a&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=d;0<s;)a=31-tn(s),f=1<<a,d|=n[a],s&=~f;return d}function Ws(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gs(n,s){for(var a=n.suspendedLanes,d=n.pingedLanes,f=n.expirationTimes,g=n.pendingLanes;0<g;){var _=31-tn(g),k=1<<_,j=f[_];j===-1?((k&a)===0||(k&d)!==0)&&(f[_]=Ws(k,s)):j<=s&&(n.expiredLanes|=k),g&=~k}}function ta(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function na(){var n=Un;return Un<<=1,(Un&4194240)===0&&(Un=64),n}function ra(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function Ks(n,s,a){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-tn(s),n[s]=a}function zu(n,s){var a=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var d=n.eventTimes;for(n=n.expirationTimes;0<a;){var f=31-tn(a),g=1<<f;s[f]=0,d[f]=-1,n[f]=-1,a&=~g}}function sa(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var d=31-tn(a),f=1<<d;f&s|n[d]&s&&(n[d]|=s),a&=~f}}var Le=0;function Bn(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var ia,Mi,oa,aa,la,zn=!1,Li=[],$n=null,qn=null,Tt=null,Qs=new Map,yr=new Map,nn=[],jl="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xr(n,s){switch(n){case"focusin":case"focusout":$n=null;break;case"dragenter":case"dragleave":qn=null;break;case"mouseover":case"mouseout":Tt=null;break;case"pointerover":case"pointerout":Qs.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":yr.delete(s.pointerId)}}function In(n,s,a,d,f,g){return n===null||n.nativeEvent!==g?(n={blockedOn:s,domEventName:a,eventSystemFlags:d,nativeEvent:g,targetContainers:[f]},s!==null&&(s=Ea(s),s!==null&&Mi(s)),n):(n.eventSystemFlags|=d,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function Dl(n,s,a,d,f){switch(s){case"focusin":return $n=In($n,n,s,a,d,f),!0;case"dragenter":return qn=In(qn,n,s,a,d,f),!0;case"mouseover":return Tt=In(Tt,n,s,a,d,f),!0;case"pointerover":var g=f.pointerId;return Qs.set(g,In(Qs.get(g)||null,n,s,a,d,f)),!0;case"gotpointercapture":return g=f.pointerId,yr.set(g,In(yr.get(g)||null,n,s,a,d,f)),!0}return!1}function Fi(n){var s=Zs(n.target);if(s!==null){var a=bn(s);if(a!==null){if(s=a.tag,s===13){if(s=Jo(a),s!==null){n.blockedOn=s,la(n.priority,function(){oa(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ke(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=Ui(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var d=new a.constructor(a.type,a);Wr=d,a.target.dispatchEvent(d),Wr=null}else return s=Ea(a),s!==null&&Mi(s),n.blockedOn=a,!1;s.shift()}return!0}function Vl(n,s,a){Ke(n)&&a.delete(s)}function $u(){zn=!1,$n!==null&&Ke($n)&&($n=null),qn!==null&&Ke(qn)&&(qn=null),Tt!==null&&Ke(Tt)&&(Tt=null),Qs.forEach(Vl),yr.forEach(Vl)}function Zr(n,s){n.blockedOn===s&&(n.blockedOn=null,zn||(zn=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,$u)))}function es(n){function s(f){return Zr(f,n)}if(0<Li.length){Zr(Li[0],n);for(var a=1;a<Li.length;a++){var d=Li[a];d.blockedOn===n&&(d.blockedOn=null)}}for($n!==null&&Zr($n,n),qn!==null&&Zr(qn,n),Tt!==null&&Zr(Tt,n),Qs.forEach(s),yr.forEach(s),a=0;a<nn.length;a++)d=nn[a],d.blockedOn===n&&(d.blockedOn=null);for(;0<nn.length&&(a=nn[0],a.blockedOn===null);)Fi(a),a.blockedOn===null&&nn.shift()}var vr=ne.ReactCurrentBatchConfig,xr=!0;function Hn(n,s,a,d){var f=Le,g=vr.transition;vr.transition=null;try{Le=1,ca(n,s,a,d)}finally{Le=f,vr.transition=g}}function Ol(n,s,a,d){var f=Le,g=vr.transition;vr.transition=null;try{Le=4,ca(n,s,a,d)}finally{Le=f,vr.transition=g}}function ca(n,s,a,d){if(xr){var f=Ui(n,s,a,d);if(f===null)ed(n,s,d,Wn,a),Xr(n,d);else if(Dl(f,n,s,a,d))d.stopPropagation();else if(Xr(n,d),s&4&&-1<jl.indexOf(n)){for(;f!==null;){var g=Ea(f);if(g!==null&&ia(g),g=Ui(n,s,a,d),g===null&&ed(n,s,d,Wn,a),g===f)break;f=g}f!==null&&d.stopPropagation()}else ed(n,s,d,null,a)}}var Wn=null;function Ui(n,s,a,d){if(Wn=null,n=Ri(d),n=Zs(n),n!==null)if(s=bn(n),s===null)n=null;else if(a=s.tag,a===13){if(n=Jo(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return Wn=n,null}function Bi(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Bu()){case Vi:return 1;case Zo:return 4;case $s:case ea:return 16;case Oi:return 536870912;default:return 16}default:return 16}}var rn=null,zi=null,_r=null;function Ml(){if(_r)return _r;var n,s=zi,a=s.length,d,f="value"in rn?rn.value:rn.textContent,g=f.length;for(n=0;n<a&&s[n]===f[n];n++);var _=a-n;for(d=1;d<=_&&s[a-d]===f[g-d];d++);return _r=f.slice(n,1<d?1-d:void 0)}function Ys(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Gn(){return!0}function ua(){return!1}function Rt(n){function s(a,d,f,g,_){this._reactName=a,this._targetInst=f,this.type=d,this.nativeEvent=g,this.target=_,this.currentTarget=null;for(var k in n)n.hasOwnProperty(k)&&(a=n[k],this[k]=a?a(g):g[k]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Gn:ua,this.isPropagationStopped=ua,this}return X(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Gn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Gn)},persist:function(){},isPersistent:Gn}),s}var Kn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Js=Rt(Kn),ts=X({},Kn,{view:0,detail:0}),$i=Rt(ts),qi,Hi,sn,Xs=X({},ts,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pe,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==sn&&(sn&&n.type==="mousemove"?(qi=n.screenX-sn.screenX,Hi=n.screenY-sn.screenY):Hi=qi=0,sn=n),qi)},movementY:function(n){return"movementY"in n?n.movementY:Hi}}),da=Rt(Xs),Ll=X({},Xs,{dataTransfer:0}),Fl=Rt(Ll),Wi=X({},ts,{relatedTarget:0}),Nt=Rt(Wi),Ul=X({},Kn,{animationName:0,elapsedTime:0,pseudoElement:0}),Bl=Rt(Ul),ns=X({},Kn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),u=Rt(ns),y=X({},Kn,{data:0}),x=Rt(y),b={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},H={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Q={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ue(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=Q[n])?!!s[n]:!1}function Pe(){return ue}var lt=X({},ts,{key:function(n){if(n.key){var s=b[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Ys(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?H[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pe,charCode:function(n){return n.type==="keypress"?Ys(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ys(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),We=Rt(lt),ht=X({},Xs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),on=Rt(ht),wr=X({},ts,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pe}),Qn=Rt(wr),Yn=X({},Kn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Gi=Rt(Yn),ha=X({},Xs,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Tx=Rt(ha),Nx=[9,13,27,32],qu=m&&"CompositionEvent"in window,fa=null;m&&"documentMode"in document&&(fa=document.documentMode);var Sx=m&&"TextEvent"in window&&!fa,nm=m&&(!qu||fa&&8<fa&&11>=fa),rm=" ",sm=!1;function im(n,s){switch(n){case"keyup":return Nx.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function om(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ki=!1;function Cx(n,s){switch(n){case"compositionend":return om(s);case"keypress":return s.which!==32?null:(sm=!0,rm);case"textInput":return n=s.data,n===rm&&sm?null:n;default:return null}}function kx(n,s){if(Ki)return n==="compositionend"||!qu&&im(n,s)?(n=Ml(),_r=zi=rn=null,Ki=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return nm&&s.locale!=="ko"?null:s.data;default:return null}}var Ax={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function am(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!Ax[n.type]:s==="textarea"}function lm(n,s,a,d){Gr(d),s=Wl(s,"onChange"),0<s.length&&(a=new Js("onChange","change",null,a,d),n.push({event:a,listeners:s}))}var ma=null,pa=null;function Px(n){Nm(n,0)}function zl(n){var s=Zi(n);if($o(s))return n}function Rx(n,s){if(n==="change")return s}var cm=!1;if(m){var Hu;if(m){var Wu="oninput"in document;if(!Wu){var um=document.createElement("div");um.setAttribute("oninput","return;"),Wu=typeof um.oninput=="function"}Hu=Wu}else Hu=!1;cm=Hu&&(!document.documentMode||9<document.documentMode)}function dm(){ma&&(ma.detachEvent("onpropertychange",hm),pa=ma=null)}function hm(n){if(n.propertyName==="value"&&zl(pa)){var s=[];lm(s,pa,n,Ri(n)),Tl(Px,s)}}function jx(n,s,a){n==="focusin"?(dm(),ma=s,pa=a,ma.attachEvent("onpropertychange",hm)):n==="focusout"&&dm()}function Dx(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return zl(pa)}function Vx(n,s){if(n==="click")return zl(s)}function Ox(n,s){if(n==="input"||n==="change")return zl(s)}function Mx(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Tn=typeof Object.is=="function"?Object.is:Mx;function ga(n,s){if(Tn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),d=Object.keys(s);if(a.length!==d.length)return!1;for(d=0;d<a.length;d++){var f=a[d];if(!p.call(s,f)||!Tn(n[f],s[f]))return!1}return!0}function fm(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function mm(n,s){var a=fm(n);n=0;for(var d;a;){if(a.nodeType===3){if(d=n+a.textContent.length,n<=s&&d>=s)return{node:a,offset:s-n};n=d}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=fm(a)}}function pm(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?pm(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function gm(){for(var n=window,s=Br();s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=Br(n.document)}return s}function Gu(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function Lx(n){var s=gm(),a=n.focusedElem,d=n.selectionRange;if(s!==a&&a&&a.ownerDocument&&pm(a.ownerDocument.documentElement,a)){if(d!==null&&Gu(a)){if(s=d.start,n=d.end,n===void 0&&(n=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(n,a.value.length);else if(n=(s=a.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var f=a.textContent.length,g=Math.min(d.start,f);d=d.end===void 0?g:Math.min(d.end,f),!n.extend&&g>d&&(f=d,d=g,g=f),f=mm(a,g);var _=mm(a,d);f&&_&&(n.rangeCount!==1||n.anchorNode!==f.node||n.anchorOffset!==f.offset||n.focusNode!==_.node||n.focusOffset!==_.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),n.removeAllRanges(),g>d?(n.addRange(s),n.extend(_.node,_.offset)):(s.setEnd(_.node,_.offset),n.addRange(s)))}}for(s=[],n=a;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)n=s[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Fx=m&&"documentMode"in document&&11>=document.documentMode,Qi=null,Ku=null,ya=null,Qu=!1;function ym(n,s,a){var d=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Qu||Qi==null||Qi!==Br(d)||(d=Qi,"selectionStart"in d&&Gu(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),ya&&ga(ya,d)||(ya=d,d=Wl(Ku,"onSelect"),0<d.length&&(s=new Js("onSelect","select",null,s,a),n.push({event:s,listeners:d}),s.target=Qi)))}function $l(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var Yi={animationend:$l("Animation","AnimationEnd"),animationiteration:$l("Animation","AnimationIteration"),animationstart:$l("Animation","AnimationStart"),transitionend:$l("Transition","TransitionEnd")},Yu={},vm={};m&&(vm=document.createElement("div").style,"AnimationEvent"in window||(delete Yi.animationend.animation,delete Yi.animationiteration.animation,delete Yi.animationstart.animation),"TransitionEvent"in window||delete Yi.transitionend.transition);function ql(n){if(Yu[n])return Yu[n];if(!Yi[n])return n;var s=Yi[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in vm)return Yu[n]=s[a];return n}var xm=ql("animationend"),_m=ql("animationiteration"),wm=ql("animationstart"),Em=ql("transitionend"),bm=new Map,Im="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rs(n,s){bm.set(n,s),l(s,[n])}for(var Ju=0;Ju<Im.length;Ju++){var Xu=Im[Ju],Ux=Xu.toLowerCase(),Bx=Xu[0].toUpperCase()+Xu.slice(1);rs(Ux,"on"+Bx)}rs(xm,"onAnimationEnd"),rs(_m,"onAnimationIteration"),rs(wm,"onAnimationStart"),rs("dblclick","onDoubleClick"),rs("focusin","onFocus"),rs("focusout","onBlur"),rs(Em,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var va="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zx=new Set("cancel close invalid load scroll toggle".split(" ").concat(va));function Tm(n,s,a){var d=n.type||"unknown-event";n.currentTarget=a,Yo(d,s,void 0,n),n.currentTarget=null}function Nm(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var d=n[a],f=d.event;d=d.listeners;e:{var g=void 0;if(s)for(var _=d.length-1;0<=_;_--){var k=d[_],j=k.instance,K=k.currentTarget;if(k=k.listener,j!==g&&f.isPropagationStopped())break e;Tm(f,k,K),g=j}else for(_=0;_<d.length;_++){if(k=d[_],j=k.instance,K=k.currentTarget,k=k.listener,j!==g&&f.isPropagationStopped())break e;Tm(f,k,K),g=j}}}if(ji)throw n=hn,ji=!1,hn=null,n}function Xe(n,s){var a=s[od];a===void 0&&(a=s[od]=new Set);var d=n+"__bubble";a.has(d)||(Sm(s,n,2,!1),a.add(d))}function Zu(n,s,a){var d=0;s&&(d|=4),Sm(a,n,d,s)}var Hl="_reactListening"+Math.random().toString(36).slice(2);function xa(n){if(!n[Hl]){n[Hl]=!0,i.forEach(function(a){a!=="selectionchange"&&(zx.has(a)||Zu(a,!1,n),Zu(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Hl]||(s[Hl]=!0,Zu("selectionchange",!1,s))}}function Sm(n,s,a,d){switch(Bi(s)){case 1:var f=Hn;break;case 4:f=Ol;break;default:f=ca}a=f.bind(null,s,a,n),f=void 0,!Qr||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),d?f!==void 0?n.addEventListener(s,a,{capture:!0,passive:f}):n.addEventListener(s,a,!0):f!==void 0?n.addEventListener(s,a,{passive:f}):n.addEventListener(s,a,!1)}function ed(n,s,a,d,f){var g=d;if((s&1)===0&&(s&2)===0&&d!==null)e:for(;;){if(d===null)return;var _=d.tag;if(_===3||_===4){var k=d.stateNode.containerInfo;if(k===f||k.nodeType===8&&k.parentNode===f)break;if(_===4)for(_=d.return;_!==null;){var j=_.tag;if((j===3||j===4)&&(j=_.stateNode.containerInfo,j===f||j.nodeType===8&&j.parentNode===f))return;_=_.return}for(;k!==null;){if(_=Zs(k),_===null)return;if(j=_.tag,j===5||j===6){d=g=_;continue e}k=k.parentNode}}d=d.return}Tl(function(){var K=g,re=Ri(a),se=[];e:{var te=bm.get(n);if(te!==void 0){var me=Js,ye=n;switch(n){case"keypress":if(Ys(a)===0)break e;case"keydown":case"keyup":me=We;break;case"focusin":ye="focus",me=Nt;break;case"focusout":ye="blur",me=Nt;break;case"beforeblur":case"afterblur":me=Nt;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":me=da;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":me=Fl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":me=Qn;break;case xm:case _m:case wm:me=Bl;break;case Em:me=Gi;break;case"scroll":me=$i;break;case"wheel":me=Tx;break;case"copy":case"cut":case"paste":me=u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":me=on}var ve=(s&4)!==0,ct=!ve&&n==="scroll",q=ve?te!==null?te+"Capture":null:te;ve=[];for(var V=K,W;V!==null;){W=V;var ae=W.stateNode;if(W.tag===5&&ae!==null&&(W=ae,q!==null&&(ae=Us(V,q),ae!=null&&ve.push(_a(V,ae,W)))),ct)break;V=V.return}0<ve.length&&(te=new me(te,ye,null,a,re),se.push({event:te,listeners:ve}))}}if((s&7)===0){e:{if(te=n==="mouseover"||n==="pointerover",me=n==="mouseout"||n==="pointerout",te&&a!==Wr&&(ye=a.relatedTarget||a.fromElement)&&(Zs(ye)||ye[Er]))break e;if((me||te)&&(te=re.window===re?re:(te=re.ownerDocument)?te.defaultView||te.parentWindow:window,me?(ye=a.relatedTarget||a.toElement,me=K,ye=ye?Zs(ye):null,ye!==null&&(ct=bn(ye),ye!==ct||ye.tag!==5&&ye.tag!==6)&&(ye=null)):(me=null,ye=K),me!==ye)){if(ve=da,ae="onMouseLeave",q="onMouseEnter",V="mouse",(n==="pointerout"||n==="pointerover")&&(ve=on,ae="onPointerLeave",q="onPointerEnter",V="pointer"),ct=me==null?te:Zi(me),W=ye==null?te:Zi(ye),te=new ve(ae,V+"leave",me,a,re),te.target=ct,te.relatedTarget=W,ae=null,Zs(re)===K&&(ve=new ve(q,V+"enter",ye,a,re),ve.target=W,ve.relatedTarget=ct,ae=ve),ct=ae,me&&ye)t:{for(ve=me,q=ye,V=0,W=ve;W;W=Ji(W))V++;for(W=0,ae=q;ae;ae=Ji(ae))W++;for(;0<V-W;)ve=Ji(ve),V--;for(;0<W-V;)q=Ji(q),W--;for(;V--;){if(ve===q||q!==null&&ve===q.alternate)break t;ve=Ji(ve),q=Ji(q)}ve=null}else ve=null;me!==null&&Cm(se,te,me,ve,!1),ye!==null&&ct!==null&&Cm(se,ct,ye,ve,!0)}}e:{if(te=K?Zi(K):window,me=te.nodeName&&te.nodeName.toLowerCase(),me==="select"||me==="input"&&te.type==="file")var xe=Rx;else if(am(te))if(cm)xe=Ox;else{xe=Dx;var be=jx}else(me=te.nodeName)&&me.toLowerCase()==="input"&&(te.type==="checkbox"||te.type==="radio")&&(xe=Vx);if(xe&&(xe=xe(n,K))){lm(se,xe,a,re);break e}be&&be(n,te,K),n==="focusout"&&(be=te._wrapperState)&&be.controlled&&te.type==="number"&&dt(te,"number",te.value)}switch(be=K?Zi(K):window,n){case"focusin":(am(be)||be.contentEditable==="true")&&(Qi=be,Ku=K,ya=null);break;case"focusout":ya=Ku=Qi=null;break;case"mousedown":Qu=!0;break;case"contextmenu":case"mouseup":case"dragend":Qu=!1,ym(se,a,re);break;case"selectionchange":if(Fx)break;case"keydown":case"keyup":ym(se,a,re)}var Ie;if(qu)e:{switch(n){case"compositionstart":var Ne="onCompositionStart";break e;case"compositionend":Ne="onCompositionEnd";break e;case"compositionupdate":Ne="onCompositionUpdate";break e}Ne=void 0}else Ki?im(n,a)&&(Ne="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Ne="onCompositionStart");Ne&&(nm&&a.locale!=="ko"&&(Ki||Ne!=="onCompositionStart"?Ne==="onCompositionEnd"&&Ki&&(Ie=Ml()):(rn=re,zi="value"in rn?rn.value:rn.textContent,Ki=!0)),be=Wl(K,Ne),0<be.length&&(Ne=new x(Ne,n,null,a,re),se.push({event:Ne,listeners:be}),Ie?Ne.data=Ie:(Ie=om(a),Ie!==null&&(Ne.data=Ie)))),(Ie=Sx?Cx(n,a):kx(n,a))&&(K=Wl(K,"onBeforeInput"),0<K.length&&(re=new x("onBeforeInput","beforeinput",null,a,re),se.push({event:re,listeners:K}),re.data=Ie))}Nm(se,s)})}function _a(n,s,a){return{instance:n,listener:s,currentTarget:a}}function Wl(n,s){for(var a=s+"Capture",d=[];n!==null;){var f=n,g=f.stateNode;f.tag===5&&g!==null&&(f=g,g=Us(n,a),g!=null&&d.unshift(_a(n,g,f)),g=Us(n,s),g!=null&&d.push(_a(n,g,f))),n=n.return}return d}function Ji(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Cm(n,s,a,d,f){for(var g=s._reactName,_=[];a!==null&&a!==d;){var k=a,j=k.alternate,K=k.stateNode;if(j!==null&&j===d)break;k.tag===5&&K!==null&&(k=K,f?(j=Us(a,g),j!=null&&_.unshift(_a(a,j,k))):f||(j=Us(a,g),j!=null&&_.push(_a(a,j,k)))),a=a.return}_.length!==0&&n.push({event:s,listeners:_})}var $x=/\r\n?/g,qx=/\u0000|\uFFFD/g;function km(n){return(typeof n=="string"?n:""+n).replace($x,`
`).replace(qx,"")}function Gl(n,s,a){if(s=km(s),km(n)!==s&&a)throw Error(t(425))}function Kl(){}var td=null,nd=null;function rd(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var sd=typeof setTimeout=="function"?setTimeout:void 0,Hx=typeof clearTimeout=="function"?clearTimeout:void 0,Am=typeof Promise=="function"?Promise:void 0,Wx=typeof queueMicrotask=="function"?queueMicrotask:typeof Am<"u"?function(n){return Am.resolve(null).then(n).catch(Gx)}:sd;function Gx(n){setTimeout(function(){throw n})}function id(n,s){var a=s,d=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(d===0){n.removeChild(f),es(s);return}d--}else a!=="$"&&a!=="$?"&&a!=="$!"||d++;a=f}while(a);es(s)}function ss(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function Pm(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}var Xi=Math.random().toString(36).slice(2),Jn="__reactFiber$"+Xi,wa="__reactProps$"+Xi,Er="__reactContainer$"+Xi,od="__reactEvents$"+Xi,Kx="__reactListeners$"+Xi,Qx="__reactHandles$"+Xi;function Zs(n){var s=n[Jn];if(s)return s;for(var a=n.parentNode;a;){if(s=a[Er]||a[Jn]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=Pm(n);n!==null;){if(a=n[Jn])return a;n=Pm(n)}return s}n=a,a=n.parentNode}return null}function Ea(n){return n=n[Jn]||n[Er],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Zi(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Ql(n){return n[wa]||null}var ad=[],eo=-1;function is(n){return{current:n}}function Ze(n){0>eo||(n.current=ad[eo],ad[eo]=null,eo--)}function Qe(n,s){eo++,ad[eo]=n.current,n.current=s}var os={},jt=is(os),Wt=is(!1),ei=os;function to(n,s){var a=n.type.contextTypes;if(!a)return os;var d=n.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===s)return d.__reactInternalMemoizedMaskedChildContext;var f={},g;for(g in a)f[g]=s[g];return d&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=f),f}function Gt(n){return n=n.childContextTypes,n!=null}function Yl(){Ze(Wt),Ze(jt)}function Rm(n,s,a){if(jt.current!==os)throw Error(t(168));Qe(jt,s),Qe(Wt,a)}function jm(n,s,a){var d=n.stateNode;if(s=s.childContextTypes,typeof d.getChildContext!="function")return a;d=d.getChildContext();for(var f in d)if(!(f in s))throw Error(t(108,Ae(n)||"Unknown",f));return X({},a,d)}function Jl(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||os,ei=jt.current,Qe(jt,n),Qe(Wt,Wt.current),!0}function Dm(n,s,a){var d=n.stateNode;if(!d)throw Error(t(169));a?(n=jm(n,s,ei),d.__reactInternalMemoizedMergedChildContext=n,Ze(Wt),Ze(jt),Qe(jt,n)):Ze(Wt),Qe(Wt,a)}var br=null,Xl=!1,ld=!1;function Vm(n){br===null?br=[n]:br.push(n)}function Yx(n){Xl=!0,Vm(n)}function as(){if(!ld&&br!==null){ld=!0;var n=0,s=Le;try{var a=br;for(Le=1;n<a.length;n++){var d=a[n];do d=d(!0);while(d!==null)}br=null,Xl=!1}catch(f){throw br!==null&&(br=br.slice(n+1)),Xo(Vi,as),f}finally{Le=s,ld=!1}}return null}var no=[],ro=0,Zl=null,ec=0,mn=[],pn=0,ti=null,Ir=1,Tr="";function ni(n,s){no[ro++]=ec,no[ro++]=Zl,Zl=n,ec=s}function Om(n,s,a){mn[pn++]=Ir,mn[pn++]=Tr,mn[pn++]=ti,ti=n;var d=Ir;n=Tr;var f=32-tn(d)-1;d&=~(1<<f),a+=1;var g=32-tn(s)+f;if(30<g){var _=f-f%5;g=(d&(1<<_)-1).toString(32),d>>=_,f-=_,Ir=1<<32-tn(s)+f|a<<f|d,Tr=g+n}else Ir=1<<g|a<<f|d,Tr=n}function cd(n){n.return!==null&&(ni(n,1),Om(n,1,0))}function ud(n){for(;n===Zl;)Zl=no[--ro],no[ro]=null,ec=no[--ro],no[ro]=null;for(;n===ti;)ti=mn[--pn],mn[pn]=null,Tr=mn[--pn],mn[pn]=null,Ir=mn[--pn],mn[pn]=null}var an=null,ln=null,tt=!1,Nn=null;function Mm(n,s){var a=xn(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=n,s=n.deletions,s===null?(n.deletions=[a],n.flags|=16):s.push(a)}function Lm(n,s){switch(n.tag){case 5:var a=n.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,an=n,ln=ss(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,an=n,ln=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=ti!==null?{id:Ir,overflow:Tr}:null,n.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=xn(18,null,null,0),a.stateNode=s,a.return=n,n.child=a,an=n,ln=null,!0):!1;default:return!1}}function dd(n){return(n.mode&1)!==0&&(n.flags&128)===0}function hd(n){if(tt){var s=ln;if(s){var a=s;if(!Lm(n,s)){if(dd(n))throw Error(t(418));s=ss(a.nextSibling);var d=an;s&&Lm(n,s)?Mm(d,a):(n.flags=n.flags&-4097|2,tt=!1,an=n)}}else{if(dd(n))throw Error(t(418));n.flags=n.flags&-4097|2,tt=!1,an=n}}}function Fm(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;an=n}function tc(n){if(n!==an)return!1;if(!tt)return Fm(n),tt=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!rd(n.type,n.memoizedProps)),s&&(s=ln)){if(dd(n))throw Um(),Error(t(418));for(;s;)Mm(n,s),s=ss(s.nextSibling)}if(Fm(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(s===0){ln=ss(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}n=n.nextSibling}ln=null}}else ln=an?ss(n.stateNode.nextSibling):null;return!0}function Um(){for(var n=ln;n;)n=ss(n.nextSibling)}function so(){ln=an=null,tt=!1}function fd(n){Nn===null?Nn=[n]:Nn.push(n)}var Jx=ne.ReactCurrentBatchConfig;function ba(n,s,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var d=a.stateNode}if(!d)throw Error(t(147,n));var f=d,g=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===g?s.ref:(s=function(_){var k=f.refs;_===null?delete k[g]:k[g]=_},s._stringRef=g,s)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function nc(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function Bm(n){var s=n._init;return s(n._payload)}function zm(n){function s(q,V){if(n){var W=q.deletions;W===null?(q.deletions=[V],q.flags|=16):W.push(V)}}function a(q,V){if(!n)return null;for(;V!==null;)s(q,V),V=V.sibling;return null}function d(q,V){for(q=new Map;V!==null;)V.key!==null?q.set(V.key,V):q.set(V.index,V),V=V.sibling;return q}function f(q,V){return q=ps(q,V),q.index=0,q.sibling=null,q}function g(q,V,W){return q.index=W,n?(W=q.alternate,W!==null?(W=W.index,W<V?(q.flags|=2,V):W):(q.flags|=2,V)):(q.flags|=1048576,V)}function _(q){return n&&q.alternate===null&&(q.flags|=2),q}function k(q,V,W,ae){return V===null||V.tag!==6?(V=sh(W,q.mode,ae),V.return=q,V):(V=f(V,W),V.return=q,V)}function j(q,V,W,ae){var xe=W.type;return xe===C?re(q,V,W.props.children,ae,W.key):V!==null&&(V.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===je&&Bm(xe)===V.type)?(ae=f(V,W.props),ae.ref=ba(q,V,W),ae.return=q,ae):(ae=Nc(W.type,W.key,W.props,null,q.mode,ae),ae.ref=ba(q,V,W),ae.return=q,ae)}function K(q,V,W,ae){return V===null||V.tag!==4||V.stateNode.containerInfo!==W.containerInfo||V.stateNode.implementation!==W.implementation?(V=ih(W,q.mode,ae),V.return=q,V):(V=f(V,W.children||[]),V.return=q,V)}function re(q,V,W,ae,xe){return V===null||V.tag!==7?(V=ui(W,q.mode,ae,xe),V.return=q,V):(V=f(V,W),V.return=q,V)}function se(q,V,W){if(typeof V=="string"&&V!==""||typeof V=="number")return V=sh(""+V,q.mode,W),V.return=q,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case G:return W=Nc(V.type,V.key,V.props,null,q.mode,W),W.ref=ba(q,null,V),W.return=q,W;case ce:return V=ih(V,q.mode,W),V.return=q,V;case je:var ae=V._init;return se(q,ae(V._payload),W)}if(at(V)||B(V))return V=ui(V,q.mode,W,null),V.return=q,V;nc(q,V)}return null}function te(q,V,W,ae){var xe=V!==null?V.key:null;if(typeof W=="string"&&W!==""||typeof W=="number")return xe!==null?null:k(q,V,""+W,ae);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case G:return W.key===xe?j(q,V,W,ae):null;case ce:return W.key===xe?K(q,V,W,ae):null;case je:return xe=W._init,te(q,V,xe(W._payload),ae)}if(at(W)||B(W))return xe!==null?null:re(q,V,W,ae,null);nc(q,W)}return null}function me(q,V,W,ae,xe){if(typeof ae=="string"&&ae!==""||typeof ae=="number")return q=q.get(W)||null,k(V,q,""+ae,xe);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case G:return q=q.get(ae.key===null?W:ae.key)||null,j(V,q,ae,xe);case ce:return q=q.get(ae.key===null?W:ae.key)||null,K(V,q,ae,xe);case je:var be=ae._init;return me(q,V,W,be(ae._payload),xe)}if(at(ae)||B(ae))return q=q.get(W)||null,re(V,q,ae,xe,null);nc(V,ae)}return null}function ye(q,V,W,ae){for(var xe=null,be=null,Ie=V,Ne=V=0,bt=null;Ie!==null&&Ne<W.length;Ne++){Ie.index>Ne?(bt=Ie,Ie=null):bt=Ie.sibling;var $e=te(q,Ie,W[Ne],ae);if($e===null){Ie===null&&(Ie=bt);break}n&&Ie&&$e.alternate===null&&s(q,Ie),V=g($e,V,Ne),be===null?xe=$e:be.sibling=$e,be=$e,Ie=bt}if(Ne===W.length)return a(q,Ie),tt&&ni(q,Ne),xe;if(Ie===null){for(;Ne<W.length;Ne++)Ie=se(q,W[Ne],ae),Ie!==null&&(V=g(Ie,V,Ne),be===null?xe=Ie:be.sibling=Ie,be=Ie);return tt&&ni(q,Ne),xe}for(Ie=d(q,Ie);Ne<W.length;Ne++)bt=me(Ie,q,Ne,W[Ne],ae),bt!==null&&(n&&bt.alternate!==null&&Ie.delete(bt.key===null?Ne:bt.key),V=g(bt,V,Ne),be===null?xe=bt:be.sibling=bt,be=bt);return n&&Ie.forEach(function(gs){return s(q,gs)}),tt&&ni(q,Ne),xe}function ve(q,V,W,ae){var xe=B(W);if(typeof xe!="function")throw Error(t(150));if(W=xe.call(W),W==null)throw Error(t(151));for(var be=xe=null,Ie=V,Ne=V=0,bt=null,$e=W.next();Ie!==null&&!$e.done;Ne++,$e=W.next()){Ie.index>Ne?(bt=Ie,Ie=null):bt=Ie.sibling;var gs=te(q,Ie,$e.value,ae);if(gs===null){Ie===null&&(Ie=bt);break}n&&Ie&&gs.alternate===null&&s(q,Ie),V=g(gs,V,Ne),be===null?xe=gs:be.sibling=gs,be=gs,Ie=bt}if($e.done)return a(q,Ie),tt&&ni(q,Ne),xe;if(Ie===null){for(;!$e.done;Ne++,$e=W.next())$e=se(q,$e.value,ae),$e!==null&&(V=g($e,V,Ne),be===null?xe=$e:be.sibling=$e,be=$e);return tt&&ni(q,Ne),xe}for(Ie=d(q,Ie);!$e.done;Ne++,$e=W.next())$e=me(Ie,q,Ne,$e.value,ae),$e!==null&&(n&&$e.alternate!==null&&Ie.delete($e.key===null?Ne:$e.key),V=g($e,V,Ne),be===null?xe=$e:be.sibling=$e,be=$e);return n&&Ie.forEach(function(A_){return s(q,A_)}),tt&&ni(q,Ne),xe}function ct(q,V,W,ae){if(typeof W=="object"&&W!==null&&W.type===C&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case G:e:{for(var xe=W.key,be=V;be!==null;){if(be.key===xe){if(xe=W.type,xe===C){if(be.tag===7){a(q,be.sibling),V=f(be,W.props.children),V.return=q,q=V;break e}}else if(be.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===je&&Bm(xe)===be.type){a(q,be.sibling),V=f(be,W.props),V.ref=ba(q,be,W),V.return=q,q=V;break e}a(q,be);break}else s(q,be);be=be.sibling}W.type===C?(V=ui(W.props.children,q.mode,ae,W.key),V.return=q,q=V):(ae=Nc(W.type,W.key,W.props,null,q.mode,ae),ae.ref=ba(q,V,W),ae.return=q,q=ae)}return _(q);case ce:e:{for(be=W.key;V!==null;){if(V.key===be)if(V.tag===4&&V.stateNode.containerInfo===W.containerInfo&&V.stateNode.implementation===W.implementation){a(q,V.sibling),V=f(V,W.children||[]),V.return=q,q=V;break e}else{a(q,V);break}else s(q,V);V=V.sibling}V=ih(W,q.mode,ae),V.return=q,q=V}return _(q);case je:return be=W._init,ct(q,V,be(W._payload),ae)}if(at(W))return ye(q,V,W,ae);if(B(W))return ve(q,V,W,ae);nc(q,W)}return typeof W=="string"&&W!==""||typeof W=="number"?(W=""+W,V!==null&&V.tag===6?(a(q,V.sibling),V=f(V,W),V.return=q,q=V):(a(q,V),V=sh(W,q.mode,ae),V.return=q,q=V),_(q)):a(q,V)}return ct}var io=zm(!0),$m=zm(!1),rc=is(null),sc=null,oo=null,md=null;function pd(){md=oo=sc=null}function gd(n){var s=rc.current;Ze(rc),n._currentValue=s}function yd(n,s,a){for(;n!==null;){var d=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,d!==null&&(d.childLanes|=s)):d!==null&&(d.childLanes&s)!==s&&(d.childLanes|=s),n===a)break;n=n.return}}function ao(n,s){sc=n,md=oo=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(Kt=!0),n.firstContext=null)}function gn(n){var s=n._currentValue;if(md!==n)if(n={context:n,memoizedValue:s,next:null},oo===null){if(sc===null)throw Error(t(308));oo=n,sc.dependencies={lanes:0,firstContext:n}}else oo=oo.next=n;return s}var ri=null;function vd(n){ri===null?ri=[n]:ri.push(n)}function qm(n,s,a,d){var f=s.interleaved;return f===null?(a.next=a,vd(s)):(a.next=f.next,f.next=a),s.interleaved=a,Nr(n,d)}function Nr(n,s){n.lanes|=s;var a=n.alternate;for(a!==null&&(a.lanes|=s),a=n,n=n.return;n!==null;)n.childLanes|=s,a=n.alternate,a!==null&&(a.childLanes|=s),a=n,n=n.return;return a.tag===3?a.stateNode:null}var ls=!1;function xd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Hm(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Sr(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function cs(n,s,a){var d=n.updateQueue;if(d===null)return null;if(d=d.shared,(ze&2)!==0){var f=d.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),d.pending=s,Nr(n,a)}return f=d.interleaved,f===null?(s.next=s,vd(d)):(s.next=f.next,f.next=s),d.interleaved=s,Nr(n,a)}function ic(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var d=s.lanes;d&=n.pendingLanes,a|=d,s.lanes=a,sa(n,a)}}function Wm(n,s){var a=n.updateQueue,d=n.alternate;if(d!==null&&(d=d.updateQueue,a===d)){var f=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var _={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?f=g=_:g=g.next=_,a=a.next}while(a!==null);g===null?f=g=s:g=g.next=s}else f=g=s;a={baseState:d.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:d.shared,effects:d.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}function oc(n,s,a,d){var f=n.updateQueue;ls=!1;var g=f.firstBaseUpdate,_=f.lastBaseUpdate,k=f.shared.pending;if(k!==null){f.shared.pending=null;var j=k,K=j.next;j.next=null,_===null?g=K:_.next=K,_=j;var re=n.alternate;re!==null&&(re=re.updateQueue,k=re.lastBaseUpdate,k!==_&&(k===null?re.firstBaseUpdate=K:k.next=K,re.lastBaseUpdate=j))}if(g!==null){var se=f.baseState;_=0,re=K=j=null,k=g;do{var te=k.lane,me=k.eventTime;if((d&te)===te){re!==null&&(re=re.next={eventTime:me,lane:0,tag:k.tag,payload:k.payload,callback:k.callback,next:null});e:{var ye=n,ve=k;switch(te=s,me=a,ve.tag){case 1:if(ye=ve.payload,typeof ye=="function"){se=ye.call(me,se,te);break e}se=ye;break e;case 3:ye.flags=ye.flags&-65537|128;case 0:if(ye=ve.payload,te=typeof ye=="function"?ye.call(me,se,te):ye,te==null)break e;se=X({},se,te);break e;case 2:ls=!0}}k.callback!==null&&k.lane!==0&&(n.flags|=64,te=f.effects,te===null?f.effects=[k]:te.push(k))}else me={eventTime:me,lane:te,tag:k.tag,payload:k.payload,callback:k.callback,next:null},re===null?(K=re=me,j=se):re=re.next=me,_|=te;if(k=k.next,k===null){if(k=f.shared.pending,k===null)break;te=k,k=te.next,te.next=null,f.lastBaseUpdate=te,f.shared.pending=null}}while(!0);if(re===null&&(j=se),f.baseState=j,f.firstBaseUpdate=K,f.lastBaseUpdate=re,s=f.shared.interleaved,s!==null){f=s;do _|=f.lane,f=f.next;while(f!==s)}else g===null&&(f.shared.lanes=0);oi|=_,n.lanes=_,n.memoizedState=se}}function Gm(n,s,a){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var d=n[s],f=d.callback;if(f!==null){if(d.callback=null,d=a,typeof f!="function")throw Error(t(191,f));f.call(d)}}}var Ia={},Xn=is(Ia),Ta=is(Ia),Na=is(Ia);function si(n){if(n===Ia)throw Error(t(174));return n}function _d(n,s){switch(Qe(Na,s),Qe(Ta,n),Qe(Xn,Ia),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:ki(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=ki(s,n)}Ze(Xn),Qe(Xn,s)}function lo(){Ze(Xn),Ze(Ta),Ze(Na)}function Km(n){si(Na.current);var s=si(Xn.current),a=ki(s,n.type);s!==a&&(Qe(Ta,n),Qe(Xn,a))}function wd(n){Ta.current===n&&(Ze(Xn),Ze(Ta))}var nt=is(0);function ac(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Ed=[];function bd(){for(var n=0;n<Ed.length;n++)Ed[n]._workInProgressVersionPrimary=null;Ed.length=0}var lc=ne.ReactCurrentDispatcher,Id=ne.ReactCurrentBatchConfig,ii=0,rt=null,vt=null,wt=null,cc=!1,Sa=!1,Ca=0,Xx=0;function Dt(){throw Error(t(321))}function Td(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!Tn(n[a],s[a]))return!1;return!0}function Nd(n,s,a,d,f,g){if(ii=g,rt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,lc.current=n===null||n.memoizedState===null?n_:r_,n=a(d,f),Sa){g=0;do{if(Sa=!1,Ca=0,25<=g)throw Error(t(301));g+=1,wt=vt=null,s.updateQueue=null,lc.current=s_,n=a(d,f)}while(Sa)}if(lc.current=hc,s=vt!==null&&vt.next!==null,ii=0,wt=vt=rt=null,cc=!1,s)throw Error(t(300));return n}function Sd(){var n=Ca!==0;return Ca=0,n}function Zn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?rt.memoizedState=wt=n:wt=wt.next=n,wt}function yn(){if(vt===null){var n=rt.alternate;n=n!==null?n.memoizedState:null}else n=vt.next;var s=wt===null?rt.memoizedState:wt.next;if(s!==null)wt=s,vt=n;else{if(n===null)throw Error(t(310));vt=n,n={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},wt===null?rt.memoizedState=wt=n:wt=wt.next=n}return wt}function ka(n,s){return typeof s=="function"?s(n):s}function Cd(n){var s=yn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var d=vt,f=d.baseQueue,g=a.pending;if(g!==null){if(f!==null){var _=f.next;f.next=g.next,g.next=_}d.baseQueue=f=g,a.pending=null}if(f!==null){g=f.next,d=d.baseState;var k=_=null,j=null,K=g;do{var re=K.lane;if((ii&re)===re)j!==null&&(j=j.next={lane:0,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),d=K.hasEagerState?K.eagerState:n(d,K.action);else{var se={lane:re,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null};j===null?(k=j=se,_=d):j=j.next=se,rt.lanes|=re,oi|=re}K=K.next}while(K!==null&&K!==g);j===null?_=d:j.next=k,Tn(d,s.memoizedState)||(Kt=!0),s.memoizedState=d,s.baseState=_,s.baseQueue=j,a.lastRenderedState=d}if(n=a.interleaved,n!==null){f=n;do g=f.lane,rt.lanes|=g,oi|=g,f=f.next;while(f!==n)}else f===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function kd(n){var s=yn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var d=a.dispatch,f=a.pending,g=s.memoizedState;if(f!==null){a.pending=null;var _=f=f.next;do g=n(g,_.action),_=_.next;while(_!==f);Tn(g,s.memoizedState)||(Kt=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),a.lastRenderedState=g}return[g,d]}function Qm(){}function Ym(n,s){var a=rt,d=yn(),f=s(),g=!Tn(d.memoizedState,f);if(g&&(d.memoizedState=f,Kt=!0),d=d.queue,Ad(Zm.bind(null,a,d,n),[n]),d.getSnapshot!==s||g||wt!==null&&wt.memoizedState.tag&1){if(a.flags|=2048,Aa(9,Xm.bind(null,a,d,f,s),void 0,null),Et===null)throw Error(t(349));(ii&30)!==0||Jm(a,s,f)}return f}function Jm(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=rt.updateQueue,s===null?(s={lastEffect:null,stores:null},rt.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function Xm(n,s,a,d){s.value=a,s.getSnapshot=d,ep(s)&&tp(n)}function Zm(n,s,a){return a(function(){ep(s)&&tp(n)})}function ep(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!Tn(n,a)}catch{return!0}}function tp(n){var s=Nr(n,1);s!==null&&An(s,n,1,-1)}function np(n){var s=Zn();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ka,lastRenderedState:n},s.queue=n,n=n.dispatch=t_.bind(null,rt,n),[s.memoizedState,n]}function Aa(n,s,a,d){return n={tag:n,create:s,destroy:a,deps:d,next:null},s=rt.updateQueue,s===null?(s={lastEffect:null,stores:null},rt.updateQueue=s,s.lastEffect=n.next=n):(a=s.lastEffect,a===null?s.lastEffect=n.next=n:(d=a.next,a.next=n,n.next=d,s.lastEffect=n)),n}function rp(){return yn().memoizedState}function uc(n,s,a,d){var f=Zn();rt.flags|=n,f.memoizedState=Aa(1|s,a,void 0,d===void 0?null:d)}function dc(n,s,a,d){var f=yn();d=d===void 0?null:d;var g=void 0;if(vt!==null){var _=vt.memoizedState;if(g=_.destroy,d!==null&&Td(d,_.deps)){f.memoizedState=Aa(s,a,g,d);return}}rt.flags|=n,f.memoizedState=Aa(1|s,a,g,d)}function sp(n,s){return uc(8390656,8,n,s)}function Ad(n,s){return dc(2048,8,n,s)}function ip(n,s){return dc(4,2,n,s)}function op(n,s){return dc(4,4,n,s)}function ap(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function lp(n,s,a){return a=a!=null?a.concat([n]):null,dc(4,4,ap.bind(null,s,n),a)}function Pd(){}function cp(n,s){var a=yn();s=s===void 0?null:s;var d=a.memoizedState;return d!==null&&s!==null&&Td(s,d[1])?d[0]:(a.memoizedState=[n,s],n)}function up(n,s){var a=yn();s=s===void 0?null:s;var d=a.memoizedState;return d!==null&&s!==null&&Td(s,d[1])?d[0]:(n=n(),a.memoizedState=[n,s],n)}function dp(n,s,a){return(ii&21)===0?(n.baseState&&(n.baseState=!1,Kt=!0),n.memoizedState=a):(Tn(a,s)||(a=na(),rt.lanes|=a,oi|=a,n.baseState=!0),s)}function Zx(n,s){var a=Le;Le=a!==0&&4>a?a:4,n(!0);var d=Id.transition;Id.transition={};try{n(!1),s()}finally{Le=a,Id.transition=d}}function hp(){return yn().memoizedState}function e_(n,s,a){var d=fs(n);if(a={lane:d,action:a,hasEagerState:!1,eagerState:null,next:null},fp(n))mp(s,a);else if(a=qm(n,s,a,d),a!==null){var f=Ht();An(a,n,d,f),pp(a,s,d)}}function t_(n,s,a){var d=fs(n),f={lane:d,action:a,hasEagerState:!1,eagerState:null,next:null};if(fp(n))mp(s,f);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var _=s.lastRenderedState,k=g(_,a);if(f.hasEagerState=!0,f.eagerState=k,Tn(k,_)){var j=s.interleaved;j===null?(f.next=f,vd(s)):(f.next=j.next,j.next=f),s.interleaved=f;return}}catch{}a=qm(n,s,f,d),a!==null&&(f=Ht(),An(a,n,d,f),pp(a,s,d))}}function fp(n){var s=n.alternate;return n===rt||s!==null&&s===rt}function mp(n,s){Sa=cc=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function pp(n,s,a){if((a&4194240)!==0){var d=s.lanes;d&=n.pendingLanes,a|=d,s.lanes=a,sa(n,a)}}var hc={readContext:gn,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useInsertionEffect:Dt,useLayoutEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useMutableSource:Dt,useSyncExternalStore:Dt,useId:Dt,unstable_isNewReconciler:!1},n_={readContext:gn,useCallback:function(n,s){return Zn().memoizedState=[n,s===void 0?null:s],n},useContext:gn,useEffect:sp,useImperativeHandle:function(n,s,a){return a=a!=null?a.concat([n]):null,uc(4194308,4,ap.bind(null,s,n),a)},useLayoutEffect:function(n,s){return uc(4194308,4,n,s)},useInsertionEffect:function(n,s){return uc(4,2,n,s)},useMemo:function(n,s){var a=Zn();return s=s===void 0?null:s,n=n(),a.memoizedState=[n,s],n},useReducer:function(n,s,a){var d=Zn();return s=a!==void 0?a(s):s,d.memoizedState=d.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},d.queue=n,n=n.dispatch=e_.bind(null,rt,n),[d.memoizedState,n]},useRef:function(n){var s=Zn();return n={current:n},s.memoizedState=n},useState:np,useDebugValue:Pd,useDeferredValue:function(n){return Zn().memoizedState=n},useTransition:function(){var n=np(!1),s=n[0];return n=Zx.bind(null,n[1]),Zn().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,a){var d=rt,f=Zn();if(tt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),Et===null)throw Error(t(349));(ii&30)!==0||Jm(d,s,a)}f.memoizedState=a;var g={value:a,getSnapshot:s};return f.queue=g,sp(Zm.bind(null,d,g,n),[n]),d.flags|=2048,Aa(9,Xm.bind(null,d,g,a,s),void 0,null),a},useId:function(){var n=Zn(),s=Et.identifierPrefix;if(tt){var a=Tr,d=Ir;a=(d&~(1<<32-tn(d)-1)).toString(32)+a,s=":"+s+"R"+a,a=Ca++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=Xx++,s=":"+s+"r"+a.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},r_={readContext:gn,useCallback:cp,useContext:gn,useEffect:Ad,useImperativeHandle:lp,useInsertionEffect:ip,useLayoutEffect:op,useMemo:up,useReducer:Cd,useRef:rp,useState:function(){return Cd(ka)},useDebugValue:Pd,useDeferredValue:function(n){var s=yn();return dp(s,vt.memoizedState,n)},useTransition:function(){var n=Cd(ka)[0],s=yn().memoizedState;return[n,s]},useMutableSource:Qm,useSyncExternalStore:Ym,useId:hp,unstable_isNewReconciler:!1},s_={readContext:gn,useCallback:cp,useContext:gn,useEffect:Ad,useImperativeHandle:lp,useInsertionEffect:ip,useLayoutEffect:op,useMemo:up,useReducer:kd,useRef:rp,useState:function(){return kd(ka)},useDebugValue:Pd,useDeferredValue:function(n){var s=yn();return vt===null?s.memoizedState=n:dp(s,vt.memoizedState,n)},useTransition:function(){var n=kd(ka)[0],s=yn().memoizedState;return[n,s]},useMutableSource:Qm,useSyncExternalStore:Ym,useId:hp,unstable_isNewReconciler:!1};function Sn(n,s){if(n&&n.defaultProps){s=X({},s),n=n.defaultProps;for(var a in n)s[a]===void 0&&(s[a]=n[a]);return s}return s}function Rd(n,s,a,d){s=n.memoizedState,a=a(d,s),a=a==null?s:X({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var fc={isMounted:function(n){return(n=n._reactInternals)?bn(n)===n:!1},enqueueSetState:function(n,s,a){n=n._reactInternals;var d=Ht(),f=fs(n),g=Sr(d,f);g.payload=s,a!=null&&(g.callback=a),s=cs(n,g,f),s!==null&&(An(s,n,f,d),ic(s,n,f))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var d=Ht(),f=fs(n),g=Sr(d,f);g.tag=1,g.payload=s,a!=null&&(g.callback=a),s=cs(n,g,f),s!==null&&(An(s,n,f,d),ic(s,n,f))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=Ht(),d=fs(n),f=Sr(a,d);f.tag=2,s!=null&&(f.callback=s),s=cs(n,f,d),s!==null&&(An(s,n,d,a),ic(s,n,d))}};function gp(n,s,a,d,f,g,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(d,g,_):s.prototype&&s.prototype.isPureReactComponent?!ga(a,d)||!ga(f,g):!0}function yp(n,s,a){var d=!1,f=os,g=s.contextType;return typeof g=="object"&&g!==null?g=gn(g):(f=Gt(s)?ei:jt.current,d=s.contextTypes,g=(d=d!=null)?to(n,f):os),s=new s(a,g),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=fc,n.stateNode=s,s._reactInternals=n,d&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=f,n.__reactInternalMemoizedMaskedChildContext=g),s}function vp(n,s,a,d){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,d),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,d),s.state!==n&&fc.enqueueReplaceState(s,s.state,null)}function jd(n,s,a,d){var f=n.stateNode;f.props=a,f.state=n.memoizedState,f.refs={},xd(n);var g=s.contextType;typeof g=="object"&&g!==null?f.context=gn(g):(g=Gt(s)?ei:jt.current,f.context=to(n,g)),f.state=n.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&(Rd(n,s,g,a),f.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&fc.enqueueReplaceState(f,f.state,null),oc(n,a,f,d),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308)}function co(n,s){try{var a="",d=s;do a+=fe(d),d=d.return;while(d);var f=a}catch(g){f=`
Error generating stack: `+g.message+`
`+g.stack}return{value:n,source:s,stack:f,digest:null}}function Dd(n,s,a){return{value:n,source:null,stack:a??null,digest:s??null}}function Vd(n,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var i_=typeof WeakMap=="function"?WeakMap:Map;function xp(n,s,a){a=Sr(-1,a),a.tag=3,a.payload={element:null};var d=s.value;return a.callback=function(){_c||(_c=!0,Yd=d),Vd(n,s)},a}function _p(n,s,a){a=Sr(-1,a),a.tag=3;var d=n.type.getDerivedStateFromError;if(typeof d=="function"){var f=s.value;a.payload=function(){return d(f)},a.callback=function(){Vd(n,s)}}var g=n.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){Vd(n,s),typeof d!="function"&&(ds===null?ds=new Set([this]):ds.add(this));var _=s.stack;this.componentDidCatch(s.value,{componentStack:_!==null?_:""})}),a}function wp(n,s,a){var d=n.pingCache;if(d===null){d=n.pingCache=new i_;var f=new Set;d.set(s,f)}else f=d.get(s),f===void 0&&(f=new Set,d.set(s,f));f.has(a)||(f.add(a),n=x_.bind(null,n,s,a),s.then(n,n))}function Ep(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function bp(n,s,a,d,f){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=Sr(-1,1),s.tag=2,cs(a,s,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=f,n)}var o_=ne.ReactCurrentOwner,Kt=!1;function qt(n,s,a,d){s.child=n===null?$m(s,null,a,d):io(s,n.child,a,d)}function Ip(n,s,a,d,f){a=a.render;var g=s.ref;return ao(s,f),d=Nd(n,s,a,d,g,f),a=Sd(),n!==null&&!Kt?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,Cr(n,s,f)):(tt&&a&&cd(s),s.flags|=1,qt(n,s,d,f),s.child)}function Tp(n,s,a,d,f){if(n===null){var g=a.type;return typeof g=="function"&&!rh(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=g,Np(n,s,g,d,f)):(n=Nc(a.type,null,d,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(g=n.child,(n.lanes&f)===0){var _=g.memoizedProps;if(a=a.compare,a=a!==null?a:ga,a(_,d)&&n.ref===s.ref)return Cr(n,s,f)}return s.flags|=1,n=ps(g,d),n.ref=s.ref,n.return=s,s.child=n}function Np(n,s,a,d,f){if(n!==null){var g=n.memoizedProps;if(ga(g,d)&&n.ref===s.ref)if(Kt=!1,s.pendingProps=d=g,(n.lanes&f)!==0)(n.flags&131072)!==0&&(Kt=!0);else return s.lanes=n.lanes,Cr(n,s,f)}return Od(n,s,a,d,f)}function Sp(n,s,a){var d=s.pendingProps,f=d.children,g=n!==null?n.memoizedState:null;if(d.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qe(ho,cn),cn|=a;else{if((a&1073741824)===0)return n=g!==null?g.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,Qe(ho,cn),cn|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=g!==null?g.baseLanes:a,Qe(ho,cn),cn|=d}else g!==null?(d=g.baseLanes|a,s.memoizedState=null):d=a,Qe(ho,cn),cn|=d;return qt(n,s,f,a),s.child}function Cp(n,s){var a=s.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function Od(n,s,a,d,f){var g=Gt(a)?ei:jt.current;return g=to(s,g),ao(s,f),a=Nd(n,s,a,d,g,f),d=Sd(),n!==null&&!Kt?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,Cr(n,s,f)):(tt&&d&&cd(s),s.flags|=1,qt(n,s,a,f),s.child)}function kp(n,s,a,d,f){if(Gt(a)){var g=!0;Jl(s)}else g=!1;if(ao(s,f),s.stateNode===null)pc(n,s),yp(s,a,d),jd(s,a,d,f),d=!0;else if(n===null){var _=s.stateNode,k=s.memoizedProps;_.props=k;var j=_.context,K=a.contextType;typeof K=="object"&&K!==null?K=gn(K):(K=Gt(a)?ei:jt.current,K=to(s,K));var re=a.getDerivedStateFromProps,se=typeof re=="function"||typeof _.getSnapshotBeforeUpdate=="function";se||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(k!==d||j!==K)&&vp(s,_,d,K),ls=!1;var te=s.memoizedState;_.state=te,oc(s,d,_,f),j=s.memoizedState,k!==d||te!==j||Wt.current||ls?(typeof re=="function"&&(Rd(s,a,re,d),j=s.memoizedState),(k=ls||gp(s,a,k,d,te,j,K))?(se||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(s.flags|=4194308)):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=d,s.memoizedState=j),_.props=d,_.state=j,_.context=K,d=k):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),d=!1)}else{_=s.stateNode,Hm(n,s),k=s.memoizedProps,K=s.type===s.elementType?k:Sn(s.type,k),_.props=K,se=s.pendingProps,te=_.context,j=a.contextType,typeof j=="object"&&j!==null?j=gn(j):(j=Gt(a)?ei:jt.current,j=to(s,j));var me=a.getDerivedStateFromProps;(re=typeof me=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(k!==se||te!==j)&&vp(s,_,d,j),ls=!1,te=s.memoizedState,_.state=te,oc(s,d,_,f);var ye=s.memoizedState;k!==se||te!==ye||Wt.current||ls?(typeof me=="function"&&(Rd(s,a,me,d),ye=s.memoizedState),(K=ls||gp(s,a,K,d,te,ye,j)||!1)?(re||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(d,ye,j),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(d,ye,j)),typeof _.componentDidUpdate=="function"&&(s.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof _.componentDidUpdate!="function"||k===n.memoizedProps&&te===n.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||k===n.memoizedProps&&te===n.memoizedState||(s.flags|=1024),s.memoizedProps=d,s.memoizedState=ye),_.props=d,_.state=ye,_.context=j,d=K):(typeof _.componentDidUpdate!="function"||k===n.memoizedProps&&te===n.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||k===n.memoizedProps&&te===n.memoizedState||(s.flags|=1024),d=!1)}return Md(n,s,a,d,g,f)}function Md(n,s,a,d,f,g){Cp(n,s);var _=(s.flags&128)!==0;if(!d&&!_)return f&&Dm(s,a,!1),Cr(n,s,g);d=s.stateNode,o_.current=s;var k=_&&typeof a.getDerivedStateFromError!="function"?null:d.render();return s.flags|=1,n!==null&&_?(s.child=io(s,n.child,null,g),s.child=io(s,null,k,g)):qt(n,s,k,g),s.memoizedState=d.state,f&&Dm(s,a,!0),s.child}function Ap(n){var s=n.stateNode;s.pendingContext?Rm(n,s.pendingContext,s.pendingContext!==s.context):s.context&&Rm(n,s.context,!1),_d(n,s.containerInfo)}function Pp(n,s,a,d,f){return so(),fd(f),s.flags|=256,qt(n,s,a,d),s.child}var Ld={dehydrated:null,treeContext:null,retryLane:0};function Fd(n){return{baseLanes:n,cachePool:null,transitions:null}}function Rp(n,s,a){var d=s.pendingProps,f=nt.current,g=!1,_=(s.flags&128)!==0,k;if((k=_)||(k=n!==null&&n.memoizedState===null?!1:(f&2)!==0),k?(g=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(f|=1),Qe(nt,f&1),n===null)return hd(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(_=d.children,n=d.fallback,g?(d=s.mode,g=s.child,_={mode:"hidden",children:_},(d&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=_):g=Sc(_,d,0,null),n=ui(n,d,a,null),g.return=s,n.return=s,g.sibling=n,s.child=g,s.child.memoizedState=Fd(a),s.memoizedState=Ld,n):Ud(s,_));if(f=n.memoizedState,f!==null&&(k=f.dehydrated,k!==null))return a_(n,s,_,d,k,f,a);if(g){g=d.fallback,_=s.mode,f=n.child,k=f.sibling;var j={mode:"hidden",children:d.children};return(_&1)===0&&s.child!==f?(d=s.child,d.childLanes=0,d.pendingProps=j,s.deletions=null):(d=ps(f,j),d.subtreeFlags=f.subtreeFlags&14680064),k!==null?g=ps(k,g):(g=ui(g,_,a,null),g.flags|=2),g.return=s,d.return=s,d.sibling=g,s.child=d,d=g,g=s.child,_=n.child.memoizedState,_=_===null?Fd(a):{baseLanes:_.baseLanes|a,cachePool:null,transitions:_.transitions},g.memoizedState=_,g.childLanes=n.childLanes&~a,s.memoizedState=Ld,d}return g=n.child,n=g.sibling,d=ps(g,{mode:"visible",children:d.children}),(s.mode&1)===0&&(d.lanes=a),d.return=s,d.sibling=null,n!==null&&(a=s.deletions,a===null?(s.deletions=[n],s.flags|=16):a.push(n)),s.child=d,s.memoizedState=null,d}function Ud(n,s){return s=Sc({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function mc(n,s,a,d){return d!==null&&fd(d),io(s,n.child,null,a),n=Ud(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function a_(n,s,a,d,f,g,_){if(a)return s.flags&256?(s.flags&=-257,d=Dd(Error(t(422))),mc(n,s,_,d)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(g=d.fallback,f=s.mode,d=Sc({mode:"visible",children:d.children},f,0,null),g=ui(g,f,_,null),g.flags|=2,d.return=s,g.return=s,d.sibling=g,s.child=d,(s.mode&1)!==0&&io(s,n.child,null,_),s.child.memoizedState=Fd(_),s.memoizedState=Ld,g);if((s.mode&1)===0)return mc(n,s,_,null);if(f.data==="$!"){if(d=f.nextSibling&&f.nextSibling.dataset,d)var k=d.dgst;return d=k,g=Error(t(419)),d=Dd(g,d,void 0),mc(n,s,_,d)}if(k=(_&n.childLanes)!==0,Kt||k){if(d=Et,d!==null){switch(_&-_){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(d.suspendedLanes|_))!==0?0:f,f!==0&&f!==g.retryLane&&(g.retryLane=f,Nr(n,f),An(d,n,f,-1))}return nh(),d=Dd(Error(t(421))),mc(n,s,_,d)}return f.data==="$?"?(s.flags|=128,s.child=n.child,s=__.bind(null,n),f._reactRetry=s,null):(n=g.treeContext,ln=ss(f.nextSibling),an=s,tt=!0,Nn=null,n!==null&&(mn[pn++]=Ir,mn[pn++]=Tr,mn[pn++]=ti,Ir=n.id,Tr=n.overflow,ti=s),s=Ud(s,d.children),s.flags|=4096,s)}function jp(n,s,a){n.lanes|=s;var d=n.alternate;d!==null&&(d.lanes|=s),yd(n.return,s,a)}function Bd(n,s,a,d,f){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:d,tail:a,tailMode:f}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=d,g.tail=a,g.tailMode=f)}function Dp(n,s,a){var d=s.pendingProps,f=d.revealOrder,g=d.tail;if(qt(n,s,d.children,a),d=nt.current,(d&2)!==0)d=d&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&jp(n,a,s);else if(n.tag===19)jp(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}d&=1}if(Qe(nt,d),(s.mode&1)===0)s.memoizedState=null;else switch(f){case"forwards":for(a=s.child,f=null;a!==null;)n=a.alternate,n!==null&&ac(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),Bd(s,!1,f,a,g);break;case"backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&ac(n)===null){s.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}Bd(s,!0,a,null,g);break;case"together":Bd(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function pc(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function Cr(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),oi|=s.lanes,(a&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,a=ps(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=ps(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function l_(n,s,a){switch(s.tag){case 3:Ap(s),so();break;case 5:Km(s);break;case 1:Gt(s.type)&&Jl(s);break;case 4:_d(s,s.stateNode.containerInfo);break;case 10:var d=s.type._context,f=s.memoizedProps.value;Qe(rc,d._currentValue),d._currentValue=f;break;case 13:if(d=s.memoizedState,d!==null)return d.dehydrated!==null?(Qe(nt,nt.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?Rp(n,s,a):(Qe(nt,nt.current&1),n=Cr(n,s,a),n!==null?n.sibling:null);Qe(nt,nt.current&1);break;case 19:if(d=(a&s.childLanes)!==0,(n.flags&128)!==0){if(d)return Dp(n,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Qe(nt,nt.current),d)break;return null;case 22:case 23:return s.lanes=0,Sp(n,s,a)}return Cr(n,s,a)}var Vp,zd,Op,Mp;Vp=function(n,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},zd=function(){},Op=function(n,s,a,d){var f=n.memoizedProps;if(f!==d){n=s.stateNode,si(Xn.current);var g=null;switch(a){case"input":f=Si(n,f),d=Si(n,d),g=[];break;case"select":f=X({},f,{value:void 0}),d=X({},d,{value:void 0}),g=[];break;case"textarea":f=Ho(n,f),d=Ho(n,d),g=[];break;default:typeof f.onClick!="function"&&typeof d.onClick=="function"&&(n.onclick=Kl)}En(a,d);var _;a=null;for(K in f)if(!d.hasOwnProperty(K)&&f.hasOwnProperty(K)&&f[K]!=null)if(K==="style"){var k=f[K];for(_ in k)k.hasOwnProperty(_)&&(a||(a={}),a[_]="")}else K!=="dangerouslySetInnerHTML"&&K!=="children"&&K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&K!=="autoFocus"&&(o.hasOwnProperty(K)?g||(g=[]):(g=g||[]).push(K,null));for(K in d){var j=d[K];if(k=f?.[K],d.hasOwnProperty(K)&&j!==k&&(j!=null||k!=null))if(K==="style")if(k){for(_ in k)!k.hasOwnProperty(_)||j&&j.hasOwnProperty(_)||(a||(a={}),a[_]="");for(_ in j)j.hasOwnProperty(_)&&k[_]!==j[_]&&(a||(a={}),a[_]=j[_])}else a||(g||(g=[]),g.push(K,a)),a=j;else K==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,k=k?k.__html:void 0,j!=null&&k!==j&&(g=g||[]).push(K,j)):K==="children"?typeof j!="string"&&typeof j!="number"||(g=g||[]).push(K,""+j):K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&(o.hasOwnProperty(K)?(j!=null&&K==="onScroll"&&Xe("scroll",n),g||k===j||(g=[])):(g=g||[]).push(K,j))}a&&(g=g||[]).push("style",a);var K=g;(s.updateQueue=K)&&(s.flags|=4)}},Mp=function(n,s,a,d){a!==d&&(s.flags|=4)};function Pa(n,s){if(!tt)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:d.sibling=null}}function Vt(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,d=0;if(s)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,d|=f.subtreeFlags&14680064,d|=f.flags&14680064,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,d|=f.subtreeFlags,d|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=d,n.childLanes=a,s}function c_(n,s,a){var d=s.pendingProps;switch(ud(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vt(s),null;case 1:return Gt(s.type)&&Yl(),Vt(s),null;case 3:return d=s.stateNode,lo(),Ze(Wt),Ze(jt),bd(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(n===null||n.child===null)&&(tc(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Nn!==null&&(Zd(Nn),Nn=null))),zd(n,s),Vt(s),null;case 5:wd(s);var f=si(Na.current);if(a=s.type,n!==null&&s.stateNode!=null)Op(n,s,a,d,f),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!d){if(s.stateNode===null)throw Error(t(166));return Vt(s),null}if(n=si(Xn.current),tc(s)){d=s.stateNode,a=s.type;var g=s.memoizedProps;switch(d[Jn]=s,d[wa]=g,n=(s.mode&1)!==0,a){case"dialog":Xe("cancel",d),Xe("close",d);break;case"iframe":case"object":case"embed":Xe("load",d);break;case"video":case"audio":for(f=0;f<va.length;f++)Xe(va[f],d);break;case"source":Xe("error",d);break;case"img":case"image":case"link":Xe("error",d),Xe("load",d);break;case"details":Xe("toggle",d);break;case"input":xl(d,g),Xe("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!g.multiple},Xe("invalid",d);break;case"textarea":Wo(d,g),Xe("invalid",d)}En(a,g),f=null;for(var _ in g)if(g.hasOwnProperty(_)){var k=g[_];_==="children"?typeof k=="string"?d.textContent!==k&&(g.suppressHydrationWarning!==!0&&Gl(d.textContent,k,n),f=["children",k]):typeof k=="number"&&d.textContent!==""+k&&(g.suppressHydrationWarning!==!0&&Gl(d.textContent,k,n),f=["children",""+k]):o.hasOwnProperty(_)&&k!=null&&_==="onScroll"&&Xe("scroll",d)}switch(a){case"input":Ni(d),qo(d,g,!0);break;case"textarea":Ni(d),zr(d);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(d.onclick=Kl)}d=f,s.updateQueue=d,d!==null&&(s.flags|=4)}else{_=f.nodeType===9?f:f.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Go(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=_.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof d.is=="string"?n=_.createElement(a,{is:d.is}):(n=_.createElement(a),a==="select"&&(_=n,d.multiple?_.multiple=!0:d.size&&(_.size=d.size))):n=_.createElementNS(n,a),n[Jn]=s,n[wa]=d,Vp(n,s,!1,!1),s.stateNode=n;e:{switch(_=Pi(a,d),a){case"dialog":Xe("cancel",n),Xe("close",n),f=d;break;case"iframe":case"object":case"embed":Xe("load",n),f=d;break;case"video":case"audio":for(f=0;f<va.length;f++)Xe(va[f],n);f=d;break;case"source":Xe("error",n),f=d;break;case"img":case"image":case"link":Xe("error",n),Xe("load",n),f=d;break;case"details":Xe("toggle",n),f=d;break;case"input":xl(n,d),f=Si(n,d),Xe("invalid",n);break;case"option":f=d;break;case"select":n._wrapperState={wasMultiple:!!d.multiple},f=X({},d,{value:void 0}),Xe("invalid",n);break;case"textarea":Wo(n,d),f=Ho(n,d),Xe("invalid",n);break;default:f=d}En(a,f),k=f;for(g in k)if(k.hasOwnProperty(g)){var j=k[g];g==="style"?Ai(n,j):g==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,j!=null&&wl(n,j)):g==="children"?typeof j=="string"?(a!=="textarea"||j!=="")&&Fs(n,j):typeof j=="number"&&Fs(n,""+j):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?j!=null&&g==="onScroll"&&Xe("scroll",n):j!=null&&Y(n,g,j,_))}switch(a){case"input":Ni(n),qo(n,d,!1);break;case"textarea":Ni(n),zr(n);break;case"option":d.value!=null&&n.setAttribute("value",""+Be(d.value));break;case"select":n.multiple=!!d.multiple,g=d.value,g!=null?wn(n,!!d.multiple,g,!1):d.defaultValue!=null&&wn(n,!!d.multiple,d.defaultValue,!0);break;default:typeof f.onClick=="function"&&(n.onclick=Kl)}switch(a){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Vt(s),null;case 6:if(n&&s.stateNode!=null)Mp(n,s,n.memoizedProps,d);else{if(typeof d!="string"&&s.stateNode===null)throw Error(t(166));if(a=si(Na.current),si(Xn.current),tc(s)){if(d=s.stateNode,a=s.memoizedProps,d[Jn]=s,(g=d.nodeValue!==a)&&(n=an,n!==null))switch(n.tag){case 3:Gl(d.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Gl(d.nodeValue,a,(n.mode&1)!==0)}g&&(s.flags|=4)}else d=(a.nodeType===9?a:a.ownerDocument).createTextNode(d),d[Jn]=s,s.stateNode=d}return Vt(s),null;case 13:if(Ze(nt),d=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(tt&&ln!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Um(),so(),s.flags|=98560,g=!1;else if(g=tc(s),d!==null&&d.dehydrated!==null){if(n===null){if(!g)throw Error(t(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[Jn]=s}else so(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Vt(s),g=!1}else Nn!==null&&(Zd(Nn),Nn=null),g=!0;if(!g)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(d=d!==null,d!==(n!==null&&n.memoizedState!==null)&&d&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(nt.current&1)!==0?xt===0&&(xt=3):nh())),s.updateQueue!==null&&(s.flags|=4),Vt(s),null);case 4:return lo(),zd(n,s),n===null&&xa(s.stateNode.containerInfo),Vt(s),null;case 10:return gd(s.type._context),Vt(s),null;case 17:return Gt(s.type)&&Yl(),Vt(s),null;case 19:if(Ze(nt),g=s.memoizedState,g===null)return Vt(s),null;if(d=(s.flags&128)!==0,_=g.rendering,_===null)if(d)Pa(g,!1);else{if(xt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(_=ac(n),_!==null){for(s.flags|=128,Pa(g,!1),d=_.updateQueue,d!==null&&(s.updateQueue=d,s.flags|=4),s.subtreeFlags=0,d=a,a=s.child;a!==null;)g=a,n=d,g.flags&=14680066,_=g.alternate,_===null?(g.childLanes=0,g.lanes=n,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=_.childLanes,g.lanes=_.lanes,g.child=_.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=_.memoizedProps,g.memoizedState=_.memoizedState,g.updateQueue=_.updateQueue,g.type=_.type,n=_.dependencies,g.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Qe(nt,nt.current&1|2),s.child}n=n.sibling}g.tail!==null&&Je()>fo&&(s.flags|=128,d=!0,Pa(g,!1),s.lanes=4194304)}else{if(!d)if(n=ac(_),n!==null){if(s.flags|=128,d=!0,a=n.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),Pa(g,!0),g.tail===null&&g.tailMode==="hidden"&&!_.alternate&&!tt)return Vt(s),null}else 2*Je()-g.renderingStartTime>fo&&a!==1073741824&&(s.flags|=128,d=!0,Pa(g,!1),s.lanes=4194304);g.isBackwards?(_.sibling=s.child,s.child=_):(a=g.last,a!==null?a.sibling=_:s.child=_,g.last=_)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=Je(),s.sibling=null,a=nt.current,Qe(nt,d?a&1|2:a&1),s):(Vt(s),null);case 22:case 23:return th(),d=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==d&&(s.flags|=8192),d&&(s.mode&1)!==0?(cn&1073741824)!==0&&(Vt(s),s.subtreeFlags&6&&(s.flags|=8192)):Vt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function u_(n,s){switch(ud(s),s.tag){case 1:return Gt(s.type)&&Yl(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return lo(),Ze(Wt),Ze(jt),bd(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return wd(s),null;case 13:if(Ze(nt),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));so()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return Ze(nt),null;case 4:return lo(),null;case 10:return gd(s.type._context),null;case 22:case 23:return th(),null;case 24:return null;default:return null}}var gc=!1,Ot=!1,d_=typeof WeakSet=="function"?WeakSet:Set,ge=null;function uo(n,s){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(d){ot(n,s,d)}else a.current=null}function $d(n,s,a){try{a()}catch(d){ot(n,s,d)}}var Lp=!1;function h_(n,s){if(td=xr,n=gm(),Gu(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var d=a.getSelection&&a.getSelection();if(d&&d.rangeCount!==0){a=d.anchorNode;var f=d.anchorOffset,g=d.focusNode;d=d.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var _=0,k=-1,j=-1,K=0,re=0,se=n,te=null;t:for(;;){for(var me;se!==a||f!==0&&se.nodeType!==3||(k=_+f),se!==g||d!==0&&se.nodeType!==3||(j=_+d),se.nodeType===3&&(_+=se.nodeValue.length),(me=se.firstChild)!==null;)te=se,se=me;for(;;){if(se===n)break t;if(te===a&&++K===f&&(k=_),te===g&&++re===d&&(j=_),(me=se.nextSibling)!==null)break;se=te,te=se.parentNode}se=me}a=k===-1||j===-1?null:{start:k,end:j}}else a=null}a=a||{start:0,end:0}}else a=null;for(nd={focusedElem:n,selectionRange:a},xr=!1,ge=s;ge!==null;)if(s=ge,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,ge=n;else for(;ge!==null;){s=ge;try{var ye=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(ye!==null){var ve=ye.memoizedProps,ct=ye.memoizedState,q=s.stateNode,V=q.getSnapshotBeforeUpdate(s.elementType===s.type?ve:Sn(s.type,ve),ct);q.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var W=s.stateNode.containerInfo;W.nodeType===1?W.textContent="":W.nodeType===9&&W.documentElement&&W.removeChild(W.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ae){ot(s,s.return,ae)}if(n=s.sibling,n!==null){n.return=s.return,ge=n;break}ge=s.return}return ye=Lp,Lp=!1,ye}function Ra(n,s,a){var d=s.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var f=d=d.next;do{if((f.tag&n)===n){var g=f.destroy;f.destroy=void 0,g!==void 0&&$d(s,a,g)}f=f.next}while(f!==d)}}function yc(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&n)===n){var d=a.create;a.destroy=d()}a=a.next}while(a!==s)}}function qd(n){var s=n.ref;if(s!==null){var a=n.stateNode;n.tag,n=a,typeof s=="function"?s(n):s.current=n}}function Fp(n){var s=n.alternate;s!==null&&(n.alternate=null,Fp(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[Jn],delete s[wa],delete s[od],delete s[Kx],delete s[Qx])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Up(n){return n.tag===5||n.tag===3||n.tag===4}function Bp(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Up(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Hd(n,s,a){var d=n.tag;if(d===5||d===6)n=n.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(n,s):a.insertBefore(n,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(n,a)):(s=a,s.appendChild(n)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Kl));else if(d!==4&&(n=n.child,n!==null))for(Hd(n,s,a),n=n.sibling;n!==null;)Hd(n,s,a),n=n.sibling}function Wd(n,s,a){var d=n.tag;if(d===5||d===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(d!==4&&(n=n.child,n!==null))for(Wd(n,s,a),n=n.sibling;n!==null;)Wd(n,s,a),n=n.sibling}var St=null,Cn=!1;function us(n,s,a){for(a=a.child;a!==null;)zp(n,s,a),a=a.sibling}function zp(n,s,a){if(en&&typeof en.onCommitFiberUnmount=="function")try{en.onCommitFiberUnmount(qs,a)}catch{}switch(a.tag){case 5:Ot||uo(a,s);case 6:var d=St,f=Cn;St=null,us(n,s,a),St=d,Cn=f,St!==null&&(Cn?(n=St,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):St.removeChild(a.stateNode));break;case 18:St!==null&&(Cn?(n=St,a=a.stateNode,n.nodeType===8?id(n.parentNode,a):n.nodeType===1&&id(n,a),es(n)):id(St,a.stateNode));break;case 4:d=St,f=Cn,St=a.stateNode.containerInfo,Cn=!0,us(n,s,a),St=d,Cn=f;break;case 0:case 11:case 14:case 15:if(!Ot&&(d=a.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){f=d=d.next;do{var g=f,_=g.destroy;g=g.tag,_!==void 0&&((g&2)!==0||(g&4)!==0)&&$d(a,s,_),f=f.next}while(f!==d)}us(n,s,a);break;case 1:if(!Ot&&(uo(a,s),d=a.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=a.memoizedProps,d.state=a.memoizedState,d.componentWillUnmount()}catch(k){ot(a,s,k)}us(n,s,a);break;case 21:us(n,s,a);break;case 22:a.mode&1?(Ot=(d=Ot)||a.memoizedState!==null,us(n,s,a),Ot=d):us(n,s,a);break;default:us(n,s,a)}}function $p(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new d_),s.forEach(function(d){var f=w_.bind(null,n,d);a.has(d)||(a.add(d),d.then(f,f))})}}function kn(n,s){var a=s.deletions;if(a!==null)for(var d=0;d<a.length;d++){var f=a[d];try{var g=n,_=s,k=_;e:for(;k!==null;){switch(k.tag){case 5:St=k.stateNode,Cn=!1;break e;case 3:St=k.stateNode.containerInfo,Cn=!0;break e;case 4:St=k.stateNode.containerInfo,Cn=!0;break e}k=k.return}if(St===null)throw Error(t(160));zp(g,_,f),St=null,Cn=!1;var j=f.alternate;j!==null&&(j.return=null),f.return=null}catch(K){ot(f,s,K)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)qp(s,n),s=s.sibling}function qp(n,s){var a=n.alternate,d=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(kn(s,n),er(n),d&4){try{Ra(3,n,n.return),yc(3,n)}catch(ve){ot(n,n.return,ve)}try{Ra(5,n,n.return)}catch(ve){ot(n,n.return,ve)}}break;case 1:kn(s,n),er(n),d&512&&a!==null&&uo(a,a.return);break;case 5:if(kn(s,n),er(n),d&512&&a!==null&&uo(a,a.return),n.flags&32){var f=n.stateNode;try{Fs(f,"")}catch(ve){ot(n,n.return,ve)}}if(d&4&&(f=n.stateNode,f!=null)){var g=n.memoizedProps,_=a!==null?a.memoizedProps:g,k=n.type,j=n.updateQueue;if(n.updateQueue=null,j!==null)try{k==="input"&&g.type==="radio"&&g.name!=null&&Ci(f,g),Pi(k,_);var K=Pi(k,g);for(_=0;_<j.length;_+=2){var re=j[_],se=j[_+1];re==="style"?Ai(f,se):re==="dangerouslySetInnerHTML"?wl(f,se):re==="children"?Fs(f,se):Y(f,re,se,K)}switch(k){case"input":Ls(f,g);break;case"textarea":_l(f,g);break;case"select":var te=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!g.multiple;var me=g.value;me!=null?wn(f,!!g.multiple,me,!1):te!==!!g.multiple&&(g.defaultValue!=null?wn(f,!!g.multiple,g.defaultValue,!0):wn(f,!!g.multiple,g.multiple?[]:"",!1))}f[wa]=g}catch(ve){ot(n,n.return,ve)}}break;case 6:if(kn(s,n),er(n),d&4){if(n.stateNode===null)throw Error(t(162));f=n.stateNode,g=n.memoizedProps;try{f.nodeValue=g}catch(ve){ot(n,n.return,ve)}}break;case 3:if(kn(s,n),er(n),d&4&&a!==null&&a.memoizedState.isDehydrated)try{es(s.containerInfo)}catch(ve){ot(n,n.return,ve)}break;case 4:kn(s,n),er(n);break;case 13:kn(s,n),er(n),f=n.child,f.flags&8192&&(g=f.memoizedState!==null,f.stateNode.isHidden=g,!g||f.alternate!==null&&f.alternate.memoizedState!==null||(Qd=Je())),d&4&&$p(n);break;case 22:if(re=a!==null&&a.memoizedState!==null,n.mode&1?(Ot=(K=Ot)||re,kn(s,n),Ot=K):kn(s,n),er(n),d&8192){if(K=n.memoizedState!==null,(n.stateNode.isHidden=K)&&!re&&(n.mode&1)!==0)for(ge=n,re=n.child;re!==null;){for(se=ge=re;ge!==null;){switch(te=ge,me=te.child,te.tag){case 0:case 11:case 14:case 15:Ra(4,te,te.return);break;case 1:uo(te,te.return);var ye=te.stateNode;if(typeof ye.componentWillUnmount=="function"){d=te,a=te.return;try{s=d,ye.props=s.memoizedProps,ye.state=s.memoizedState,ye.componentWillUnmount()}catch(ve){ot(d,a,ve)}}break;case 5:uo(te,te.return);break;case 22:if(te.memoizedState!==null){Gp(se);continue}}me!==null?(me.return=te,ge=me):Gp(se)}re=re.sibling}e:for(re=null,se=n;;){if(se.tag===5){if(re===null){re=se;try{f=se.stateNode,K?(g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(k=se.stateNode,j=se.memoizedProps.style,_=j!=null&&j.hasOwnProperty("display")?j.display:null,k.style.display=Hr("display",_))}catch(ve){ot(n,n.return,ve)}}}else if(se.tag===6){if(re===null)try{se.stateNode.nodeValue=K?"":se.memoizedProps}catch(ve){ot(n,n.return,ve)}}else if((se.tag!==22&&se.tag!==23||se.memoizedState===null||se===n)&&se.child!==null){se.child.return=se,se=se.child;continue}if(se===n)break e;for(;se.sibling===null;){if(se.return===null||se.return===n)break e;re===se&&(re=null),se=se.return}re===se&&(re=null),se.sibling.return=se.return,se=se.sibling}}break;case 19:kn(s,n),er(n),d&4&&$p(n);break;case 21:break;default:kn(s,n),er(n)}}function er(n){var s=n.flags;if(s&2){try{e:{for(var a=n.return;a!==null;){if(Up(a)){var d=a;break e}a=a.return}throw Error(t(160))}switch(d.tag){case 5:var f=d.stateNode;d.flags&32&&(Fs(f,""),d.flags&=-33);var g=Bp(n);Wd(n,g,f);break;case 3:case 4:var _=d.stateNode.containerInfo,k=Bp(n);Hd(n,k,_);break;default:throw Error(t(161))}}catch(j){ot(n,n.return,j)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function f_(n,s,a){ge=n,Hp(n)}function Hp(n,s,a){for(var d=(n.mode&1)!==0;ge!==null;){var f=ge,g=f.child;if(f.tag===22&&d){var _=f.memoizedState!==null||gc;if(!_){var k=f.alternate,j=k!==null&&k.memoizedState!==null||Ot;k=gc;var K=Ot;if(gc=_,(Ot=j)&&!K)for(ge=f;ge!==null;)_=ge,j=_.child,_.tag===22&&_.memoizedState!==null?Kp(f):j!==null?(j.return=_,ge=j):Kp(f);for(;g!==null;)ge=g,Hp(g),g=g.sibling;ge=f,gc=k,Ot=K}Wp(n)}else(f.subtreeFlags&8772)!==0&&g!==null?(g.return=f,ge=g):Wp(n)}}function Wp(n){for(;ge!==null;){var s=ge;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Ot||yc(5,s);break;case 1:var d=s.stateNode;if(s.flags&4&&!Ot)if(a===null)d.componentDidMount();else{var f=s.elementType===s.type?a.memoizedProps:Sn(s.type,a.memoizedProps);d.componentDidUpdate(f,a.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var g=s.updateQueue;g!==null&&Gm(s,g,d);break;case 3:var _=s.updateQueue;if(_!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}Gm(s,_,a)}break;case 5:var k=s.stateNode;if(a===null&&s.flags&4){a=k;var j=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":j.autoFocus&&a.focus();break;case"img":j.src&&(a.src=j.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var K=s.alternate;if(K!==null){var re=K.memoizedState;if(re!==null){var se=re.dehydrated;se!==null&&es(se)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ot||s.flags&512&&qd(s)}catch(te){ot(s,s.return,te)}}if(s===n){ge=null;break}if(a=s.sibling,a!==null){a.return=s.return,ge=a;break}ge=s.return}}function Gp(n){for(;ge!==null;){var s=ge;if(s===n){ge=null;break}var a=s.sibling;if(a!==null){a.return=s.return,ge=a;break}ge=s.return}}function Kp(n){for(;ge!==null;){var s=ge;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{yc(4,s)}catch(j){ot(s,a,j)}break;case 1:var d=s.stateNode;if(typeof d.componentDidMount=="function"){var f=s.return;try{d.componentDidMount()}catch(j){ot(s,f,j)}}var g=s.return;try{qd(s)}catch(j){ot(s,g,j)}break;case 5:var _=s.return;try{qd(s)}catch(j){ot(s,_,j)}}}catch(j){ot(s,s.return,j)}if(s===n){ge=null;break}var k=s.sibling;if(k!==null){k.return=s.return,ge=k;break}ge=s.return}}var m_=Math.ceil,vc=ne.ReactCurrentDispatcher,Gd=ne.ReactCurrentOwner,vn=ne.ReactCurrentBatchConfig,ze=0,Et=null,ft=null,Ct=0,cn=0,ho=is(0),xt=0,ja=null,oi=0,xc=0,Kd=0,Da=null,Qt=null,Qd=0,fo=1/0,kr=null,_c=!1,Yd=null,ds=null,wc=!1,hs=null,Ec=0,Va=0,Jd=null,bc=-1,Ic=0;function Ht(){return(ze&6)!==0?Je():bc!==-1?bc:bc=Je()}function fs(n){return(n.mode&1)===0?1:(ze&2)!==0&&Ct!==0?Ct&-Ct:Jx.transition!==null?(Ic===0&&(Ic=na()),Ic):(n=Le,n!==0||(n=window.event,n=n===void 0?16:Bi(n.type)),n)}function An(n,s,a,d){if(50<Va)throw Va=0,Jd=null,Error(t(185));Ks(n,a,d),((ze&2)===0||n!==Et)&&(n===Et&&((ze&2)===0&&(xc|=a),xt===4&&ms(n,Ct)),Yt(n,d),a===1&&ze===0&&(s.mode&1)===0&&(fo=Je()+500,Xl&&as()))}function Yt(n,s){var a=n.callbackNode;Gs(n,s);var d=gr(n,n===Et?Ct:0);if(d===0)a!==null&&Di(a),n.callbackNode=null,n.callbackPriority=0;else if(s=d&-d,n.callbackPriority!==s){if(a!=null&&Di(a),s===1)n.tag===0?Yx(Yp.bind(null,n)):Vm(Yp.bind(null,n)),Wx(function(){(ze&6)===0&&as()}),a=null;else{switch(Bn(d)){case 1:a=Vi;break;case 4:a=Zo;break;case 16:a=$s;break;case 536870912:a=Oi;break;default:a=$s}a=sg(a,Qp.bind(null,n))}n.callbackPriority=s,n.callbackNode=a}}function Qp(n,s){if(bc=-1,Ic=0,(ze&6)!==0)throw Error(t(327));var a=n.callbackNode;if(mo()&&n.callbackNode!==a)return null;var d=gr(n,n===Et?Ct:0);if(d===0)return null;if((d&30)!==0||(d&n.expiredLanes)!==0||s)s=Tc(n,d);else{s=d;var f=ze;ze|=2;var g=Xp();(Et!==n||Ct!==s)&&(kr=null,fo=Je()+500,li(n,s));do try{y_();break}catch(k){Jp(n,k)}while(!0);pd(),vc.current=g,ze=f,ft!==null?s=0:(Et=null,Ct=0,s=xt)}if(s!==0){if(s===2&&(f=ta(n),f!==0&&(d=f,s=Xd(n,f))),s===1)throw a=ja,li(n,0),ms(n,d),Yt(n,Je()),a;if(s===6)ms(n,d);else{if(f=n.current.alternate,(d&30)===0&&!p_(f)&&(s=Tc(n,d),s===2&&(g=ta(n),g!==0&&(d=g,s=Xd(n,g))),s===1))throw a=ja,li(n,0),ms(n,d),Yt(n,Je()),a;switch(n.finishedWork=f,n.finishedLanes=d,s){case 0:case 1:throw Error(t(345));case 2:ci(n,Qt,kr);break;case 3:if(ms(n,d),(d&130023424)===d&&(s=Qd+500-Je(),10<s)){if(gr(n,0)!==0)break;if(f=n.suspendedLanes,(f&d)!==d){Ht(),n.pingedLanes|=n.suspendedLanes&f;break}n.timeoutHandle=sd(ci.bind(null,n,Qt,kr),s);break}ci(n,Qt,kr);break;case 4:if(ms(n,d),(d&4194240)===d)break;for(s=n.eventTimes,f=-1;0<d;){var _=31-tn(d);g=1<<_,_=s[_],_>f&&(f=_),d&=~g}if(d=f,d=Je()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*m_(d/1960))-d,10<d){n.timeoutHandle=sd(ci.bind(null,n,Qt,kr),d);break}ci(n,Qt,kr);break;case 5:ci(n,Qt,kr);break;default:throw Error(t(329))}}}return Yt(n,Je()),n.callbackNode===a?Qp.bind(null,n):null}function Xd(n,s){var a=Da;return n.current.memoizedState.isDehydrated&&(li(n,s).flags|=256),n=Tc(n,s),n!==2&&(s=Qt,Qt=a,s!==null&&Zd(s)),n}function Zd(n){Qt===null?Qt=n:Qt.push.apply(Qt,n)}function p_(n){for(var s=n;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var d=0;d<a.length;d++){var f=a[d],g=f.getSnapshot;f=f.value;try{if(!Tn(g(),f))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ms(n,s){for(s&=~Kd,s&=~xc,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var a=31-tn(s),d=1<<a;n[a]=-1,s&=~d}}function Yp(n){if((ze&6)!==0)throw Error(t(327));mo();var s=gr(n,0);if((s&1)===0)return Yt(n,Je()),null;var a=Tc(n,s);if(n.tag!==0&&a===2){var d=ta(n);d!==0&&(s=d,a=Xd(n,d))}if(a===1)throw a=ja,li(n,0),ms(n,s),Yt(n,Je()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,ci(n,Qt,kr),Yt(n,Je()),null}function eh(n,s){var a=ze;ze|=1;try{return n(s)}finally{ze=a,ze===0&&(fo=Je()+500,Xl&&as())}}function ai(n){hs!==null&&hs.tag===0&&(ze&6)===0&&mo();var s=ze;ze|=1;var a=vn.transition,d=Le;try{if(vn.transition=null,Le=1,n)return n()}finally{Le=d,vn.transition=a,ze=s,(ze&6)===0&&as()}}function th(){cn=ho.current,Ze(ho)}function li(n,s){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,Hx(a)),ft!==null)for(a=ft.return;a!==null;){var d=a;switch(ud(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&Yl();break;case 3:lo(),Ze(Wt),Ze(jt),bd();break;case 5:wd(d);break;case 4:lo();break;case 13:Ze(nt);break;case 19:Ze(nt);break;case 10:gd(d.type._context);break;case 22:case 23:th()}a=a.return}if(Et=n,ft=n=ps(n.current,null),Ct=cn=s,xt=0,ja=null,Kd=xc=oi=0,Qt=Da=null,ri!==null){for(s=0;s<ri.length;s++)if(a=ri[s],d=a.interleaved,d!==null){a.interleaved=null;var f=d.next,g=a.pending;if(g!==null){var _=g.next;g.next=f,d.next=_}a.pending=d}ri=null}return n}function Jp(n,s){do{var a=ft;try{if(pd(),lc.current=hc,cc){for(var d=rt.memoizedState;d!==null;){var f=d.queue;f!==null&&(f.pending=null),d=d.next}cc=!1}if(ii=0,wt=vt=rt=null,Sa=!1,Ca=0,Gd.current=null,a===null||a.return===null){xt=1,ja=s,ft=null;break}e:{var g=n,_=a.return,k=a,j=s;if(s=Ct,k.flags|=32768,j!==null&&typeof j=="object"&&typeof j.then=="function"){var K=j,re=k,se=re.tag;if((re.mode&1)===0&&(se===0||se===11||se===15)){var te=re.alternate;te?(re.updateQueue=te.updateQueue,re.memoizedState=te.memoizedState,re.lanes=te.lanes):(re.updateQueue=null,re.memoizedState=null)}var me=Ep(_);if(me!==null){me.flags&=-257,bp(me,_,k,g,s),me.mode&1&&wp(g,K,s),s=me,j=K;var ye=s.updateQueue;if(ye===null){var ve=new Set;ve.add(j),s.updateQueue=ve}else ye.add(j);break e}else{if((s&1)===0){wp(g,K,s),nh();break e}j=Error(t(426))}}else if(tt&&k.mode&1){var ct=Ep(_);if(ct!==null){(ct.flags&65536)===0&&(ct.flags|=256),bp(ct,_,k,g,s),fd(co(j,k));break e}}g=j=co(j,k),xt!==4&&(xt=2),Da===null?Da=[g]:Da.push(g),g=_;do{switch(g.tag){case 3:g.flags|=65536,s&=-s,g.lanes|=s;var q=xp(g,j,s);Wm(g,q);break e;case 1:k=j;var V=g.type,W=g.stateNode;if((g.flags&128)===0&&(typeof V.getDerivedStateFromError=="function"||W!==null&&typeof W.componentDidCatch=="function"&&(ds===null||!ds.has(W)))){g.flags|=65536,s&=-s,g.lanes|=s;var ae=_p(g,k,s);Wm(g,ae);break e}}g=g.return}while(g!==null)}eg(a)}catch(xe){s=xe,ft===a&&a!==null&&(ft=a=a.return);continue}break}while(!0)}function Xp(){var n=vc.current;return vc.current=hc,n===null?hc:n}function nh(){(xt===0||xt===3||xt===2)&&(xt=4),Et===null||(oi&268435455)===0&&(xc&268435455)===0||ms(Et,Ct)}function Tc(n,s){var a=ze;ze|=2;var d=Xp();(Et!==n||Ct!==s)&&(kr=null,li(n,s));do try{g_();break}catch(f){Jp(n,f)}while(!0);if(pd(),ze=a,vc.current=d,ft!==null)throw Error(t(261));return Et=null,Ct=0,xt}function g_(){for(;ft!==null;)Zp(ft)}function y_(){for(;ft!==null&&!zs();)Zp(ft)}function Zp(n){var s=rg(n.alternate,n,cn);n.memoizedProps=n.pendingProps,s===null?eg(n):ft=s,Gd.current=null}function eg(n){var s=n;do{var a=s.alternate;if(n=s.return,(s.flags&32768)===0){if(a=c_(a,s,cn),a!==null){ft=a;return}}else{if(a=u_(a,s),a!==null){a.flags&=32767,ft=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{xt=6,ft=null;return}}if(s=s.sibling,s!==null){ft=s;return}ft=s=n}while(s!==null);xt===0&&(xt=5)}function ci(n,s,a){var d=Le,f=vn.transition;try{vn.transition=null,Le=1,v_(n,s,a,d)}finally{vn.transition=f,Le=d}return null}function v_(n,s,a,d){do mo();while(hs!==null);if((ze&6)!==0)throw Error(t(327));a=n.finishedWork;var f=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var g=a.lanes|a.childLanes;if(zu(n,g),n===Et&&(ft=Et=null,Ct=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||wc||(wc=!0,sg($s,function(){return mo(),null})),g=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||g){g=vn.transition,vn.transition=null;var _=Le;Le=1;var k=ze;ze|=4,Gd.current=null,h_(n,a),qp(a,n),Lx(nd),xr=!!td,nd=td=null,n.current=a,f_(a),pr(),ze=k,Le=_,vn.transition=g}else n.current=a;if(wc&&(wc=!1,hs=n,Ec=f),g=n.pendingLanes,g===0&&(ds=null),Rl(a.stateNode),Yt(n,Je()),s!==null)for(d=n.onRecoverableError,a=0;a<s.length;a++)f=s[a],d(f.value,{componentStack:f.stack,digest:f.digest});if(_c)throw _c=!1,n=Yd,Yd=null,n;return(Ec&1)!==0&&n.tag!==0&&mo(),g=n.pendingLanes,(g&1)!==0?n===Jd?Va++:(Va=0,Jd=n):Va=0,as(),null}function mo(){if(hs!==null){var n=Bn(Ec),s=vn.transition,a=Le;try{if(vn.transition=null,Le=16>n?16:n,hs===null)var d=!1;else{if(n=hs,hs=null,Ec=0,(ze&6)!==0)throw Error(t(331));var f=ze;for(ze|=4,ge=n.current;ge!==null;){var g=ge,_=g.child;if((ge.flags&16)!==0){var k=g.deletions;if(k!==null){for(var j=0;j<k.length;j++){var K=k[j];for(ge=K;ge!==null;){var re=ge;switch(re.tag){case 0:case 11:case 15:Ra(8,re,g)}var se=re.child;if(se!==null)se.return=re,ge=se;else for(;ge!==null;){re=ge;var te=re.sibling,me=re.return;if(Fp(re),re===K){ge=null;break}if(te!==null){te.return=me,ge=te;break}ge=me}}}var ye=g.alternate;if(ye!==null){var ve=ye.child;if(ve!==null){ye.child=null;do{var ct=ve.sibling;ve.sibling=null,ve=ct}while(ve!==null)}}ge=g}}if((g.subtreeFlags&2064)!==0&&_!==null)_.return=g,ge=_;else e:for(;ge!==null;){if(g=ge,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:Ra(9,g,g.return)}var q=g.sibling;if(q!==null){q.return=g.return,ge=q;break e}ge=g.return}}var V=n.current;for(ge=V;ge!==null;){_=ge;var W=_.child;if((_.subtreeFlags&2064)!==0&&W!==null)W.return=_,ge=W;else e:for(_=V;ge!==null;){if(k=ge,(k.flags&2048)!==0)try{switch(k.tag){case 0:case 11:case 15:yc(9,k)}}catch(xe){ot(k,k.return,xe)}if(k===_){ge=null;break e}var ae=k.sibling;if(ae!==null){ae.return=k.return,ge=ae;break e}ge=k.return}}if(ze=f,as(),en&&typeof en.onPostCommitFiberRoot=="function")try{en.onPostCommitFiberRoot(qs,n)}catch{}d=!0}return d}finally{Le=a,vn.transition=s}}return!1}function tg(n,s,a){s=co(a,s),s=xp(n,s,1),n=cs(n,s,1),s=Ht(),n!==null&&(Ks(n,1,s),Yt(n,s))}function ot(n,s,a){if(n.tag===3)tg(n,n,a);else for(;s!==null;){if(s.tag===3){tg(s,n,a);break}else if(s.tag===1){var d=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(ds===null||!ds.has(d))){n=co(a,n),n=_p(s,n,1),s=cs(s,n,1),n=Ht(),s!==null&&(Ks(s,1,n),Yt(s,n));break}}s=s.return}}function x_(n,s,a){var d=n.pingCache;d!==null&&d.delete(s),s=Ht(),n.pingedLanes|=n.suspendedLanes&a,Et===n&&(Ct&a)===a&&(xt===4||xt===3&&(Ct&130023424)===Ct&&500>Je()-Qd?li(n,0):Kd|=a),Yt(n,s)}function ng(n,s){s===0&&((n.mode&1)===0?s=1:(s=Jr,Jr<<=1,(Jr&130023424)===0&&(Jr=4194304)));var a=Ht();n=Nr(n,s),n!==null&&(Ks(n,s,a),Yt(n,a))}function __(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),ng(n,a)}function w_(n,s){var a=0;switch(n.tag){case 13:var d=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:d=n.stateNode;break;default:throw Error(t(314))}d!==null&&d.delete(s),ng(n,a)}var rg;rg=function(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps||Wt.current)Kt=!0;else{if((n.lanes&a)===0&&(s.flags&128)===0)return Kt=!1,l_(n,s,a);Kt=(n.flags&131072)!==0}else Kt=!1,tt&&(s.flags&1048576)!==0&&Om(s,ec,s.index);switch(s.lanes=0,s.tag){case 2:var d=s.type;pc(n,s),n=s.pendingProps;var f=to(s,jt.current);ao(s,a),f=Nd(null,s,d,n,f,a);var g=Sd();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Gt(d)?(g=!0,Jl(s)):g=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,xd(s),f.updater=fc,s.stateNode=f,f._reactInternals=s,jd(s,d,n,a),s=Md(null,s,d,!0,g,a)):(s.tag=0,tt&&g&&cd(s),qt(null,s,f,a),s=s.child),s;case 16:d=s.elementType;e:{switch(pc(n,s),n=s.pendingProps,f=d._init,d=f(d._payload),s.type=d,f=s.tag=b_(d),n=Sn(d,n),f){case 0:s=Od(null,s,d,n,a);break e;case 1:s=kp(null,s,d,n,a);break e;case 11:s=Ip(null,s,d,n,a);break e;case 14:s=Tp(null,s,d,Sn(d.type,n),a);break e}throw Error(t(306,d,""))}return s;case 0:return d=s.type,f=s.pendingProps,f=s.elementType===d?f:Sn(d,f),Od(n,s,d,f,a);case 1:return d=s.type,f=s.pendingProps,f=s.elementType===d?f:Sn(d,f),kp(n,s,d,f,a);case 3:e:{if(Ap(s),n===null)throw Error(t(387));d=s.pendingProps,g=s.memoizedState,f=g.element,Hm(n,s),oc(s,d,null,a);var _=s.memoizedState;if(d=_.element,g.isDehydrated)if(g={element:d,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){f=co(Error(t(423)),s),s=Pp(n,s,d,a,f);break e}else if(d!==f){f=co(Error(t(424)),s),s=Pp(n,s,d,a,f);break e}else for(ln=ss(s.stateNode.containerInfo.firstChild),an=s,tt=!0,Nn=null,a=$m(s,null,d,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(so(),d===f){s=Cr(n,s,a);break e}qt(n,s,d,a)}s=s.child}return s;case 5:return Km(s),n===null&&hd(s),d=s.type,f=s.pendingProps,g=n!==null?n.memoizedProps:null,_=f.children,rd(d,f)?_=null:g!==null&&rd(d,g)&&(s.flags|=32),Cp(n,s),qt(n,s,_,a),s.child;case 6:return n===null&&hd(s),null;case 13:return Rp(n,s,a);case 4:return _d(s,s.stateNode.containerInfo),d=s.pendingProps,n===null?s.child=io(s,null,d,a):qt(n,s,d,a),s.child;case 11:return d=s.type,f=s.pendingProps,f=s.elementType===d?f:Sn(d,f),Ip(n,s,d,f,a);case 7:return qt(n,s,s.pendingProps,a),s.child;case 8:return qt(n,s,s.pendingProps.children,a),s.child;case 12:return qt(n,s,s.pendingProps.children,a),s.child;case 10:e:{if(d=s.type._context,f=s.pendingProps,g=s.memoizedProps,_=f.value,Qe(rc,d._currentValue),d._currentValue=_,g!==null)if(Tn(g.value,_)){if(g.children===f.children&&!Wt.current){s=Cr(n,s,a);break e}}else for(g=s.child,g!==null&&(g.return=s);g!==null;){var k=g.dependencies;if(k!==null){_=g.child;for(var j=k.firstContext;j!==null;){if(j.context===d){if(g.tag===1){j=Sr(-1,a&-a),j.tag=2;var K=g.updateQueue;if(K!==null){K=K.shared;var re=K.pending;re===null?j.next=j:(j.next=re.next,re.next=j),K.pending=j}}g.lanes|=a,j=g.alternate,j!==null&&(j.lanes|=a),yd(g.return,a,s),k.lanes|=a;break}j=j.next}}else if(g.tag===10)_=g.type===s.type?null:g.child;else if(g.tag===18){if(_=g.return,_===null)throw Error(t(341));_.lanes|=a,k=_.alternate,k!==null&&(k.lanes|=a),yd(_,a,s),_=g.sibling}else _=g.child;if(_!==null)_.return=g;else for(_=g;_!==null;){if(_===s){_=null;break}if(g=_.sibling,g!==null){g.return=_.return,_=g;break}_=_.return}g=_}qt(n,s,f.children,a),s=s.child}return s;case 9:return f=s.type,d=s.pendingProps.children,ao(s,a),f=gn(f),d=d(f),s.flags|=1,qt(n,s,d,a),s.child;case 14:return d=s.type,f=Sn(d,s.pendingProps),f=Sn(d.type,f),Tp(n,s,d,f,a);case 15:return Np(n,s,s.type,s.pendingProps,a);case 17:return d=s.type,f=s.pendingProps,f=s.elementType===d?f:Sn(d,f),pc(n,s),s.tag=1,Gt(d)?(n=!0,Jl(s)):n=!1,ao(s,a),yp(s,d,f),jd(s,d,f,a),Md(null,s,d,!0,n,a);case 19:return Dp(n,s,a);case 22:return Sp(n,s,a)}throw Error(t(156,s.tag))};function sg(n,s){return Xo(n,s)}function E_(n,s,a,d){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(n,s,a,d){return new E_(n,s,a,d)}function rh(n){return n=n.prototype,!(!n||!n.isReactComponent)}function b_(n){if(typeof n=="function")return rh(n)?1:0;if(n!=null){if(n=n.$$typeof,n===U)return 11;if(n===Ce)return 14}return 2}function ps(n,s){var a=n.alternate;return a===null?(a=xn(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Nc(n,s,a,d,f,g){var _=2;if(d=n,typeof n=="function")rh(n)&&(_=1);else if(typeof n=="string")_=5;else e:switch(n){case C:return ui(a.children,f,g,s);case T:_=8,f|=8;break;case A:return n=xn(12,a,s,f|2),n.elementType=A,n.lanes=g,n;case E:return n=xn(13,a,s,f),n.elementType=E,n.lanes=g,n;case ie:return n=xn(19,a,s,f),n.elementType=ie,n.lanes=g,n;case Fe:return Sc(a,f,g,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case D:_=10;break e;case P:_=9;break e;case U:_=11;break e;case Ce:_=14;break e;case je:_=16,d=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=xn(_,a,s,f),s.elementType=n,s.type=d,s.lanes=g,s}function ui(n,s,a,d){return n=xn(7,n,d,s),n.lanes=a,n}function Sc(n,s,a,d){return n=xn(22,n,d,s),n.elementType=Fe,n.lanes=a,n.stateNode={isHidden:!1},n}function sh(n,s,a){return n=xn(6,n,null,s),n.lanes=a,n}function ih(n,s,a){return s=xn(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function I_(n,s,a,d,f){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ra(0),this.expirationTimes=ra(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ra(0),this.identifierPrefix=d,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function oh(n,s,a,d,f,g,_,k,j){return n=new I_(n,s,a,k,j),s===1?(s=1,g===!0&&(s|=8)):s=0,g=xn(3,null,null,s),n.current=g,g.stateNode=n,g.memoizedState={element:d,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},xd(g),n}function T_(n,s,a){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ce,key:d==null?null:""+d,children:n,containerInfo:s,implementation:a}}function ig(n){if(!n)return os;n=n._reactInternals;e:{if(bn(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Gt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Gt(a))return jm(n,a,s)}return s}function og(n,s,a,d,f,g,_,k,j){return n=oh(a,d,!0,n,f,g,_,k,j),n.context=ig(null),a=n.current,d=Ht(),f=fs(a),g=Sr(d,f),g.callback=s??null,cs(a,g,f),n.current.lanes=f,Ks(n,f,d),Yt(n,d),n}function Cc(n,s,a,d){var f=s.current,g=Ht(),_=fs(f);return a=ig(a),s.context===null?s.context=a:s.pendingContext=a,s=Sr(g,_),s.payload={element:n},d=d===void 0?null:d,d!==null&&(s.callback=d),n=cs(f,s,_),n!==null&&(An(n,f,_,g),ic(n,f,_)),_}function kc(n){return n=n.current,n.child?(n.child.tag===5,n.child.stateNode):null}function ag(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function ah(n,s){ag(n,s),(n=n.alternate)&&ag(n,s)}function N_(){return null}var lg=typeof reportError=="function"?reportError:function(n){console.error(n)};function lh(n){this._internalRoot=n}Ac.prototype.render=lh.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));Cc(n,s,null,null)},Ac.prototype.unmount=lh.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;ai(function(){Cc(null,n,null,null)}),s[Er]=null}};function Ac(n){this._internalRoot=n}Ac.prototype.unstable_scheduleHydration=function(n){if(n){var s=aa();n={blockedOn:null,target:n,priority:s};for(var a=0;a<nn.length&&s!==0&&s<nn[a].priority;a++);nn.splice(a,0,n),a===0&&Fi(n)}};function ch(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Pc(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function cg(){}function S_(n,s,a,d,f){if(f){if(typeof d=="function"){var g=d;d=function(){var K=kc(_);g.call(K)}}var _=og(s,d,n,0,null,!1,!1,"",cg);return n._reactRootContainer=_,n[Er]=_.current,xa(n.nodeType===8?n.parentNode:n),ai(),_}for(;f=n.lastChild;)n.removeChild(f);if(typeof d=="function"){var k=d;d=function(){var K=kc(j);k.call(K)}}var j=oh(n,0,!1,null,null,!1,!1,"",cg);return n._reactRootContainer=j,n[Er]=j.current,xa(n.nodeType===8?n.parentNode:n),ai(function(){Cc(s,j,a,d)}),j}function Rc(n,s,a,d,f){var g=a._reactRootContainer;if(g){var _=g;if(typeof f=="function"){var k=f;f=function(){var j=kc(_);k.call(j)}}Cc(s,_,n,f)}else _=S_(a,s,n,f,d);return kc(_)}ia=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var a=qe(s.pendingLanes);a!==0&&(sa(s,a|1),Yt(s,Je()),(ze&6)===0&&(fo=Je()+500,as()))}break;case 13:ai(function(){var d=Nr(n,1);if(d!==null){var f=Ht();An(d,n,1,f)}}),ah(n,1)}},Mi=function(n){if(n.tag===13){var s=Nr(n,134217728);if(s!==null){var a=Ht();An(s,n,134217728,a)}ah(n,134217728)}},oa=function(n){if(n.tag===13){var s=fs(n),a=Nr(n,s);if(a!==null){var d=Ht();An(a,n,s,d)}ah(n,s)}},aa=function(){return Le},la=function(n,s){var a=Le;try{return Le=n,s()}finally{Le=a}},hr=function(n,s,a){switch(s){case"input":if(Ls(n,a),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var d=a[s];if(d!==n&&d.form===n.form){var f=Ql(d);if(!f)throw Error(t(90));$o(d),Ls(d,f)}}}break;case"textarea":_l(n,a);break;case"select":s=a.value,s!=null&&wn(n,!!a.multiple,s,!1)}},bl=eh,Il=ai;var C_={usingClientEntryPoint:!1,Events:[Ea,Zi,Ql,Gr,Kr,eh]},Oa={findFiberByHostInstance:Zs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},k_={bundleType:Oa.bundleType,version:Oa.version,rendererPackageName:Oa.rendererPackageName,rendererConfig:Oa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ne.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Pl(n),n===null?null:n.stateNode},findFiberByHostInstance:Oa.findFiberByHostInstance||N_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jc.isDisabled&&jc.supportsFiber)try{qs=jc.inject(k_),en=jc}catch{}}return Jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=C_,Jt.createPortal=function(n,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ch(s))throw Error(t(200));return T_(n,s,null,a)},Jt.createRoot=function(n,s){if(!ch(n))throw Error(t(299));var a=!1,d="",f=lg;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=oh(n,1,!1,null,null,a,!1,d,f),n[Er]=s.current,xa(n.nodeType===8?n.parentNode:n),new lh(s)},Jt.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Pl(s),n=n===null?null:n.stateNode,n},Jt.flushSync=function(n){return ai(n)},Jt.hydrate=function(n,s,a){if(!Pc(s))throw Error(t(200));return Rc(null,n,s,!0,a)},Jt.hydrateRoot=function(n,s,a){if(!ch(n))throw Error(t(405));var d=a!=null&&a.hydratedSources||null,f=!1,g="",_=lg;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(_=a.onRecoverableError)),s=og(s,null,n,1,a??null,f,!1,g,_),n[Er]=s.current,xa(n),d)for(n=0;n<d.length;n++)a=d[n],f=a._getVersion,f=f(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,f]:s.mutableSourceEagerHydrationData.push(a,f);return new Ac(s)},Jt.render=function(n,s,a){if(!Pc(s))throw Error(t(200));return Rc(null,n,s,!1,a)},Jt.unmountComponentAtNode=function(n){if(!Pc(n))throw Error(t(40));return n._reactRootContainer?(ai(function(){Rc(null,null,n,!1,function(){n._reactRootContainer=null,n[Er]=null})}),!0):!1},Jt.unstable_batchedUpdates=eh,Jt.unstable_renderSubtreeIntoContainer=function(n,s,a,d){if(!Pc(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Rc(n,s,a,!1,d)},Jt.version="18.3.1-next-f1338f8080-20240426",Jt}var yg;function L_(){if(yg)return hh.exports;yg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),hh.exports=M_(),hh.exports}var vg;function F_(){if(vg)return Dc;vg=1;var r=L_();return Dc.createRoot=r.createRoot,Dc.hydrateRoot=r.hydrateRoot,Dc}var U_=F_();let po=null;function B_(){return po||(po=document.createElement("div"),po.className="fixed bottom-4 right-4 space-y-2 z-50",po.style.pointerEvents="none",document.body.appendChild(po)),po}function we(r,e="info"){const t=B_(),i=document.createElement("div");i.className=`bg-white shadow-lg rounded-lg px-4 py-3 border-l-4 transform translate-x-full transition-transform duration-300 ${e==="success"?"border-green-500 text-green-800":e==="error"?"border-red-500 text-red-800":e==="info"?"border-blue-500 text-blue-800":"border-gray-500 text-gray-800"}`,i.style.pointerEvents="auto",i.textContent=r,t.appendChild(i),setTimeout(()=>{i.style.transform="translateX(0)"},10),setTimeout(()=>{i.style.transform="translateX(full)",setTimeout(()=>{t.contains(i)&&t.removeChild(i)},300)},3e3)}function z_({cartCount:r,isMenuOpen:e,setIsMenuOpen:t,currentUser:i,onOpenAuth:o,onLogout:l,onOpenCart:h,onOpenWatchlist:m,onOpenAccountSummary:p}){const[v,w]=J.useState(!1),[I,N]=J.useState(["Electronics","Fashion","Furniture","Accessories"]),[M,L]=J.useState(""),[O,F]=J.useState("All Categories"),[$,z]=J.useState([]),[Y,ne]=J.useState(!1),G=J.useRef(null),ce=J.useRef(null);J.useEffect(()=>{const E=ie=>{v&&G.current&&!G.current.contains(ie.target)&&w(!1),Y&&ce.current&&!ce.current.contains(ie.target)&&ne(!1)};return document.addEventListener("mousedown",E),()=>document.removeEventListener("mousedown",E)},[v,Y]),J.useEffect(()=>{window.CategoryManager&&N(window.CategoryManager.getAll());const E=ie=>{ie.key==="luxemarket_categories"&&window.CategoryManager&&N(window.CategoryManager.getAll())};return window.addEventListener("storage",E),()=>window.removeEventListener("storage",E)},[]);const C=E=>`/#featured-products?category=${encodeURIComponent(E)}`,T=(E,ie)=>{E.preventDefault(),w(!1),F(ie),L(""),window.location.hash="products-section",window.dispatchEvent(new CustomEvent("filterByCategory",{detail:{category:ie}}))};J.useEffect(()=>{const E=new URLSearchParams(window.location.search),ie=E.get("search"),Ce=E.get("category");ie&&L(ie),Ce&&F(Ce)},[]),J.useEffect(()=>{if(M&&M.trim().length>0){const E=window.ProductManager?window.ProductManager.getAll():[],ie=M.toLowerCase(),Ce=E.filter(je=>{const Fe=je.name.toLowerCase().includes(ie)||je.description.toLowerCase().includes(ie)||je.category.toLowerCase().includes(ie),oe=O==="All Categories"||je.category.toLowerCase()===O.toLowerCase()||je.category.toLowerCase().includes(ie);return Fe&&oe}).slice(0,5);z(Ce),console.log(" Search Debug:",{searchTerm:ie,searchCategory:O,totalProducts:E.length,filteredResults:Ce.length,furnitureProducts:E.filter(je=>je.category.toLowerCase().includes("furniture")).length,allCategories:[...new Set(E.map(je=>je.category))]})}else z([])},[M,O]);const A=(E,ie)=>{try{let Ce=M,je=O;typeof E=="string"&&(Ce=E),typeof ie=="string"&&(je=ie),E===""&&(Ce="");let Fe="index.html?";const oe=[];Ce&&typeof Ce=="string"&&Ce.trim()&&oe.push(`search=${encodeURIComponent(Ce.trim())}`),je&&typeof je=="string"&&je!=="All Categories"&&oe.push(`category=${encodeURIComponent(je)}`);const B=Fe+oe.join("&")+"#featured-products";window.location.href=B,ne(!1)}catch(Ce){console.error("Search error:",Ce),we("Search failed: "+Ce.message,"error")}},D=E=>{ne(!1),L(""),window.dispatchEvent(new CustomEvent("openProduct",{detail:{productId:E.id}}))},P=(E,ie)=>{E.preventDefault(),we(`${ie} feature coming soon!`,"info")},U=(E,ie)=>{E.preventDefault(),ie()};return c.jsxs("header",{className:"font-sans text-sm","data-name":"header","data-file":"components/Header.js",children:[c.jsx("div",{className:"bg-white border-b border-gray-200 py-1 hidden md:block",children:c.jsxs("div",{className:"container-custom flex justify-between items-center text-xs text-gray-600",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[i?c.jsxs("span",{className:"flex items-center gap-1",children:["Hi, ",c.jsx("span",{className:"font-bold text-gray-800",children:i.name}),"!",c.jsx("button",{onClick:l,className:"text-blue-600 hover:underline ml-1",children:"Sign out"})]}):c.jsxs("span",{className:"flex items-center gap-1",children:["Hi! ",c.jsx("button",{onClick:()=>o(!1),className:"text-blue-600 hover:underline",children:"Sign in"})," or ",c.jsx("button",{onClick:()=>o(!0),className:"text-blue-600 hover:underline",children:"register"})]}),c.jsx("button",{onClick:E=>{E.preventDefault(),window.dispatchEvent(new CustomEvent("filterByDeals"))},className:"hover:underline text-[var(--accent-color)] font-medium cursor-pointer bg-transparent border-none",children:"Daily Deals"}),c.jsx("a",{href:"#footer",className:"hover:underline",children:"Help & Contact"})]}),c.jsxs("div",{className:"flex items-center gap-6",children:[c.jsx("a",{href:"#",onClick:E=>P(E,"Shipping selection"),className:"hover:underline",children:"Ship to"}),c.jsxs("a",{href:"#admin",className:"hover:underline flex items-center gap-1",children:[c.jsx("div",{className:"icon-store text-xs"}),"Sell"]}),c.jsxs("a",{href:"#",onClick:E=>U(E,m),className:"hover:underline flex items-center gap-1",children:["Watchlist ",c.jsx("div",{className:"icon-chevron-down text-[10px]"})]}),c.jsxs("div",{className:"relative group cursor-pointer z-[50]",children:[c.jsxs("span",{className:"hover:underline flex items-center gap-1",children:["My LuxeMarket ",c.jsx("div",{className:"icon-chevron-down text-[10px]"})]}),c.jsxs("div",{className:"absolute right-0 top-full bg-white border border-gray-200 shadow-lg rounded-b-md p-2 hidden group-hover:block w-40",children:[c.jsx("button",{onClick:p,className:"block w-full text-left px-2 py-1 hover:bg-gray-100",children:"Summary"}),c.jsx("a",{href:"#",onClick:E=>P(E,"Recently Viewed"),className:"block px-2 py-1 hover:bg-gray-100",children:"Recently Viewed"}),c.jsx("a",{href:"#",onClick:E=>P(E,"Bids/Offers"),className:"block px-2 py-1 hover:bg-gray-100",children:"Bids/Offers"}),c.jsx("a",{href:"#",onClick:E=>P(E,"Purchase History"),className:"block px-2 py-1 hover:bg-gray-100",children:"Purchase History"})]})]}),c.jsx("a",{href:"#",onClick:E=>P(E,"Notifications"),className:"hover:text-gray-900 relative",title:"Notifications",children:c.jsx("div",{className:"icon-bell text-lg"})}),c.jsxs("button",{onClick:h,className:"hover:text-gray-900 relative cart-button",title:"Cart",children:[c.jsx("div",{className:"icon-shopping-cart text-lg"}),r>0&&c.jsx("span",{className:"absolute -top-1 -right-2 inline-flex items-center justify-center px-1.5 py-0.5 text-[10px] font-bold leading-none text-white transform bg-red-600 rounded-full cart-count-badge",children:r})]})]})]})}),c.jsx("div",{className:"bg-white py-3 border-b border-gray-200 sticky top-0 z-[100] shadow-sm",children:c.jsx("div",{className:"container-custom",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:()=>t(!e),className:"md:hidden text-gray-600 hover:text-gray-900",children:c.jsx("div",{className:"icon-menu text-2xl"})}),c.jsxs("a",{href:"#",onClick:E=>{E.preventDefault(),window.location.hash=""},className:"flex-shrink-0 flex items-center gap-1 group",children:[c.jsx("div",{className:"icon-shopping-bag text-3xl text-[var(--primary-color)]"}),c.jsxs("span",{className:"text-2xl font-bold tracking-tighter text-gray-900",children:["Luxe",c.jsx("span",{className:"text-[var(--primary-color)]",children:"Market"})]})]}),c.jsxs("div",{ref:G,className:"relative hidden md:block",children:[c.jsxs("button",{onClick:E=>{console.log(`[Header] Toggle button clicked. Current state: ${v}`),E.stopPropagation(),w(!v)},className:`text-gray-600 hover:text-gray-900 text-sm font-medium flex items-center gap-1 whitespace-nowrap px-2 py-2 rounded-md transition-colors ${v?"bg-gray-100":""}`,children:["Shop by category ",c.jsx("div",{className:`icon-chevron-down text-xs transition-transform ${v?"rotate-180":""}`})]}),v&&c.jsxs("div",{className:"absolute top-full left-0 mt-2 w-64 bg-white border border-gray-200 shadow-xl rounded-lg p-4 z-[150] grid grid-cols-1 gap-2 animate-[fadeIn_0.2s_ease-out] category-dropdown",children:[I.map(E=>c.jsxs("a",{href:C(E),onClick:ie=>T(ie,E),className:"hover:text-[var(--primary-color)] hover:underline flex items-center gap-2 p-1 rounded hover:bg-gray-50",children:[c.jsx("div",{className:"icon-chevron-right text-xs text-gray-400"}),E]},E)),c.jsx("div",{className:"border-t border-gray-100 mt-2 pt-2",children:c.jsx("a",{href:"#featured-products",className:"font-bold hover:underline block p-1",children:"See all categories"})})]})]}),c.jsxs("div",{ref:ce,className:"flex-grow flex items-center max-w-4xl mx-auto relative",children:[c.jsxs("div",{className:"flex-grow flex border-2 border-gray-300 rounded-full hover:border-gray-400 focus-within:border-[var(--primary-color)] transition-colors h-10 md:h-11 relative bg-gray-100",children:[c.jsx("div",{className:"pl-3 flex items-center text-gray-400",children:c.jsx("div",{className:"icon-search text-gray-500"})}),c.jsx("input",{type:"text",placeholder:"Search for anything",className:"flex-grow px-3 bg-transparent border-none focus:outline-none text-gray-900 placeholder-gray-500 w-full",value:M,onChange:E=>{L(E.target.value),ne(!0)},onKeyDown:E=>E.key==="Enter"&&A(),onFocus:()=>ne(!0)}),c.jsx("div",{className:"hidden md:flex items-center border-l border-gray-300 px-3",children:c.jsxs("select",{value:O,onChange:E=>{const ie=E.target.value;F(ie),A(M,ie)},className:"bg-transparent text-gray-600 text-sm focus:outline-none cursor-pointer max-w-[120px] truncate",children:[c.jsx("option",{value:"All Categories",children:"All Categories"}),I.map(E=>c.jsx("option",{value:E,children:E},E))]})})]}),c.jsx("button",{onClick:()=>A(),className:"btn btn-primary rounded-full px-6 ml-2 h-10 md:h-11 text-base font-semibold min-w-[100px] hidden md:block hover:shadow-md transition-shadow",children:"Search"}),Y&&M.length>0&&c.jsxs("div",{className:"absolute top-full left-0 right-0 mt-3 bg-white border border-gray-200 shadow-2xl rounded-2xl overflow-hidden max-h-[70vh] overflow-y-auto z-[200] animate-[fadeIn_0.2s_ease-out] search-dropdown",children:[c.jsxs("div",{className:"p-4 border-b border-gray-50 bg-gray-50/50 flex justify-between items-center",children:[c.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Suggested Products"}),c.jsxs("span",{className:"text-xs text-gray-400",children:[$.length," results"]})]}),$.length>0?c.jsxs("div",{className:"divide-y divide-gray-50",children:[$.map(E=>c.jsxs("button",{onClick:()=>D(E),className:"flex items-center gap-4 p-4 hover:bg-blue-50/50 transition-all group w-full text-left",children:[c.jsx("div",{className:"w-14 h-14 rounded-xl overflow-hidden border border-gray-100 bg-gray-50 flex-shrink-0 group-hover:scale-105 transition-transform",children:c.jsx("img",{src:E.image,alt:E.name,className:"w-full h-full object-cover"})}),c.jsxs("div",{className:"flex-grow min-w-0",children:[c.jsx("div",{className:"text-sm font-bold text-gray-900 truncate mb-0.5",children:E.name}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xs px-2 py-0.5 bg-gray-100 rounded text-gray-500",children:E.category}),c.jsxs("div",{className:"flex text-yellow-400 text-[10px]",children:[c.jsx("div",{className:"icon-star fill-current"}),c.jsx("span",{className:"text-gray-400 ml-1 font-medium",children:E.rating})]})]})]}),c.jsxs("div",{className:"text-base font-black text-[var(--primary-color)]",children:["$",E.price.toFixed(2)]})]},E.id)),c.jsxs("button",{onClick:()=>A(),className:"w-full text-center py-4 text-sm text-[var(--primary-color)] font-bold hover:bg-blue-50 transition-colors bg-white border-t border-gray-100 flex items-center justify-center gap-2",children:[c.jsxs("span",{children:['View all results for "',M,'"']}),c.jsx("div",{className:"icon-arrow-right text-sm"})]})]}):c.jsxs("div",{className:"p-12 text-center",children:[c.jsx("div",{className:"icon-search text-gray-200 text-5xl mb-4 mx-auto"}),c.jsxs("p",{className:"text-gray-500 font-medium",children:['No products found for "',M,'"']}),c.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Try different keywords or categories"})]})]})]}),c.jsx("a",{href:"#",onClick:E=>P(E,"Advanced Search"),className:"text-xs text-gray-500 hover:text-gray-700 whitespace-nowrap hidden lg:block",children:"Advanced"}),c.jsxs("button",{onClick:h,className:"md:hidden relative text-gray-600 cart-button",children:[c.jsx("div",{className:"icon-shopping-cart text-2xl"}),r>0&&c.jsx("span",{className:"absolute -top-1 -right-2 inline-flex items-center justify-center px-1.5 py-0.5 text-xs font-bold leading-none text-white transform bg-red-600 rounded-full cart-count-badge",children:r})]})]})})}),c.jsx("div",{className:"border-b border-gray-200 bg-white hidden md:block",children:c.jsx("div",{className:"container-custom",children:c.jsxs("nav",{className:"flex items-center justify-center gap-6 py-2 text-[13px] text-gray-600",children:[c.jsx("a",{href:"#",onClick:E=>{E.preventDefault(),window.location.hash=""},className:"hover:text-[var(--primary-color)] font-medium border-b-2 border-transparent hover:border-[var(--primary-color)] pb-1 transition-colors",children:"Home"}),c.jsxs("a",{href:"#",onClick:E=>U(E,m),className:"hover:text-[var(--primary-color)] hover:border-[var(--primary-color)] border-b-2 border-transparent pb-1 transition-colors flex items-center gap-1",children:[c.jsx("div",{className:"icon-heart text-xs"})," Saved"]}),I.slice(0,6).map(E=>c.jsx("a",{href:C(E),onClick:ie=>T(ie,E),className:"hover:text-[var(--primary-color)] hover:border-[var(--primary-color)] border-b-2 border-transparent pb-1 transition-colors",children:E},E)),c.jsxs("a",{href:"#admin",className:"text-[var(--primary-color)] hover:underline flex items-center gap-1 ml-4 border-l pl-4 border-gray-300",children:[c.jsx("div",{className:"icon-cog text-xs"})," Admin"]})]})})}),e&&c.jsx("div",{className:"md:hidden bg-white border-b border-gray-200 shadow-xl absolute top-full left-0 right-0 z-[150] max-h-[80vh] overflow-y-auto",children:c.jsxs("div",{className:"p-4 flex flex-col space-y-4",children:[c.jsxs("div",{className:"font-bold text-lg mb-2 flex justify-between items-center",children:["Categories",c.jsx("button",{onClick:()=>t(!1),className:"text-gray-400",children:c.jsx("div",{className:"icon-x text-xl"})})]}),I.map(E=>c.jsx("a",{href:C(E),onClick:ie=>T(ie,E),className:"text-gray-700 py-1 border-b border-gray-50 pl-2",children:E},E)),c.jsx("div",{className:"font-bold text-lg mt-4 mb-2",children:"My Account"}),i?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"text-gray-700 py-1 pl-2",children:["Hi, ",i.name]}),c.jsx("button",{onClick:l,className:"text-left text-gray-700 py-1 pl-2",children:"Sign Out"})]}):c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>{t(!1),o(!1)},className:"text-left text-gray-700 py-1 pl-2",children:"Sign In"}),c.jsx("button",{onClick:()=>{t(!1),o(!0)},className:"text-left text-gray-700 py-1 pl-2",children:"Register"})]}),c.jsxs("a",{href:"#admin",className:"text-[var(--primary-color)] font-medium py-1 mt-2 pl-2 flex items-center gap-2",children:[c.jsx("div",{className:"icon-database text-sm"}),"Admin Dashboard"]})]})})]})}function $_(){const[r,e]=J.useState(0),t=(h,m)=>{h&&h.preventDefault(),we(`${m} feature coming soon!`,"info")},i=[{id:1,image:"https://images.unsplash.com/photo-1483985988355-763728e1935b?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80",subtitle:"NEW SEASON ARRIVALS",title:"Elevate Your Style With Premium Essentials",description:"Discover our curated collection of high-quality products designed to enhance your lifestyle.",ctaPrimary:"Shop Now",ctaSecondary:"View Collections",linkPrimary:"#featured-products",linkSecondary:"#featured-products"},{id:2,image:"https://images.unsplash.com/photo-1496181133206-80ce9b88a853?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80",subtitle:"LATEST TECH",title:"Next Gen Electronics For Your Home",description:"Upgrade your space with smart home devices and premium audio equipment.",ctaPrimary:"Shop Electronics",ctaSecondary:"See All Deals",linkPrimary:"?category=Electronics#featured-products",linkSecondary:"#featured-products"},{id:3,image:"https://images.unsplash.com/photo-1555041469-a586c61ea9bc?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80",subtitle:"COMFORT & DESIGN",title:"Modern Furniture For Modern Living",description:"Transform your workspace and living area with our ergonomic furniture collection.",ctaPrimary:"Browse Furniture",ctaSecondary:"Read Blog",linkPrimary:"?category=Furniture#featured-products",linkSecondary:"#"}];J.useEffect(()=>{const h=setInterval(()=>{e(m=>(m+1)%i.length)},5e3);return()=>clearInterval(h)},[i.length]);const o=()=>{e(h=>(h+1)%i.length)},l=()=>{e(h=>(h-1+i.length)%i.length)};return c.jsxs("div",{className:"hero-section relative bg-gray-900 overflow-hidden h-[300px] md:h-[400px] lg:h-[500px] group hero-carousel","data-name":"hero-carousel","data-file":"components/Hero.js",children:[i.map((h,m)=>c.jsxs("div",{className:`hero-carousel-slide transition-opacity duration-1000 ease-in-out ${m===r?"opacity-100 active":"opacity-0"}`,children:[c.jsxs("div",{className:"absolute inset-0",children:[c.jsx("img",{className:`w-full h-full object-cover opacity-60 transition-opacity duration-1000 ${m===r?"animate-zoom":""}`,src:h.image,alt:h.title}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900 via-gray-900/40 to-transparent"})]}),c.jsx("div",{className:"relative container-custom h-full flex items-center",children:c.jsxs("div",{className:"max-w-2xl animate-[fadeIn_0.8s_ease-out]",children:[c.jsx("span",{className:"inline-block py-1 px-3 rounded bg-[var(--primary-color)] bg-opacity-20 text-[var(--accent-color)] text-sm font-semibold tracking-wider mb-4 border border-[var(--primary-color)] border-opacity-30",children:h.subtitle}),c.jsx("h1",{className:"text-4xl md:text-5xl lg:text-7xl font-bold text-white mb-6 leading-[1.1] tracking-tight drop-shadow-lg",children:h.title}),c.jsx("p",{className:"text-xl text-gray-200 mb-8 leading-relaxed max-w-xl drop-shadow-md",children:h.description}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[c.jsx("a",{href:h.linkPrimary,className:"btn bg-white text-gray-900 hover:bg-gray-100 text-lg px-10 py-4 rounded-full font-bold shadow-xl transition-all hover:scale-105 active:scale-95",children:h.ctaPrimary}),h.linkSecondary==="#"?c.jsx("button",{onClick:p=>t(p,h.ctaSecondary),className:"btn bg-white/10 text-white hover:bg-white/20 border-2 border-white/30 text-lg px-10 py-4 rounded-full backdrop-blur-md font-semibold transition-all hover:border-white/60",children:h.ctaSecondary}):c.jsx("a",{href:h.linkSecondary,className:"btn bg-white/10 text-white hover:bg-white/20 border-2 border-white/30 text-lg px-10 py-4 rounded-full backdrop-blur-md font-semibold transition-all hover:border-white/60",children:h.ctaSecondary})]})]})})]},h.id)),c.jsx("button",{onClick:l,className:"hero-carousel-controls absolute left-4 top-1/2 -translate-y-1/2 w-12 h-12 rounded-full bg-white/10 hover:bg-white/20 backdrop-blur-sm text-white flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx("div",{className:"icon-chevron-left text-2xl"})}),c.jsx("button",{onClick:o,className:"hero-carousel-controls absolute right-4 top-1/2 -translate-y-1/2 w-12 h-12 rounded-full bg-white/10 hover:bg-white/20 backdrop-blur-sm text-white flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx("div",{className:"icon-chevron-right text-2xl"})}),c.jsx("div",{className:"hero-carousel-indicators absolute bottom-6 left-1/2 -translate-x-1/2 flex gap-2",children:i.map((h,m)=>c.jsx("button",{onClick:()=>e(m),className:`w-3 h-3 rounded-full transition-all duration-300 ${m===r?"bg-[var(--primary-color)] w-8":"bg-white/50 hover:bg-white/80"}`},m))})]})}function q_({product:r,onProductClick:e}){const[t,i]=J.useState(0),o=r.images&&r.images.length>0?r.images:[r.image||"https://via.placeholder.com/300x300?text=No+Image"],l=o[t];return J.useEffect(()=>{if(o.length<=1)return;const h=setInterval(()=>{i(m=>(m+1)%o.length)},3e3);return()=>clearInterval(h)},[o.length]),c.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-lg transition-all duration-300 group cursor-pointer minimal-product-card",onClick:()=>e(r.id),children:[c.jsxs("div",{className:"relative aspect-square overflow-hidden bg-gray-100 product-image-container",children:[c.jsx("img",{src:l,alt:r.name,className:"w-full h-full object-cover product-image transition-opacity duration-500"},t),r.isDailyDeal&&c.jsxs("div",{className:"absolute top-2 left-2 bg-red-600 text-white px-2 py-1 rounded-full text-xs font-bold shadow-lg animate-pulse",children:[" ",r.discountPercent,"% OFF"]}),o.length>1&&c.jsx("div",{className:"absolute bottom-2 left-0 right-0 flex justify-center gap-1",children:o.map((h,m)=>c.jsx("div",{className:`w-1.5 h-1.5 rounded-full transition-all duration-300 ${m===t?"bg-white w-4":"bg-white/50"}`},m))})]}),c.jsxs("div",{className:"p-4 text-center",children:[c.jsx("h3",{className:"font-semibold text-gray-900 text-sm mb-1 product-name-hover line-clamp-2",children:r.name}),c.jsx("p",{className:"text-xs text-gray-500",children:r.category}),r.isDailyDeal&&c.jsxs("div",{className:"mt-2",children:[c.jsxs("div",{className:"flex items-center justify-center gap-2",children:[c.jsxs("span",{className:"text-sm font-bold text-red-600",children:["$",r.price.toFixed(2)]}),c.jsxs("span",{className:"text-xs text-gray-500 line-through",children:["$",r.originalPrice.toFixed(2)]})]}),c.jsx("p",{className:"text-xs text-red-600 font-medium",children:"Daily Deal!"})]})]})]})}function H_({products:r,onProductClick:e}){return c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-6 home-products-grid",children:r&&r.length>0?r.map(t=>c.jsx(q_,{product:t,onProductClick:e},t.id)):c.jsx("div",{className:"col-span-full text-center py-12",children:c.jsx("p",{className:"text-gray-500",children:"No products available"})})})}function W_(){const[r,e]=J.useState([]),[t,i]=J.useState(!0),[o,l]=J.useState(""),[h,m]=J.useState(!1),[p,v]=J.useState(!1),[w,I]=J.useState(1),N=12,M=J.useRef(null),L=J.useCallback(async()=>{try{if(i(!0),e([]),window.ProductManager){console.log(" FrontPage: Loading products...");let G;window.ProductManager.getAllWithDealsAsync?(console.log(" FrontPage: Using getAllWithDealsAsync from Firebase..."),G=await window.ProductManager.getAllWithDealsAsync()):window.ProductManager.getAllAsync?(console.log(" FrontPage: Using getAllAsync from Firebase..."),G=await window.ProductManager.getAllAsync()):(console.log(" FrontPage: Using sync method"),G=window.ProductManager.getAll()),console.log(" FrontPage: Total products loaded:",G.length),console.log(" FrontPage: First product:",G[0]);const ce=G[0];ce&&typeof ce.stock>"u"&&(console.log(" Products missing stock field, resetting data..."),window.ProductManager.resetToDefaults&&(window.ProductManager.resetToDefaults(),G=window.ProductManager.getAll()));let C;h?(C=G.filter(T=>T.isDailyDeal||T.dailyDeal),console.log(` Daily deals filter: ${C.length} deals found`)):o&&o!=="All Categories"?(C=G.filter(T=>T.category&&T.category.toLowerCase()===o.toLowerCase()),console.log(` Filtered by category "${o}":`,C.length,"products found")):p?(C=G,console.log(" Showing all products:",C.length)):(window.ProductManager.getHomePageProducts?C=window.ProductManager.getHomePageProducts(12,G):C=G.slice(0,12),console.log(" Home page: Setting",C.length,"products")),console.log(" Daily deals found:",C.filter(T=>T.isDailyDeal||T.dailyDeal).length),e(C),I(1)}else console.error(" ProductManager not found on window")}catch(G){console.error(" Error loading products:",G)}finally{i(!1)}},[o,h,p]);J.useEffect(()=>{L();const G=()=>{console.log(" Admin update detected, refreshing home page products..."),L()},ce=A=>{const{category:D}=A.detail;console.log(" Category filter event received:",D),l(D),m(!1),v(!1),setTimeout(()=>{M.current&&M.current.scrollIntoView({behavior:"smooth",block:"start"})},100)},C=()=>{console.log(" Daily deals filter event received"),m(!0),l(""),v(!1),setTimeout(()=>{M.current&&M.current.scrollIntoView({behavior:"smooth",block:"start"})},100)},T=()=>{console.log(" Show all products event received"),v(!0),l(""),m(!1),setTimeout(()=>{M.current&&M.current.scrollIntoView({behavior:"smooth",block:"start"})},100)};return window.addEventListener("adminUpdate",G),window.addEventListener("filterByCategory",ce),window.addEventListener("filterByDeals",C),window.addEventListener("showAllProducts",T),()=>{window.removeEventListener("adminUpdate",G),window.removeEventListener("filterByCategory",ce),window.removeEventListener("filterByDeals",C),window.removeEventListener("showAllProducts",T)}},[L]);const O=G=>{window.dispatchEvent(new CustomEvent("openProduct",{detail:{productId:G}}))},F=Math.ceil(r.length/N),$=(w-1)*N,z=$+N,Y=r.slice($,z),ne=G=>{I(G),M.current&&M.current.scrollIntoView({behavior:"smooth",block:"start"})};return t?c.jsx("section",{className:"py-16 bg-white",ref:M,children:c.jsx("div",{className:"container-custom",children:c.jsxs("div",{className:"text-center",children:[c.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Featured Products"}),c.jsx("p",{className:"text-gray-600",children:"Loading products..."})]})})}):c.jsx("section",{className:"py-16 bg-white featured-products-section featured-products-home",ref:M,id:"products-section",children:c.jsxs("div",{className:"container-custom",children:[c.jsxs("div",{className:"text-center mb-12",children:[c.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:h?" Daily Deals":o&&o!=="All Categories"?`${o} Products`:p?"All Products":"Featured Products"}),c.jsx("p",{className:"text-gray-600 mb-6",children:h?"Special discounts available for a limited time!":o&&o!=="All Categories"?`Browse our ${o.toLowerCase()} collection`:p?"Browse our complete product catalog":"Click on any product to see details, pricing, and purchase options"}),o&&o!=="All Categories"||h||p?c.jsx("button",{onClick:()=>{l(""),m(!1),v(!1),I(1)},className:"btn btn-secondary text-sm mb-4",children:" Back to Home"}):null]}),c.jsx("div",{className:"home-products-grid",children:c.jsx(H_,{products:Y,onProductClick:O})}),F>1&&c.jsxs("div",{className:"flex justify-center items-center gap-2 mt-12",children:[c.jsx("button",{onClick:()=>ne(w-1),disabled:w===1,className:"btn btn-secondary px-4 py-2 disabled:opacity-50 disabled:cursor-not-allowed",children:" Previous"}),c.jsx("div",{className:"flex gap-2",children:Array.from({length:F},(G,ce)=>ce+1).map(G=>c.jsx("button",{onClick:()=>ne(G),className:`px-4 py-2 rounded-md font-medium transition-colors ${w===G?"bg-[var(--primary-color)] text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:G},G))}),c.jsx("button",{onClick:()=>ne(w+1),disabled:w===F,className:"btn btn-secondary px-4 py-2 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next "})]}),c.jsxs("div",{className:"text-center mt-8",children:[!p&&!o&&!h&&c.jsx("button",{onClick:()=>{v(!0),l(""),m(!1),I(1)},className:"btn btn-primary px-8 py-3 text-lg hover:shadow-lg transition-shadow view-all-btn mr-4",children:"View All Products"}),c.jsx("p",{className:"text-sm text-gray-500 mt-4",children:h?`Showing ${r.length} daily deals`:o&&o!=="All Categories"?`Showing ${$+1}-${Math.min(z,r.length)} of ${r.length} ${o.toLowerCase()} products`:p?`Showing ${$+1}-${Math.min(z,r.length)} of ${r.length} products (Page ${w} of ${F})`:`Showing ${r.length} featured products`})]})]})})}function G_(){const r=new Date().getFullYear(),e=(i,o)=>{i&&i.preventDefault(),we(`${o} feature coming soon!`,"info")},t=[{title:"Buy",links:["Registration","Money Back Guarantee","Bidding & buying help","Stores","Charity Shop","Seasonal Sales"]},{title:"Sell",links:["Start selling","Learn to sell","Affiliates","Seller Information Center"]},{title:"Stay Connected",links:["LuxeMarket Blog","Facebook","Twitter","Instagram","Pinterest"]},{title:"About LuxeMarket",links:["Company Info","News","Investors","Careers","Government Relations","Advertise with us","Policies"]},{title:"Help & Contact",links:["Seller Information Center","Contact Us","Resolution Center","Returns","Shipping"]}];return c.jsx("footer",{className:"bg-white border-t border-gray-200 pt-12 pb-6 text-[13px]","data-name":"footer","data-file":"components/Footer.js",children:c.jsxs("div",{className:"container-custom",children:[c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-8 mb-12",children:t.map((i,o)=>c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-gray-700 mb-4",children:i.title}),c.jsx("ul",{className:"space-y-2",children:i.links.map(l=>c.jsx("li",{children:c.jsx("a",{href:"#",onClick:h=>e(h,l),className:"text-gray-600 hover:text-[var(--primary-color)] hover:underline transition-colors block",children:l})},l))}),i.title==="Stay Connected"&&c.jsxs("div",{className:"flex gap-3 mt-4",children:[c.jsx("a",{href:"#",onClick:l=>e(l,"Facebook"),className:"w-8 h-8 flex items-center justify-center rounded-full bg-gray-100 hover:bg-blue-600 hover:text-white transition-colors",children:c.jsx("div",{className:"icon-facebook text-sm"})}),c.jsx("a",{href:"#",onClick:l=>e(l,"Twitter"),className:"w-8 h-8 flex items-center justify-center rounded-full bg-gray-100 hover:bg-sky-400 hover:text-white transition-colors",children:c.jsx("div",{className:"icon-twitter text-sm"})}),c.jsx("a",{href:"#",onClick:l=>e(l,"Instagram"),className:"w-8 h-8 flex items-center justify-center rounded-full bg-gray-100 hover:bg-pink-600 hover:text-white transition-colors",children:c.jsx("div",{className:"icon-instagram text-sm"})})]})]},o))}),c.jsx("div",{className:"border-t border-gray-200 pt-8",children:c.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 text-xs text-gray-500",children:[c.jsxs("div",{className:"flex flex-wrap justify-center md:justify-start gap-4 mb-2 md:mb-0",children:[c.jsx("a",{href:"#",onClick:i=>e(i,"Accessibility"),className:"hover:underline",children:"Accessibility"}),c.jsx("span",{className:"hidden md:inline",children:"|"}),c.jsx("a",{href:"#",onClick:i=>e(i,"User Agreement"),className:"hover:underline",children:"User Agreement"}),c.jsx("span",{className:"hidden md:inline",children:"|"}),c.jsx("a",{href:"#",onClick:i=>e(i,"Privacy"),className:"hover:underline",children:"Privacy"}),c.jsx("span",{className:"hidden md:inline",children:"|"}),c.jsx("a",{href:"#",onClick:i=>e(i,"Payments Terms of Use"),className:"hover:underline",children:"Payments Terms of Use"}),c.jsx("span",{className:"hidden md:inline",children:"|"}),c.jsx("a",{href:"#",onClick:i=>e(i,"Cookies"),className:"hover:underline",children:"Cookies"}),c.jsx("span",{className:"hidden md:inline",children:"|"}),c.jsx("a",{href:"#",onClick:i=>e(i,"Individual Privacy Rights"),className:"hover:underline",children:"Do not sell my personal info"})]}),c.jsx("div",{className:"flex items-center gap-1",children:c.jsxs("span",{children:["Copyright  1995-",r," LuxeMarket Inc. All Rights Reserved."]})})]})})]})})}function K_({isOpen:r,isRegister:e=!1,onClose:t,onLogin:i}){const[o,l]=J.useState(e),[h,m]=J.useState({name:"",email:"",password:""});if(J.useEffect(()=>{l(e)},[e]),!r)return null;const p=v=>{v.preventDefault();const w={name:o?h.name:h.email.split("@")[0]||"User",email:h.email};sessionStorage.setItem("luxemarket_user",JSON.stringify(w)),i(w),t(),m({name:"",email:"",password:""})};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999] animate-[fadeIn_0.2s_ease-out]",onClick:t,children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md overflow-hidden relative m-4",onClick:v=>v.stopPropagation(),children:[c.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:c.jsx("div",{className:"icon-x text-xl"})}),c.jsxs("div",{className:"p-8",children:[c.jsxs("div",{className:"text-center mb-6",children:[c.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-blue-100 text-[var(--primary-color)] mb-4",children:c.jsx("div",{className:"icon-user text-2xl"})}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:o?"Create Account":"Welcome Back"}),c.jsx("p",{className:"text-gray-500 text-sm mt-1",children:o?"Create an account to complete your purchase":"Sign in to add items to cart and checkout"})]}),c.jsxs("form",{onSubmit:p,className:"space-y-4",children:[o&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),c.jsx("input",{type:"text",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[var(--primary-color)] outline-none",value:h.name,onChange:v=>m({...h,name:v.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),c.jsx("input",{type:"email",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[var(--primary-color)] outline-none",value:h.email,onChange:v=>m({...h,email:v.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),c.jsx("input",{type:"password",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[var(--primary-color)] outline-none",value:h.password,onChange:v=>m({...h,password:v.target.value})})]}),c.jsx("button",{type:"submit",className:"w-full btn btn-primary py-2.5 mt-2",children:o?"Register":"Sign In"})]}),c.jsxs("div",{className:"mt-6 text-center text-sm",children:[c.jsx("span",{className:"text-gray-500",children:o?"Already have an account?":"New to LuxeMarket?"}),c.jsx("button",{onClick:()=>l(!o),className:"text-[var(--primary-color)] font-medium hover:underline ml-1",children:o?"Sign In":"Create account"})]}),c.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:c.jsx("button",{onClick:()=>{const v={name:"Demo User",email:"demo@luxemarket.com"};sessionStorage.setItem("luxemarket_user",JSON.stringify(v)),i(v),t()},className:"w-full text-sm text-gray-600 hover:text-gray-800 py-2 px-4 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:" Continue as Demo User (for testing)"})})]})]})})}const Ja=(()=>{const r="luxemarket_cart",e=()=>{const o=localStorage.getItem(r);if(!o)return[];try{return JSON.parse(o)}catch{return[]}},t=o=>{localStorage.setItem(r,JSON.stringify(o)),window.dispatchEvent(new Event("cartUpdated"))};let i=e();return{getCart(){return[...i]},getCount(){return i.reduce((o,l)=>o+l.quantity,0)},getItemCount(){return this.getCount()},getTotal(){return i.reduce((o,l)=>{const h=window.ProductManager?window.ProductManager.getById(l.id):null;return h?o+h.price*l.quantity:o},0)},add(o,l=1){if(window.ProductManager){const m=window.ProductManager.getById(o);if(!m)throw new Error("Product not found");if(!window.ProductManager.isInStock(o))throw new Error("Product is out of stock");const p=i.find(w=>w.id===o)?.quantity||0;if(p+l>m.stock)throw new Error(`Only ${m.stock} items available (${p} already in cart)`)}const h=i.find(m=>m.id===o);return h?h.quantity+=l:i.push({id:o,quantity:l}),t(i),!0},update(o,l){const h=i.find(m=>m.id===o);if(!h)return!1;if(l<=0)return this.remove(o),!0;if(window.ProductManager){const m=window.ProductManager.getById(o);if(m&&l>m.stock)throw new Error(`Only ${m.stock} items available`)}return h.quantity=l,t(i),!0},remove(o){const l=i.filter(m=>m.id!==o),h=l.length!==i.length;return h&&(i=l,t(i)),h},clear(){i=[],t(i)},enableAutoSave(o=3e4){return this._autoSaveInterval&&clearInterval(this._autoSaveInterval),this._autoSaveInterval=setInterval(()=>{try{t(i),console.log(" Auto-saved cart data")}catch(l){console.error(" Cart auto-save failed:",l)}},o),this._autoSaveInterval},disableAutoSave(){this._autoSaveInterval&&(clearInterval(this._autoSaveInterval),this._autoSaveInterval=null)},forceSave(){try{return t(i),console.log(" Force saved cart data"),!0}catch(o){return console.error(" Cart force save failed:",o),!1}}}})();window.CartManager=Ja;function Q_({currentProduct:r,onProductClick:e}){const[t,i]=J.useState([]);return J.useEffect(()=>{if(!r||!window.ProductManager)return;const l=window.ProductManager.getAll().filter(h=>h.id!==r.id&&h.category===r.category).slice(0,4);i(l)},[r]),!t||t.length===0?null:c.jsxs("div",{className:"mt-8 pt-8 border-t border-gray-200",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Related Products"}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:t.map(o=>c.jsxs("div",{onClick:()=>e(o.id),className:"bg-white rounded-lg border border-gray-200 overflow-hidden hover:shadow-lg transition-all duration-300 cursor-pointer group",children:[c.jsx("div",{className:"relative aspect-square overflow-hidden bg-gray-100",children:c.jsx("img",{src:o.images?.[0]||o.image||"https://via.placeholder.com/200",alt:o.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"})}),c.jsxs("div",{className:"p-3",children:[c.jsx("h4",{className:"font-semibold text-sm text-gray-900 line-clamp-2 mb-1",children:o.name}),c.jsx("p",{className:"text-xs text-gray-500 mb-2",children:o.category}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("span",{className:"text-sm font-bold text-[var(--primary-color)]",children:["$",o.price.toFixed(2)]}),c.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[c.jsx("div",{className:"icon-star text-yellow-400 fill-current text-[10px]"}),o.rating]})]})]})]},o.id))})]})}function Y_({product:r,onClose:e,currentUser:t,onOpenAuth:i,onCartUpdate:o}){const[l,h]=J.useState(null),[m,p]=J.useState(0),[v,w]=J.useState(!1),[I,N]=J.useState(1);if(J.useEffect(()=>{r&&(r.colors&&r.colors.length>0&&h(r.colors[0].name),p(0),window.WatchlistManager&&w(window.WatchlistManager.isInWatchlist(r.id)))},[r]),!r)return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg p-8",children:[c.jsx("p",{children:"Product not found"}),c.jsx("button",{onClick:e,className:"btn btn-primary mt-4",children:"Close"})]})});let M=[];if(l&&r.colors){const E=r.colors.find(ie=>ie.name===l);E&&E.images&&(M=E.images)}M.length===0&&r.images&&(M=r.images.map(E=>typeof E=="string"?E:E.url)),M.length===0&&r.image&&(M=[r.image]);const L=[...M];r.videoUrl&&L.push({type:"video",url:r.videoUrl,thumbnail:M[0]||"https://via.placeholder.com/500x500?text=Video"});const O=L[m],F=O&&typeof O=="object"&&O.type==="video",$=()=>{L.length>1&&p(E=>(E+1)%L.length)},z=()=>{L.length>1&&p(E=>(E-1+L.length)%L.length)},Y=E=>{p(E)},ne=E=>{h(E),p(0)};J.useEffect(()=>{document.body.style.overflow="hidden";const E=ie=>{ie.key==="ArrowLeft"?(ie.preventDefault(),z()):ie.key==="ArrowRight"?(ie.preventDefault(),$()):ie.key==="Escape"&&(ie.preventDefault(),e())};return document.addEventListener("keydown",E),()=>{document.body.style.overflow="unset",document.removeEventListener("keydown",E)}},[]);const G=()=>{if(!t){we("Please sign in to add items to your cart","info"),i(!1);return}if(r.stock===0){we("This product is out of stock","error");return}if(I>r.stock){we(`Only ${r.stock} items available`,"error");return}try{Ja.add(r.id,I)?(o(),window.dispatchEvent(new CustomEvent("cartUpdated")),we(`Added ${I} ${r.name}${I>1?"s":""} to cart`,"success")):we("Failed to add item to cart","error")}catch(E){console.error("Add to cart error:",E),we(E.message||"Failed to add item to cart","error")}},ce=()=>{if(window.WatchlistManager){const E=window.WatchlistManager.toggleWatchlist(r.id);w(E),we(E?`Added ${r.name} to watchlist`:`Removed ${r.name} from watchlist`,"success")}},C=()=>{if(!t){we("Please sign in to purchase this item","info"),i(!0);return}if(r.stock===0){we("This product is out of stock","error");return}if(I>r.stock){we(`Only ${r.stock} items available`,"error");return}try{Ja.add(r.id,I)?(o(),window.dispatchEvent(new CustomEvent("cartUpdated")),e(),setTimeout(()=>{window.dispatchEvent(new CustomEvent("openCheckout")),we(`Proceeding to checkout with ${I} ${r.name}${I>1?"s":""}`,"success")},100)):we("Failed to add item to cart","error")}catch(E){console.error("Buy now error:",E),we(E.message||"Failed to process purchase","error")}},[T,A]=J.useState(!1),D=200,P=r.description&&r.description.length>D,U=P&&!T?r.description.substring(0,D)+"...":r.description;return c.jsx("div",{className:"modal-overlay fixed inset-0 bg-black bg-opacity-50 modal-backdrop flex items-center justify-center p-4 overflow-y-auto",children:c.jsxs("div",{className:"product-modal bg-white rounded-lg max-w-4xl w-full my-8 shadow-2xl",children:[c.jsxs("div",{className:"bg-white border-b border-gray-200 p-4 flex justify-between items-center rounded-t-lg",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Product Details"}),L.length>1&&c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Use   keys or click thumbnails to navigate"})]}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 text-3xl leading-none w-8 h-8 flex items-center justify-center hover:bg-gray-100 rounded-full transition-colors",title:"Close (Esc)",children:""})]}),c.jsx("div",{className:"max-h-[calc(90vh-80px)] overflow-y-auto",children:c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"aspect-square rounded-lg overflow-hidden bg-gray-100 relative",children:[F?c.jsx("video",{src:O.url,controls:!0,className:"w-full h-full object-cover",poster:O.thumbnail,children:"Your browser does not support the video tag."}):c.jsx("img",{src:typeof O=="string"?O:O?.url||"https://via.placeholder.com/500x500?text=No+Image",alt:r.name,className:"w-full h-full object-cover"}),L.length>1&&c.jsxs("div",{className:"absolute top-4 right-4 bg-black bg-opacity-70 text-white text-sm px-3 py-1 rounded-full",children:[m+1," / ",L.length,F&&c.jsx("span",{className:"ml-1",children:""})]})]}),L.length>1&&c.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:L.map((E,ie)=>{const Ce=typeof E=="object"&&E.type==="video",je=Ce?E.thumbnail:typeof E=="string"?E:E.url;return c.jsxs("button",{onClick:()=>Y(ie),onMouseEnter:()=>Y(ie),className:`flex-shrink-0 w-16 h-16 rounded-lg border-2 overflow-hidden relative transition-all hover:scale-105 ${ie===m?"border-blue-500 shadow-md":"border-gray-300 hover:border-gray-400"}`,title:Ce?"Play video":`View image ${ie+1}`,children:[c.jsx("img",{src:je,alt:Ce?"Video thumbnail":`View ${ie+1}`,className:"w-full h-full object-cover"}),Ce&&c.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-30 flex items-center justify-center",children:c.jsx("div",{className:"w-6 h-6 bg-white bg-opacity-90 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-black text-xs",children:""})})})]},ie)})})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2 break-words",children:r.name}),c.jsxs("div",{className:"text-2xl font-bold text-blue-600 mb-4",children:["$",r.price.toFixed(2)]}),c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("span",{className:"inline-block px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm",children:r.category}),r.stock===0?c.jsx("span",{className:"inline-block px-4 py-2 bg-red-100 text-red-700 rounded-full text-sm font-bold border border-red-200 stock-status out-of-stock",children:" Out of Stock"}):r.stock<=5?c.jsxs("span",{className:"inline-block px-4 py-2 bg-orange-100 text-orange-700 rounded-full text-sm font-bold border border-orange-200 stock-status low-stock",children:[" Only ",r.stock," left"]}):c.jsxs("span",{className:"inline-block px-4 py-2 bg-green-100 text-green-700 rounded-full text-sm font-bold border border-green-200 stock-status",children:[" In Stock (",r.stock," available)"]})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Description"}),c.jsx("div",{className:"text-gray-600 leading-relaxed break-words",children:U}),P&&c.jsx("button",{onClick:()=>A(!T),className:"text-blue-600 hover:text-blue-800 font-medium text-sm mt-2 flex items-center gap-1 transition-colors",children:T?"Show Less ":"Show More "})]}),r.colors&&r.colors.length>0&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Colors"}),c.jsx("div",{className:"space-y-2",children:r.colors.map((E,ie)=>c.jsx("button",{onClick:()=>ne(E.name),className:`w-full p-3 rounded-lg border-2 text-left transition-all ${l===E.name?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400 hover:bg-gray-50"}`,children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-gray-400 flex-shrink-0",style:{backgroundColor:E.hex}}),c.jsxs("div",{className:"min-w-0 flex-1",children:[c.jsx("div",{className:"font-medium break-words",children:E.name}),c.jsxs("div",{className:"text-sm text-gray-500",children:[(E.images||[]).length," photos"]})]})]})},ie))})]}),r.rating&&c.jsxs("div",{className:"flex items-center gap-4 py-3 border-t border-gray-200",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"flex text-yellow-400",children:[...Array(5)].map((E,ie)=>c.jsx("span",{className:ie<Math.floor(r.rating)?"text-yellow-400":"text-gray-300",children:""},ie))}),c.jsx("span",{className:"font-semibold text-gray-900",children:r.rating})]}),r.reviews&&c.jsxs("span",{className:"text-gray-500",children:["(",r.reviews," reviews)"]})]}),r.stock>0&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Quantity"}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg",children:[c.jsx("button",{onClick:()=>N(Math.max(1,I-1)),className:"px-4 py-2 text-gray-600 hover:text-gray-800 hover:bg-gray-50 transition-colors",disabled:I<=1,children:""}),c.jsx("span",{className:"px-4 py-2 font-semibold text-gray-900 min-w-[3rem] text-center",children:I}),c.jsx("button",{onClick:()=>N(Math.min(r.stock,I+1)),className:"px-4 py-2 text-gray-600 hover:text-gray-800 hover:bg-gray-50 transition-colors",disabled:I>=r.stock,children:"+"})]}),c.jsxs("span",{className:"text-sm text-gray-500",children:["Max: ",r.stock]})]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("button",{onClick:G,disabled:r.stock===0,className:`w-full py-4 text-lg font-semibold transition-all ${r.stock===0?"bg-gray-300 text-gray-500 cursor-not-allowed":"btn btn-primary hover:shadow-lg"}`,children:r.stock===0?"Out of Stock":t?`Add ${I} to Cart - $${(r.price*I).toFixed(2)}`:"Sign In to Add to Cart"}),r.stock>0&&c.jsx("button",{onClick:C,className:"w-full py-4 text-lg font-semibold text-white rounded-lg hover:shadow-lg transition-all buy-now-btn",children:t?` Buy Now - $${(r.price*I).toFixed(2)}`:" Sign In to Buy Now"}),c.jsxs("button",{onClick:ce,className:`w-full py-3 text-base font-medium rounded-lg border-2 transition-all flex items-center justify-center gap-2 ${v?"bg-red-50 border-red-500 text-red-600 hover:bg-red-100":"bg-white border-gray-300 text-gray-600 hover:border-gray-400 hover:bg-gray-50"}`,children:[c.jsx("div",{className:`icon-heart text-lg ${v?"fill-current":""}`}),v?"Remove from Watchlist":"Add to Watchlist"]})]})]})]}),c.jsx(Q_,{currentProduct:r,onProductClick:async E=>{try{if(!window.ProductManager){console.error("ProductManager not initialized");return}let ie;window.ProductManager.getByIdAsync?ie=await window.ProductManager.getByIdAsync(E):ie=window.ProductManager.getById(E),ie&&(e(),setTimeout(()=>{window.dispatchEvent(new CustomEvent("openProduct",{detail:{productId:E}}))},100))}catch(ie){console.error("Error loading related product:",ie)}}})]})})]})})}const di=(()=>{const r="luxemarket_categories",e=()=>{const h=localStorage.getItem(r);if(!h)return null;try{return JSON.parse(h)}catch{return null}},t=h=>{localStorage.setItem(r,JSON.stringify(h))},i=()=>{const h=window.ProductManager?window.ProductManager.getAll():[],m=new Set(h.map(p=>p.category));return Array.from(m)},o=["Electronics","Fashion","Furniture","Accessories"];let l=e();if(!l||l.length===0){const h=i();l=h.length>0?h:[...o],t(l)}return{getAll(){if(l.length===0){const h=i();if(h.length>0)l=h,t(l);else return[...o]}return[...l]},add(h){const m=h.trim();return m?l.includes(m)?!1:(l.push(m),t(l),!0):!1},delete(h){const m=l.filter(v=>v!==h),p=m.length!==l.length;return p&&(l=m,t(l)),p},syncWithProducts(){l=i(),t(l)}}})();window.CategoryManager=di;const wo={black:"#000000",white:"#FFFFFF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",yellow:"#FFFF00",cyan:"#00FFFF",magenta:"#FF00FF",gray:"#808080",grey:"#808080",silver:"#C0C0C0",maroon:"#800000",olive:"#808000",lime:"#00FF00",aqua:"#00FFFF",teal:"#008080",navy:"#000080",fuchsia:"#FF00FF",purple:"#800080",orange:"#FFA500",pink:"#FFC0CB",brown:"#A52A2A",beige:"#F5F5DC",tan:"#D2B48C",khaki:"#F0E68C",gold:"#FFD700",bronze:"#CD7F32",copper:"#B87333",brass:"#B5A642",crimson:"#DC143C",scarlet:"#FF2400",ruby:"#E0115F",cherry:"#DE3163",rose:"#FF007F",coral:"#FF7F50",salmon:"#FA8072",tomato:"#FF6347",azure:"#007FFF",cobalt:"#0047AB",sapphire:"#0F52BA",indigo:"#4B0082",turquoise:"#40E0D0",sky:"#87CEEB",royal:"#4169E1",midnight:"#191970",emerald:"#50C878",jade:"#00A86B",forest:"#228B22",mint:"#98FF98",sage:"#9DC183",olive:"#808000",chartreuse:"#7FFF00",amber:"#FFBF00",mustard:"#FFDB58",lemon:"#FFF700",cream:"#FFFDD0",ivory:"#FFFFF0",peach:"#FFE5B4",apricot:"#FBCEB1",violet:"#8F00FF",lavender:"#E6E6FA",plum:"#DDA0DD",mauve:"#E0B0FF",lilac:"#C8A2C8",orchid:"#DA70D6",chocolate:"#D2691E",coffee:"#6F4E37",mocha:"#967969",chestnut:"#954535",mahogany:"#C04000",walnut:"#773F1A",oak:"#806517",charcoal:"#36454F",slate:"#708090",ash:"#B2BEB5",smoke:"#738276",pearl:"#EAE0C8",platinum:"#E5E4E2",steel:"#71797E",iron:"#4C4646",titanium:"#878681",chrome:"#C0C0C0",sand:"#C2B280",stone:"#8D8D8D",clay:"#B66A50",earth:"#8B4513",moss:"#8A9A5B",grass:"#7CFC00",leaf:"#228B22","sky blue":"#87CEEB",ocean:"#006994",sea:"#2E8B57",burgundy:"#800020",wine:"#722F37",champagne:"#F7E7CE",taupe:"#483C32",nude:"#E3BC9A",blush:"#DE5D83",marigold:"#EAA221",denim:"#1560BD","charcoal gray":"#36454F","off white":"#FAF9F6"};function ph(r){if(!r)return"#000000";if(r.startsWith("#")||r.startsWith("rgb"))return r;const e=r.toLowerCase().trim();if(wo[e])return wo[e];const t=Object.keys(wo).find(i=>e.includes(i)||i.includes(e));return t?wo[t]:(console.warn(`Color "${r}" not found, using black`),"#000000")}function J_(r){if(!r)return!1;const e=r.toLowerCase().trim();return wo.hasOwnProperty(e)}function X_(r){if(!r)return[];const e=r.toLowerCase().trim();return Object.keys(wo).filter(t=>t.includes(e)).sort().slice(0,10)}function Z_({onColorSelect:r,selectedColor:e}){const[t,i]=J.useState(!1),[o,l]=J.useState("#FF0000"),[h,m]=J.useState({r:255,g:0,b:0}),[p,v]=J.useState("visual"),[w,I]=J.useState(""),[N,M]=J.useState([]),[L,O]=J.useState(0),[F,$]=J.useState(100),[z,Y]=J.useState(100),ne=J.useRef(null),G=J.useRef(null),ce=B=>{const X=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(B);return X?{r:parseInt(X[1],16),g:parseInt(X[2],16),b:parseInt(X[3],16)}:{r:0,g:0,b:0}},C=(B,X,R)=>{const S=le=>{const de=Math.max(0,Math.min(255,Math.round(le))).toString(16);return de.length===1?"0"+de:de};return`#${S(B)}${S(X)}${S(R)}`},T=(B,X,R)=>{X=X/100,R=R/100;const S=R*X,le=S*(1-Math.abs(B/60%2-1)),de=R-S;let fe=0,_e=0,Ae=0;return B>=0&&B<60?(fe=S,_e=le,Ae=0):B>=60&&B<120?(fe=le,_e=S,Ae=0):B>=120&&B<180?(fe=0,_e=S,Ae=le):B>=180&&B<240?(fe=0,_e=le,Ae=S):B>=240&&B<300?(fe=le,_e=0,Ae=S):B>=300&&B<360&&(fe=S,_e=0,Ae=le),{r:Math.round((fe+de)*255),g:Math.round((_e+de)*255),b:Math.round((Ae+de)*255)}},A=(B,X,R)=>{B=B/255,X=X/255,R=R/255;const S=Math.max(B,X,R),le=Math.min(B,X,R),de=S-le;let fe=0;de!==0&&(S===B?fe=60*((X-R)/de%6):S===X?fe=60*((R-B)/de+2):S===R&&(fe=60*((B-X)/de+4))),fe<0&&(fe+=360);const _e=S===0?0:de/S*100,Ae=S*100;return{h:fe,s:_e,v:Ae}};J.useEffect(()=>{const B=ne.current;if(!B)return;const X=B.getContext("2d"),R=B.width,S=B.height;T(L,100,100);for(let le=0;le<R;le++){const de=le/R*100;for(let fe=0;fe<S;fe++){const _e=100-fe/S*100,Ae=T(L,de,_e);X.fillStyle=`rgb(${Ae.r}, ${Ae.g}, ${Ae.b})`,X.fillRect(le,fe,1,1)}}},[L]),J.useEffect(()=>{const B=T(L,F,z);m(B),l(C(B.r,B.g,B.b))},[L,F,z]);const D=B=>{const X=C(B.r,B.g,B.b);l(X);const R=A(B.r,B.g,B.b);O(R.h),$(R.s),Y(R.v)},P=(B,X)=>{const R=Math.max(0,Math.min(255,parseInt(X)||0)),S={...h,[B]:R};m(S),D(S)},U=B=>{const X=ne.current;if(!X)return;const R=X.getBoundingClientRect(),S=B.clientX-R.left,le=B.clientY-R.top,de=S/X.width*100,fe=100-le/X.height*100;$(de),Y(fe)},E=B=>{const X=G.current;if(!X)return;const R=X.getBoundingClientRect(),le=(B.clientX-R.left)/R.width*360;O(le)},ie=B=>{if(I(B),B.length>0){const X=X_(B);M(X)}else M([]);if(J_(B)){const X=ph(B);l(X)}},Ce=B=>{I(B);const X=ph(B);l(X),M([])},je=[{name:"Black",hex:"#000000"},{name:"White",hex:"#FFFFFF"},{name:"Gray",hex:"#808080"},{name:"Light Gray",hex:"#D3D3D3"},{name:"Dark Gray",hex:"#404040"},{name:"Red",hex:"#FF0000"},{name:"Dark Red",hex:"#DC2626"},{name:"Pink",hex:"#FFC0CB"},{name:"Hot Pink",hex:"#FF69B4"},{name:"Orange",hex:"#FFA500"},{name:"Dark Orange",hex:"#FF8C00"},{name:"Yellow",hex:"#FFFF00"},{name:"Gold",hex:"#FFD700"},{name:"Lime",hex:"#00FF00"},{name:"Green",hex:"#008000"},{name:"Forest Green",hex:"#228B22"},{name:"Teal",hex:"#008080"},{name:"Cyan",hex:"#00FFFF"},{name:"Sky Blue",hex:"#87CEEB"},{name:"Blue",hex:"#0000FF"},{name:"Navy",hex:"#000080"},{name:"Indigo",hex:"#4B0082"},{name:"Violet",hex:"#8B00FF"},{name:"Purple",hex:"#800080"},{name:"Magenta",hex:"#FF00FF"},{name:"Brown",hex:"#A52A2A"},{name:"Tan",hex:"#D2B48C"},{name:"Beige",hex:"#F5F5DC"},{name:"Maroon",hex:"#800000"},{name:"Olive",hex:"#808000"},{name:"Silver",hex:"#C0C0C0"},{name:"Coral",hex:"#FF7F50"},{name:"Crimson",hex:"#DC143C"},{name:"Turquoise",hex:"#40E0D0"},{name:"Salmon",hex:"#FA8072"},{name:"Khaki",hex:"#F0E68C"},{name:"Plum",hex:"#DDA0DD"},{name:"Orchid",hex:"#DA70D6"},{name:"Steel Blue",hex:"#4682B4"},{name:"Slate Gray",hex:"#708090"}],Fe=B=>{r(B),i(!1)},oe=()=>{const B=prompt("Enter a name for this color:")||"Custom Color";r({name:B,hex:o}),i(!1)};return c.jsxs("div",{className:"relative",children:[c.jsxs("button",{type:"button",onClick:()=>i(!t),className:"flex items-center gap-2 px-3 py-2 border border-gray-300 rounded-md hover:border-gray-400 transition-colors bg-white",children:[c.jsx("div",{className:"w-6 h-6 rounded border border-gray-300",style:{backgroundColor:e?.hex||"#000000"}}),c.jsx("span",{className:"text-sm",children:e?.name||"Select Color"}),c.jsx("div",{className:`icon-chevron-down text-xs transition-transform ${t?"rotate-180":""}`})]}),t&&c.jsxs("div",{className:"absolute top-full left-0 mt-2 bg-white border border-gray-200 rounded-lg shadow-xl z-50 p-4 w-80",children:[c.jsxs("div",{className:"mb-4",children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Color Palette"}),c.jsx("div",{className:"grid grid-cols-10 gap-2",children:je.map((B,X)=>c.jsx("button",{type:"button",onClick:()=>Fe(B),className:`w-8 h-8 rounded border-2 transition-all color-picker-button ${e?.hex===B.hex?"border-[var(--primary-color)] ring-2 ring-[var(--primary-color)]/20 scale-110":"border-gray-300 hover:border-gray-400 hover:scale-110"}`,style:{backgroundColor:B.hex},title:`${B.name} (${B.hex}) - RGB(${ce(B.hex).r}, ${ce(B.hex).g}, ${ce(B.hex).b})`},X))})]}),c.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Custom Color"}),c.jsxs("div",{className:"flex bg-gray-100 rounded-md p-1",children:[c.jsx("button",{type:"button",onClick:()=>v("visual"),className:`px-2 py-1 text-xs rounded transition-colors ${p==="visual"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"VISUAL"}),c.jsx("button",{type:"button",onClick:()=>v("hex"),className:`px-2 py-1 text-xs rounded transition-colors ${p==="hex"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"HEX"}),c.jsx("button",{type:"button",onClick:()=>v("rgb"),className:`px-2 py-1 text-xs rounded transition-colors ${p==="rgb"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"RGB"}),c.jsx("button",{type:"button",onClick:()=>v("name"),className:`px-2 py-1 text-xs rounded transition-colors ${p==="name"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"NAME"})]})]}),p==="visual"?c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"relative",children:[c.jsx("canvas",{ref:ne,width:300,height:200,onClick:U,className:"w-full h-48 rounded-lg border-2 border-gray-300 cursor-crosshair",style:{imageRendering:"pixelated"}}),c.jsx("div",{className:"absolute w-4 h-4 border-2 border-white rounded-full pointer-events-none shadow-lg",style:{left:`${F}%`,top:`${100-z}%`,transform:"translate(-50%, -50%)",boxShadow:"0 0 0 1px black"}})]}),c.jsxs("div",{className:"relative",children:[c.jsx("div",{ref:G,onClick:E,className:"w-full h-8 rounded-lg cursor-pointer border-2 border-gray-300",style:{background:"linear-gradient(to right, #ff0000 0%, #ffff00 17%, #00ff00 33%, #00ffff 50%, #0000ff 67%, #ff00ff 83%, #ff0000 100%)"}}),c.jsx("div",{className:"absolute top-0 bottom-0 w-1 bg-white border border-gray-800 pointer-events-none rounded-full",style:{left:`${L/360*100}%`,transform:"translateX(-50%)"}})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"icon-eyedropper text-2xl text-gray-600"}),c.jsx("div",{className:"w-16 h-16 rounded-lg border-2 border-gray-300 shadow-inner",style:{backgroundColor:o}})]}),c.jsxs("div",{className:"flex-1 grid grid-cols-3 gap-2",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1 text-center",children:"R"}),c.jsx("input",{type:"number",min:"0",max:"255",value:h.r,onChange:B=>P("r",B.target.value),className:"w-full px-2 py-2 text-center text-lg font-bold border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1 text-center",children:"G"}),c.jsx("input",{type:"number",min:"0",max:"255",value:h.g,onChange:B=>P("g",B.target.value),className:"w-full px-2 py-2 text-center text-lg font-bold border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1 text-center",children:"B"}),c.jsx("input",{type:"number",min:"0",max:"255",value:h.b,onChange:B=>P("b",B.target.value),className:"w-full px-2 py-2 text-center text-lg font-bold border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent"})]})]})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("div",{className:"text-sm font-mono text-gray-600",children:o.toUpperCase()}),c.jsx("button",{type:"button",onClick:oe,className:"btn btn-primary text-sm px-4 py-2",children:"Add Color"})]})]}):p==="hex"?c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"color",value:o,onChange:B=>l(B.target.value),className:"w-12 h-8 rounded border border-gray-300 cursor-pointer"}),c.jsx("input",{type:"text",value:o,onChange:B=>l(B.target.value),placeholder:"#000000",className:"flex-1 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent"}),c.jsx("button",{type:"button",onClick:oe,className:"btn btn-primary text-xs px-3 py-1",children:"Add"})]}):p==="rgb"?c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-12 h-8 rounded border border-gray-300",style:{backgroundColor:o}}),c.jsxs("div",{className:"flex-1 grid grid-cols-3 gap-2",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"R"}),c.jsx("input",{type:"number",min:"0",max:"255",value:h.r,onChange:B=>P("r",B.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"G"}),c.jsx("input",{type:"number",min:"0",max:"255",value:h.g,onChange:B=>P("g",B.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"B"}),c.jsx("input",{type:"number",min:"0",max:"255",value:h.b,onChange:B=>P("b",B.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent"})]})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("div",{className:"text-xs text-gray-500 flex-1",children:["RGB(",h.r,", ",h.g,", ",h.b,") = ",o]}),c.jsx("button",{type:"button",onClick:oe,className:"btn btn-primary text-xs px-3 py-1",children:"Add Color"})]})]}):c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-12 h-8 rounded border border-gray-300",style:{backgroundColor:o}}),c.jsxs("div",{className:"flex-1 relative",children:[c.jsx("input",{type:"text",value:w,onChange:B=>ie(B.target.value),placeholder:"Type color name (e.g., red, blue, emerald)",className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent"}),N.length>0&&c.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-300 rounded shadow-lg max-h-40 overflow-y-auto z-10",children:N.map(B=>c.jsxs("button",{type:"button",onClick:()=>Ce(B),className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 flex items-center gap-2",children:[c.jsx("div",{className:"w-4 h-4 rounded border border-gray-300",style:{backgroundColor:ph(B)}}),B]},B))})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"text-xs text-gray-500 flex-1",children:w?`"${w}" = ${o}`:"Enter a color name"}),c.jsx("button",{type:"button",onClick:oe,disabled:!w,className:"btn btn-primary text-xs px-3 py-1 disabled:opacity-50 disabled:cursor-not-allowed",children:"Add Color"})]})]})]}),c.jsx("div",{className:"flex justify-end mt-4 pt-3 border-t border-gray-200",children:c.jsx("button",{type:"button",onClick:()=>i(!1),className:"btn btn-secondary text-sm px-4 py-1",children:"Close"})})]})]})}function ew({colors:r,onChange:e}){const[t,i]=J.useState(r||[]),[o,l]=J.useState(-1),[h,m]=J.useState(-1),[p,v]=J.useState(""),[w,I]=J.useState("");J.useEffect(()=>{e(t)},[t]),J.useEffect(()=>{i(r||[])},[r]);const N=$=>{const z={name:$.name,hex:$.hex,images:[]};i(Y=>[...Y,z])},M=($,z,Y)=>{i(ne=>ne.map((G,ce)=>ce===$?{...G,[z]:Y}:G))},L=$=>{i(z=>z.filter((Y,ne)=>ne!==$))},O=$=>{w.trim()&&(i(z=>z.map((Y,ne)=>ne===$?{...Y,images:[...Y.images||[],w.trim()]}:Y)),I(""))},F=($,z)=>{i(Y=>Y.map((ne,G)=>G===$?{...ne,images:ne.images.filter((ce,C)=>C!==z)}:ne))};return c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Product Colors"}),c.jsx(Z_,{onColorSelect:N,selectedColor:null})]}),t.length===0?c.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[c.jsx("div",{className:"icon-palette text-3xl text-gray-400 mx-auto mb-2"}),c.jsx("p",{className:"text-gray-500",children:"No colors added yet"}),c.jsx("p",{className:"text-sm text-gray-400",children:"Use the color picker above to add colors"})]}):c.jsx("div",{className:"space-y-3",children:t.map(($,z)=>c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-white",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[h===z?c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"color",value:$.hex,onChange:Y=>M(z,"hex",Y.target.value),className:"w-8 h-8 rounded border border-gray-300 cursor-pointer"}),c.jsx("input",{type:"text",value:$.hex,onChange:Y=>M(z,"hex",Y.target.value),onBlur:()=>m(-1),onKeyDown:Y=>Y.key==="Enter"&&m(-1),className:"px-2 py-1 border border-gray-300 rounded text-sm w-24 focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent",placeholder:"#000000",autoFocus:!0}),c.jsx("button",{type:"button",onClick:()=>m(-1),className:"text-xs text-green-600 hover:text-green-800",children:" Done"})]}):c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-8 h-8 rounded border border-gray-300 cursor-pointer hover:ring-2 hover:ring-blue-300 transition-all",style:{backgroundColor:$.hex},onClick:()=>m(z),title:"Click to edit color"}),c.jsx("button",{type:"button",onClick:()=>m(z),className:"text-xs text-blue-600 hover:text-blue-800",children:"Edit color"})]}),o===z?c.jsx("input",{type:"text",value:$.name,onChange:Y=>M(z,"name",Y.target.value),onBlur:()=>l(-1),onKeyDown:Y=>Y.key==="Enter"&&l(-1),className:"px-2 py-1 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent",autoFocus:!0}):c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"font-medium text-gray-900",children:$.name}),c.jsx("span",{className:"text-sm text-gray-500",children:$.hex}),c.jsx("button",{type:"button",onClick:()=>l(z),className:"text-xs text-blue-600 hover:text-blue-800",children:"Edit name"})]})]}),c.jsxs("button",{type:"button",onClick:()=>L(z),className:"text-red-500 hover:text-red-700 text-sm flex items-center gap-1",children:[c.jsx("div",{className:"icon-trash text-sm"}),"Remove"]})]}),c.jsxs("div",{children:[c.jsx("div",{className:"flex items-center gap-2 mb-2",children:c.jsxs("label",{className:"text-sm font-medium text-gray-700",children:["Images for ",$.name," (",($.images||[]).length,")"]})}),c.jsxs("div",{className:"flex gap-2 mb-2",children:[c.jsx("input",{type:"text",value:w,onChange:Y=>I(Y.target.value),placeholder:"https://example.com/color-image.jpg",className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent"}),c.jsx("button",{type:"button",onClick:()=>O(z),className:"btn btn-secondary text-sm px-3 py-2",children:"Add Image"})]}),($.images||[]).length===0?c.jsxs("div",{className:"text-center py-6 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[c.jsx("div",{className:"text-2xl mb-2",children:""}),c.jsxs("p",{className:"text-gray-500 text-sm",children:["No images for ",$.name," yet"]})]}):c.jsx("div",{className:"grid grid-cols-6 gap-2",children:($.images||[]).map((Y,ne)=>c.jsxs("div",{className:"relative group",children:[c.jsx("img",{src:Y,alt:`${$.name} - Image ${ne+1}`,className:"w-full h-20 object-cover rounded border hover:border-[var(--primary-color)] transition-colors",onError:G=>{G.target.src="https://via.placeholder.com/80x80?text=Error"}}),c.jsx("button",{type:"button",onClick:()=>F(z,ne),className:"absolute top-1 right-1 w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-lg text-sm flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity shadow-lg hover:scale-110 transform",title:"Delete image",children:""}),c.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-black/70 text-white text-xs p-1 text-center opacity-0 group-hover:opacity-100 transition-opacity rounded-b",children:["#",ne+1]})]},`${Y}-${ne}`))})]})]},z))}),c.jsxs("div",{className:"text-xs text-gray-500 bg-blue-50 p-3 rounded",children:[c.jsx("strong",{children:"Tip:"})," Each color can have its own set of images. When customers select a color, they'll see the images specific to that color variant. Hover over images to see the delete button."]})]})}function tw({images:r,onUpdate:e,title:t="Product Images"}){const[i,o]=J.useState(""),[l,h]=J.useState("front"),m=[{value:"front",label:"Front View",icon:""},{value:"back",label:"Back View",icon:""},{value:"left",label:"Left Side",icon:""},{value:"right",label:"Right Side",icon:""},{value:"top",label:"Top View",icon:""},{value:"bottom",label:"Bottom View",icon:""},{value:"detail",label:"Detail Shot",icon:""},{value:"lifestyle",label:"Lifestyle",icon:""},{value:"packaging",label:"Packaging",icon:""},{value:"other",label:"Other",icon:""}],p=J.useMemo(()=>!r||r.length===0?[]:r.map((O,F)=>typeof O=="string"?{id:`img-${F}-${O.slice(-10)}`,url:O,angle:F===0?"front":"other",description:""}:O),[r]),v=()=>{if(!i.trim())return;const O={id:`img-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,url:i.trim(),angle:l,description:""},F=[...p,O];e(F),o(""),h("front")},w=O=>{const F=p.filter($=>$.id!==O);e(F)},I=(O,F)=>{const $=p.map(z=>z.id===O?{...z,angle:F}:z);e($)},N=(O,F)=>{const $=p.map(z=>z.id===O?{...z,description:F}:z);e($)},M=O=>m.find(F=>F.value===O)||m.find(F=>F.value==="other"),L=J.useMemo(()=>{const O={};return p.forEach(F=>{O[F.angle]||(O[F.angle]=[]),O[F.angle].push(F)}),O},[p]);return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border-2 border-dashed border-gray-300",children:[c.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2",children:[c.jsx("span",{className:"text-lg",children:""}),"Add New Image"]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Image URL"}),c.jsx("input",{type:"url",value:i,onChange:O=>o(O.target.value),placeholder:"https://example.com/image.jpg",className:"w-full border border-gray-300 p-2 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Angle/View"}),c.jsx("select",{value:l,onChange:O=>h(O.target.value),className:"w-full border border-gray-300 p-2 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:m.map(O=>c.jsxs("option",{value:O.value,children:[O.icon," ",O.label]},O.value))})]})]}),c.jsxs("div",{className:"flex items-center gap-3 mt-3",children:[c.jsx("button",{type:"button",onClick:v,disabled:!i.trim(),className:"btn btn-primary text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Add Image"}),i&&c.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[c.jsx("img",{src:i,alt:"Preview",className:"w-8 h-8 object-cover rounded border",onError:O=>{O.target.style.display="none"}}),c.jsx("span",{children:"Preview"})]})]})]}),p.length===0?c.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[c.jsx("div",{className:"text-4xl mb-3",children:""}),c.jsx("p",{className:"text-gray-500 font-medium",children:"No images added yet"}),c.jsx("p",{className:"text-gray-400 text-sm",children:"Add images with different angles to showcase your product"})]}):c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"flex items-center justify-between",children:c.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[c.jsx("span",{children:""}),t," (",p.length,")"]})}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:p.map((O,F)=>{const $=M(O.angle);return c.jsxs("div",{className:"relative group transition-all duration-200 bg-white rounded-lg border-2 border-gray-200 hover:border-gray-300 overflow-hidden",children:[c.jsxs("div",{className:"aspect-square overflow-hidden bg-gray-100 relative",children:[c.jsx("img",{src:O.url,alt:`${$.label} view`,className:"w-full h-full object-cover",onError:z=>{z.target.src="https://via.placeholder.com/200x200?text=Error"}}),c.jsxs("div",{className:"absolute top-2 left-2 bg-black/70 text-white text-xs px-2 py-1 rounded-full font-medium",children:["#",F+1]}),c.jsx("button",{type:"button",onClick:()=>w(O.id),className:"absolute top-2 right-2 w-10 h-10 bg-red-500 hover:bg-red-600 text-white rounded-lg text-lg flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity shadow-lg hover:scale-110 transform",title:"Delete image",children:""})]}),c.jsxs("div",{className:"p-3 space-y-2",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"View Angle"}),c.jsx("select",{value:O.angle,onChange:z=>I(O.id,z.target.value),className:"w-full border border-gray-300 p-1 rounded text-xs focus:ring-1 focus:ring-blue-500 focus:border-transparent",children:m.map(z=>c.jsxs("option",{value:z.value,children:[z.icon," ",z.label]},z.value))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Description (Optional)"}),c.jsx("input",{type:"text",value:O.description||"",onChange:z=>N(O.id,z.target.value),placeholder:"e.g., Close-up of texture",className:"w-full border border-gray-300 p-1 rounded text-xs focus:ring-1 focus:ring-blue-500 focus:border-transparent"})]})]})]},O.id)})}),c.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[c.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[c.jsx("span",{children:""}),"Images by Angle"]}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-2 text-xs",children:Object.entries(L).map(([O,F])=>{const $=M(O);return c.jsxs("div",{className:"bg-white p-2 rounded border text-center",children:[c.jsx("div",{className:"text-lg mb-1",children:$.icon}),c.jsx("div",{className:"font-medium text-gray-700",children:$.label}),c.jsxs("div",{className:"text-gray-500",children:[F.length," image",F.length!==1?"s":""]})]},O)})})]}),c.jsxs("div",{className:"bg-yellow-50 p-3 rounded-lg border border-yellow-200",children:[c.jsxs("h4",{className:"text-sm font-medium text-yellow-800 mb-1 flex items-center gap-2",children:[c.jsx("span",{children:""}),"Pro Tips"]}),c.jsxs("ul",{className:"text-xs text-yellow-700 space-y-1",children:[c.jsx("li",{children:" The first image will be used as the main product image"}),c.jsx("li",{children:" Add multiple angles to give customers a complete view"}),c.jsx("li",{children:' Use descriptive angles like "Front View", "Detail Shot", etc.'}),c.jsx("li",{children:" Hover over images to see the large delete button"})]})]})]})]})}const nw=J.memo(tw);function xg({isOpen:r,onClose:e,onConfirm:t,title:i="Confirm Action",message:o="Are you sure you want to proceed?",confirmText:l="Confirm",cancelText:h="Cancel",type:m="danger",itemDetails:p=null}){if(!r)return null;const w=(()=>{switch(m){case"danger":return{icon:"icon-triangle-alert",iconColor:"text-red-600",iconBg:"bg-red-100",confirmBtn:"bg-red-600 hover:bg-red-700 text-white",border:"border-red-200"};case"warning":return{icon:"icon-triangle-alert",iconColor:"text-yellow-600",iconBg:"bg-yellow-100",confirmBtn:"bg-yellow-600 hover:bg-yellow-700 text-white",border:"border-yellow-200"};case"info":return{icon:"icon-info-circle",iconColor:"text-blue-600",iconBg:"bg-blue-100",confirmBtn:"bg-blue-600 hover:bg-blue-700 text-white",border:"border-blue-200"};default:return{icon:"icon-triangle-alert",iconColor:"text-red-600",iconBg:"bg-red-100",confirmBtn:"bg-red-600 hover:bg-red-700 text-white",border:"border-red-200"}}})(),I=()=>{t(),e()},N=()=>{e()};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 modal-backdrop flex items-center justify-center z-[100] animate-[fadeIn_0.2s_ease-out]",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4 overflow-hidden modal-content",children:[c.jsx("div",{className:`p-6 border-b ${w.border}`,children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:`w-12 h-12 rounded-full ${w.iconBg} flex items-center justify-center flex-shrink-0`,children:c.jsx("div",{className:`${w.icon} text-2xl ${w.iconColor}`})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:i}),c.jsx("p",{className:"text-sm text-gray-600 mt-1",children:o})]})]})}),p&&c.jsx("div",{className:"p-6 bg-gray-50 border-b border-gray-200",children:c.jsxs("div",{className:"flex items-center gap-4",children:[p.image&&c.jsx("img",{src:p.image,alt:p.name,className:"w-16 h-16 object-cover rounded border",onError:M=>{M.target.src="https://via.placeholder.com/64x64?text=No+Image"}}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h4",{className:"font-semibold text-gray-900",children:p.name}),p.price&&c.jsxs("p",{className:"text-sm text-gray-600",children:["$",p.price.toFixed(2)]}),p.category&&c.jsx("p",{className:"text-xs text-gray-500",children:p.category})]})]})}),c.jsx("div",{className:"p-6",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"icon-triangle-alert text-yellow-500 text-lg mt-0.5"}),c.jsxs("div",{className:"text-sm text-gray-700",children:[c.jsx("p",{className:"font-medium mb-2",children:"This action cannot be undone."}),c.jsxs("ul",{className:"list-disc list-inside space-y-1 text-gray-600",children:[c.jsx("li",{children:"The product will be permanently removed from your store"}),c.jsx("li",{children:"All associated images and data will be deleted"}),c.jsx("li",{children:"This product will no longer appear in search results"}),p?.reviews>0&&c.jsxs("li",{children:["All customer reviews (",p.reviews,") will be lost"]})]})]})]})}),c.jsxs("div",{className:"p-6 bg-gray-50 flex gap-3 justify-end",children:[c.jsx("button",{onClick:N,className:"btn btn-secondary px-6 py-2",children:h}),c.jsx("button",{onClick:I,className:`btn px-6 py-2 ${w.confirmBtn}`,children:l})]})]})})}function rw({product:r,isVisible:e}){const[t,i]=J.useState(0),[o,l]=J.useState(null);if(J.useEffect(()=>{r?.colors?.length>0&&!o&&l(r.colors[0].name)},[r?.colors?.length,o]),J.useEffect(()=>{i(0)},[o]),!e||!r)return null;let h=[];if(o&&r.colors){const $=r.colors.find(z=>z.name===o);$&&$.images&&(h=$.images)}h.length===0&&r.images&&(h=r.images.map($=>typeof $=="string"?$:$.url)),h.length===0&&r.image&&(h=[r.image]);const m=h[t]||"https://via.placeholder.com/400x400?text=No+Image",p=$=>{l($),i(0)},v=()=>{h.length>1&&i($=>($+1)%h.length)},w=()=>{h.length>1&&i($=>($-1+h.length)%h.length)},I=$=>{i($)},[N,M]=J.useState(!1),L=150,O=r.description&&r.description.length>L,F=O&&!N?r.description.substring(0,L)+"...":r.description;return c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-8 border-l-4 border-blue-500",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:c.jsx("span",{className:"text-lg",children:""})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Product Preview"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Live preview of how this product will appear"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"aspect-square rounded-lg overflow-hidden bg-gray-100 relative border-2 border-blue-200",children:[c.jsx("img",{src:m,alt:`${r.name} - ${o||"default"}`,className:"w-full h-full object-cover",onError:$=>{$.target.src="https://via.placeholder.com/400x400?text=No+Image"}}),h.length>1&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:w,className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-12 h-12 bg-red-600 hover:bg-red-700 text-white rounded-full flex items-center justify-center text-xl font-bold shadow-lg",children:""}),c.jsx("button",{onClick:v,className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-12 h-12 bg-green-600 hover:bg-green-700 text-white rounded-full flex items-center justify-center text-xl font-bold shadow-lg",children:""}),c.jsxs("div",{className:"absolute top-3 right-3 bg-black bg-opacity-80 text-white text-lg px-4 py-2 rounded",children:[t+1," / ",h.length]})]})]}),h.length>1&&c.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:h.map(($,z)=>c.jsx("button",{onClick:()=>I(z),className:`flex-shrink-0 w-20 h-20 rounded-md overflow-hidden border-2 ${z===t?"border-blue-500 shadow-lg":"border-gray-300 hover:border-gray-400"}`,children:c.jsx("img",{src:$,alt:`View ${z+1}`,className:"w-full h-full object-cover"})},z))}),h.length>1&&c.jsxs("div",{className:"flex gap-2 justify-center",children:[c.jsx("button",{onClick:w,className:"bg-red-500 text-white px-3 py-1 rounded text-sm",children:" PREV"}),c.jsx("button",{onClick:v,className:"bg-green-500 text-white px-3 py-1 rounded text-sm",children:"NEXT "}),c.jsx("button",{onClick:()=>I(0),className:"bg-blue-500 text-white px-3 py-1 rounded text-sm",children:"FIRST"})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:r.name||"Product Name"}),c.jsxs("div",{className:"text-2xl font-bold text-blue-600 mb-3",children:["$",r.price?r.price.toFixed(2):"0.00"]}),c.jsx("span",{className:"inline-block px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm",children:r.category||"No Category"})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Description"}),c.jsx("div",{className:"text-gray-600 leading-relaxed break-words",children:F}),O&&c.jsx("button",{onClick:()=>M(!N),className:"text-blue-600 hover:text-blue-800 font-medium text-sm mt-1 flex items-center gap-1 transition-colors",children:N?"Show Less ":"Show More "})]}),r.colors&&r.colors.length>0&&c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:["Colors (",r.colors.length,")"]}),c.jsx("div",{className:"space-y-2",children:r.colors.map(($,z)=>c.jsx("button",{onClick:()=>p($.name),className:`w-full p-3 rounded-md border-2 text-left ${o===$.name?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-gray-400",style:{backgroundColor:$.hex}}),c.jsxs("div",{children:[c.jsx("div",{className:"font-medium",children:$.name}),c.jsxs("div",{className:"text-sm text-gray-500",children:[($.images||[]).length," photos"]})]})]})},z))})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t border-gray-200",children:[c.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded",children:[c.jsx("div",{className:"text-lg font-semibold text-blue-600",children:h.length}),c.jsx("div",{className:"text-sm text-gray-600",children:"Images"})]}),c.jsxs("div",{className:"text-center p-3 bg-purple-50 rounded",children:[c.jsx("div",{className:"text-lg font-semibold text-purple-600",children:r.colors?.length||0}),c.jsx("div",{className:"text-sm text-gray-600",children:"Colors"})]})]})]})]})]})}const sw=J.memo(rw);function iw({products:r,onUpdate:e}){const[t,i]=J.useState([]),[o,l]=J.useState(""),[h,m]=J.useState(20);J.useEffect(()=>{p()},[]);const p=()=>{const I=ProductManager.getDailyDeals();i(I)},v=()=>{if(!o||h<=0){we("Please select a product and enter a valid discount","error");return}ProductManager.addToDailyDeals(o,h),p(),e(),l(""),m(20),we("Product added to daily deals!","success"),window.dispatchEvent(new CustomEvent("adminUpdate"))},w=I=>{ProductManager.removeFromDailyDeals(I),p(),e(),we("Product removed from daily deals","success"),window.dispatchEvent(new CustomEvent("adminUpdate"))};return c.jsxs("div",{className:"bg-gradient-to-r from-red-50 to-orange-50 p-6 rounded-lg shadow mb-8",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("div",{className:"icon-tag text-2xl text-red-600"}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Daily Deals Management"}),c.jsx("p",{className:"text-gray-600",children:"Add special discounts to featured products"})]})]}),c.jsxs("div",{className:"bg-white p-4 rounded-lg mb-6",children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Add Product to Daily Deals"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product"}),c.jsxs("select",{value:o,onChange:I=>l(I.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",children:[c.jsx("option",{value:"",children:"Select a product..."}),r.map(I=>c.jsxs("option",{value:I.id,children:[I.name," - $",I.price.toFixed(2)]},I.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Discount %"}),c.jsx("input",{type:"number",min:"1",max:"90",value:h,onChange:I=>m(parseInt(I.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500"})]}),c.jsx("div",{className:"flex items-end",children:c.jsx("button",{onClick:v,className:"w-full btn bg-red-600 text-white hover:bg-red-700 py-2 px-4 rounded-md",children:"Add to Daily Deals"})})]})]}),c.jsxs("div",{className:"bg-white p-4 rounded-lg",children:[c.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Current Daily Deals (",t.length,")"]}),t.length===0?c.jsx("p",{className:"text-gray-500 text-center py-4",children:"No daily deals active"}):c.jsx("div",{className:"space-y-3",children:t.map(I=>{const N=r.find(O=>O.id==I.productId);if(!N)return null;const M=N.price*(I.discountPercent/100),L=N.price-M;return c.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg border border-red-200",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("img",{src:N.image,alt:N.name,className:"w-12 h-12 object-cover rounded-lg"}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-gray-900",children:N.name}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("span",{className:"text-lg font-bold text-red-600",children:["$",L.toFixed(2)]}),c.jsxs("span",{className:"text-sm text-gray-500 line-through",children:["$",N.price.toFixed(2)]}),c.jsxs("span",{className:"bg-red-600 text-white px-2 py-1 rounded-full text-xs font-bold",children:[I.discountPercent,"% OFF"]})]})]})]}),c.jsx("button",{onClick:()=>w(I.productId),className:"text-red-600 hover:text-red-800 p-2 hover:bg-red-100 rounded-lg transition-colors",title:"Remove from daily deals",children:c.jsx("div",{className:"icon-trash text-lg"})})]},I.productId)})})]})]})}function ow({products:r,onUpdate:e}){const[t,i]=J.useState([]),[o,l]=J.useState([]),[h,m]=J.useState(null),[p,v]=J.useState(null);J.useEffect(()=>{w()},[r]);const w=()=>{const $=ProductManager.getHomePageProducts();i($);const z=new Set($.map(ne=>ne.id.toString())),Y=r.filter(ne=>!z.has(ne.id.toString()));l(Y),console.log(" Home page products:",$.length),console.log(" Available products:",Y.length)},I=($,z,Y)=>{m(z),v(Y),$.dataTransfer.effectAllowed="move"},N=$=>{$.preventDefault(),$.dataTransfer.dropEffect="move"},M=($,z)=>{if($.preventDefault(),h!==null){if(p==="home"){if(h===z)return;ProductManager.reorderHomePageProducts(h,z)}else{const Y=o[h];if(t.length>=12){we("Home page can only have 12 products","error"),m(null),v(null);return}const ne=[...t];ne.splice(z,0,Y);const G=ne.map(ce=>ce.id);localStorage.setItem("luxemarket_homepage_order",JSON.stringify(G))}w(),e(),m(null),v(null),we("Home page updated!","success"),window.dispatchEvent(new CustomEvent("adminUpdate"))}},L=$=>{if(t.length>=12){we("Home page can only have 12 products","error");return}const Y=[...t,$].map(ne=>ne.id);localStorage.setItem("luxemarket_homepage_order",JSON.stringify(Y)),w(),e(),we(`"${$.name}" added to home page`,"success"),window.dispatchEvent(new CustomEvent("adminUpdate"))},O=$=>{const Y=t.filter((ne,G)=>G!==$).map(ne=>ne.id);localStorage.setItem("luxemarket_homepage_order",JSON.stringify(Y)),w(),e(),we("Product removed from home page","success"),window.dispatchEvent(new CustomEvent("adminUpdate"))},F=()=>{localStorage.removeItem("luxemarket_homepage_order"),w(),e(),we("Reset to default order","success"),window.dispatchEvent(new CustomEvent("adminUpdate"))};return c.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-lg shadow mb-8",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"icon-home text-2xl text-blue-600"}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Home Page Product Manager"}),c.jsx("p",{className:"text-gray-600",children:"Select and arrange products for the home page (max 12)"})]})]}),c.jsx("button",{onClick:F,className:"btn btn-secondary px-4 py-2 text-sm",children:"Reset to Default"})]}),c.jsxs("div",{className:"bg-white p-4 rounded-lg mb-6",children:[c.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center justify-between",children:[c.jsxs("span",{children:["Current Home Page Products (",t.length,"/12)"]}),t.length<12&&c.jsxs("span",{className:"text-sm text-orange-600 font-normal",children:[" Add ",12-t.length," more product",12-t.length!==1?"s":""]})]}),t.length===0?c.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[c.jsx("div",{className:"text-4xl mb-3",children:""}),c.jsx("p",{className:"text-gray-500 font-medium",children:"No products on home page"}),c.jsx("p",{className:"text-gray-400 text-sm",children:"Add products from the list below"})]}):c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4",children:t.map(($,z)=>c.jsxs("div",{draggable:!0,onDragStart:Y=>I(Y,z,"home"),onDragOver:N,onDrop:Y=>M(Y,z),className:`relative bg-white border-2 rounded-lg overflow-hidden cursor-move transition-all group ${h===z&&p==="home"?"border-blue-500 opacity-50":"border-gray-200 hover:border-blue-300"}`,children:[c.jsx("div",{className:"aspect-square bg-gray-100",children:c.jsx("img",{src:$.image,alt:$.name,className:"w-full h-full object-cover"})}),c.jsxs("div",{className:"p-2",children:[c.jsx("div",{className:"absolute top-2 left-2 bg-blue-600 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold",children:z+1}),$.isDailyDeal&&c.jsxs("div",{className:"absolute top-10 left-2 bg-red-600 text-white px-1 py-0.5 rounded text-xs font-bold",children:[" ",$.discountPercent,"%"]}),c.jsx("button",{onClick:()=>O(z),className:"absolute top-2 right-2 w-6 h-6 bg-red-500 hover:bg-red-600 text-white rounded-full text-xs flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity shadow-lg",title:"Remove from home page",children:""}),c.jsx("h4",{className:"text-xs font-semibold text-gray-900 line-clamp-2",children:$.name}),c.jsx("p",{className:"text-xs text-gray-500",children:$.category})]})]},$.id))}),c.jsx("p",{className:"text-sm text-gray-500 mt-4 text-center",children:" Drag and drop to reorder  Click  to remove"})]}),c.jsxs("div",{className:"bg-white p-4 rounded-lg",children:[c.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Available Products (",o.length,")"]}),o.length===0?c.jsx("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:c.jsx("p",{className:"text-gray-500",children:"All products are on the home page"})}):c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4",children:o.map(($,z)=>c.jsxs("div",{draggable:!0,onDragStart:Y=>I(Y,z,"available"),className:`relative bg-white border-2 rounded-lg overflow-hidden cursor-move transition-all group ${h===z&&p==="available"?"border-green-500 opacity-50":"border-gray-200 hover:border-green-300"}`,children:[c.jsx("div",{className:"aspect-square bg-gray-100",children:c.jsx("img",{src:$.image,alt:$.name,className:"w-full h-full object-cover"})}),c.jsxs("div",{className:"p-2",children:[c.jsx("button",{onClick:()=>L($),disabled:t.length>=12,className:"absolute top-2 right-2 w-6 h-6 bg-green-500 hover:bg-green-600 text-white rounded-full text-xs flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity shadow-lg disabled:bg-gray-400 disabled:cursor-not-allowed",title:t.length>=12?"Home page is full":"Add to home page",children:"+"}),c.jsx("h4",{className:"text-xs font-semibold text-gray-900 line-clamp-2",children:$.name}),c.jsx("p",{className:"text-xs text-gray-500",children:$.category})]})]},$.id))}),c.jsx("p",{className:"text-sm text-gray-500 mt-4 text-center",children:" Drag to home page section above or click + to add"})]})]})}function aw(){const[r,e]=J.useState([]),[t,i]=J.useState([]),[o,l]=J.useState(null),[h,m]=J.useState("All Categories"),[p,v]=J.useState({name:"",price:"",category:"",image:"",images:[],description:"",videoUrl:"",colors:[],sizes:"",rating:4,reviews:0,stock:0}),[w,I]=J.useState(""),[N,M]=J.useState(!0),[L,O]=J.useState({isOpen:!1,product:null}),[F,$]=J.useState({isOpen:!1,categoryName:null}),[z,Y]=J.useState(!0),[ne,G]=J.useState(!1);J.useEffect(()=>{C()},[]),J.useEffect(()=>{const S=()=>{G(window.scrollY>300)};return window.addEventListener("scroll",S),()=>window.removeEventListener("scroll",S)},[]);const ce=()=>{window.scrollTo({top:0,behavior:"smooth"})},C=async()=>{try{if(!window.ProductManager){console.error("ProductManager not initialized");return}console.log(" AdminDashboard: Loading products...");let S;window.ProductManager.getAllAsync?(console.log(" AdminDashboard: Using getAllAsync from Firebase..."),S=await window.ProductManager.getAllAsync()):(console.log(" AdminDashboard: Using sync method"),S=window.ProductManager.getAll()),console.log(" AdminDashboard: Total products loaded:",S.length),console.log(" AdminDashboard: First product:",S[0]),e(S),i(di.getAll()),window.dispatchEvent(new CustomEvent("adminUpdate"))}catch(S){console.error("Error refreshing data:",S),we("Failed to load products","error")}},T=S=>{v({...p,[S.target.name]:S.target.value})},A=J.useMemo(()=>({...p,price:parseFloat(p.price)||0,rating:parseFloat(p.rating)||4,reviews:parseInt(p.reviews)||0,stock:parseInt(p.stock)||0}),[p]),D=J.useCallback(S=>{v(le=>({...le,colors:S}))},[]),P=J.useCallback(S=>{v(le=>({...le,images:S,image:S.length>0?typeof S[0]=="string"?S[0]:S[0].url:le.image}))},[]),U=()=>{v({name:"",price:"",category:"",image:"",images:[],description:"",videoUrl:"",colors:[],sizes:"",rating:4,reviews:0,stock:0}),I(""),l(null)},E=async S=>{S.preventDefault();try{if(!window.ProductManager){console.error("ProductManager not initialized");return}const le=p.sizes?p.sizes.split(",").map(_e=>_e.trim()).filter(_e=>_e):[];let de=[];p.images&&p.images.length>0?de=p.images.map(_e=>typeof _e=="string"?_e:_e.url):p.image.trim()&&(de=[p.image.trim()]);const fe={name:p.name.trim(),price:parseFloat(p.price),category:p.category.trim(),image:p.image.trim()||(de.length>0?de[0]:""),images:de,enhancedImages:p.images,description:p.description.trim(),videoUrl:p.videoUrl.trim(),colors:p.colors,sizes:le,rating:parseFloat(p.rating)||4,reviews:parseInt(p.reviews)||0,stock:parseInt(p.stock)||0};o?(await window.ProductManager.update(o.id,fe),we("Product updated successfully","success")):(await window.ProductManager.add(fe),we("Product added successfully","success")),di.syncWithProducts(),await C(),U()}catch(le){console.error("Error saving product:",le),we("Failed to save product","error")}},ie=S=>{l(S);const le=S.sizes?S.sizes.join(", "):"";let de=[];S.enhancedImages&&S.enhancedImages.length>0?de=S.enhancedImages:S.images&&S.images.length>0&&(de=S.images.map((fe,_e)=>({id:`img-${_e}-${Date.now()}`,url:fe,angle:_e===0?"front":"other",description:""}))),v({name:S.name,price:S.price,category:S.category,image:S.image,images:de,description:S.description,videoUrl:S.videoUrl||"",colors:S.colors||[],sizes:le,rating:S.rating||4,reviews:S.reviews||0,stock:S.stock||0}),setTimeout(()=>{const fe=document.getElementById("product-form-section");fe&&(fe.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"}),fe.classList.add("highlight-form"),setTimeout(()=>{fe.classList.remove("highlight-form")},2e3))},100)},Ce=()=>{w.trim()&&(v(S=>({...S,images:[...S.images,w.trim()]})),I(""))},je=S=>{v(le=>({...le,images:le.images.filter((de,fe)=>fe!==S)}))},Fe=S=>{const le=r.find(de=>de.id==S);le&&O({isOpen:!0,product:le})},oe=async()=>{if(L.product)try{if(!window.ProductManager){console.error("ProductManager not initialized");return}await window.ProductManager.delete(L.product.id),di.syncWithProducts(),await C(),we(`"${L.product.name}" deleted successfully`,"success"),o&&o.id==L.product.id&&U()}catch(S){console.error("Error deleting product:",S),we("Error deleting product","error")}O({isOpen:!1,product:null})},B=()=>{const S=prompt("Enter new category name:");S&&(di.add(S)?(we("Category added successfully","success"),C()):we("Category already exists","error"))},X=S=>{$({isOpen:!0,categoryName:S})},R=()=>{F.categoryName&&(di.delete(F.categoryName),C(),we(`Category "${F.categoryName}" deleted successfully`,"success")),$({isOpen:!1,categoryName:null})};return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[c.jsxs("div",{className:"container-custom",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-12 h-12 admin-header rounded-lg flex items-center justify-center admin-icon",children:c.jsx("div",{className:"icon-chart-line text-2xl text-white"})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Dashboard"}),c.jsx("p",{className:"text-gray-600",children:"Manage your products, categories, and store settings"})]})]}),c.jsxs("a",{href:"index.html",className:"btn btn-secondary flex items-center gap-2",children:[c.jsx("div",{className:"icon-arrow-left text-sm"}),"Back to Store"]})]}),c.jsxs("div",{id:"product-form-section",className:"bg-white p-6 rounded-lg shadow mb-8 transition-all duration-500",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:c.jsx("div",{className:"icon-tools text-lg text-[var(--primary-color)]"})}),c.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:o?`Edit Product: ${o.name}`:"Add New Product"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("button",{type:"button",onClick:()=>Y(!z),className:`btn text-sm flex items-center gap-2 ${z?"btn-primary":"btn-secondary"}`,children:[c.jsx("div",{className:"icon-eye text-xs"}),z?"Hide Preview":"Show Preview"]}),o&&c.jsx("button",{type:"button",onClick:()=>{U(),we("Edit cancelled","info")},className:"btn btn-secondary text-sm",children:"Cancel Edit"})]})]}),c.jsxs("form",{onSubmit:E,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name"}),c.jsx("input",{name:"name",value:p.name,onChange:T,placeholder:"Enter product name",className:"w-full border border-gray-300 p-3 rounded-md focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price ($)"}),c.jsx("input",{name:"price",type:"number",step:"0.01",value:p.price,onChange:T,placeholder:"0.00",className:"w-full border border-gray-300 p-3 rounded-md focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stock Quantity"}),c.jsx("input",{name:"stock",type:"number",min:"0",value:p.stock,onChange:T,placeholder:"0",className:"w-full border border-gray-300 p-3 rounded-md focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent",required:!0}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Number of items available for sale"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{name:"category",value:p.category,onChange:T,placeholder:"Enter or select category",className:"flex-1 border border-gray-300 p-3 rounded-md focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent",list:"category-list",required:!0}),c.jsx("button",{type:"button",onClick:()=>{const S=p.category.trim();S&&!t.includes(S)&&(di.add(S),C(),we(`Category "${S}" added`,"success"))},className:"btn btn-secondary px-4 whitespace-nowrap",title:"Add this category if it doesn't exist",children:"+ Add"})]}),c.jsx("datalist",{id:"category-list",children:t.map(S=>c.jsx("option",{value:S},S))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Main Image URL"}),c.jsx("input",{name:"image",value:p.image,onChange:T,placeholder:"https://example.com/image.jpg",className:"w-full border border-gray-300 p-3 rounded-md focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent"}),p.image&&c.jsxs("div",{className:"mt-2",children:[c.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Main Image Preview"}),c.jsx("img",{src:p.image,alt:"Main product image preview",className:"w-24 h-24 object-cover rounded border hover:border-[var(--primary-color)] transition-colors",onError:S=>{S.target.style.display="none"}})]})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Images"}),c.jsxs("div",{className:"flex items-center gap-4 mb-4 p-3 bg-gray-50 rounded-lg",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"checkbox",id:"useEnhancedImages",checked:N,onChange:S=>M(S.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),c.jsx("label",{htmlFor:"useEnhancedImages",className:"text-sm font-medium text-gray-700",children:"Enhanced Image Management"})]}),c.jsx("div",{className:"text-xs text-gray-500",children:N?" Manage angles & descriptions":" Simple image list"})]}),N?c.jsx(nw,{images:p.images,onUpdate:P,title:"Product Images"}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex gap-2 mb-2",children:[c.jsx("input",{value:w,onChange:S=>I(S.target.value),placeholder:"https://example.com/additional-image.jpg",className:"flex-1 border border-gray-300 p-3 rounded-md focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent"}),c.jsx("button",{type:"button",onClick:Ce,className:"btn btn-secondary px-4 whitespace-nowrap",children:"Add Image"})]}),p.images.length===0?c.jsxs("div",{className:"text-center py-6 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[c.jsx("div",{className:"text-2xl mb-2",children:""}),c.jsx("p",{className:"text-gray-500 text-sm",children:"No additional images yet"})]}):c.jsxs("div",{children:[c.jsx("div",{className:"flex items-center justify-between mb-2",children:c.jsxs("p",{className:"text-sm font-medium text-gray-700",children:["Additional Images (",p.images.length,")"]})}),c.jsx("div",{className:"grid grid-cols-6 gap-2",children:p.images.map((S,le)=>{const de=typeof S=="string"?S:S.url;return c.jsxs("div",{className:"relative group",children:[c.jsx("img",{src:de,alt:`Image ${le+1}`,className:"w-full h-20 object-cover rounded border hover:border-[var(--primary-color)] transition-colors",onError:fe=>{fe.target.src="https://via.placeholder.com/80x80?text=Error"}}),c.jsx("button",{type:"button",onClick:()=>je(le),className:"absolute top-1 right-1 w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-lg text-sm flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity shadow-lg hover:scale-110 transform",title:"Delete image",children:""}),c.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-black/70 text-white text-xs p-1 text-center opacity-0 group-hover:opacity-100 transition-opacity rounded-b",children:["#",le+1]})]},`${de}-${le}`)})})]}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Add multiple images showing different angles of the product"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Video URL (Optional)"}),c.jsx("input",{name:"videoUrl",value:p.videoUrl,onChange:T,placeholder:"https://example.com/video.mp4",className:"w-full border border-gray-300 p-3 rounded-md focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Add a video URL for product demonstrations"})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Colors"}),c.jsx(ew,{colors:p.colors,onChange:D})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sizes (comma-separated)"}),c.jsx("input",{name:"sizes",value:p.sizes,onChange:T,placeholder:"S, M, L, XL or 7, 8, 9, 10, 11, 12",className:"w-full border border-gray-300 p-3 rounded-md focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter sizes separated by commas"})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),c.jsx("textarea",{name:"description",value:p.description,onChange:T,placeholder:"Enter product description",className:"w-full border border-gray-300 p-3 rounded-md focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent",rows:"3"})]}),c.jsxs("div",{className:"md:col-span-2 flex gap-4",children:[c.jsx("button",{type:"submit",className:"btn btn-primary px-6 py-3",children:o?"Update Product":"Add Product"}),o&&c.jsx("button",{type:"button",onClick:U,className:"btn btn-secondary px-6 py-3",children:"Cancel Edit"})]})]})]}),c.jsx(sw,{product:A,isVisible:z&&(p.name||p.image||p.description||p.colors.length>0)}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-8",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:c.jsx("div",{className:"icon-palette text-lg text-green-600"})}),c.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Categories"})]}),c.jsx("button",{onClick:B,className:"btn btn-primary",children:"Add Category"})]}),c.jsx("div",{className:"flex gap-3 flex-wrap",children:t.map(S=>c.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 px-4 py-2 rounded-full",children:[c.jsx("span",{className:"text-gray-700",children:S}),c.jsx("button",{onClick:()=>X(S),className:"text-red-500 hover:text-red-700 font-bold",title:"Delete category",children:""})]},S))})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:c.jsx("div",{className:"icon-database text-lg text-purple-600"})}),c.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:["Products (",h==="All Categories"?r.length:r.filter(S=>S.category===h).length,")"]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("select",{value:h,onChange:S=>m(S.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--primary-color)] text-sm",children:[c.jsx("option",{value:"All Categories",children:"All Categories"}),t.map(S=>c.jsx("option",{value:S,children:S},S))]}),c.jsxs("button",{onClick:()=>{const S=document.getElementById("product-form-section");S&&S.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},className:"btn btn-secondary text-sm flex items-center gap-2",children:[c.jsx("div",{className:"icon-arrow-up text-xs"}),"Jump to Form"]})]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:r.filter(S=>h==="All Categories"||S.category===h).map(S=>c.jsxs("div",{className:`border rounded-lg overflow-hidden hover:shadow-md transition-all ${o&&o.id===S.id?"border-[var(--primary-color)] ring-2 ring-[var(--primary-color)]/20 bg-blue-50/30":"border-gray-200"}`,children:[c.jsxs("div",{className:"aspect-square overflow-hidden bg-gray-100 relative",children:[o&&o.id===S.id&&c.jsx("div",{className:"absolute top-2 left-2 bg-[var(--primary-color)] text-white text-xs px-2 py-1 rounded-full font-medium",children:"Editing"}),c.jsx("img",{src:S.image,alt:S.name,className:"w-full h-full object-cover",onError:le=>{le.target.src="https://via.placeholder.com/300x300?text=No+Image"}})]}),c.jsxs("div",{className:"p-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:S.name}),c.jsx("div",{className:"mb-1",children:S.isDailyDeal?c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("span",{className:"text-lg font-bold text-red-600",children:["$",S.price.toFixed(2)]}),c.jsxs("span",{className:"text-sm text-gray-500 line-through",children:["$",S.originalPrice.toFixed(2)]}),c.jsxs("span",{className:"bg-red-600 text-white px-2 py-1 rounded-full text-xs font-bold",children:[S.discountPercent,"% OFF"]})]}):c.jsxs("p",{className:"text-xl font-bold text-[var(--primary-color)]",children:["$",S.price.toFixed(2)]})}),c.jsx("p",{className:"text-sm text-gray-500 mb-2",children:S.category}),c.jsx("div",{className:"mb-2",children:S.stock===0?c.jsx("span",{className:"inline-block px-2 py-1 bg-red-100 text-red-700 text-xs font-medium rounded-full",children:"Out of Stock (0)"}):S.stock<=5?c.jsxs("span",{className:"inline-block px-2 py-1 bg-orange-100 text-orange-700 text-xs font-medium rounded-full",children:["Low Stock (",S.stock,")"]}):c.jsxs("span",{className:"inline-block px-2 py-1 bg-green-100 text-green-700 text-xs font-medium rounded-full",children:["In Stock (",S.stock,")"]})}),c.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 mb-2",children:S.description}),S.videoUrl&&c.jsxs("div",{className:"flex items-center gap-1 text-xs text-blue-600 mb-4",children:[c.jsx("div",{className:"icon-play text-xs"}),c.jsx("span",{children:"Video available"})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>ie(S),className:`btn flex-1 text-sm ${o&&o.id===S.id?"btn-primary":"btn-secondary"}`,children:o&&o.id===S.id?"Editing...":"Edit"}),c.jsx("button",{onClick:()=>Fe(S.id),className:"btn bg-red-600 hover:bg-red-700 text-white flex-1 text-sm",children:"Delete"})]})]})]},S.id))}),r.filter(S=>h==="All Categories"||S.category===h).length===0&&c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"icon-shopping-bag text-4xl text-gray-300 mx-auto mb-3"}),c.jsx("p",{className:"text-gray-500",children:"No products found. Add your first product above."})]})]}),c.jsx(iw,{products:r,onUpdate:C}),c.jsx(ow,{products:r,onUpdate:C})]}),c.jsx(xg,{isOpen:L.isOpen,onClose:()=>O({isOpen:!1,product:null}),onConfirm:oe,title:"Delete Product",message:"Are you sure you want to delete this product?",confirmText:"Delete Product",cancelText:"Keep Product",type:"danger",itemDetails:L.product?{name:L.product.name,price:L.product.price,category:L.product.category,image:L.product.image,reviews:L.product.reviews}:null}),c.jsx(xg,{isOpen:F.isOpen,onClose:()=>$({isOpen:!1,categoryName:null}),onConfirm:R,title:"Delete Category",message:`Are you sure you want to delete the category "${F.categoryName}"?`,confirmText:"Delete Category",cancelText:"Keep Category",type:"warning"}),ne&&c.jsx("button",{onClick:ce,className:"fixed bottom-6 right-6 bg-[var(--primary-color)] hover:bg-[var(--primary-hover)] text-white p-3 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 z-50 group",title:"Go to top",children:c.jsx("div",{className:"icon-arrow-up text-lg group-hover:animate-bounce"})})]})}const lw=()=>{};var _g={};const Xy=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},cw=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const o=r[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],h=r[t++],m=r[t++],p=((o&7)<<18|(l&63)<<12|(h&63)<<6|m&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const l=r[t++],h=r[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},Zy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const l=r[o],h=o+1<r.length,m=h?r[o+1]:0,p=o+2<r.length,v=p?r[o+2]:0,w=l>>2,I=(l&3)<<4|m>>4;let N=(m&15)<<2|v>>6,M=v&63;p||(M=64,h||(N=64)),i.push(t[w],t[I],t[N],t[M])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Xy(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):cw(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],m=o<r.length?t[r.charAt(o)]:0;++o;const v=o<r.length?t[r.charAt(o)]:64;++o;const I=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||m==null||v==null||I==null)throw new uw;const N=l<<2|m>>4;if(i.push(N),v!==64){const M=m<<4&240|v>>2;if(i.push(M),I!==64){const L=v<<6&192|I;i.push(L)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class uw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const dw=function(r){const e=Xy(r);return Zy.encodeByteArray(e,!0)},eu=function(r){return dw(r).replace(/\./g,"")},ev=function(r){try{return Zy.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function hw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const fw=()=>hw().__FIREBASE_DEFAULTS__,mw=()=>{if(typeof process>"u"||typeof _g>"u")return;const r=_g.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},pw=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&ev(r[1]);return e&&JSON.parse(e)},wu=()=>{try{return lw()||fw()||mw()||pw()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},tv=r=>wu()?.emulatorHosts?.[r],nv=r=>{const e=tv(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},rv=()=>wu()?.config,sv=r=>wu()?.[`_${r}`];class gw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}function Ei(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function nf(r){return(await fetch(r,{credentials:"include"})).ok}function iv(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...r};return[eu(JSON.stringify(t)),eu(JSON.stringify(h)),""].join(".")}const Ha={};function yw(){const r={prod:[],emulator:[]};for(const e of Object.keys(Ha))Ha[e]?r.emulator.push(e):r.prod.push(e);return r}function vw(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let wg=!1;function rf(r,e){if(typeof window>"u"||typeof document>"u"||!Ei(window.location.host)||Ha[r]===e||Ha[r]||wg)return;Ha[r]=e;function t(N){return`__firebase__banner__${N}`}const i="__firebase__banner",l=yw().prod.length>0;function h(){const N=document.getElementById(i);N&&N.remove()}function m(N){N.style.display="flex",N.style.background="#7faaf0",N.style.position="fixed",N.style.bottom="5px",N.style.left="5px",N.style.padding=".5em",N.style.borderRadius="5px",N.style.alignItems="center"}function p(N,M){N.setAttribute("width","24"),N.setAttribute("id",M),N.setAttribute("height","24"),N.setAttribute("viewBox","0 0 24 24"),N.setAttribute("fill","none"),N.style.marginLeft="-6px"}function v(){const N=document.createElement("span");return N.style.cursor="pointer",N.style.marginLeft="16px",N.style.fontSize="24px",N.innerHTML=" &times;",N.onclick=()=>{wg=!0,h()},N}function w(N,M){N.setAttribute("id",M),N.innerText="Learn more",N.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",N.setAttribute("target","__blank"),N.style.paddingLeft="5px",N.style.textDecoration="underline"}function I(){const N=vw(i),M=t("text"),L=document.getElementById(M)||document.createElement("span"),O=t("learnmore"),F=document.getElementById(O)||document.createElement("a"),$=t("preprendIcon"),z=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(N.created){const Y=N.element;m(Y),w(F,O);const ne=v();p(z,$),Y.append(z,L,F,ne),document.body.appendChild(Y)}l?(L.innerText="Preview backend disconnected.",z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",M)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",I):I()}function Bt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Bt())}function _w(){const r=wu()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ww(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ew(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function bw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Iw(){const r=Bt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function Tw(){return!_w()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Nw(){try{return typeof indexedDB=="object"}catch{return!1}}function Sw(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}const Cw="FirebaseError";class ur extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=Cw,Object.setPrototypeOf(this,ur.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ll.prototype.create)}}class ll{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?kw(l,i):"Error",m=`${this.serviceName}: ${h} (${o}).`;return new ur(o,m,i)}}function kw(r,e){return r.replace(Aw,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const Aw=/\{\$([^}]+)}/g;function Pw(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function gi(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=r[o],h=e[o];if(Eg(l)&&Eg(h)){if(!gi(l,h))return!1}else if(l!==h)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function Eg(r){return r!==null&&typeof r=="object"}function cl(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Rw(r,e){const t=new jw(r,e);return t.subscribe.bind(t)}class jw{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");Dw(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=gh),o.error===void 0&&(o.error=gh),o.complete===void 0&&(o.complete=gh);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Dw(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function gh(){}function zt(r){return r&&r._delegate?r._delegate:r}class Cs{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const hi="[DEFAULT]";class Vw{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new gw;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Mw(e))try{this.getOrInitializeService({instanceIdentifier:hi})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=hi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=hi){return this.instances.has(e)}getOptions(e=hi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(l);i===m&&h.resolve(o)}return o}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const l=this.instances.get(i);return l&&e(l,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Ow(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=hi){return this.component?this.component.multipleInstances?e:hi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Ow(r){return r===hi?void 0:r}function Mw(r){return r.instantiationMode==="EAGER"}class Lw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Vw(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Ve;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ve||(Ve={}));const Fw={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},Uw=Ve.INFO,Bw={[Ve.DEBUG]:"log",[Ve.VERBOSE]:"log",[Ve.INFO]:"info",[Ve.WARN]:"warn",[Ve.ERROR]:"error"},zw=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=Bw[e];if(o)console[o](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class sf{constructor(e){this.name=e,this._logLevel=Uw,this._logHandler=zw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Fw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ve.DEBUG,...e),this._logHandler(this,Ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ve.VERBOSE,...e),this._logHandler(this,Ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ve.INFO,...e),this._logHandler(this,Ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ve.WARN,...e),this._logHandler(this,Ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ve.ERROR,...e),this._logHandler(this,Ve.ERROR,...e)}}const $w=(r,e)=>e.some(t=>r instanceof t);let bg,Ig;function qw(){return bg||(bg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Hw(){return Ig||(Ig=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ov=new WeakMap,Ph=new WeakMap,av=new WeakMap,yh=new WeakMap,of=new WeakMap;function Ww(r){const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{t(Is(r.result)),o()},h=()=>{i(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&ov.set(t,r)}).catch(()=>{}),of.set(e,r),e}function Gw(r){if(Ph.has(r))return;const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});Ph.set(r,e)}let Rh={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Ph.get(r);if(e==="objectStoreNames")return r.objectStoreNames||av.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Is(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function Kw(r){Rh=r(Rh)}function Qw(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(vh(this),e,...t);return av.set(i,e.sort?e.sort():[e]),Is(i)}:Hw().includes(r)?function(...e){return r.apply(vh(this),e),Is(ov.get(this))}:function(...e){return Is(r.apply(vh(this),e))}}function Yw(r){return typeof r=="function"?Qw(r):(r instanceof IDBTransaction&&Gw(r),$w(r,qw())?new Proxy(r,Rh):r)}function Is(r){if(r instanceof IDBRequest)return Ww(r);if(yh.has(r))return yh.get(r);const e=Yw(r);return e!==r&&(yh.set(r,e),of.set(e,r)),e}const vh=r=>of.get(r);function Jw(r,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const h=indexedDB.open(r,e),m=Is(h);return i&&h.addEventListener("upgradeneeded",p=>{i(Is(h.result),p.oldVersion,p.newVersion,Is(h.transaction),p)}),t&&h.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),m.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),m}const Xw=["get","getKey","getAll","getAllKeys","count"],Zw=["put","add","delete","clear"],xh=new Map;function Tg(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(xh.get(e))return xh.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=Zw.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||Xw.includes(t)))return;const l=async function(h,...m){const p=this.transaction(h,o?"readwrite":"readonly");let v=p.store;return i&&(v=v.index(m.shift())),(await Promise.all([v[t](...m),o&&p.done]))[0]};return xh.set(e,l),l}Kw(r=>({...r,get:(e,t,i)=>Tg(e,t)||r.get(e,t,i),has:(e,t)=>!!Tg(e,t)||r.has(e,t)}));class eE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(tE(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function tE(r){return r.getComponent()?.type==="VERSION"}const jh="@firebase/app",Ng="0.14.7";const Vr=new sf("@firebase/app"),nE="@firebase/app-compat",rE="@firebase/analytics-compat",sE="@firebase/analytics",iE="@firebase/app-check-compat",oE="@firebase/app-check",aE="@firebase/auth",lE="@firebase/auth-compat",cE="@firebase/database",uE="@firebase/data-connect",dE="@firebase/database-compat",hE="@firebase/functions",fE="@firebase/functions-compat",mE="@firebase/installations",pE="@firebase/installations-compat",gE="@firebase/messaging",yE="@firebase/messaging-compat",vE="@firebase/performance",xE="@firebase/performance-compat",_E="@firebase/remote-config",wE="@firebase/remote-config-compat",EE="@firebase/storage",bE="@firebase/storage-compat",IE="@firebase/firestore",TE="@firebase/ai",NE="@firebase/firestore-compat",SE="firebase",CE="12.8.0";const Dh="[DEFAULT]",kE={[jh]:"fire-core",[nE]:"fire-core-compat",[sE]:"fire-analytics",[rE]:"fire-analytics-compat",[oE]:"fire-app-check",[iE]:"fire-app-check-compat",[aE]:"fire-auth",[lE]:"fire-auth-compat",[cE]:"fire-rtdb",[uE]:"fire-data-connect",[dE]:"fire-rtdb-compat",[hE]:"fire-fn",[fE]:"fire-fn-compat",[mE]:"fire-iid",[pE]:"fire-iid-compat",[gE]:"fire-fcm",[yE]:"fire-fcm-compat",[vE]:"fire-perf",[xE]:"fire-perf-compat",[_E]:"fire-rc",[wE]:"fire-rc-compat",[EE]:"fire-gcs",[bE]:"fire-gcs-compat",[IE]:"fire-fst",[NE]:"fire-fst-compat",[TE]:"fire-vertex","fire-js":"fire-js",[SE]:"fire-js-all"};const tu=new Map,AE=new Map,Vh=new Map;function Sg(r,e){try{r.container.addComponent(e)}catch(t){Vr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function yi(r){const e=r.name;if(Vh.has(e))return Vr.debug(`There were multiple attempts to register component ${e}.`),!1;Vh.set(e,r);for(const t of tu.values())Sg(t,r);for(const t of AE.values())Sg(t,r);return!0}function Eu(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Pn(r){return r==null?!1:r.settings!==void 0}const PE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ts=new ll("app","Firebase",PE);class RE{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Cs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ts.create("app-deleted",{appName:this._name})}}const bi=CE;function lv(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i={name:Dh,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw Ts.create("bad-app-name",{appName:String(o)});if(t||(t=rv()),!t)throw Ts.create("no-options");const l=tu.get(o);if(l){if(gi(t,l.options)&&gi(i,l.config))return l;throw Ts.create("duplicate-app",{appName:o})}const h=new Lw(o);for(const p of Vh.values())h.addComponent(p);const m=new RE(t,i,h);return tu.set(o,m),m}function af(r=Dh){const e=tu.get(r);if(!e&&r===Dh&&rv())return lv();if(!e)throw Ts.create("no-app",{appName:r});return e}function nr(r,e,t){let i=kE[r]??r;t&&(i+=`-${t}`);const o=i.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const h=[`Unable to register library "${i}" with version "${e}":`];o&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Vr.warn(h.join(" "));return}yi(new Cs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const jE="firebase-heartbeat-database",DE=1,Xa="firebase-heartbeat-store";let _h=null;function cv(){return _h||(_h=Jw(jE,DE,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Xa)}catch(t){console.warn(t)}}}}).catch(r=>{throw Ts.create("idb-open",{originalErrorMessage:r.message})})),_h}async function VE(r){try{const t=(await cv()).transaction(Xa),i=await t.objectStore(Xa).get(uv(r));return await t.done,i}catch(e){if(e instanceof ur)Vr.warn(e.message);else{const t=Ts.create("idb-get",{originalErrorMessage:e?.message});Vr.warn(t.message)}}}async function Cg(r,e){try{const i=(await cv()).transaction(Xa,"readwrite");await i.objectStore(Xa).put(e,uv(r)),await i.done}catch(t){if(t instanceof ur)Vr.warn(t.message);else{const i=Ts.create("idb-set",{originalErrorMessage:t?.message});Vr.warn(i.message)}}}function uv(r){return`${r.name}!${r.options.appId}`}const OE=1024,ME=30;class LE{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new UE(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=kg();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>ME){const o=BE(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Vr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=kg(),{heartbeatsToSend:t,unsentEntries:i}=FE(this._heartbeatsCache.heartbeats),o=eu(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Vr.warn(e),""}}}function kg(){return new Date().toISOString().substring(0,10)}function FE(r,e=OE){const t=[];let i=r.slice();for(const o of r){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),Ag(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Ag(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class UE{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Nw()?Sw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await VE(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Cg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Cg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Ag(r){return eu(JSON.stringify({version:2,heartbeats:r})).length}function BE(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}function zE(r){yi(new Cs("platform-logger",e=>new eE(e),"PRIVATE")),yi(new Cs("heartbeat",e=>new LE(e),"PRIVATE")),nr(jh,Ng,r),nr(jh,Ng,"esm2020"),nr("fire-js","")}zE("");var Pg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ns,dv;(function(){var r;function e(C,T){function A(){}A.prototype=T.prototype,C.F=T.prototype,C.prototype=new A,C.prototype.constructor=C,C.D=function(D,P,U){for(var E=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)E[ie-2]=arguments[ie];return T.prototype[P].apply(D,E)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(C,T,A){A||(A=0);const D=Array(16);if(typeof T=="string")for(var P=0;P<16;++P)D[P]=T.charCodeAt(A++)|T.charCodeAt(A++)<<8|T.charCodeAt(A++)<<16|T.charCodeAt(A++)<<24;else for(P=0;P<16;++P)D[P]=T[A++]|T[A++]<<8|T[A++]<<16|T[A++]<<24;T=C.g[0],A=C.g[1],P=C.g[2];let U=C.g[3],E;E=T+(U^A&(P^U))+D[0]+3614090360&4294967295,T=A+(E<<7&4294967295|E>>>25),E=U+(P^T&(A^P))+D[1]+3905402710&4294967295,U=T+(E<<12&4294967295|E>>>20),E=P+(A^U&(T^A))+D[2]+606105819&4294967295,P=U+(E<<17&4294967295|E>>>15),E=A+(T^P&(U^T))+D[3]+3250441966&4294967295,A=P+(E<<22&4294967295|E>>>10),E=T+(U^A&(P^U))+D[4]+4118548399&4294967295,T=A+(E<<7&4294967295|E>>>25),E=U+(P^T&(A^P))+D[5]+1200080426&4294967295,U=T+(E<<12&4294967295|E>>>20),E=P+(A^U&(T^A))+D[6]+2821735955&4294967295,P=U+(E<<17&4294967295|E>>>15),E=A+(T^P&(U^T))+D[7]+4249261313&4294967295,A=P+(E<<22&4294967295|E>>>10),E=T+(U^A&(P^U))+D[8]+1770035416&4294967295,T=A+(E<<7&4294967295|E>>>25),E=U+(P^T&(A^P))+D[9]+2336552879&4294967295,U=T+(E<<12&4294967295|E>>>20),E=P+(A^U&(T^A))+D[10]+4294925233&4294967295,P=U+(E<<17&4294967295|E>>>15),E=A+(T^P&(U^T))+D[11]+2304563134&4294967295,A=P+(E<<22&4294967295|E>>>10),E=T+(U^A&(P^U))+D[12]+1804603682&4294967295,T=A+(E<<7&4294967295|E>>>25),E=U+(P^T&(A^P))+D[13]+4254626195&4294967295,U=T+(E<<12&4294967295|E>>>20),E=P+(A^U&(T^A))+D[14]+2792965006&4294967295,P=U+(E<<17&4294967295|E>>>15),E=A+(T^P&(U^T))+D[15]+1236535329&4294967295,A=P+(E<<22&4294967295|E>>>10),E=T+(P^U&(A^P))+D[1]+4129170786&4294967295,T=A+(E<<5&4294967295|E>>>27),E=U+(A^P&(T^A))+D[6]+3225465664&4294967295,U=T+(E<<9&4294967295|E>>>23),E=P+(T^A&(U^T))+D[11]+643717713&4294967295,P=U+(E<<14&4294967295|E>>>18),E=A+(U^T&(P^U))+D[0]+3921069994&4294967295,A=P+(E<<20&4294967295|E>>>12),E=T+(P^U&(A^P))+D[5]+3593408605&4294967295,T=A+(E<<5&4294967295|E>>>27),E=U+(A^P&(T^A))+D[10]+38016083&4294967295,U=T+(E<<9&4294967295|E>>>23),E=P+(T^A&(U^T))+D[15]+3634488961&4294967295,P=U+(E<<14&4294967295|E>>>18),E=A+(U^T&(P^U))+D[4]+3889429448&4294967295,A=P+(E<<20&4294967295|E>>>12),E=T+(P^U&(A^P))+D[9]+568446438&4294967295,T=A+(E<<5&4294967295|E>>>27),E=U+(A^P&(T^A))+D[14]+3275163606&4294967295,U=T+(E<<9&4294967295|E>>>23),E=P+(T^A&(U^T))+D[3]+4107603335&4294967295,P=U+(E<<14&4294967295|E>>>18),E=A+(U^T&(P^U))+D[8]+1163531501&4294967295,A=P+(E<<20&4294967295|E>>>12),E=T+(P^U&(A^P))+D[13]+2850285829&4294967295,T=A+(E<<5&4294967295|E>>>27),E=U+(A^P&(T^A))+D[2]+4243563512&4294967295,U=T+(E<<9&4294967295|E>>>23),E=P+(T^A&(U^T))+D[7]+1735328473&4294967295,P=U+(E<<14&4294967295|E>>>18),E=A+(U^T&(P^U))+D[12]+2368359562&4294967295,A=P+(E<<20&4294967295|E>>>12),E=T+(A^P^U)+D[5]+4294588738&4294967295,T=A+(E<<4&4294967295|E>>>28),E=U+(T^A^P)+D[8]+2272392833&4294967295,U=T+(E<<11&4294967295|E>>>21),E=P+(U^T^A)+D[11]+1839030562&4294967295,P=U+(E<<16&4294967295|E>>>16),E=A+(P^U^T)+D[14]+4259657740&4294967295,A=P+(E<<23&4294967295|E>>>9),E=T+(A^P^U)+D[1]+2763975236&4294967295,T=A+(E<<4&4294967295|E>>>28),E=U+(T^A^P)+D[4]+1272893353&4294967295,U=T+(E<<11&4294967295|E>>>21),E=P+(U^T^A)+D[7]+4139469664&4294967295,P=U+(E<<16&4294967295|E>>>16),E=A+(P^U^T)+D[10]+3200236656&4294967295,A=P+(E<<23&4294967295|E>>>9),E=T+(A^P^U)+D[13]+681279174&4294967295,T=A+(E<<4&4294967295|E>>>28),E=U+(T^A^P)+D[0]+3936430074&4294967295,U=T+(E<<11&4294967295|E>>>21),E=P+(U^T^A)+D[3]+3572445317&4294967295,P=U+(E<<16&4294967295|E>>>16),E=A+(P^U^T)+D[6]+76029189&4294967295,A=P+(E<<23&4294967295|E>>>9),E=T+(A^P^U)+D[9]+3654602809&4294967295,T=A+(E<<4&4294967295|E>>>28),E=U+(T^A^P)+D[12]+3873151461&4294967295,U=T+(E<<11&4294967295|E>>>21),E=P+(U^T^A)+D[15]+530742520&4294967295,P=U+(E<<16&4294967295|E>>>16),E=A+(P^U^T)+D[2]+3299628645&4294967295,A=P+(E<<23&4294967295|E>>>9),E=T+(P^(A|~U))+D[0]+4096336452&4294967295,T=A+(E<<6&4294967295|E>>>26),E=U+(A^(T|~P))+D[7]+1126891415&4294967295,U=T+(E<<10&4294967295|E>>>22),E=P+(T^(U|~A))+D[14]+2878612391&4294967295,P=U+(E<<15&4294967295|E>>>17),E=A+(U^(P|~T))+D[5]+4237533241&4294967295,A=P+(E<<21&4294967295|E>>>11),E=T+(P^(A|~U))+D[12]+1700485571&4294967295,T=A+(E<<6&4294967295|E>>>26),E=U+(A^(T|~P))+D[3]+2399980690&4294967295,U=T+(E<<10&4294967295|E>>>22),E=P+(T^(U|~A))+D[10]+4293915773&4294967295,P=U+(E<<15&4294967295|E>>>17),E=A+(U^(P|~T))+D[1]+2240044497&4294967295,A=P+(E<<21&4294967295|E>>>11),E=T+(P^(A|~U))+D[8]+1873313359&4294967295,T=A+(E<<6&4294967295|E>>>26),E=U+(A^(T|~P))+D[15]+4264355552&4294967295,U=T+(E<<10&4294967295|E>>>22),E=P+(T^(U|~A))+D[6]+2734768916&4294967295,P=U+(E<<15&4294967295|E>>>17),E=A+(U^(P|~T))+D[13]+1309151649&4294967295,A=P+(E<<21&4294967295|E>>>11),E=T+(P^(A|~U))+D[4]+4149444226&4294967295,T=A+(E<<6&4294967295|E>>>26),E=U+(A^(T|~P))+D[11]+3174756917&4294967295,U=T+(E<<10&4294967295|E>>>22),E=P+(T^(U|~A))+D[2]+718787259&4294967295,P=U+(E<<15&4294967295|E>>>17),E=A+(U^(P|~T))+D[9]+3951481745&4294967295,C.g[0]=C.g[0]+T&4294967295,C.g[1]=C.g[1]+(P+(E<<21&4294967295|E>>>11))&4294967295,C.g[2]=C.g[2]+P&4294967295,C.g[3]=C.g[3]+U&4294967295}i.prototype.v=function(C,T){T===void 0&&(T=C.length);const A=T-this.blockSize,D=this.C;let P=this.h,U=0;for(;U<T;){if(P==0)for(;U<=A;)o(this,C,U),U+=this.blockSize;if(typeof C=="string"){for(;U<T;)if(D[P++]=C.charCodeAt(U++),P==this.blockSize){o(this,D),P=0;break}}else for(;U<T;)if(D[P++]=C[U++],P==this.blockSize){o(this,D),P=0;break}}this.h=P,this.o+=T},i.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var T=1;T<C.length-8;++T)C[T]=0;T=this.o*8;for(var A=C.length-8;A<C.length;++A)C[A]=T&255,T/=256;for(this.v(C),C=Array(16),T=0,A=0;A<4;++A)for(let D=0;D<32;D+=8)C[T++]=this.g[A]>>>D&255;return C};function l(C,T){var A=m;return Object.prototype.hasOwnProperty.call(A,C)?A[C]:A[C]=T(C)}function h(C,T){this.h=T;const A=[];let D=!0;for(let P=C.length-1;P>=0;P--){const U=C[P]|0;D&&U==T||(A[P]=U,D=!1)}this.g=A}var m={};function p(C){return-128<=C&&C<128?l(C,function(T){return new h([T|0],T<0?-1:0)}):new h([C|0],C<0?-1:0)}function v(C){if(isNaN(C)||!isFinite(C))return I;if(C<0)return F(v(-C));const T=[];let A=1;for(let D=0;C>=A;D++)T[D]=C/A|0,A*=4294967296;return new h(T,0)}function w(C,T){if(C.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(C.charAt(0)=="-")return F(w(C.substring(1),T));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=v(Math.pow(T,8));let D=I;for(let U=0;U<C.length;U+=8){var P=Math.min(8,C.length-U);const E=parseInt(C.substring(U,U+P),T);P<8?(P=v(Math.pow(T,P)),D=D.j(P).add(v(E))):(D=D.j(A),D=D.add(v(E)))}return D}var I=p(0),N=p(1),M=p(16777216);r=h.prototype,r.m=function(){if(O(this))return-F(this).m();let C=0,T=1;for(let A=0;A<this.g.length;A++){const D=this.i(A);C+=(D>=0?D:4294967296+D)*T,T*=4294967296}return C},r.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(L(this))return"0";if(O(this))return"-"+F(this).toString(C);const T=v(Math.pow(C,6));var A=this;let D="";for(;;){const P=ne(A,T).g;A=$(A,P.j(T));let U=((A.g.length>0?A.g[0]:A.h)>>>0).toString(C);if(A=P,L(A))return U+D;for(;U.length<6;)U="0"+U;D=U+D}},r.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function L(C){if(C.h!=0)return!1;for(let T=0;T<C.g.length;T++)if(C.g[T]!=0)return!1;return!0}function O(C){return C.h==-1}r.l=function(C){return C=$(this,C),O(C)?-1:L(C)?0:1};function F(C){const T=C.g.length,A=[];for(let D=0;D<T;D++)A[D]=~C.g[D];return new h(A,~C.h).add(N)}r.abs=function(){return O(this)?F(this):this},r.add=function(C){const T=Math.max(this.g.length,C.g.length),A=[];let D=0;for(let P=0;P<=T;P++){let U=D+(this.i(P)&65535)+(C.i(P)&65535),E=(U>>>16)+(this.i(P)>>>16)+(C.i(P)>>>16);D=E>>>16,U&=65535,E&=65535,A[P]=E<<16|U}return new h(A,A[A.length-1]&-2147483648?-1:0)};function $(C,T){return C.add(F(T))}r.j=function(C){if(L(this)||L(C))return I;if(O(this))return O(C)?F(this).j(F(C)):F(F(this).j(C));if(O(C))return F(this.j(F(C)));if(this.l(M)<0&&C.l(M)<0)return v(this.m()*C.m());const T=this.g.length+C.g.length,A=[];for(var D=0;D<2*T;D++)A[D]=0;for(D=0;D<this.g.length;D++)for(let P=0;P<C.g.length;P++){const U=this.i(D)>>>16,E=this.i(D)&65535,ie=C.i(P)>>>16,Ce=C.i(P)&65535;A[2*D+2*P]+=E*Ce,z(A,2*D+2*P),A[2*D+2*P+1]+=U*Ce,z(A,2*D+2*P+1),A[2*D+2*P+1]+=E*ie,z(A,2*D+2*P+1),A[2*D+2*P+2]+=U*ie,z(A,2*D+2*P+2)}for(C=0;C<T;C++)A[C]=A[2*C+1]<<16|A[2*C];for(C=T;C<2*T;C++)A[C]=0;return new h(A,0)};function z(C,T){for(;(C[T]&65535)!=C[T];)C[T+1]+=C[T]>>>16,C[T]&=65535,T++}function Y(C,T){this.g=C,this.h=T}function ne(C,T){if(L(T))throw Error("division by zero");if(L(C))return new Y(I,I);if(O(C))return T=ne(F(C),T),new Y(F(T.g),F(T.h));if(O(T))return T=ne(C,F(T)),new Y(F(T.g),T.h);if(C.g.length>30){if(O(C)||O(T))throw Error("slowDivide_ only works with positive integers.");for(var A=N,D=T;D.l(C)<=0;)A=G(A),D=G(D);var P=ce(A,1),U=ce(D,1);for(D=ce(D,2),A=ce(A,2);!L(D);){var E=U.add(D);E.l(C)<=0&&(P=P.add(A),U=E),D=ce(D,1),A=ce(A,1)}return T=$(C,P.j(T)),new Y(P,T)}for(P=I;C.l(T)>=0;){for(A=Math.max(1,Math.floor(C.m()/T.m())),D=Math.ceil(Math.log(A)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),U=v(A),E=U.j(T);O(E)||E.l(C)>0;)A-=D,U=v(A),E=U.j(T);L(U)&&(U=N),P=P.add(U),C=$(C,E)}return new Y(P,C)}r.B=function(C){return ne(this,C).h},r.and=function(C){const T=Math.max(this.g.length,C.g.length),A=[];for(let D=0;D<T;D++)A[D]=this.i(D)&C.i(D);return new h(A,this.h&C.h)},r.or=function(C){const T=Math.max(this.g.length,C.g.length),A=[];for(let D=0;D<T;D++)A[D]=this.i(D)|C.i(D);return new h(A,this.h|C.h)},r.xor=function(C){const T=Math.max(this.g.length,C.g.length),A=[];for(let D=0;D<T;D++)A[D]=this.i(D)^C.i(D);return new h(A,this.h^C.h)};function G(C){const T=C.g.length+1,A=[];for(let D=0;D<T;D++)A[D]=C.i(D)<<1|C.i(D-1)>>>31;return new h(A,C.h)}function ce(C,T){const A=T>>5;T%=32;const D=C.g.length-A,P=[];for(let U=0;U<D;U++)P[U]=T>0?C.i(U+A)>>>T|C.i(U+A+1)<<32-T:C.i(U+A);return new h(P,C.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,dv=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=v,h.fromString=w,Ns=h}).apply(typeof Pg<"u"?Pg:typeof self<"u"?self:typeof window<"u"?window:{});var Vc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var hv,Ua,fv,$c,Oh,mv,pv,gv;(function(){var r,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Vc=="object"&&Vc];for(var y=0;y<u.length;++y){var x=u[y];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var i=t(this);function o(u,y){if(y)e:{var x=i;u=u.split(".");for(var b=0;b<u.length-1;b++){var H=u[b];if(!(H in x))break e;x=x[H]}u=u[u.length-1],b=x[u],y=y(b),y!=b&&y!=null&&e(x,u,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(y){var x=[],b;for(b in y)Object.prototype.hasOwnProperty.call(y,b)&&x.push([b,y[b]]);return x}});var l=l||{},h=this||self;function m(u){var y=typeof u;return y=="object"&&u!=null||y=="function"}function p(u,y,x){return u.call.apply(u.bind,arguments)}function v(u,y,x){return v=p,v.apply(null,arguments)}function w(u,y){var x=Array.prototype.slice.call(arguments,1);return function(){var b=x.slice();return b.push.apply(b,arguments),u.apply(this,b)}}function I(u,y){function x(){}x.prototype=y.prototype,u.Z=y.prototype,u.prototype=new x,u.prototype.constructor=u,u.Ob=function(b,H,Q){for(var ue=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)ue[Pe-2]=arguments[Pe];return y.prototype[H].apply(b,ue)}}var N=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function M(u){const y=u.length;if(y>0){const x=Array(y);for(let b=0;b<y;b++)x[b]=u[b];return x}return[]}function L(u,y){for(let b=1;b<arguments.length;b++){const H=arguments[b];var x=typeof H;if(x=x!="object"?x:H?Array.isArray(H)?"array":x:"null",x=="array"||x=="object"&&typeof H.length=="number"){x=u.length||0;const Q=H.length||0;u.length=x+Q;for(let ue=0;ue<Q;ue++)u[x+ue]=H[ue]}else u.push(H)}}class O{constructor(y,x){this.i=y,this.j=x,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function F(u){h.setTimeout(()=>{throw u},0)}function $(){var u=C;let y=null;return u.g&&(y=u.g,u.g=u.g.next,u.g||(u.h=null),y.next=null),y}class z{constructor(){this.h=this.g=null}add(y,x){const b=Y.get();b.set(y,x),this.h?this.h.next=b:this.g=b,this.h=b}}var Y=new O(()=>new ne,u=>u.reset());class ne{constructor(){this.next=this.g=this.h=null}set(y,x){this.h=y,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let G,ce=!1,C=new z,T=()=>{const u=Promise.resolve(void 0);G=()=>{u.then(A)}};function A(){for(var u;u=$();){try{u.h.call(u.g)}catch(x){F(x)}var y=Y;y.j(u),y.h<100&&(y.h++,u.next=y.g,y.g=u)}ce=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(u,y){this.type=u,this.g=this.target=y,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,y=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const x=()=>{};h.addEventListener("test",x,y),h.removeEventListener("test",x,y)}catch{}return u})();function E(u){return/^[\s\xa0]*$/.test(u)}function ie(u,y){P.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,y)}I(ie,P),ie.prototype.init=function(u,y){const x=this.type=u.type,b=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=y,y=u.relatedTarget,y||(x=="mouseover"?y=u.fromElement:x=="mouseout"&&(y=u.toElement)),this.relatedTarget=y,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&ie.Z.h.call(this)},ie.prototype.h=function(){ie.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ce="closure_listenable_"+(Math.random()*1e6|0),je=0;function Fe(u,y,x,b,H){this.listener=u,this.proxy=null,this.src=y,this.type=x,this.capture=!!b,this.ha=H,this.key=++je,this.da=this.fa=!1}function oe(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function B(u,y,x){for(const b in u)y.call(x,u[b],b,u)}function X(u,y){for(const x in u)y.call(void 0,u[x],x,u)}function R(u){const y={};for(const x in u)y[x]=u[x];return y}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function le(u,y){let x,b;for(let H=1;H<arguments.length;H++){b=arguments[H];for(x in b)u[x]=b[x];for(let Q=0;Q<S.length;Q++)x=S[Q],Object.prototype.hasOwnProperty.call(b,x)&&(u[x]=b[x])}}function de(u){this.src=u,this.g={},this.h=0}de.prototype.add=function(u,y,x,b,H){const Q=u.toString();u=this.g[Q],u||(u=this.g[Q]=[],this.h++);const ue=_e(u,y,b,H);return ue>-1?(y=u[ue],x||(y.fa=!1)):(y=new Fe(y,this.src,Q,!!b,H),y.fa=x,u.push(y)),y};function fe(u,y){const x=y.type;if(x in u.g){var b=u.g[x],H=Array.prototype.indexOf.call(b,y,void 0),Q;(Q=H>=0)&&Array.prototype.splice.call(b,H,1),Q&&(oe(y),u.g[x].length==0&&(delete u.g[x],u.h--))}}function _e(u,y,x,b){for(let H=0;H<u.length;++H){const Q=u[H];if(!Q.da&&Q.listener==y&&Q.capture==!!x&&Q.ha==b)return H}return-1}var Ae="closure_lm_"+(Math.random()*1e6|0),Be={};function Ge(u,y,x,b,H){if(Array.isArray(y)){for(let Q=0;Q<y.length;Q++)Ge(u,y[Q],x,b,H);return null}return x=qo(x),u&&u[Ce]?u.J(y,x,m(b)?!!b.capture:!1,H):$t(u,y,x,!1,b,H)}function $t(u,y,x,b,H,Q){if(!y)throw Error("Invalid event type");const ue=m(H)?!!H.capture:!!H;let Pe=Ci(u);if(Pe||(u[Ae]=Pe=new de(u)),x=Pe.add(y,x,b,ue,Q),x.proxy)return x;if(b=Ni(),x.proxy=b,b.src=u,b.listener=x,u.addEventListener)U||(H=ue),H===void 0&&(H=!1),u.addEventListener(y.toString(),b,H);else if(u.attachEvent)u.attachEvent(Si(y.toString()),b);else if(u.addListener&&u.removeListener)u.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return x}function Ni(){function u(x){return y.call(u.src,u.listener,x)}const y=xl;return u}function $o(u,y,x,b,H){if(Array.isArray(y))for(var Q=0;Q<y.length;Q++)$o(u,y[Q],x,b,H);else b=m(b)?!!b.capture:!!b,x=qo(x),u&&u[Ce]?(u=u.i,Q=String(y).toString(),Q in u.g&&(y=u.g[Q],x=_e(y,x,b,H),x>-1&&(oe(y[x]),Array.prototype.splice.call(y,x,1),y.length==0&&(delete u.g[Q],u.h--)))):u&&(u=Ci(u))&&(y=u.g[y.toString()],u=-1,y&&(u=_e(y,x,b,H)),(x=u>-1?y[u]:null)&&Br(x))}function Br(u){if(typeof u!="number"&&u&&!u.da){var y=u.src;if(y&&y[Ce])fe(y.i,u);else{var x=u.type,b=u.proxy;y.removeEventListener?y.removeEventListener(x,b,u.capture):y.detachEvent?y.detachEvent(Si(x),b):y.addListener&&y.removeListener&&y.removeListener(b),(x=Ci(y))?(fe(x,u),x.h==0&&(x.src=null,y[Ae]=null)):oe(u)}}}function Si(u){return u in Be?Be[u]:Be[u]="on"+u}function xl(u,y){if(u.da)u=!0;else{y=new ie(y,this);const x=u.listener,b=u.ha||u.src;u.fa&&Br(u),u=x.call(b,y)}return u}function Ci(u){return u=u[Ae],u instanceof de?u:null}var Ls="__closure_events_fn_"+(Math.random()*1e9>>>0);function qo(u){return typeof u=="function"?u:(u[Ls]||(u[Ls]=function(y){return u.handleEvent(y)}),u[Ls])}function dt(){D.call(this),this.i=new de(this),this.M=this,this.G=null}I(dt,D),dt.prototype[Ce]=!0,dt.prototype.removeEventListener=function(u,y,x,b){$o(this,u,y,x,b)};function at(u,y){var x,b=u.G;if(b)for(x=[];b;b=b.G)x.push(b);if(u=u.M,b=y.type||y,typeof y=="string")y=new P(y,u);else if(y instanceof P)y.target=y.target||u;else{var H=y;y=new P(b,u),le(y,H)}H=!0;let Q,ue;if(x)for(ue=x.length-1;ue>=0;ue--)Q=y.g=x[ue],H=wn(Q,b,!0,y)&&H;if(Q=y.g=u,H=wn(Q,b,!0,y)&&H,H=wn(Q,b,!1,y)&&H,x)for(ue=0;ue<x.length;ue++)Q=y.g=x[ue],H=wn(Q,b,!1,y)&&H}dt.prototype.N=function(){if(dt.Z.N.call(this),this.i){var u=this.i;for(const y in u.g){const x=u.g[y];for(let b=0;b<x.length;b++)oe(x[b]);delete u.g[y],u.h--}}this.G=null},dt.prototype.J=function(u,y,x,b){return this.i.add(String(u),y,!1,x,b)},dt.prototype.K=function(u,y,x,b){return this.i.add(String(u),y,!0,x,b)};function wn(u,y,x,b){if(y=u.i.g[String(y)],!y)return!0;y=y.concat();let H=!0;for(let Q=0;Q<y.length;++Q){const ue=y[Q];if(ue&&!ue.da&&ue.capture==x){const Pe=ue.listener,lt=ue.ha||ue.src;ue.fa&&fe(u.i,ue),H=Pe.call(lt,b)!==!1&&H}}return H&&!b.defaultPrevented}function Ho(u,y){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=v(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:h.setTimeout(u,y||0)}function Wo(u){u.g=Ho(()=>{u.g=null,u.i&&(u.i=!1,Wo(u))},u.l);const y=u.h;u.h=null,u.m.apply(null,y)}class _l extends D{constructor(y,x){super(),this.m=y,this.l=x,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Wo(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zr(u){D.call(this),this.h=u,this.g={}}I(zr,D);var Go=[];function ki(u){B(u.g,function(y,x){this.g.hasOwnProperty(x)&&Br(y)},u),u.g={}}zr.prototype.N=function(){zr.Z.N.call(this),ki(this)},zr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $r=h.JSON.stringify,wl=h.JSON.parse,Fs=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function qr(){}function El(){}var Hr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ai(){P.call(this,"d")}I(Ai,P);function Ko(){P.call(this,"c")}I(Ko,P);var En={},Pi=null;function Wr(){return Pi=Pi||new dt}En.Ia="serverreachability";function Ri(u){P.call(this,En.Ia,u)}I(Ri,P);function hr(u){const y=Wr();at(y,new Ri(y))}En.STAT_EVENT="statevent";function fr(u,y){P.call(this,En.STAT_EVENT,u),this.stat=y}I(fr,P);function it(u){const y=Wr();at(y,new fr(y,u))}En.Ja="timingevent";function Qo(u,y){P.call(this,En.Ja,u),this.size=y}I(Qo,P);function Gr(u,y){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},y)}function Kr(){this.g=!0}Kr.prototype.ua=function(){this.g=!1};function bl(u,y,x,b,H,Q){u.info(function(){if(u.g)if(Q){var ue="",Pe=Q.split("&");for(let We=0;We<Pe.length;We++){var lt=Pe[We].split("=");if(lt.length>1){const ht=lt[0];lt=lt[1];const on=ht.split("_");ue=on.length>=2&&on[1]=="type"?ue+(ht+"="+lt+"&"):ue+(ht+"=redacted&")}}}else ue=null;else ue=Q;return"XMLHTTP REQ ("+b+") [attempt "+H+"]: "+y+`
`+x+`
`+ue})}function Il(u,y,x,b,H,Q,ue){u.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+H+"]: "+y+`
`+x+`
`+Q+" "+ue})}function Mn(u,y,x,b){u.info(function(){return"XMLHTTP TEXT ("+y+"): "+Us(u,x)+(b?" "+b:"")})}function Tl(u,y){u.info(function(){return"TIMEOUT: "+y})}Kr.prototype.info=function(){};function Us(u,y){if(!u.g)return y;if(!y)return null;try{const Q=JSON.parse(y);if(Q){for(u=0;u<Q.length;u++)if(Array.isArray(Q[u])){var x=Q[u];if(!(x.length<2)){var b=x[1];if(Array.isArray(b)&&!(b.length<1)){var H=b[0];if(H!="noop"&&H!="stop"&&H!="close")for(let ue=1;ue<b.length;ue++)b[ue]=""}}}}return $r(Q)}catch{return y}}var Qr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Yr={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Nl;function mr(){}I(mr,qr),mr.prototype.g=function(){return new XMLHttpRequest},Nl=new mr;function Ln(u){return encodeURIComponent(String(u))}function ji(u){var y=1;u=u.split(":");const x=[];for(;y>0&&u.length;)x.push(u.shift()),y--;return u.length&&x.push(u.join(":")),x}function hn(u,y,x,b){this.j=u,this.i=y,this.l=x,this.S=b||1,this.V=new zr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Sl}function Sl(){this.i=null,this.g="",this.h=!1}var Cl={},Yo={};function bn(u,y,x){u.M=1,u.A=gr(fn(y)),u.u=x,u.R=!0,Jo(u,null)}function Jo(u,y){u.F=Date.now(),Bs(u),u.B=fn(u.A);var x=u.B,b=u.S;Array.isArray(b)||(b=[String(b)]),aa(x.i,"t",b),u.C=0,x=u.j.L,u.h=new Sl,u.g=Ll(u.j,x?y:null,!u.u),u.P>0&&(u.O=new _l(v(u.Y,u,u.g),u.P)),y=u.V,x=u.g,b=u.ba;var H="readystatechange";Array.isArray(H)||(H&&(Go[0]=H.toString()),H=Go);for(let Q=0;Q<H.length;Q++){const ue=Ge(x,H[Q],b||y.handleEvent,!1,y.h||y);if(!ue)break;y.g[ue.key]=ue}y=u.J?R(u.J):{},u.u?(u.v||(u.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,y)):(u.v="GET",u.g.ea(u.B,u.v,null,y)),hr(),bl(u.i,u.v,u.B,u.l,u.S,u.u)}hn.prototype.ba=function(u){u=u.target;const y=this.O;y&&Hn(u)==3?y.j():this.Y(u)},hn.prototype.Y=function(u){try{if(u==this.g)e:{const Pe=Hn(this.g),lt=this.g.ya(),We=this.g.ca();if(!(Pe<3)&&(Pe!=3||this.g&&(this.h.h||this.g.la()||Ol(this.g)))){this.K||Pe!=4||lt==7||(lt==8||We<=0?hr(3):hr(2)),Di(this);var y=this.g.ca();this.X=y;var x=kl(this);if(this.o=y==200,Il(this.i,this.v,this.B,this.l,this.S,Pe,y),this.o){if(this.U&&!this.L){t:{if(this.g){var b,H=this.g;if((b=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(b)){var Q=b;break t}}Q=null}if(u=Q)Mn(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Je(this,u);else{this.o=!1,this.m=3,it(12),pr(this),zs(this);break e}}if(this.R){u=!0;let ht;for(;!this.K&&this.C<x.length;)if(ht=Pl(this,x),ht==Yo){Pe==4&&(this.m=4,it(14),u=!1),Mn(this.i,this.l,null,"[Incomplete Response]");break}else if(ht==Cl){this.m=4,it(15),Mn(this.i,this.l,x,"[Invalid Chunk]"),u=!1;break}else Mn(this.i,this.l,ht,null),Je(this,ht);if(Al(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pe!=4||x.length!=0||this.h.h||(this.m=1,it(16),u=!1),this.o=this.o&&u,!u)Mn(this.i,this.l,x,"[Invalid Chunked Response]"),pr(this),zs(this);else if(x.length>0&&!this.W){this.W=!0;var ue=this.j;ue.g==this&&ue.aa&&!ue.P&&(ue.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),Js(ue),ue.P=!0,it(11))}}else Mn(this.i,this.l,x,null),Je(this,x);Pe==4&&pr(this),this.o&&!this.K&&(Pe==4?qi(this.j,this):(this.o=!1,Bs(this)))}else ca(this.g),y==400&&x.indexOf("Unknown SID")>0?(this.m=3,it(12)):(this.m=0,it(13)),pr(this),zs(this)}}}catch{}};function kl(u){if(!Al(u))return u.g.la();const y=Ol(u.g);if(y==="")return"";let x="";const b=y.length,H=Hn(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return pr(u),zs(u),"";u.h.i=new h.TextDecoder}for(let Q=0;Q<b;Q++)u.h.h=!0,x+=u.h.i.decode(y[Q],{stream:!(H&&Q==b-1)});return y.length=0,u.h.g+=x,u.C=0,u.h.g}function Al(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Pl(u,y){var x=u.C,b=y.indexOf(`
`,x);return b==-1?Yo:(x=Number(y.substring(x,b)),isNaN(x)?Cl:(b+=1,b+x>y.length?Yo:(y=y.slice(b,b+x),u.C=b+x,y)))}hn.prototype.cancel=function(){this.K=!0,pr(this)};function Bs(u){u.T=Date.now()+u.H,Xo(u,u.H)}function Xo(u,y){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Gr(v(u.aa,u),y)}function Di(u){u.D&&(h.clearTimeout(u.D),u.D=null)}hn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Tl(this.i,this.B),this.M!=2&&(hr(),it(17)),pr(this),this.m=2,zs(this)):Xo(this,this.T-u)};function zs(u){u.j.I==0||u.K||qi(u.j,u)}function pr(u){Di(u);var y=u.O;y&&typeof y.dispose=="function"&&y.dispose(),u.O=null,ki(u.V),u.g&&(y=u.g,u.g=null,y.abort(),y.dispose())}function Je(u,y){try{var x=u.j;if(x.I!=0&&(x.g==u||ea(x.h,u))){if(!u.L&&ea(x.h,u)&&x.I==3){try{var b=x.Ba.g.parse(y)}catch{b=null}if(Array.isArray(b)&&b.length==3){var H=b;if(H[0]==0){e:if(!x.v){if(x.g)if(x.g.F+3e3<u.F)$i(x),rn(x);else break e;Kn(x),it(18)}}else x.xa=H[1],0<x.xa-x.K&&H[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=Gr(v(x.Va,x),6e3));$s(x.h)<=1&&x.ta&&(x.ta=void 0)}else sn(x,11)}else if((u.L||x.g==u)&&$i(x),!E(y))for(H=x.Ba.g.parse(y),y=0;y<H.length;y++){let We=H[y];const ht=We[0];if(!(ht<=x.K))if(x.K=ht,We=We[1],x.I==2)if(We[0]=="c"){x.M=We[1],x.ba=We[2];const on=We[3];on!=null&&(x.ka=on,x.j.info("VER="+x.ka));const wr=We[4];wr!=null&&(x.za=wr,x.j.info("SVER="+x.za));const Qn=We[5];Qn!=null&&typeof Qn=="number"&&Qn>0&&(b=1.5*Qn,x.O=b,x.j.info("backChannelRequestTimeoutMs_="+b)),b=x;const Yn=u.g;if(Yn){const Gi=Yn.g?Yn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Gi){var Q=b.h;Q.g||Gi.indexOf("spdy")==-1&&Gi.indexOf("quic")==-1&&Gi.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Oi(Q,Q.h),Q.h=null))}if(b.G){const ha=Yn.g?Yn.g.getResponseHeader("X-HTTP-Session-Id"):null;ha&&(b.wa=ha,qe(b.J,b.G,ha))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-u.F,x.j.info("Handshake RTT: "+x.T+"ms")),b=x;var ue=u;if(b.na=da(b,b.L?b.ba:null,b.W),ue.L){qs(b.h,ue);var Pe=ue,lt=b.O;lt&&(Pe.H=lt),Pe.D&&(Di(Pe),Bs(Pe)),b.g=ue}else Rt(b);x.i.length>0&&_r(x)}else We[0]!="stop"&&We[0]!="close"||sn(x,7);else x.I==3&&(We[0]=="stop"||We[0]=="close"?We[0]=="stop"?sn(x,7):Bi(x):We[0]!="noop"&&x.l&&x.l.qa(We),x.A=0)}}hr(4)}catch{}}var Bu=class{constructor(u,y){this.g=u,this.map=y}};function Vi(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Zo(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function $s(u){return u.h?1:u.g?u.g.size:0}function ea(u,y){return u.h?u.h==y:u.g?u.g.has(y):!1}function Oi(u,y){u.g?u.g.add(y):u.h=y}function qs(u,y){u.h&&u.h==y?u.h=null:u.g&&u.g.has(y)&&u.g.delete(y)}Vi.prototype.cancel=function(){if(this.i=en(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function en(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let y=u.i;for(const x of u.g.values())y=y.concat(x.G);return y}return M(u.i)}var Rl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function tn(u,y){if(u){u=u.split("&");for(let x=0;x<u.length;x++){const b=u[x].indexOf("=");let H,Q=null;b>=0?(H=u[x].substring(0,b),Q=u[x].substring(b+1)):H=u[x],y(H,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function Fn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;u instanceof Fn?(this.l=u.l,Hs(this,u.j),this.o=u.o,this.g=u.g,Un(this,u.u),this.h=u.h,Jr(this,la(u.i)),this.m=u.m):u&&(y=String(u).match(Rl))?(this.l=!1,Hs(this,y[1]||"",!0),this.o=Ws(y[2]||""),this.g=Ws(y[3]||"",!0),Un(this,y[4]),this.h=Ws(y[5]||"",!0),Jr(this,y[6]||"",!0),this.m=Ws(y[7]||"")):(this.l=!1,this.i=new Le(null,this.l))}Fn.prototype.toString=function(){const u=[];var y=this.j;y&&u.push(Gs(y,na,!0),":");var x=this.g;return(x||y=="file")&&(u.push("//"),(y=this.o)&&u.push(Gs(y,na,!0),"@"),u.push(Ln(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&u.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&u.push("/"),u.push(Gs(x,x.charAt(0)=="/"?Ks:ra,!0))),(x=this.i.toString())&&u.push("?",x),(x=this.m)&&u.push("#",Gs(x,sa)),u.join("")},Fn.prototype.resolve=function(u){const y=fn(this);let x=!!u.j;x?Hs(y,u.j):x=!!u.o,x?y.o=u.o:x=!!u.g,x?y.g=u.g:x=u.u!=null;var b=u.h;if(x)Un(y,u.u);else if(x=!!u.h){if(b.charAt(0)!="/")if(this.g&&!this.h)b="/"+b;else{var H=y.h.lastIndexOf("/");H!=-1&&(b=y.h.slice(0,H+1)+b)}if(H=b,H==".."||H==".")b="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){b=H.lastIndexOf("/",0)==0,H=H.split("/");const Q=[];for(let ue=0;ue<H.length;){const Pe=H[ue++];Pe=="."?b&&ue==H.length&&Q.push(""):Pe==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),b&&ue==H.length&&Q.push("")):(Q.push(Pe),b=!0)}b=Q.join("/")}else b=H}return x?y.h=b:x=u.i.toString()!=="",x?Jr(y,la(u.i)):x=!!u.m,x&&(y.m=u.m),y};function fn(u){return new Fn(u)}function Hs(u,y,x){u.j=x?Ws(y,!0):y,u.j&&(u.j=u.j.replace(/:$/,""))}function Un(u,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);u.u=y}else u.u=null}function Jr(u,y,x){y instanceof Le?(u.i=y,Li(u.i,u.l)):(x||(y=Gs(y,zu)),u.i=new Le(y,u.l))}function qe(u,y,x){u.i.set(y,x)}function gr(u){return qe(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Ws(u,y){return u?y?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Gs(u,y,x){return typeof u=="string"?(u=encodeURI(u).replace(y,ta),x&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function ta(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var na=/[#\/\?@]/g,ra=/[#\?:]/g,Ks=/[#\?]/g,zu=/[#\?@]/g,sa=/#/g;function Le(u,y){this.h=this.g=null,this.i=u||null,this.j=!!y}function Bn(u){u.g||(u.g=new Map,u.h=0,u.i&&tn(u.i,function(y,x){u.add(decodeURIComponent(y.replace(/\+/g," ")),x)}))}r=Le.prototype,r.add=function(u,y){Bn(this),this.i=null,u=zn(this,u);let x=this.g.get(u);return x||this.g.set(u,x=[]),x.push(y),this.h+=1,this};function ia(u,y){Bn(u),y=zn(u,y),u.g.has(y)&&(u.i=null,u.h-=u.g.get(y).length,u.g.delete(y))}function Mi(u,y){return Bn(u),y=zn(u,y),u.g.has(y)}r.forEach=function(u,y){Bn(this),this.g.forEach(function(x,b){x.forEach(function(H){u.call(y,H,b,this)},this)},this)};function oa(u,y){Bn(u);let x=[];if(typeof y=="string")Mi(u,y)&&(x=x.concat(u.g.get(zn(u,y))));else for(u=Array.from(u.g.values()),y=0;y<u.length;y++)x=x.concat(u[y]);return x}r.set=function(u,y){return Bn(this),this.i=null,u=zn(this,u),Mi(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[y]),this.h+=1,this},r.get=function(u,y){return u?(u=oa(this,u),u.length>0?String(u[0]):y):y};function aa(u,y,x){ia(u,y),x.length>0&&(u.i=null,u.g.set(zn(u,y),M(x)),u.h+=x.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],y=Array.from(this.g.keys());for(let b=0;b<y.length;b++){var x=y[b];const H=Ln(x);x=oa(this,x);for(let Q=0;Q<x.length;Q++){let ue=H;x[Q]!==""&&(ue+="="+Ln(x[Q])),u.push(ue)}}return this.i=u.join("&")};function la(u){const y=new Le;return y.i=u.i,u.g&&(y.g=new Map(u.g),y.h=u.h),y}function zn(u,y){return y=String(y),u.j&&(y=y.toLowerCase()),y}function Li(u,y){y&&!u.j&&(Bn(u),u.i=null,u.g.forEach(function(x,b){const H=b.toLowerCase();b!=H&&(ia(this,b),aa(this,H,x))},u)),u.j=y}function $n(u,y){const x=new Kr;if(h.Image){const b=new Image;b.onload=w(Tt,x,"TestLoadImage: loaded",!0,y,b),b.onerror=w(Tt,x,"TestLoadImage: error",!1,y,b),b.onabort=w(Tt,x,"TestLoadImage: abort",!1,y,b),b.ontimeout=w(Tt,x,"TestLoadImage: timeout",!1,y,b),h.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=u}else y(!1)}function qn(u,y){const x=new Kr,b=new AbortController,H=setTimeout(()=>{b.abort(),Tt(x,"TestPingServer: timeout",!1,y)},1e4);fetch(u,{signal:b.signal}).then(Q=>{clearTimeout(H),Q.ok?Tt(x,"TestPingServer: ok",!0,y):Tt(x,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(H),Tt(x,"TestPingServer: error",!1,y)})}function Tt(u,y,x,b,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),b(x)}catch{}}function Qs(){this.g=new Fs}function yr(u){this.i=u.Sb||null,this.h=u.ab||!1}I(yr,qr),yr.prototype.g=function(){return new nn(this.i,this.h)};function nn(u,y){dt.call(this),this.H=u,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}I(nn,dt),r=nn.prototype,r.open=function(u,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=y,this.readyState=1,In(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(y.body=u),(this.H||h).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Xr(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,In(this)),this.g&&(this.readyState=3,In(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;jl(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function jl(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var y=u.value?u.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!u.done}))&&(this.response=this.responseText+=y)}u.done?Xr(this):In(this),this.readyState==3&&jl(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,Xr(this))},r.Na=function(u){this.g&&(this.response=u,Xr(this))},r.ga=function(){this.g&&Xr(this)};function Xr(u){u.readyState=4,u.l=null,u.j=null,u.B=null,In(u)}r.setRequestHeader=function(u,y){this.A.append(u,y)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],y=this.h.entries();for(var x=y.next();!x.done;)x=x.value,u.push(x[0]+": "+x[1]),x=y.next();return u.join(`\r
`)};function In(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(nn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Dl(u){let y="";return B(u,function(x,b){y+=b,y+=":",y+=x,y+=`\r
`}),y}function Fi(u,y,x){e:{for(b in x){var b=!1;break e}b=!0}b||(x=Dl(x),typeof u=="string"?x!=null&&Ln(x):qe(u,y,x))}function Ke(u){dt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}I(Ke,dt);var Vl=/^https?$/i,$u=["POST","PUT"];r=Ke.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,y,x,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);y=y?y.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Nl.g(),this.g.onreadystatechange=N(v(this.Ca,this));try{this.B=!0,this.g.open(y,String(u),!0),this.B=!1}catch(Q){Zr(this,Q);return}if(u=x||"",x=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var H in b)x.set(H,b[H]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const Q of b.keys())x.set(Q,b.get(Q));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(x.keys()).find(Q=>Q.toLowerCase()=="content-type"),H=h.FormData&&u instanceof h.FormData,!(Array.prototype.indexOf.call($u,y,void 0)>=0)||b||H||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,ue]of x)this.g.setRequestHeader(Q,ue);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(Q){Zr(this,Q)}};function Zr(u,y){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=y,u.o=5,es(u),xr(u)}function es(u){u.A||(u.A=!0,at(u,"complete"),at(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,at(this,"complete"),at(this,"abort"),xr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xr(this,!0)),Ke.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?vr(this):this.Xa())},r.Xa=function(){vr(this)};function vr(u){if(u.h&&typeof l<"u"){if(u.v&&Hn(u)==4)setTimeout(u.Ca.bind(u),0);else if(at(u,"readystatechange"),Hn(u)==4){u.h=!1;try{const Q=u.ca();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var x;if(!(x=y)){var b;if(b=Q===0){let ue=String(u.D).match(Rl)[1]||null;!ue&&h.self&&h.self.location&&(ue=h.self.location.protocol.slice(0,-1)),b=!Vl.test(ue?ue.toLowerCase():"")}x=b}if(x)at(u,"complete"),at(u,"success");else{u.o=6;try{var H=Hn(u)>2?u.g.statusText:""}catch{H=""}u.l=H+" ["+u.ca()+"]",es(u)}}finally{xr(u)}}}}function xr(u,y){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const x=u.g;u.g=null,y||at(u,"ready");try{x.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Hn(u){return u.g?u.g.readyState:0}r.ca=function(){try{return Hn(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var y=this.g.responseText;return u&&y.indexOf(u)==0&&(y=y.substring(u.length)),wl(y)}};function Ol(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function ca(u){const y={};u=(u.g&&Hn(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<u.length;b++){if(E(u[b]))continue;var x=ji(u[b]);const H=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const Q=y[H]||[];y[H]=Q,Q.push(x)}X(y,function(b){return b.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Wn(u,y,x){return x&&x.internalChannelParams&&x.internalChannelParams[u]||y}function Ui(u){this.za=0,this.i=[],this.j=new Kr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Wn("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Wn("baseRetryDelayMs",5e3,u),this.Za=Wn("retryDelaySeedMs",1e4,u),this.Ta=Wn("forwardChannelMaxRetries",2,u),this.va=Wn("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Vi(u&&u.concurrentRequestLimit),this.Ba=new Qs,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Ui.prototype,r.ka=8,r.I=1,r.connect=function(u,y,x,b){it(0),this.W=u,this.H=y||{},x&&b!==void 0&&(this.H.OSID=x,this.H.OAID=b),this.F=this.X,this.J=da(this,null,this.W),_r(this)};function Bi(u){if(zi(u),u.I==3){var y=u.V++,x=fn(u.J);if(qe(x,"SID",u.M),qe(x,"RID",y),qe(x,"TYPE","terminate"),Gn(u,x),y=new hn(u,u.j,y),y.M=2,y.A=gr(fn(x)),x=!1,h.navigator&&h.navigator.sendBeacon)try{x=h.navigator.sendBeacon(y.A.toString(),"")}catch{}!x&&h.Image&&(new Image().src=y.A,x=!0),x||(y.g=Ll(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Bs(y)}Xs(u)}function rn(u){u.g&&(Js(u),u.g.cancel(),u.g=null)}function zi(u){rn(u),u.v&&(h.clearTimeout(u.v),u.v=null),$i(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&h.clearTimeout(u.m),u.m=null)}function _r(u){if(!Zo(u.h)&&!u.m){u.m=!0;var y=u.Ea;G||T(),ce||(G(),ce=!0),C.add(y,u),u.D=0}}function Ml(u,y){return $s(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=y.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Gr(v(u.Ea,u,y),Hi(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const H=new hn(this,this.j,u);let Q=this.o;if(this.U&&(Q?(Q=R(Q),le(Q,this.U)):Q=this.U),this.u!==null||this.R||(H.J=Q,Q=null),this.S)e:{for(var y=0,x=0;x<this.i.length;x++){t:{var b=this.i[x];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(y+=b,y>4096){y=x;break e}if(y===4096||x===this.i.length-1){y=x+1;break e}}y=1e3}else y=1e3;y=ua(this,H,y),x=fn(this.J),qe(x,"RID",u),qe(x,"CVER",22),this.G&&qe(x,"X-HTTP-Session-Id",this.G),Gn(this,x),Q&&(this.R?y="headers="+Ln(Dl(Q))+"&"+y:this.u&&Fi(x,this.u,Q)),Oi(this.h,H),this.Ra&&qe(x,"TYPE","init"),this.S?(qe(x,"$req",y),qe(x,"SID","null"),H.U=!0,bn(H,x,null)):bn(H,x,y),this.I=2}}else this.I==3&&(u?Ys(this,u):this.i.length==0||Zo(this.h)||Ys(this))};function Ys(u,y){var x;y?x=y.l:x=u.V++;const b=fn(u.J);qe(b,"SID",u.M),qe(b,"RID",x),qe(b,"AID",u.K),Gn(u,b),u.u&&u.o&&Fi(b,u.u,u.o),x=new hn(u,u.j,x,u.D+1),u.u===null&&(x.J=u.o),y&&(u.i=y.G.concat(u.i)),y=ua(u,x,1e3),x.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Oi(u.h,x),bn(x,b,y)}function Gn(u,y){u.H&&B(u.H,function(x,b){qe(y,b,x)}),u.l&&B({},function(x,b){qe(y,b,x)})}function ua(u,y,x){x=Math.min(u.i.length,x);const b=u.l?v(u.l.Ka,u.l,u):null;e:{var H=u.i;let Pe=-1;for(;;){const lt=["count="+x];Pe==-1?x>0?(Pe=H[0].g,lt.push("ofs="+Pe)):Pe=0:lt.push("ofs="+Pe);let We=!0;for(let ht=0;ht<x;ht++){var Q=H[ht].g;const on=H[ht].map;if(Q-=Pe,Q<0)Pe=Math.max(0,H[ht].g-100),We=!1;else try{Q="req"+Q+"_"||"";try{var ue=on instanceof Map?on:Object.entries(on);for(const[wr,Qn]of ue){let Yn=Qn;m(Qn)&&(Yn=$r(Qn)),lt.push(Q+wr+"="+encodeURIComponent(Yn))}}catch(wr){throw lt.push(Q+"type="+encodeURIComponent("_badmap")),wr}}catch{b&&b(on)}}if(We){ue=lt.join("&");break e}}ue=void 0}return u=u.i.splice(0,x),y.G=u,ue}function Rt(u){if(!u.g&&!u.v){u.Y=1;var y=u.Da;G||T(),ce||(G(),ce=!0),C.add(y,u),u.A=0}}function Kn(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Gr(v(u.Da,u),Hi(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,ts(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Gr(v(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,it(10),rn(this),ts(this))};function Js(u){u.B!=null&&(h.clearTimeout(u.B),u.B=null)}function ts(u){u.g=new hn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var y=fn(u.na);qe(y,"RID","rpc"),qe(y,"SID",u.M),qe(y,"AID",u.K),qe(y,"CI",u.F?"0":"1"),!u.F&&u.ia&&qe(y,"TO",u.ia),qe(y,"TYPE","xmlhttp"),Gn(u,y),u.u&&u.o&&Fi(y,u.u,u.o),u.O&&(u.g.H=u.O);var x=u.g;u=u.ba,x.M=1,x.A=gr(fn(y)),x.u=null,x.R=!0,Jo(x,u)}r.Va=function(){this.C!=null&&(this.C=null,rn(this),Kn(this),it(19))};function $i(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function qi(u,y){var x=null;if(u.g==y){$i(u),Js(u),u.g=null;var b=2}else if(ea(u.h,y))x=y.G,qs(u.h,y),b=1;else return;if(u.I!=0){if(y.o)if(b==1){x=y.u?y.u.length:0,y=Date.now()-y.F;var H=u.D;b=Wr(),at(b,new Qo(b,x)),_r(u)}else Rt(u);else if(H=y.m,H==3||H==0&&y.X>0||!(b==1&&Ml(u,y)||b==2&&Kn(u)))switch(x&&x.length>0&&(y=u.h,y.i=y.i.concat(x)),H){case 1:sn(u,5);break;case 4:sn(u,10);break;case 3:sn(u,6);break;default:sn(u,2)}}}function Hi(u,y){let x=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(x*=2),x*y}function sn(u,y){if(u.j.info("Error code "+y),y==2){var x=v(u.bb,u),b=u.Ua;const H=!b;b=new Fn(b||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Hs(b,"https"),gr(b),H?$n(b.toString(),x):qn(b.toString(),x)}else it(2);u.I=0,u.l&&u.l.pa(y),Xs(u),zi(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),it(2)):(this.j.info("Failed to ping google.com"),it(1))};function Xs(u){if(u.I=0,u.ja=[],u.l){const y=en(u.h);(y.length!=0||u.i.length!=0)&&(L(u.ja,y),L(u.ja,u.i),u.h.i.length=0,M(u.i),u.i.length=0),u.l.oa()}}function da(u,y,x){var b=x instanceof Fn?fn(x):new Fn(x);if(b.g!="")y&&(b.g=y+"."+b.g),Un(b,b.u);else{var H=h.location;b=H.protocol,y=y?y+"."+H.hostname:H.hostname,H=+H.port;const Q=new Fn(null);b&&Hs(Q,b),y&&(Q.g=y),H&&Un(Q,H),x&&(Q.h=x),b=Q}return x=u.G,y=u.wa,x&&y&&qe(b,x,y),qe(b,"VER",u.ka),Gn(u,b),b}function Ll(u,y,x){if(y&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=u.Aa&&!u.ma?new Ke(new yr({ab:x})):new Ke(u.ma),y.Fa(u.L),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fl(){}r=Fl.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Wi(){}Wi.prototype.g=function(u,y){return new Nt(u,y)};function Nt(u,y){dt.call(this),this.g=new Ui(y),this.l=u,this.h=y&&y.messageUrlParams||null,u=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(u?u["X-WebChannel-Content-Type"]=y.messageContentType:u={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(u?u["X-WebChannel-Client-Profile"]=y.sa:u={"X-WebChannel-Client-Profile":y.sa}),this.g.U=u,(u=y&&y.Qb)&&!E(u)&&(this.g.u=u),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!E(y)&&(this.g.G=y,u=this.h,u!==null&&y in u&&(u=this.h,y in u&&delete u[y])),this.j=new ns(this)}I(Nt,dt),Nt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Nt.prototype.close=function(){Bi(this.g)},Nt.prototype.o=function(u){var y=this.g;if(typeof u=="string"){var x={};x.__data__=u,u=x}else this.v&&(x={},x.__data__=$r(u),u=x);y.i.push(new Bu(y.Ya++,u)),y.I==3&&_r(y)},Nt.prototype.N=function(){this.g.l=null,delete this.j,Bi(this.g),delete this.g,Nt.Z.N.call(this)};function Ul(u){Ai.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var y=u.__sm__;if(y){e:{for(const x in y){u=x;break e}u=void 0}(this.i=u)&&(u=this.i,y=y!==null&&u in y?y[u]:void 0),this.data=y}else this.data=u}I(Ul,Ai);function Bl(){Ko.call(this),this.status=1}I(Bl,Ko);function ns(u){this.g=u}I(ns,Fl),ns.prototype.ra=function(){at(this.g,"a")},ns.prototype.qa=function(u){at(this.g,new Ul(u))},ns.prototype.pa=function(u){at(this.g,new Bl)},ns.prototype.oa=function(){at(this.g,"b")},Wi.prototype.createWebChannel=Wi.prototype.g,Nt.prototype.send=Nt.prototype.o,Nt.prototype.open=Nt.prototype.m,Nt.prototype.close=Nt.prototype.close,gv=function(){return new Wi},pv=function(){return Wr()},mv=En,Oh={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Qr.NO_ERROR=0,Qr.TIMEOUT=8,Qr.HTTP_ERROR=6,$c=Qr,Yr.COMPLETE="complete",fv=Yr,El.EventType=Hr,Hr.OPEN="a",Hr.CLOSE="b",Hr.ERROR="c",Hr.MESSAGE="d",dt.prototype.listen=dt.prototype.J,Ua=El,Ke.prototype.listenOnce=Ke.prototype.K,Ke.prototype.getLastError=Ke.prototype.Ha,Ke.prototype.getLastErrorCode=Ke.prototype.ya,Ke.prototype.getStatus=Ke.prototype.ca,Ke.prototype.getResponseJson=Ke.prototype.La,Ke.prototype.getResponseText=Ke.prototype.la,Ke.prototype.send=Ke.prototype.ea,Ke.prototype.setWithCredentials=Ke.prototype.Fa,hv=Ke}).apply(typeof Vc<"u"?Vc:typeof self<"u"?self:typeof window<"u"?window:{});class Ft{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ft.UNAUTHENTICATED=new Ft(null),Ft.GOOGLE_CREDENTIALS=new Ft("google-credentials-uid"),Ft.FIRST_PARTY=new Ft("first-party-uid"),Ft.MOCK_USER=new Ft("mock-user");let Oo="12.8.0";function $E(r){Oo=r}const vi=new sf("@firebase/firestore");function yo(){return vi.logLevel}function pe(r,...e){if(vi.logLevel<=Ve.DEBUG){const t=e.map(lf);vi.debug(`Firestore (${Oo}): ${r}`,...t)}}function Or(r,...e){if(vi.logLevel<=Ve.ERROR){const t=e.map(lf);vi.error(`Firestore (${Oo}): ${r}`,...t)}}function ko(r,...e){if(vi.logLevel<=Ve.WARN){const t=e.map(lf);vi.warn(`Firestore (${Oo}): ${r}`,...t)}}function lf(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}function Te(r,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,yv(r,i,t)}function yv(r,e,t){let i=`FIRESTORE (${Oo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Or(i),new Error(i)}function He(r,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,r||yv(e,o,i)}function Re(r,e){return r}const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends ur{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Dr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class vv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ft.UNAUTHENTICATED)))}shutdown(){}}class HE{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class WE{constructor(e){this.t=e,this.currentUser=Ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){He(this.o===void 0,42304);let i=this.i;const o=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let l=new Dr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Dr,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},m=p=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((p=>m(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Dr)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(He(typeof i.accessToken=="string",31837,{l:i}),new vv(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return He(e===null||typeof e=="string",2055,{h:e}),new Ft(e)}}class GE{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Ft.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class KE{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new GE(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Ft.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Rg{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class QE{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Pn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){He(this.o===void 0,3512);const i=l=>{l.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,pe("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const o=l=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Rg(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(He(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Rg(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function YE(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}class cf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=YE(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%62))}return i}}function Oe(r,e){return r<e?-1:r>e?1:0}function Mh(r,e){const t=Math.min(r.length,e.length);for(let i=0;i<t;i++){const o=r.charAt(i),l=e.charAt(i);if(o!==l)return wh(o)===wh(l)?Oe(o,l):wh(o)?1:-1}return Oe(r.length,e.length)}const JE=55296,XE=57343;function wh(r){const e=r.charCodeAt(0);return e>=JE&&e<=XE}function Ao(r,e,t){return r.length===e.length&&r.every(((i,o)=>t(i,e[o])))}const jg="__name__";class tr{constructor(e,t,i){t===void 0?t=0:t>e.length&&Te(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Te(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return tr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof tr?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=tr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Oe(e.length,t.length)}static compareSegments(e,t){const i=tr.isNumericId(e),o=tr.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?tr.extractNumericId(e).compare(tr.extractNumericId(t)):Mh(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ns.fromString(e.substring(4,e.length-2))}}class Ye extends tr{construct(e,t,i){return new Ye(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new he(Z.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new Ye(t)}static emptyPath(){return new Ye([])}}const ZE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class At extends tr{construct(e,t,i){return new At(e,t,i)}static isValidIdentifier(e){return ZE.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),At.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===jg}static keyField(){return new At([jg])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new he(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let h=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new he(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new he(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,o+=2}else m==="`"?(h=!h,o++):m!=="."||h?(i+=m,o++):(l(),o++)}if(l(),h)throw new he(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new At(t)}static emptyPath(){return new At([])}}class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(Ye.fromString(e))}static fromName(e){return new Ee(Ye.fromString(e).popFirst(5))}static empty(){return new Ee(Ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ye.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new Ye(e.slice()))}}function xv(r,e,t){if(!t)throw new he(Z.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function eb(r,e,t,i){if(e===!0&&i===!0)throw new he(Z.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Dg(r){if(!Ee.isDocumentKey(r))throw new he(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Vg(r){if(Ee.isDocumentKey(r))throw new he(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function _v(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function bu(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Te(12329,{type:typeof r})}function Mr(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new he(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=bu(r);throw new he(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function tb(r,e){if(e<=0)throw new he(Z.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}function gt(r,e){const t={typeString:r};return e&&(t.value=e),t}function ul(r,e){if(!_v(r))throw new he(Z.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){t=`JSON missing required field: '${i}'`;break}const h=r[i];if(o&&typeof h!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(l!==void 0&&h!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new he(Z.INVALID_ARGUMENT,t);return!0}const Og=-62135596800,Mg=1e6;class et{static now(){return et.fromMillis(Date.now())}static fromDate(e){return et.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*Mg);return new et(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new he(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new he(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Og)throw new he(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Mg}_compareTo(e){return this.seconds===e.seconds?Oe(this.nanoseconds,e.nanoseconds):Oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:et._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ul(e,et._jsonSchema))return new et(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Og;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}et._jsonSchemaVersion="firestore/timestamp/1.0",et._jsonSchema={type:gt("string",et._jsonSchemaVersion),seconds:gt("number"),nanoseconds:gt("number")};class ke{static fromTimestamp(e){return new ke(e)}static min(){return new ke(new et(0,0))}static max(){return new ke(new et(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Za=-1;function nb(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=ke.fromTimestamp(i===1e9?new et(t+1,0):new et(t,i));return new ks(o,Ee.empty(),e)}function rb(r){return new ks(r.readTime,r.key,Za)}class ks{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new ks(ke.min(),Ee.empty(),Za)}static max(){return new ks(ke.max(),Ee.empty(),Za)}}function sb(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Ee.comparator(r.documentKey,e.documentKey),t!==0?t:Oe(r.largestBatchId,e.largestBatchId))}const ib="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ob{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Mo(r){if(r.code!==Z.FAILED_PRECONDITION||r.message!==ib)throw r;pe("LocalStore","Unexpectedly lost primary lease")}class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ee(((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ee?t:ee.resolve(t)}catch(t){return ee.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ee.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ee.reject(t)}static resolve(e){return new ee(((t,i)=>{t(e)}))}static reject(e){return new ee(((t,i)=>{i(e)}))}static waitFor(e){return new ee(((t,i)=>{let o=0,l=0,h=!1;e.forEach((m=>{++o,m.next((()=>{++l,h&&l===o&&t()}),(p=>i(p)))})),h=!0,l===o&&t()}))}static or(e){let t=ee.resolve(!1);for(const i of e)t=t.next((o=>o?ee.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,l)=>{i.push(t.call(this,o,l))})),this.waitFor(i)}static mapArray(e,t){return new ee(((i,o)=>{const l=e.length,h=new Array(l);let m=0;for(let p=0;p<l;p++){const v=p;t(e[v]).next((w=>{h[v]=w,++m,m===l&&i(h)}),(w=>o(w)))}}))}static doWhile(e,t){return new ee(((i,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):i()};l()}))}}function ab(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Lo(r){return r.name==="IndexedDbTransactionError"}class Iu{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Iu.ce=-1;const uf=-1;function Tu(r){return r==null}function nu(r){return r===0&&1/r==-1/0}function lb(r){return typeof r=="number"&&Number.isInteger(r)&&!nu(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const wv="";function cb(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Lg(e)),e=ub(r.get(t),e);return Lg(e)}function ub(r,e){let t=e;const i=r.length;for(let o=0;o<i;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case wv:t+="";break;default:t+=l}}return t}function Lg(r){return r+wv+""}function Fg(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Vs(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function Ev(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class st{constructor(e,t){this.comparator=e,this.root=t||kt.EMPTY}insert(e,t){return new st(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,kt.BLACK,null,null))}remove(e){return new st(this.comparator,this.root.remove(e,this.comparator).copy(null,null,kt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Oc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Oc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Oc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Oc(this.root,e,this.comparator,!0)}}class Oc{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class kt{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??kt.RED,this.left=o??kt.EMPTY,this.right=l??kt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new kt(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return kt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return kt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Te(27949);return e+(this.isRed()?0:1)}}kt.EMPTY=null,kt.RED=!0,kt.BLACK=!1;kt.EMPTY=new class{constructor(){this.size=0}get key(){throw Te(57766)}get value(){throw Te(16141)}get color(){throw Te(16727)}get left(){throw Te(29726)}get right(){throw Te(36894)}copy(e,t,i,o,l){return this}insert(e,t,i){return new kt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class _t{constructor(e){this.comparator=e,this.data=new st(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ug(this.data.getIterator())}getIteratorFrom(e){return new Ug(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof _t)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new _t(this.comparator);return t.data=e,t}}class Ug{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class dn{constructor(e){this.fields=e,e.sort(At.comparator)}static empty(){return new dn([])}unionWith(e){let t=new _t(At.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new dn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ao(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}class bv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Pt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new bv("Invalid base64 string: "+l):l}})(e);return new Pt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l})(e);return new Pt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pt.EMPTY_BYTE_STRING=new Pt("");const db=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function As(r){if(He(!!r,39018),typeof r=="string"){let e=0;const t=db.exec(r);if(He(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ut(r.seconds),nanos:ut(r.nanos)}}function ut(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ps(r){return typeof r=="string"?Pt.fromBase64String(r):Pt.fromUint8Array(r)}const Iv="server_timestamp",Tv="__type__",Nv="__previous_value__",Sv="__local_write_time__";function df(r){return(r?.mapValue?.fields||{})[Tv]?.stringValue===Iv}function Nu(r){const e=r.mapValue.fields[Nv];return df(e)?Nu(e):e}function el(r){const e=As(r.mapValue.fields[Sv].timestampValue);return new et(e.seconds,e.nanos)}class hb{constructor(e,t,i,o,l,h,m,p,v,w,I){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=v,this.isUsingEmulator=w,this.apiKey=I}}const ru="(default)";class tl{constructor(e,t){this.projectId=e,this.database=t||ru}static empty(){return new tl("","")}get isDefaultDatabase(){return this.database===ru}isEqual(e){return e instanceof tl&&e.projectId===this.projectId&&e.database===this.database}}function fb(r,e){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new he(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new tl(r.options.projectId,e)}const Cv="__type__",mb="__max__",Mc={mapValue:{}},kv="__vector__",su="value";function Rs(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?df(r)?4:gb(r)?9007199254740991:pb(r)?10:11:Te(28295,{value:r})}function lr(r,e){if(r===e)return!0;const t=Rs(r);if(t!==Rs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return el(r).isEqual(el(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=As(o.timestampValue),m=As(l.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,l){return Ps(o.bytesValue).isEqual(Ps(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,l){return ut(o.geoPointValue.latitude)===ut(l.geoPointValue.latitude)&&ut(o.geoPointValue.longitude)===ut(l.geoPointValue.longitude)})(r,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return ut(o.integerValue)===ut(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=ut(o.doubleValue),m=ut(l.doubleValue);return h===m?nu(h)===nu(m):isNaN(h)&&isNaN(m)}return!1})(r,e);case 9:return Ao(r.arrayValue.values||[],e.arrayValue.values||[],lr);case 10:case 11:return(function(o,l){const h=o.mapValue.fields||{},m=l.mapValue.fields||{};if(Fg(h)!==Fg(m))return!1;for(const p in h)if(h.hasOwnProperty(p)&&(m[p]===void 0||!lr(h[p],m[p])))return!1;return!0})(r,e);default:return Te(52216,{left:r})}}function nl(r,e){return(r.values||[]).find((t=>lr(t,e)))!==void 0}function Po(r,e){if(r===e)return 0;const t=Rs(r),i=Rs(e);if(t!==i)return Oe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Oe(r.booleanValue,e.booleanValue);case 2:return(function(l,h){const m=ut(l.integerValue||l.doubleValue),p=ut(h.integerValue||h.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1})(r,e);case 3:return Bg(r.timestampValue,e.timestampValue);case 4:return Bg(el(r),el(e));case 5:return Mh(r.stringValue,e.stringValue);case 6:return(function(l,h){const m=Ps(l),p=Ps(h);return m.compareTo(p)})(r.bytesValue,e.bytesValue);case 7:return(function(l,h){const m=l.split("/"),p=h.split("/");for(let v=0;v<m.length&&v<p.length;v++){const w=Oe(m[v],p[v]);if(w!==0)return w}return Oe(m.length,p.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,h){const m=Oe(ut(l.latitude),ut(h.latitude));return m!==0?m:Oe(ut(l.longitude),ut(h.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return zg(r.arrayValue,e.arrayValue);case 10:return(function(l,h){const m=l.fields||{},p=h.fields||{},v=m[su]?.arrayValue,w=p[su]?.arrayValue,I=Oe(v?.values?.length||0,w?.values?.length||0);return I!==0?I:zg(v,w)})(r.mapValue,e.mapValue);case 11:return(function(l,h){if(l===Mc.mapValue&&h===Mc.mapValue)return 0;if(l===Mc.mapValue)return 1;if(h===Mc.mapValue)return-1;const m=l.fields||{},p=Object.keys(m),v=h.fields||{},w=Object.keys(v);p.sort(),w.sort();for(let I=0;I<p.length&&I<w.length;++I){const N=Mh(p[I],w[I]);if(N!==0)return N;const M=Po(m[p[I]],v[w[I]]);if(M!==0)return M}return Oe(p.length,w.length)})(r.mapValue,e.mapValue);default:throw Te(23264,{he:t})}}function Bg(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Oe(r,e);const t=As(r),i=As(e),o=Oe(t.seconds,i.seconds);return o!==0?o:Oe(t.nanos,i.nanos)}function zg(r,e){const t=r.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=Po(t[o],i[o]);if(l)return l}return Oe(t.length,i.length)}function Ro(r){return Lh(r)}function Lh(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const i=As(t);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Ps(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return Ee.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=Lh(l);return i+"]"})(r.arrayValue):"mapValue"in r?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of i)l?l=!1:o+=",",o+=`${h}:${Lh(t.fields[h])}`;return o+"}"})(r.mapValue):Te(61005,{value:r})}function qc(r){switch(Rs(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Nu(r);return e?16+qc(e):16;case 5:return 2*r.stringValue.length;case 6:return Ps(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,l)=>o+qc(l)),0)})(r.arrayValue);case 10:case 11:return(function(i){let o=0;return Vs(i.fields,((l,h)=>{o+=l.length+qc(h)})),o})(r.mapValue);default:throw Te(13486,{value:r})}}function $g(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Fh(r){return!!r&&"integerValue"in r}function hf(r){return!!r&&"arrayValue"in r}function qg(r){return!!r&&"nullValue"in r}function Hg(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Hc(r){return!!r&&"mapValue"in r}function pb(r){return(r?.mapValue?.fields||{})[Cv]?.stringValue===kv}function Wa(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Vs(r.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Wa(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Wa(r.arrayValue.values[t]);return e}return{...r}}function gb(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===mb}class Zt{constructor(e){this.value=e}static empty(){return new Zt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Hc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wa(t)}setAll(e){let t=At.emptyPath(),i={},o=[];e.forEach(((h,m)=>{if(!t.isImmediateParentOf(m)){const p=this.getFieldsMap(t);this.applyChanges(p,i,o),i={},o=[],t=m.popLast()}h?i[m.lastSegment()]=Wa(h):o.push(m.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());Hc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return lr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Hc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Vs(t,((o,l)=>e[o]=l));for(const o of i)delete e[o]}clone(){return new Zt(Wa(this.value))}}function Av(r){const e=[];return Vs(r.fields,((t,i)=>{const o=new At([t]);if(Hc(i)){const l=Av(i.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)})),new dn(e)}class Ut{constructor(e,t,i,o,l,h,m){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=h,this.documentState=m}static newInvalidDocument(e){return new Ut(e,0,ke.min(),ke.min(),ke.min(),Zt.empty(),0)}static newFoundDocument(e,t,i,o){return new Ut(e,1,t,ke.min(),i,o,0)}static newNoDocument(e,t){return new Ut(e,2,t,ke.min(),ke.min(),Zt.empty(),0)}static newUnknownDocument(e,t){return new Ut(e,3,t,ke.min(),ke.min(),Zt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class iu{constructor(e,t){this.position=e,this.inclusive=t}}function Wg(r,e,t){let i=0;for(let o=0;o<r.position.length;o++){const l=e[o],h=r.position[o];if(l.field.isKeyField()?i=Ee.comparator(Ee.fromName(h.referenceValue),t.key):i=Po(h,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function Gg(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!lr(r.position[t],e.position[t]))return!1;return!0}class rl{constructor(e,t="asc"){this.field=e,this.dir=t}}function yb(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class Pv{}class pt extends Pv{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new xb(e,t,i):t==="array-contains"?new Eb(e,i):t==="in"?new bb(e,i):t==="not-in"?new Ib(e,i):t==="array-contains-any"?new Tb(e,i):new pt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new _b(e,i):new wb(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Po(t,this.value)):t!==null&&Rs(this.value)===Rs(t)&&this.matchesComparison(Po(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class On extends Pv{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new On(e,t)}matches(e){return Rv(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Rv(r){return r.op==="and"}function jv(r){return vb(r)&&Rv(r)}function vb(r){for(const e of r.filters)if(e instanceof On)return!1;return!0}function Uh(r){if(r instanceof pt)return r.field.canonicalString()+r.op.toString()+Ro(r.value);if(jv(r))return r.filters.map((e=>Uh(e))).join(",");{const e=r.filters.map((t=>Uh(t))).join(",");return`${r.op}(${e})`}}function Dv(r,e){return r instanceof pt?(function(i,o){return o instanceof pt&&i.op===o.op&&i.field.isEqual(o.field)&&lr(i.value,o.value)})(r,e):r instanceof On?(function(i,o){return o instanceof On&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((l,h,m)=>l&&Dv(h,o.filters[m])),!0):!1})(r,e):void Te(19439)}function Vv(r){return r instanceof pt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ro(t.value)}`})(r):r instanceof On?(function(t){return t.op.toString()+" {"+t.getFilters().map(Vv).join(" ,")+"}"})(r):"Filter"}class xb extends pt{constructor(e,t,i){super(e,t,i),this.key=Ee.fromName(i.referenceValue)}matches(e){const t=Ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class _b extends pt{constructor(e,t){super(e,"in",t),this.keys=Ov("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class wb extends pt{constructor(e,t){super(e,"not-in",t),this.keys=Ov("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Ov(r,e){return(e.arrayValue?.values||[]).map((t=>Ee.fromName(t.referenceValue)))}class Eb extends pt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return hf(t)&&nl(t.arrayValue,this.value)}}class bb extends pt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&nl(this.value.arrayValue,t)}}class Ib extends pt{constructor(e,t){super(e,"not-in",t)}matches(e){if(nl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!nl(this.value.arrayValue,t)}}class Tb extends pt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!hf(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>nl(this.value.arrayValue,i)))}}class Nb{constructor(e,t=null,i=[],o=[],l=null,h=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=h,this.endAt=m,this.Te=null}}function Kg(r,e=null,t=[],i=[],o=null,l=null,h=null){return new Nb(r,e,t,i,o,l,h)}function ff(r){const e=Re(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Uh(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),Tu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Ro(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Ro(i))).join(",")),e.Te=t}return e.Te}function mf(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!yb(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!Dv(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Gg(r.startAt,e.startAt)&&Gg(r.endAt,e.endAt)}function Bh(r){return Ee.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}class Fo{constructor(e,t=null,i=[],o=[],l=null,h="F",m=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=h,this.startAt=m,this.endAt=p,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function Sb(r,e,t,i,o,l,h,m){return new Fo(r,e,t,i,o,l,h,m)}function pf(r){return new Fo(r)}function Qg(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function Cb(r){return Ee.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function Mv(r){return r.collectionGroup!==null}function Ga(r){const e=Re(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new _t(At.comparator);return h.filters.forEach((p=>{p.getFlattenedFilters().forEach((v=>{v.isInequality()&&(m=m.add(v.field))}))})),m})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new rl(l,i))})),t.has(At.keyField().canonicalString())||e.Ie.push(new rl(At.keyField(),i))}return e.Ie}function rr(r){const e=Re(r);return e.Ee||(e.Ee=kb(e,Ga(r))),e.Ee}function kb(r,e){if(r.limitType==="F")return Kg(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new rl(o.field,l)}));const t=r.endAt?new iu(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new iu(r.startAt.position,r.startAt.inclusive):null;return Kg(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function zh(r,e){const t=r.filters.concat([e]);return new Fo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Ab(r,e){const t=r.explicitOrderBy.concat([e]);return new Fo(r.path,r.collectionGroup,t,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}function ou(r,e,t){return new Fo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Su(r,e){return mf(rr(r),rr(e))&&r.limitType===e.limitType}function Lv(r){return`${ff(rr(r))}|lt:${r.limitType}`}function vo(r){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>Vv(o))).join(", ")}]`),Tu(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>Ro(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>Ro(o))).join(",")),`Target(${i})`})(rr(r))}; limitType=${r.limitType})`}function Cu(r,e){return e.isFoundDocument()&&(function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Ee.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(r,e)&&(function(i,o){for(const l of Ga(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0})(r,e)&&(function(i,o){return!(i.startAt&&!(function(h,m,p){const v=Wg(h,m,p);return h.inclusive?v<=0:v<0})(i.startAt,Ga(i),o)||i.endAt&&!(function(h,m,p){const v=Wg(h,m,p);return h.inclusive?v>=0:v>0})(i.endAt,Ga(i),o))})(r,e)}function Pb(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Fv(r){return(e,t)=>{let i=!1;for(const o of Ga(r)){const l=Rb(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function Rb(r,e,t){const i=r.field.isKeyField()?Ee.comparator(e.key,t.key):(function(l,h,m){const p=h.data.field(l),v=m.data.field(l);return p!==null&&v!==null?Po(p,v):Te(42886)})(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return Te(19790,{direction:r.dir})}}class Ii{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Vs(this.inner,((t,i)=>{for(const[o,l]of i)e(o,l)}))}isEmpty(){return Ev(this.inner)}size(){return this.innerSize}}const jb=new st(Ee.comparator);function Lr(){return jb}const Uv=new st(Ee.comparator);function Ba(...r){let e=Uv;for(const t of r)e=e.insert(t.key,t);return e}function Bv(r){let e=Uv;return r.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function fi(){return Ka()}function zv(){return Ka()}function Ka(){return new Ii((r=>r.toString()),((r,e)=>r.isEqual(e)))}const Db=new st(Ee.comparator),Vb=new _t(Ee.comparator);function Me(...r){let e=Vb;for(const t of r)e=e.add(t);return e}const Ob=new _t(Oe);function Mb(){return Ob}function gf(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nu(e)?"-0":e}}function $v(r){return{integerValue:""+r}}function Lb(r,e){return lb(e)?$v(e):gf(r,e)}class ku{constructor(){this._=void 0}}function Fb(r,e,t){return r instanceof sl?(function(o,l){const h={fields:{[Tv]:{stringValue:Iv},[Sv]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&df(l)&&(l=Nu(l)),l&&(h.fields[Nv]=l),{mapValue:h}})(t,e):r instanceof il?Hv(r,e):r instanceof ol?Wv(r,e):(function(o,l){const h=qv(o,l),m=Yg(h)+Yg(o.Ae);return Fh(h)&&Fh(o.Ae)?$v(m):gf(o.serializer,m)})(r,e)}function Ub(r,e,t){return r instanceof il?Hv(r,e):r instanceof ol?Wv(r,e):t}function qv(r,e){return r instanceof au?(function(i){return Fh(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class sl extends ku{}class il extends ku{constructor(e){super(),this.elements=e}}function Hv(r,e){const t=Gv(e);for(const i of r.elements)t.some((o=>lr(o,i)))||t.push(i);return{arrayValue:{values:t}}}class ol extends ku{constructor(e){super(),this.elements=e}}function Wv(r,e){let t=Gv(e);for(const i of r.elements)t=t.filter((o=>!lr(o,i)));return{arrayValue:{values:t}}}class au extends ku{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Yg(r){return ut(r.integerValue||r.doubleValue)}function Gv(r){return hf(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class Bb{constructor(e,t){this.field=e,this.transform=t}}function zb(r,e){return r.field.isEqual(e.field)&&(function(i,o){return i instanceof il&&o instanceof il||i instanceof ol&&o instanceof ol?Ao(i.elements,o.elements,lr):i instanceof au&&o instanceof au?lr(i.Ae,o.Ae):i instanceof sl&&o instanceof sl})(r.transform,e.transform)}class $b{constructor(e,t){this.version=e,this.transformResults=t}}class Dn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Dn}static exists(e){return new Dn(void 0,e)}static updateTime(e){return new Dn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Au{}function Kv(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new yf(r.key,Dn.none()):new dl(r.key,r.data,Dn.none());{const t=r.data,i=Zt.empty();let o=new _t(At.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?i.delete(l):i.set(l,h),o=o.add(l)}return new Os(r.key,i,new dn(o.toArray()),Dn.none())}}function qb(r,e,t){r instanceof dl?(function(o,l,h){const m=o.value.clone(),p=Xg(o.fieldTransforms,l,h.transformResults);m.setAll(p),l.convertToFoundDocument(h.version,m).setHasCommittedMutations()})(r,e,t):r instanceof Os?(function(o,l,h){if(!Wc(o.precondition,l))return void l.convertToUnknownDocument(h.version);const m=Xg(o.fieldTransforms,l,h.transformResults),p=l.data;p.setAll(Qv(o)),p.setAll(m),l.convertToFoundDocument(h.version,p).setHasCommittedMutations()})(r,e,t):(function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function Qa(r,e,t,i){return r instanceof dl?(function(l,h,m,p){if(!Wc(l.precondition,h))return m;const v=l.value.clone(),w=Zg(l.fieldTransforms,p,h);return v.setAll(w),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),null})(r,e,t,i):r instanceof Os?(function(l,h,m,p){if(!Wc(l.precondition,h))return m;const v=Zg(l.fieldTransforms,p,h),w=h.data;return w.setAll(Qv(l)),w.setAll(v),h.convertToFoundDocument(h.version,w).setHasLocalMutations(),m===null?null:m.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((I=>I.field)))})(r,e,t,i):(function(l,h,m){return Wc(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m})(r,e,t)}function Hb(r,e){let t=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),l=qv(i.transform,o||null);l!=null&&(t===null&&(t=Zt.empty()),t.set(i.field,l))}return t||null}function Jg(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Ao(i,o,((l,h)=>zb(l,h)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class dl extends Au{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Os extends Au{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Qv(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}})),e}function Xg(r,e,t){const i=new Map;He(r.length===t.length,32656,{Ve:t.length,de:r.length});for(let o=0;o<t.length;o++){const l=r[o],h=l.transform,m=e.data.field(l.field);i.set(l.field,Ub(h,m,t[o]))}return i}function Zg(r,e,t){const i=new Map;for(const o of r){const l=o.transform,h=t.data.field(o.field);i.set(o.field,Fb(l,h,e))}return i}class yf extends Au{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Wb extends Au{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Gb{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&qb(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Qa(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Qa(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=zv();return this.mutations.forEach((o=>{const l=e.get(o.key),h=l.overlayedDocument;let m=this.applyToLocalView(h,l.mutatedFields);m=t.has(o.key)?null:m;const p=Kv(h,m);p!==null&&i.set(o.key,p),h.isValidDocument()||h.convertToNoDocument(ke.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Me())}isEqual(e){return this.batchId===e.batchId&&Ao(this.mutations,e.mutations,((t,i)=>Jg(t,i)))&&Ao(this.baseMutations,e.baseMutations,((t,i)=>Jg(t,i)))}}class vf{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){He(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return Db})();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,i[h].version);return new vf(e,t,i,o)}}class Kb{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class Qb{constructor(e,t){this.count=e,this.unchangedNames=t}}var mt,Ue;function Yb(r){switch(r){case Z.OK:return Te(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return Te(15467,{code:r})}}function Yv(r){if(r===void 0)return Or("GRPC error has no .code"),Z.UNKNOWN;switch(r){case mt.OK:return Z.OK;case mt.CANCELLED:return Z.CANCELLED;case mt.UNKNOWN:return Z.UNKNOWN;case mt.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case mt.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case mt.INTERNAL:return Z.INTERNAL;case mt.UNAVAILABLE:return Z.UNAVAILABLE;case mt.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case mt.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case mt.NOT_FOUND:return Z.NOT_FOUND;case mt.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case mt.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case mt.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case mt.ABORTED:return Z.ABORTED;case mt.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case mt.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case mt.DATA_LOSS:return Z.DATA_LOSS;default:return Te(39323,{code:r})}}(Ue=mt||(mt={}))[Ue.OK=0]="OK",Ue[Ue.CANCELLED=1]="CANCELLED",Ue[Ue.UNKNOWN=2]="UNKNOWN",Ue[Ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ue[Ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ue[Ue.NOT_FOUND=5]="NOT_FOUND",Ue[Ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ue[Ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ue[Ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ue[Ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ue[Ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ue[Ue.ABORTED=10]="ABORTED",Ue[Ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ue[Ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ue[Ue.INTERNAL=13]="INTERNAL",Ue[Ue.UNAVAILABLE=14]="UNAVAILABLE",Ue[Ue.DATA_LOSS=15]="DATA_LOSS";function Jb(){return new TextEncoder}const Xb=new Ns([4294967295,4294967295],0);function ey(r){const e=Jb().encode(r),t=new dv;return t.update(e),new Uint8Array(t.digest())}function ty(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ns([t,i],0),new Ns([o,l],0)]}class xf{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new za(`Invalid padding: ${t}`);if(i<0)throw new za(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new za(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new za(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ns.fromNumber(this.ge)}ye(e,t,i){let o=e.add(t.multiply(Ns.fromNumber(i)));return o.compare(Xb)===1&&(o=new Ns([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=ey(e),[i,o]=ty(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(i,o,l);if(!this.we(h))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new xf(l,o,t);return i.forEach((m=>h.insert(m))),h}insert(e){if(this.ge===0)return;const t=ey(e),[i,o]=ty(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(i,o,l);this.be(h)}}be(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class za extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Pu{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,hl.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Pu(ke.min(),o,new st(Oe),Lr(),Me())}}class hl{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new hl(i,t,Me(),Me(),Me())}}class Gc{constructor(e,t,i,o){this.Se=e,this.removedTargetIds=t,this.key=i,this.De=o}}class Jv{constructor(e,t){this.targetId=e,this.Ce=t}}class Xv{constructor(e,t,i=Pt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class ny{constructor(){this.ve=0,this.Fe=ry(),this.Me=Pt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Me(),t=Me(),i=Me();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Te(38017,{changeType:l})}})),new hl(this.Me,this.xe,e,t,i)}Ke(){this.Oe=!1,this.Fe=ry()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,He(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class Zb{constructor(e){this.Ge=e,this.ze=new Map,this.je=Lr(),this.He=Lc(),this.Je=Lc(),this.Ze=new st(Oe)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Te(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,i=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(Bh(l))if(i===0){const h=new Ee(l.path);this.et(t,h,Ut.newNoDocument(h,ke.min()))}else He(i===1,20013,{expectedCount:i});else{const h=this._t(t);if(h!==i){const m=this.ut(e),p=m?this.ct(m,e,h):1;if(p!==0){this.it(t);const v=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,v)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let h,m;try{h=Ps(i).toUint8Array()}catch(p){if(p instanceof bv)return ko("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new xf(h,o,l)}catch(p){return ko(p instanceof za?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.ge===0?null:m}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let o=0;return i.forEach((l=>{const h=this.Ge.ht(),m=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(m)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,h)=>{const m=this.ot(h);if(m){if(l.current&&Bh(m.target)){const p=new Ee(m.target.path);this.It(p).has(h)||this.Et(h,p)||this.et(h,p,Ut.newNoDocument(p,e))}l.Be&&(t.set(h,l.ke()),l.Ke())}}));let i=Me();this.Je.forEach(((l,h)=>{let m=!0;h.forEachWhile((p=>{const v=this.ot(p);return!v||v.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(i=i.add(l))})),this.je.forEach(((l,h)=>h.setReadTime(e)));const o=new Pu(e,t,this.Ze,this.je,i);return this.je=Lr(),this.He=Lc(),this.Je=Lc(),this.Ze=new st(Oe),o}Ye(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,i),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.qe(t,1):o.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new ny,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new _t(Oe),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new _t(Oe),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||pe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ny),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Lc(){return new st(Ee.comparator)}function ry(){return new st(Ee.comparator)}const eI={asc:"ASCENDING",desc:"DESCENDING"},tI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nI={and:"AND",or:"OR"};class rI{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function $h(r,e){return r.useProto3Json||Tu(e)?e:{value:e}}function lu(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Zv(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function sI(r,e){return lu(r,e.toTimestamp())}function sr(r){return He(!!r,49232),ke.fromTimestamp((function(t){const i=As(t);return new et(i.seconds,i.nanos)})(r))}function _f(r,e){return qh(r,e).canonicalString()}function qh(r,e){const t=(function(o){return new Ye(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function e0(r){const e=Ye.fromString(r);return He(i0(e),10190,{key:e.toString()}),e}function Hh(r,e){return _f(r.databaseId,e.path)}function Eh(r,e){const t=e0(e);if(t.get(1)!==r.databaseId.projectId)throw new he(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new he(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Ee(n0(t))}function t0(r,e){return _f(r.databaseId,e)}function iI(r){const e=e0(r);return e.length===4?Ye.emptyPath():n0(e)}function Wh(r){return new Ye(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function n0(r){return He(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function sy(r,e,t){return{name:Hh(r,e),fields:t.value.mapValue.fields}}function oI(r,e){let t;if("targetChange"in e){e.targetChange;const i=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:Te(39313,{state:v})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(v,w){return v.useProto3Json?(He(w===void 0||typeof w=="string",58123),Pt.fromBase64String(w||"")):(He(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),Pt.fromUint8Array(w||new Uint8Array))})(r,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&(function(v){const w=v.code===void 0?Z.UNKNOWN:Yv(v.code);return new he(w,v.message||"")})(h);t=new Xv(i,o,l,m||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Eh(r,i.document.name),l=sr(i.document.updateTime),h=i.document.createTime?sr(i.document.createTime):ke.min(),m=new Zt({mapValue:{fields:i.document.fields}}),p=Ut.newFoundDocument(o,l,h,m),v=i.targetIds||[],w=i.removedTargetIds||[];t=new Gc(v,w,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Eh(r,i.document),l=i.readTime?sr(i.readTime):ke.min(),h=Ut.newNoDocument(o,l),m=i.removedTargetIds||[];t=new Gc([],m,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Eh(r,i.document),l=i.removedTargetIds||[];t=new Gc([],l,o,null)}else{if(!("filter"in e))return Te(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,h=new Qb(o,l),m=i.targetId;t=new Jv(m,h)}}return t}function aI(r,e){let t;if(e instanceof dl)t={update:sy(r,e.key,e.value)};else if(e instanceof yf)t={delete:Hh(r,e.key)};else if(e instanceof Os)t={update:sy(r,e.key,e.data),updateMask:gI(e.fieldMask)};else{if(!(e instanceof Wb))return Te(16599,{dt:e.type});t={verify:Hh(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,h){const m=h.transform;if(m instanceof sl)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof il)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof ol)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof au)return{fieldPath:h.field.canonicalString(),increment:m.Ae};throw Te(20930,{transform:h.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:sI(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Te(27497)})(r,e.precondition)),t}function lI(r,e){return r&&r.length>0?(He(e!==void 0,14353),r.map((t=>(function(o,l){let h=o.updateTime?sr(o.updateTime):sr(l);return h.isEqual(ke.min())&&(h=sr(l)),new $b(h,o.transformResults||[])})(t,e)))):[]}function cI(r,e){return{documents:[t0(r,e.path)]}}function uI(r,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=t0(r,o);const l=(function(v){if(v.length!==0)return s0(On.create(v,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const h=(function(v){if(v.length!==0)return v.map((w=>(function(N){return{field:xo(N.field),direction:fI(N.dir)}})(w)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const m=$h(r,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(e.endAt)),{ft:t,parent:o}}function dI(r){let e=iI(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){He(i===1,65062);const w=t.from[0];w.allDescendants?o=w.collectionId:e=e.child(w.collectionId)}let l=[];t.where&&(l=(function(I){const N=r0(I);return N instanceof On&&jv(N)?N.getFilters():[N]})(t.where));let h=[];t.orderBy&&(h=(function(I){return I.map((N=>(function(L){return new rl(_o(L.field),(function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(L.direction))})(N)))})(t.orderBy));let m=null;t.limit&&(m=(function(I){let N;return N=typeof I=="object"?I.value:I,Tu(N)?null:N})(t.limit));let p=null;t.startAt&&(p=(function(I){const N=!!I.before,M=I.values||[];return new iu(M,N)})(t.startAt));let v=null;return t.endAt&&(v=(function(I){const N=!I.before,M=I.values||[];return new iu(M,N)})(t.endAt)),Sb(e,o,h,l,m,"F",p,v)}function hI(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function r0(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=_o(t.unaryFilter.field);return pt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=_o(t.unaryFilter.field);return pt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=_o(t.unaryFilter.field);return pt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=_o(t.unaryFilter.field);return pt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Te(61313);default:return Te(60726)}})(r):r.fieldFilter!==void 0?(function(t){return pt.create(_o(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Te(58110);default:return Te(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return On.create(t.compositeFilter.filters.map((i=>r0(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Te(1026)}})(t.compositeFilter.op))})(r):Te(30097,{filter:r})}function fI(r){return eI[r]}function mI(r){return tI[r]}function pI(r){return nI[r]}function xo(r){return{fieldPath:r.canonicalString()}}function _o(r){return At.fromServerFormat(r.fieldPath)}function s0(r){return r instanceof pt?(function(t){if(t.op==="=="){if(Hg(t.value))return{unaryFilter:{field:xo(t.field),op:"IS_NAN"}};if(qg(t.value))return{unaryFilter:{field:xo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Hg(t.value))return{unaryFilter:{field:xo(t.field),op:"IS_NOT_NAN"}};if(qg(t.value))return{unaryFilter:{field:xo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xo(t.field),op:mI(t.op),value:t.value}}})(r):r instanceof On?(function(t){const i=t.getFilters().map((o=>s0(o)));return i.length===1?i[0]:{compositeFilter:{op:pI(t.op),filters:i}}})(r):Te(54877,{filter:r})}function gI(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function i0(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}function o0(r){return!!r&&typeof r._toProto=="function"&&r._protoValueType==="ProtoValue"}class bs{constructor(e,t,i,o,l=ke.min(),h=ke.min(),m=Pt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new bs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new bs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new bs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new bs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class yI{constructor(e){this.yt=e}}function vI(r){const e=dI({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?ou(e,e.limit,"L"):e}class xI{constructor(){this.Sn=new _I}addToCollectionParentIndex(e,t){return this.Sn.add(t),ee.resolve()}getCollectionParents(e,t){return ee.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return ee.resolve()}deleteFieldIndex(e,t){return ee.resolve()}deleteAllFieldIndexes(e){return ee.resolve()}createTargetIndexes(e,t){return ee.resolve()}getDocumentsMatchingTarget(e,t){return ee.resolve(null)}getIndexType(e,t){return ee.resolve(0)}getFieldIndexes(e,t){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,t){return ee.resolve(ks.min())}getMinOffsetFromCollectionGroup(e,t){return ee.resolve(ks.min())}updateCollectionGroup(e,t,i){return ee.resolve()}updateIndexEntries(e,t){return ee.resolve()}}class _I{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new _t(Ye.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new _t(Ye.comparator)).toArray()}}const iy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},a0=41943040;class Xt{static withCacheSize(e){return new Xt(e,Xt.DEFAULT_COLLECTION_PERCENTILE,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}Xt.DEFAULT_COLLECTION_PERCENTILE=10,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xt.DEFAULT=new Xt(a0,Xt.DEFAULT_COLLECTION_PERCENTILE,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xt.DISABLED=new Xt(-1,0,0);class jo{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new jo(0)}static ar(){return new jo(-1)}}const oy="LruGarbageCollector",wI=1048576;function ay([r,e],[t,i]){const o=Oe(r,t);return o===0?Oe(e,i):o}class EI{constructor(e){this.Pr=e,this.buffer=new _t(ay),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();ay(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class bI{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){pe(oy,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Lo(t)?pe(oy,"Ignoring IndexedDB error during garbage collection: ",t):await Mo(t)}await this.Ar(3e5)}))}}class II{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return ee.resolve(Iu.ce);const i=new EI(t);return this.Vr.forEachTarget(e,(o=>i.Er(o.sequenceNumber))).next((()=>this.Vr.mr(e,(o=>i.Er(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(pe("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(iy)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),iy):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let i,o,l,h,m,p,v;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((I=>(I>this.params.maximumSequenceNumbersToCollect?(pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),o=this.params.maximumSequenceNumbersToCollect):o=I,h=Date.now(),this.nthSequenceNumber(e,o)))).next((I=>(i=I,m=Date.now(),this.removeTargets(e,i,t)))).next((I=>(l=I,p=Date.now(),this.removeOrphanedDocuments(e,i)))).next((I=>(v=Date.now(),yo()<=Ve.DEBUG&&pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-w}ms
	Determined least recently used ${o} in `+(m-h)+`ms
	Removed ${l} targets in `+(p-m)+`ms
	Removed ${I} documents in `+(v-p)+`ms
Total Duration: ${v-w}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:I}))))}}function TI(r,e){return new II(r,e)}class NI{constructor(){this.changes=new Ii((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ut.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?ee.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class SI{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class CI{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&Qa(i.mutation,o,dn.empty(),et.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Me()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Me()){const o=fi();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((l=>{let h=Ba();return l.forEach(((m,p)=>{h=h.insert(m,p.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const i=fi();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Me())))}populateOverlays(e,t,i){const o=[];return i.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((h,m)=>{t.set(h,m)}))}))}computeViews(e,t,i,o){let l=Lr();const h=Ka(),m=(function(){return Ka()})();return t.forEach(((p,v)=>{const w=i.get(v.key);o.has(v.key)&&(w===void 0||w.mutation instanceof Os)?l=l.insert(v.key,v):w!==void 0?(h.set(v.key,w.mutation.getFieldMask()),Qa(w.mutation,v,w.mutation.getFieldMask(),et.now())):h.set(v.key,dn.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((v,w)=>h.set(v,w))),t.forEach(((v,w)=>m.set(v,new SI(w,h.get(v)??null)))),m)))}recalculateAndSaveOverlays(e,t){const i=Ka();let o=new st(((h,m)=>h-m)),l=Me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const m of h)m.keys().forEach((p=>{const v=t.get(p);if(v===null)return;let w=i.get(p)||dn.empty();w=m.applyToLocalView(v,w),i.set(p,w);const I=(o.get(m.batchId)||Me()).add(p);o=o.insert(m.batchId,I)}))})).next((()=>{const h=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),v=p.key,w=p.value,I=zv();w.forEach((N=>{if(!l.has(N)){const M=Kv(t.get(N),i.get(N));M!==null&&I.set(N,M),l=l.add(N)}})),h.push(this.documentOverlayCache.saveOverlays(e,v,I))}return ee.waitFor(h)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return Cb(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Mv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):ee.resolve(fi());let m=Za,p=l;return h.next((v=>ee.forEach(v,((w,I)=>(m<I.largestBatchId&&(m=I.largestBatchId),l.get(w)?ee.resolve():this.remoteDocumentCache.getEntry(e,w).next((N=>{p=p.insert(w,N)}))))).next((()=>this.populateOverlays(e,v,l))).next((()=>this.computeViews(e,p,v,Me()))).next((w=>({batchId:m,changes:Bv(w)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ee(t)).next((i=>{let o=Ba();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let h=Ba();return this.indexManager.getCollectionParents(e,l).next((m=>ee.forEach(m,(p=>{const v=(function(I,N){return new Fo(N,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,v,i,o).next((w=>{w.forEach(((I,N)=>{h=h.insert(I,N)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o)))).next((h=>{l.forEach(((p,v)=>{const w=v.getKey();h.get(w)===null&&(h=h.insert(w,Ut.newInvalidDocument(w)))}));let m=Ba();return h.forEach(((p,v)=>{const w=l.get(p);w!==void 0&&Qa(w.mutation,v,dn.empty(),et.now()),Cu(t,v)&&(m=m.insert(p,v))})),m}))}}class kI{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return ee.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:sr(o.createTime)}})(t)),ee.resolve()}getNamedQuery(e,t){return ee.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(o){return{name:o.name,query:vI(o.bundledQuery),readTime:sr(o.readTime)}})(t)),ee.resolve()}}class AI{constructor(){this.overlays=new st(Ee.comparator),this.Lr=new Map}getOverlay(e,t){return ee.resolve(this.overlays.get(t))}getOverlays(e,t){const i=fi();return ee.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&i.set(o,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,l)=>{this.bt(e,t,l)})),ee.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.Lr.get(i);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(i)),ee.resolve()}getOverlaysForCollection(e,t,i){const o=fi(),l=t.length+1,h=new Ee(t.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const p=m.getNext().value,v=p.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===l&&p.largestBatchId>i&&o.set(p.getKey(),p)}return ee.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new st(((v,w)=>v-w));const h=this.overlays.getIterator();for(;h.hasNext();){const v=h.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>i){let w=l.get(v.largestBatchId);w===null&&(w=fi(),l=l.insert(v.largestBatchId,w)),w.set(v.getKey(),v)}}const m=fi(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((v,w)=>m.set(v,w))),!(m.size()>=o)););return ee.resolve(m)}bt(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const h=this.Lr.get(o.largestBatchId).delete(i.key);this.Lr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new Kb(t,i));let l=this.Lr.get(t);l===void 0&&(l=Me(),this.Lr.set(t,l)),this.Lr.set(t,l.add(i.key))}}class PI{constructor(){this.sessionToken=Pt.EMPTY_BYTE_STRING}getSessionToken(e){return ee.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ee.resolve()}}class wf{constructor(){this.kr=new _t(It.Kr),this.qr=new _t(It.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const i=new It(e,t);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new It(e,t))}Qr(e,t){e.forEach((i=>this.removeReference(i,t)))}Gr(e){const t=new Ee(new Ye([])),i=new It(t,e),o=new It(t,e+1),l=[];return this.qr.forEachInRange([i,o],(h=>{this.Wr(h),l.push(h.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Ee(new Ye([])),i=new It(t,e),o=new It(t,e+1);let l=Me();return this.qr.forEachInRange([i,o],(h=>{l=l.add(h.key)})),l}containsKey(e){const t=new It(e,0),i=this.kr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class It{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Ee.comparator(e.key,t.key)||Oe(e.Hr,t.Hr)}static Ur(e,t){return Oe(e.Hr,t.Hr)||Ee.comparator(e.key,t.key)}}class RI{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new _t(It.Kr)}checkEmpty(e){return ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new Gb(l,t,i,o);this.mutationQueue.push(h);for(const m of o)this.Jr=this.Jr.add(new It(m.key,l)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ee.resolve(h)}lookupMutationBatch(e,t){return ee.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Xr(i),l=o<0?0:o;return ee.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(this.mutationQueue.length===0?uf:this.Yn-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new It(t,0),o=new It(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([i,o],(h=>{const m=this.Zr(h.Hr);l.push(m)})),ee.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new _t(Oe);return t.forEach((o=>{const l=new It(o,0),h=new It(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,h],(m=>{i=i.add(m.Hr)}))})),ee.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;Ee.isDocumentKey(l)||(l=l.child(""));const h=new It(new Ee(l),0);let m=new _t(Oe);return this.Jr.forEachWhile((p=>{const v=p.key.path;return!!i.isPrefixOf(v)&&(v.length===o&&(m=m.add(p.Hr)),!0)}),h),ee.resolve(this.Yr(m))}Yr(e){const t=[];return e.forEach((i=>{const o=this.Zr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){He(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return ee.forEach(t.mutations,(o=>{const l=new It(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,t){const i=new It(t,0),o=this.Jr.firstAfterOrEqual(i);return ee.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ee.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class jI{constructor(e){this.ti=e,this.docs=(function(){return new st(Ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,h=this.ti(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ee.resolve(i?i.document.mutableCopy():Ut.newInvalidDocument(t))}getEntries(e,t){let i=Lr();return t.forEach((o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():Ut.newInvalidDocument(o))})),ee.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=Lr();const h=t.path,m=new Ee(h.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:v,value:{document:w}}=p.getNext();if(!h.isPrefixOf(v.path))break;v.path.length>h.length+1||sb(rb(w),i)<=0||(o.has(w.key)||Cu(t,w))&&(l=l.insert(w.key,w.mutableCopy()))}return ee.resolve(l)}getAllFromCollectionGroup(e,t,i,o){Te(9500)}ni(e,t){return ee.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new DI(this)}getSize(e){return ee.resolve(this.size)}}class DI extends NI{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(i)})),ee.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class VI{constructor(e){this.persistence=e,this.ri=new Ii((t=>ff(t)),mf),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this.ii=0,this.si=new wf,this.targetCount=0,this.oi=jo._r()}forEachTarget(e,t){return this.ri.forEach(((i,o)=>t(o))),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.ii&&(this.ii=t),ee.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new jo(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,ee.resolve()}updateTargetData(e,t){return this.lr(t),ee.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.ri.forEach(((h,m)=>{m.sequenceNumber<=t&&i.get(m.targetId)===null&&(this.ri.delete(h),l.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),ee.waitFor(l).next((()=>o))}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,t){const i=this.ri.get(t)||null;return ee.resolve(i)}addMatchingKeys(e,t,i){return this.si.$r(t,i),ee.resolve()}removeMatchingKeys(e,t,i){this.si.Qr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((h=>{l.push(o.markPotentiallyOrphaned(e,h))})),ee.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),ee.resolve()}getMatchingKeysForTargetId(e,t){const i=this.si.jr(t);return ee.resolve(i)}containsKey(e,t){return ee.resolve(this.si.containsKey(t))}}class l0{constructor(e,t){this._i={},this.overlays={},this.ai=new Iu(0),this.ui=!1,this.ui=!0,this.ci=new PI,this.referenceDelegate=e(this),this.li=new VI(this),this.indexManager=new xI,this.remoteDocumentCache=(function(o){return new jI(o)})((i=>this.referenceDelegate.hi(i))),this.serializer=new yI(t),this.Pi=new kI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new AI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this._i[e.toKey()];return i||(i=new RI(t,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,i){pe("MemoryPersistence","Starting transaction:",e);const o=new OI(this.ai.next());return this.referenceDelegate.Ti(),i(o).next((l=>this.referenceDelegate.Ii(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ei(e,t){return ee.or(Object.values(this._i).map((i=>()=>i.containsKey(e,t))))}}class OI extends ob{constructor(e){super(),this.currentSequenceNumber=e}}class Ef{constructor(e){this.persistence=e,this.Ri=new wf,this.Ai=null}static Vi(e){return new Ef(e)}get di(){if(this.Ai)return this.Ai;throw Te(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.di.delete(i.toString()),ee.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.di.add(i.toString()),ee.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),ee.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((o=>this.di.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.di.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.di,(i=>{const o=Ee.fromPath(i);return this.mi(e,o).next((l=>{l||t.removeEntry(o,ke.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((i=>{i?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return ee.or([()=>ee.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class cu{constructor(e,t){this.persistence=e,this.fi=new Ii((i=>cb(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=TI(this,t)}static Vi(e,t){return new cu(e,t)}Ti(){}Ii(e){return ee.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}mr(e,t){return ee.forEach(this.fi,((i,o)=>this.wr(e,i,o).next((l=>l?ee.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ni(e,(h=>this.wr(e,h,t).next((m=>{m||(i++,l.removeEntry(h,ke.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),ee.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),ee.resolve()}removeReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),ee.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),ee.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=qc(e.data.value)),t}wr(e,t,i){return ee.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.fi.get(t);return ee.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class bf{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Ts=i,this.Is=o}static Es(e,t){let i=Me(),o=Me();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new bf(e,t.fromCache,i,o)}}class MI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class LI{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return Tw()?8:ab(Bt())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.gs(e,t).next((h=>{l.result=h})).next((()=>{if(!l.result)return this.ps(e,t,o,i).next((h=>{l.result=h}))})).next((()=>{if(l.result)return;const h=new MI;return this.ys(e,t,h).next((m=>{if(l.result=m,this.As)return this.ws(e,t,h,m.size)}))})).next((()=>l.result))}ws(e,t,i,o){return i.documentReadCount<this.Vs?(yo()<=Ve.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",vo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ee.resolve()):(yo()<=Ve.DEBUG&&pe("QueryEngine","Query:",vo(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.ds*o?(yo()<=Ve.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",vo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,rr(t))):ee.resolve())}gs(e,t){if(Qg(t))return ee.resolve(null);let i=rr(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=ou(t,null,"F"),i=rr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const h=Me(...l);return this.fs.getDocuments(e,h).next((m=>this.indexManager.getMinOffset(e,i).next((p=>{const v=this.bs(t,m);return this.Ss(t,v,h,p.readTime)?this.gs(e,ou(t,null,"F")):this.Ds(e,v,t,p)}))))})))))}ps(e,t,i,o){return Qg(t)||o.isEqual(ke.min())?ee.resolve(null):this.fs.getDocuments(e,i).next((l=>{const h=this.bs(t,l);return this.Ss(t,h,i,o)?ee.resolve(null):(yo()<=Ve.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),vo(t)),this.Ds(e,h,t,nb(o,Za)).next((m=>m)))}))}bs(e,t){let i=new _t(Fv(e));return t.forEach(((o,l)=>{Cu(e,l)&&(i=i.add(l))})),i}Ss(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ys(e,t,i){return yo()<=Ve.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",vo(t)),this.fs.getDocumentsMatchingQuery(e,t,ks.min(),i)}Ds(e,t,i,o){return this.fs.getDocumentsMatchingQuery(e,i,o).next((l=>(t.forEach((h=>{l=l.insert(h.key,h)})),l)))}}const If="LocalStore",FI=3e8;class UI{constructor(e,t,i,o){this.persistence=e,this.Cs=t,this.serializer=o,this.vs=new st(Oe),this.Fs=new Ii((l=>ff(l)),mf),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new CI(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function BI(r,e,t,i){return new UI(r,e,t,i)}async function c0(r,e){const t=Re(r);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((l=>(o=l,t.Os(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const h=[],m=[];let p=Me();for(const v of o){h.push(v.batchId);for(const w of v.mutations)p=p.add(w.key)}for(const v of l){m.push(v.batchId);for(const w of v.mutations)p=p.add(w.key)}return t.localDocuments.getDocuments(i,p).next((v=>({Ns:v,removedBatchIds:h,addedBatchIds:m})))}))}))}function zI(r,e){const t=Re(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(m,p,v,w){const I=v.batch,N=I.keys();let M=ee.resolve();return N.forEach((L=>{M=M.next((()=>w.getEntry(p,L))).next((O=>{const F=v.docVersions.get(L);He(F!==null,48541),O.version.compareTo(F)<0&&(I.applyToRemoteDocument(O,v),O.isValidDocument()&&(O.setReadTime(v.commitVersion),w.addEntry(O)))}))})),M.next((()=>m.mutationQueue.removeMutationBatch(p,I)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(m){let p=Me();for(let v=0;v<m.mutationResults.length;++v)m.mutationResults[v].transformResults.length>0&&(p=p.add(m.batch.mutations[v].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function u0(r){const e=Re(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function $I(r,e){const t=Re(r),i=e.snapshotVersion;let o=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const h=t.xs.newChangeBuffer({trackRemovals:!0});o=t.vs;const m=[];e.targetChanges.forEach(((w,I)=>{const N=o.get(I);if(!N)return;m.push(t.li.removeMatchingKeys(l,w.removedDocuments,I).next((()=>t.li.addMatchingKeys(l,w.addedDocuments,I))));let M=N.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(I)!==null?M=M.withResumeToken(Pt.EMPTY_BYTE_STRING,ke.min()).withLastLimboFreeSnapshotVersion(ke.min()):w.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(w.resumeToken,i)),o=o.insert(I,M),(function(O,F,$){return O.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=FI?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0})(N,M,w)&&m.push(t.li.updateTargetData(l,M))}));let p=Lr(),v=Me();if(e.documentUpdates.forEach((w=>{e.resolvedLimboDocuments.has(w)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(l,w))})),m.push(qI(l,h,e.documentUpdates).next((w=>{p=w.Bs,v=w.Ls}))),!i.isEqual(ke.min())){const w=t.li.getLastRemoteSnapshotVersion(l).next((I=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,i)));m.push(w)}return ee.waitFor(m).next((()=>h.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,v))).next((()=>p))})).then((l=>(t.vs=o,l)))}function qI(r,e,t){let i=Me(),o=Me();return t.forEach((l=>i=i.add(l))),e.getEntries(r,i).next((l=>{let h=Lr();return t.forEach(((m,p)=>{const v=l.get(m);p.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(ke.min())?(e.removeEntry(m,p.readTime),h=h.insert(m,p)):!v.isValidDocument()||p.version.compareTo(v.version)>0||p.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(p),h=h.insert(m,p)):pe(If,"Ignoring outdated watch update for ",m,". Current version:",v.version," Watch version:",p.version)})),{Bs:h,Ls:o}}))}function HI(r,e){const t=Re(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=uf),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function WI(r,e){const t=Re(r);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.li.getTargetData(i,e).next((l=>l?(o=l,ee.resolve(o)):t.li.allocateTargetId(i).next((h=>(o=new bs(e,h,"TargetPurposeListen",i.currentSequenceNumber),t.li.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.vs.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.vs=t.vs.insert(i.targetId,i),t.Fs.set(e,i.targetId)),i}))}async function Gh(r,e,t){const i=Re(r),o=i.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(h=>i.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!Lo(h))throw h;pe(If,`Failed to update sequence numbers for target ${e}: ${h}`)}i.vs=i.vs.remove(e),i.Fs.delete(o.target)}function ly(r,e,t){const i=Re(r);let o=ke.min(),l=Me();return i.persistence.runTransaction("Execute query","readwrite",(h=>(function(p,v,w){const I=Re(p),N=I.Fs.get(w);return N!==void 0?ee.resolve(I.vs.get(N)):I.li.getTargetData(v,w)})(i,h,rr(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(h,m.targetId).next((p=>{l=p}))})).next((()=>i.Cs.getDocumentsMatchingQuery(h,e,t?o:ke.min(),t?l:Me()))).next((m=>(GI(i,Pb(e),m),{documents:m,ks:l})))))}function GI(r,e,t){let i=r.Ms.get(e)||ke.min();t.forEach(((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),r.Ms.set(e,i)}class cy{constructor(){this.activeTargetIds=Mb()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class KI{constructor(){this.vo=new cy,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,i){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new cy,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class QI{Mo(e){}shutdown(){}}const uy="ConnectivityMonitor";class dy{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){pe(uy,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){pe(uy,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Fc=null;function Kh(){return Fc===null?Fc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Fc++,"0x"+Fc.toString(16)}const bh="RestConnection",YI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class JI{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${i}/databases/${o}`,this.$o=this.databaseId.database===ru?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Wo(e,t,i,o,l){const h=Kh(),m=this.Qo(e,t.toUriEncodedString());pe(bh,`Sending RPC '${e}' ${h}:`,m,i);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(p,o,l);const{host:v}=new URL(m),w=Ei(v);return this.zo(e,m,p,i,w).then((I=>(pe(bh,`Received RPC '${e}' ${h}: `,I),I)),(I=>{throw ko(bh,`RPC '${e}' ${h} failed with error: `,I,"url: ",m,"request:",i),I}))}jo(e,t,i,o,l,h){return this.Wo(e,t,i,o,l)}Go(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Oo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),i&&i.headers.forEach(((o,l)=>e[l]=o))}Qo(e,t){const i=YI[e];let o=`${this.qo}/v1/${t}:${i}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}class XI{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const Mt="WebChannelConnection",La=(r,e,t)=>{r.listen(e,(i=>{try{t(i)}catch(o){setTimeout((()=>{throw o}),0)}}))};class bo extends JI{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!bo.c_){const e=pv();La(e,mv.STAT_EVENT,(t=>{t.stat===Oh.PROXY?pe(Mt,"STAT_EVENT: detected buffering proxy"):t.stat===Oh.NOPROXY&&pe(Mt,"STAT_EVENT: detected no buffering proxy")})),bo.c_=!0}}zo(e,t,i,o,l){const h=Kh();return new Promise(((m,p)=>{const v=new hv;v.setWithCredentials(!0),v.listenOnce(fv.COMPLETE,(()=>{try{switch(v.getLastErrorCode()){case $c.NO_ERROR:const I=v.getResponseJson();pe(Mt,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(I)),m(I);break;case $c.TIMEOUT:pe(Mt,`RPC '${e}' ${h} timed out`),p(new he(Z.DEADLINE_EXCEEDED,"Request time out"));break;case $c.HTTP_ERROR:const N=v.getStatus();if(pe(Mt,`RPC '${e}' ${h} failed with status:`,N,"response text:",v.getResponseText()),N>0){let M=v.getResponseJson();Array.isArray(M)&&(M=M[0]);const L=M?.error;if(L&&L.status&&L.message){const O=(function($){const z=$.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(z)>=0?z:Z.UNKNOWN})(L.status);p(new he(O,L.message))}else p(new he(Z.UNKNOWN,"Server responded with status "+v.getStatus()))}else p(new he(Z.UNAVAILABLE,"Connection failed."));break;default:Te(9055,{l_:e,streamId:h,h_:v.getLastErrorCode(),P_:v.getLastError()})}}finally{pe(Mt,`RPC '${e}' ${h} completed.`)}}));const w=JSON.stringify(o);pe(Mt,`RPC '${e}' ${h} sending request:`,o),v.send(t,"POST",w,i,15)}))}T_(e,t,i){const o=Kh(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=this.createWebChannelTransport(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(m.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Go(m.initMessageHeaders,t,i),m.encodeInitMessageHeaders=!0;const v=l.join("");pe(Mt,`Creating RPC '${e}' stream ${o}: ${v}`,m);const w=h.createWebChannel(v,m);this.I_(w);let I=!1,N=!1;const M=new XI({Ho:L=>{N?pe(Mt,`Not sending because RPC '${e}' stream ${o} is closed:`,L):(I||(pe(Mt,`Opening RPC '${e}' stream ${o} transport.`),w.open(),I=!0),pe(Mt,`RPC '${e}' stream ${o} sending:`,L),w.send(L))},Jo:()=>w.close()});return La(w,Ua.EventType.OPEN,(()=>{N||(pe(Mt,`RPC '${e}' stream ${o} transport opened.`),M.i_())})),La(w,Ua.EventType.CLOSE,(()=>{N||(N=!0,pe(Mt,`RPC '${e}' stream ${o} transport closed`),M.o_(),this.E_(w))})),La(w,Ua.EventType.ERROR,(L=>{N||(N=!0,ko(Mt,`RPC '${e}' stream ${o} transport errored. Name:`,L.name,"Message:",L.message),M.o_(new he(Z.UNAVAILABLE,"The operation could not be completed")))})),La(w,Ua.EventType.MESSAGE,(L=>{if(!N){const O=L.data[0];He(!!O,16349);const F=O,$=F?.error||F[0]?.error;if($){pe(Mt,`RPC '${e}' stream ${o} received error:`,$);const z=$.status;let Y=(function(ce){const C=mt[ce];if(C!==void 0)return Yv(C)})(z),ne=$.message;Y===void 0&&(Y=Z.INTERNAL,ne="Unknown error status: "+z+" with message "+$.message),N=!0,M.o_(new he(Y,ne)),w.close()}else pe(Mt,`RPC '${e}' stream ${o} received:`,O),M.__(O)}})),bo.u_(),setTimeout((()=>{M.s_()}),0),M}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,i){super.Go(e,t,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return gv()}}function ZI(r){return new bo(r)}function Ih(){return typeof document<"u"?document:null}function Ru(r){return new rI(r,!0)}bo.c_=!1;class d0{constructor(e,t,i=1e3,o=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=i,this.A_=o,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-i);o>0&&pe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const hy="PersistentStream";class h0{constructor(e,t,i,o,l,h,m,p){this.Ci=e,this.b_=i,this.S_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new d0(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Z.RESOURCE_EXHAUSTED?(Or(t.toString()),Or("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===t&&this.G_(i,o)}),(i=>{e((()=>{const o=new he(Z.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,t){const i=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return pe(hy,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(pe(hy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class eT extends h0{constructor(e,t,i,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=oI(this.serializer,e),i=(function(l){if(!("targetChange"in l))return ke.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?ke.min():h.readTime?sr(h.readTime):ke.min()})(e);return this.listener.J_(t,i)}Z_(e){const t={};t.database=Wh(this.serializer),t.addTarget=(function(l,h){let m;const p=h.target;if(m=Bh(p)?{documents:cI(l,p)}:{query:uI(l,p).ft},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=Zv(l,h.resumeToken);const v=$h(l,h.expectedCount);v!==null&&(m.expectedCount=v)}else if(h.snapshotVersion.compareTo(ke.min())>0){m.readTime=lu(l,h.snapshotVersion.toTimestamp());const v=$h(l,h.expectedCount);v!==null&&(m.expectedCount=v)}return m})(this.serializer,e);const i=hI(this.serializer,e);i&&(t.labels=i),this.K_(t)}X_(e){const t={};t.database=Wh(this.serializer),t.removeTarget=e,this.K_(t)}}class tT extends h0{constructor(e,t,i,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return He(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,He(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){He(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=lI(e.writeResults,e.commitTime),i=sr(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Wh(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>aI(this.serializer,i)))};this.K_(t)}}class nT{}class rT extends nT{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new he(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Wo(e,qh(t,i),o,l,h))).catch((l=>{throw l.name==="FirebaseError"?(l.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new he(Z.UNKNOWN,l.toString())}))}jo(e,t,i,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,m])=>this.connection.jo(e,qh(t,i),o,h,m,l))).catch((h=>{throw h.name==="FirebaseError"?(h.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new he(Z.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function sT(r,e,t,i){return new rT(r,e,t,i)}class iT{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Or(t),this.aa=!1):pe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const xi="RemoteStore";class oT{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((h=>{i.enqueueAndForget((async()=>{Ti(this)&&(pe(xi,"Restarting streams for network reachability change."),await(async function(p){const v=Re(p);v.Ea.add(4),await fl(v),v.Va.set("Unknown"),v.Ea.delete(4),await ju(v)})(this))}))})),this.Va=new iT(i,o)}}async function ju(r){if(Ti(r))for(const e of r.Ra)await e(!0)}async function fl(r){for(const e of r.Ra)await e(!1)}function f0(r,e){const t=Re(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Cf(t)?Sf(t):Uo(t).O_()&&Nf(t,e))}function Tf(r,e){const t=Re(r),i=Uo(t);t.Ia.delete(e),i.O_()&&m0(t,e),t.Ia.size===0&&(i.O_()?i.L_():Ti(t)&&t.Va.set("Unknown"))}function Nf(r,e){if(r.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ke.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Uo(r).Z_(e)}function m0(r,e){r.da.$e(e),Uo(r).X_(e)}function Sf(r){r.da=new Zb({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Uo(r).start(),r.Va.ua()}function Cf(r){return Ti(r)&&!Uo(r).x_()&&r.Ia.size>0}function Ti(r){return Re(r).Ea.size===0}function p0(r){r.da=void 0}async function aT(r){r.Va.set("Online")}async function lT(r){r.Ia.forEach(((e,t)=>{Nf(r,e)}))}async function cT(r,e){p0(r),Cf(r)?(r.Va.ha(e),Sf(r)):r.Va.set("Unknown")}async function uT(r,e,t){if(r.Va.set("Online"),e instanceof Xv&&e.state===2&&e.cause)try{await(async function(o,l){const h=l.cause;for(const m of l.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,h),o.Ia.delete(m),o.da.removeTarget(m))})(r,e)}catch(i){pe(xi,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await uu(r,i)}else if(e instanceof Gc?r.da.Xe(e):e instanceof Jv?r.da.st(e):r.da.tt(e),!t.isEqual(ke.min()))try{const i=await u0(r.localStore);t.compareTo(i)>=0&&await(function(l,h){const m=l.da.Tt(h);return m.targetChanges.forEach(((p,v)=>{if(p.resumeToken.approximateByteSize()>0){const w=l.Ia.get(v);w&&l.Ia.set(v,w.withResumeToken(p.resumeToken,h))}})),m.targetMismatches.forEach(((p,v)=>{const w=l.Ia.get(p);if(!w)return;l.Ia.set(p,w.withResumeToken(Pt.EMPTY_BYTE_STRING,w.snapshotVersion)),m0(l,p);const I=new bs(w.target,p,v,w.sequenceNumber);Nf(l,I)})),l.remoteSyncer.applyRemoteEvent(m)})(r,t)}catch(i){pe(xi,"Failed to raise snapshot:",i),await uu(r,i)}}async function uu(r,e,t){if(!Lo(e))throw e;r.Ea.add(1),await fl(r),r.Va.set("Offline"),t||(t=()=>u0(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{pe(xi,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await ju(r)}))}function g0(r,e){return e().catch((t=>uu(r,t,e)))}async function Du(r){const e=Re(r),t=js(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:uf;for(;dT(e);)try{const o=await HI(e.localStore,i);if(o===null){e.Ta.length===0&&t.L_();break}i=o.batchId,hT(e,o)}catch(o){await uu(e,o)}y0(e)&&v0(e)}function dT(r){return Ti(r)&&r.Ta.length<10}function hT(r,e){r.Ta.push(e);const t=js(r);t.O_()&&t.Y_&&t.ea(e.mutations)}function y0(r){return Ti(r)&&!js(r).x_()&&r.Ta.length>0}function v0(r){js(r).start()}async function fT(r){js(r).ra()}async function mT(r){const e=js(r);for(const t of r.Ta)e.ea(t.mutations)}async function pT(r,e,t){const i=r.Ta.shift(),o=vf.from(i,e,t);await g0(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Du(r)}async function gT(r,e){e&&js(r).Y_&&await(async function(i,o){if((function(h){return Yb(h)&&h!==Z.ABORTED})(o.code)){const l=i.Ta.shift();js(i).B_(),await g0(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o))),await Du(i)}})(r,e),y0(r)&&v0(r)}async function fy(r,e){const t=Re(r);t.asyncQueue.verifyOperationInProgress(),pe(xi,"RemoteStore received new credentials");const i=Ti(t);t.Ea.add(3),await fl(t),i&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await ju(t)}async function yT(r,e){const t=Re(r);e?(t.Ea.delete(2),await ju(t)):e||(t.Ea.add(2),await fl(t),t.Va.set("Unknown"))}function Uo(r){return r.ma||(r.ma=(function(t,i,o){const l=Re(t);return l.sa(),new eT(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Zo:aT.bind(null,r),Yo:lT.bind(null,r),t_:cT.bind(null,r),J_:uT.bind(null,r)}),r.Ra.push((async e=>{e?(r.ma.B_(),Cf(r)?Sf(r):r.Va.set("Unknown")):(await r.ma.stop(),p0(r))}))),r.ma}function js(r){return r.fa||(r.fa=(function(t,i,o){const l=Re(t);return l.sa(),new tT(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),Yo:fT.bind(null,r),t_:gT.bind(null,r),ta:mT.bind(null,r),na:pT.bind(null,r)}),r.Ra.push((async e=>{e?(r.fa.B_(),await Du(r)):(await r.fa.stop(),r.Ta.length>0&&(pe(xi,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class kf{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new Dr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const h=Date.now()+i,m=new kf(e,t,h,o,l);return m.start(i),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Af(r,e){if(Or("AsyncQueue",`${e}: ${r}`),Lo(r))return new he(Z.UNAVAILABLE,`${e}: ${r}`);throw r}class Io{static emptySet(e){return new Io(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ee.comparator(t.key,i.key):(t,i)=>Ee.comparator(t.key,i.key),this.keyedMap=Ba(),this.sortedSet=new st(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Io)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Io;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class my{constructor(){this.ga=new st(Ee.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Te(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Do{constructor(e,t,i,o,l,h,m,p,v){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=v}static fromInitialDocuments(e,t,i,o,l){const h=[];return t.forEach((m=>{h.push({type:0,doc:m})})),new Do(e,t,Io.emptySet(t),h,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Su(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}class vT{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class xT{constructor(){this.queries=py(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const o=Re(t),l=o.queries;o.queries=py(),l.forEach(((h,m)=>{for(const p of m.ba)p.onError(i)}))})(this,new he(Z.ABORTED,"Firestore shutting down"))}}function py(){return new Ii((r=>Lv(r)),Su)}async function x0(r,e){const t=Re(r);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.Sa()&&e.Da()&&(i=2):(l=new vT,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const m=Af(h,`Initialization of query '${vo(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Pf(t)}async function _0(r,e){const t=Re(r),i=e.query;let o=3;const l=t.queries.get(i);if(l){const h=l.ba.indexOf(e);h>=0&&(l.ba.splice(h,1),l.ba.length===0?o=e.Da()?0:1:!l.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function _T(r,e){const t=Re(r);let i=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const m of h.ba)m.Fa(o)&&(i=!0);h.wa=o}}i&&Pf(t)}function wT(r,e,t){const i=Re(r),o=i.queries.get(e);if(o)for(const l of o.ba)l.onError(t);i.queries.delete(e)}function Pf(r){r.Ca.forEach((e=>{e.next()}))}var Qh,gy;(gy=Qh||(Qh={})).Ma="default",gy.Cache="cache";class w0{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Do(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Do.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Qh.Cache}}class E0{constructor(e){this.key=e}}class b0{constructor(e){this.key=e}}class ET{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Me(),this.mutatedKeys=Me(),this.eu=Fv(e),this.tu=new Io(this.eu)}get nu(){return this.Za}ru(e,t){const i=t?t.iu:new my,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((w,I)=>{const N=o.get(w),M=Cu(this.query,I)?I:null,L=!!N&&this.mutatedKeys.has(N.key),O=!!M&&(M.hasLocalMutations||this.mutatedKeys.has(M.key)&&M.hasCommittedMutations);let F=!1;N&&M?N.data.isEqual(M.data)?L!==O&&(i.track({type:3,doc:M}),F=!0):this.su(N,M)||(i.track({type:2,doc:M}),F=!0,(p&&this.eu(M,p)>0||v&&this.eu(M,v)<0)&&(m=!0)):!N&&M?(i.track({type:0,doc:M}),F=!0):N&&!M&&(i.track({type:1,doc:N}),F=!0,(p||v)&&(m=!0)),F&&(M?(h=h.add(M),l=O?l.add(w):l.delete(w)):(h=h.delete(w),l=l.delete(w)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const w=this.query.limitType==="F"?h.last():h.first();h=h.delete(w.key),l=l.delete(w.key),i.track({type:1,doc:w})}return{tu:h,iu:i,Ss:m,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((w,I)=>(function(M,L){const O=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te(20277,{Vt:F})}};return O(M)-O(L)})(w.type,I.type)||this.eu(w.doc,I.doc))),this.ou(i),o=o??!1;const m=t&&!o?this._u():[],p=this.Ya.size===0&&this.current&&!o?1:0,v=p!==this.Xa;return this.Xa=p,h.length!==0||v?{snapshot:new Do(this.query,e.tu,l,h,e.mutatedKeys,p===0,v,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new my,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Me(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const t=[];return e.forEach((i=>{this.Ya.has(i)||t.push(new b0(i))})),this.Ya.forEach((i=>{e.has(i)||t.push(new E0(i))})),t}cu(e){this.Za=e.ks,this.Ya=Me();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Do.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Rf="SyncEngine";class bT{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class IT{constructor(e){this.key=e,this.hu=!1}}class TT{constructor(e,t,i,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new Ii((m=>Lv(m)),Su),this.Iu=new Map,this.Eu=new Set,this.Ru=new st(Ee.comparator),this.Au=new Map,this.Vu=new wf,this.du={},this.mu=new Map,this.fu=jo.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function NT(r,e,t=!0){const i=k0(r);let o;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await I0(i,e,t,!0),o}async function ST(r,e){const t=k0(r);await I0(t,e,!0,!1)}async function I0(r,e,t,i){const o=await WI(r.localStore,rr(e)),l=o.targetId,h=r.sharedClientState.addLocalQueryTarget(l,t);let m;return i&&(m=await CT(r,e,l,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&f0(r.remoteStore,o),m}async function CT(r,e,t,i,o){r.pu=(I,N,M)=>(async function(O,F,$,z){let Y=F.view.ru($);Y.Ss&&(Y=await ly(O.localStore,F.query,!1).then((({documents:C})=>F.view.ru(C,Y))));const ne=z&&z.targetChanges.get(F.targetId),G=z&&z.targetMismatches.get(F.targetId)!=null,ce=F.view.applyChanges(Y,O.isPrimaryClient,ne,G);return vy(O,F.targetId,ce.au),ce.snapshot})(r,I,N,M);const l=await ly(r.localStore,e,!0),h=new ET(e,l.ks),m=h.ru(l.documents),p=hl.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",o),v=h.applyChanges(m,r.isPrimaryClient,p);vy(r,t,v.au);const w=new bT(e,t,h);return r.Tu.set(e,w),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),v.snapshot}async function kT(r,e,t){const i=Re(r),o=i.Tu.get(e),l=i.Iu.get(o.targetId);if(l.length>1)return i.Iu.set(o.targetId,l.filter((h=>!Su(h,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Gh(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&Tf(i.remoteStore,o.targetId),Yh(i,o.targetId)})).catch(Mo)):(Yh(i,o.targetId),await Gh(i.localStore,o.targetId,!0))}async function AT(r,e){const t=Re(r),i=t.Tu.get(e),o=t.Iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Tf(t.remoteStore,i.targetId))}async function PT(r,e,t){const i=LT(r);try{const o=await(function(h,m){const p=Re(h),v=et.now(),w=m.reduce(((M,L)=>M.add(L.key)),Me());let I,N;return p.persistence.runTransaction("Locally write mutations","readwrite",(M=>{let L=Lr(),O=Me();return p.xs.getEntries(M,w).next((F=>{L=F,L.forEach((($,z)=>{z.isValidDocument()||(O=O.add($))}))})).next((()=>p.localDocuments.getOverlayedDocuments(M,L))).next((F=>{I=F;const $=[];for(const z of m){const Y=Hb(z,I.get(z.key).overlayedDocument);Y!=null&&$.push(new Os(z.key,Y,Av(Y.value.mapValue),Dn.exists(!0)))}return p.mutationQueue.addMutationBatch(M,v,$,m)})).next((F=>{N=F;const $=F.applyToLocalDocumentSet(I,O);return p.documentOverlayCache.saveOverlays(M,F.batchId,$)}))})).then((()=>({batchId:N.batchId,changes:Bv(I)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(h,m,p){let v=h.du[h.currentUser.toKey()];v||(v=new st(Oe)),v=v.insert(m,p),h.du[h.currentUser.toKey()]=v})(i,o.batchId,t),await ml(i,o.changes),await Du(i.remoteStore)}catch(o){const l=Af(o,"Failed to persist write");t.reject(l)}}async function T0(r,e){const t=Re(r);try{const i=await $I(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const h=t.Au.get(l);h&&(He(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?He(h.hu,14607):o.removedDocuments.size>0&&(He(h.hu,42227),h.hu=!1))})),await ml(t,i,e)}catch(i){await Mo(i)}}function yy(r,e,t){const i=Re(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Tu.forEach(((l,h)=>{const m=h.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(h,m){const p=Re(h);p.onlineState=m;let v=!1;p.queries.forEach(((w,I)=>{for(const N of I.ba)N.va(m)&&(v=!0)})),v&&Pf(p)})(i.eventManager,e),o.length&&i.Pu.J_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function RT(r,e,t){const i=Re(r);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Au.get(e),l=o&&o.key;if(l){let h=new st(Ee.comparator);h=h.insert(l,Ut.newNoDocument(l,ke.min()));const m=Me().add(l),p=new Pu(ke.min(),new Map,new st(Oe),h,m);await T0(i,p),i.Ru=i.Ru.remove(l),i.Au.delete(e),jf(i)}else await Gh(i.localStore,e,!1).then((()=>Yh(i,e,t))).catch(Mo)}async function jT(r,e){const t=Re(r),i=e.batch.batchId;try{const o=await zI(t.localStore,e);S0(t,i,null),N0(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await ml(t,o)}catch(o){await Mo(o)}}async function DT(r,e,t){const i=Re(r);try{const o=await(function(h,m){const p=Re(h);return p.persistence.runTransaction("Reject batch","readwrite-primary",(v=>{let w;return p.mutationQueue.lookupMutationBatch(v,m).next((I=>(He(I!==null,37113),w=I.keys(),p.mutationQueue.removeMutationBatch(v,I)))).next((()=>p.mutationQueue.performConsistencyCheck(v))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(v,w,m))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,w))).next((()=>p.localDocuments.getDocuments(v,w)))}))})(i.localStore,e);S0(i,e,t),N0(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await ml(i,o)}catch(o){await Mo(o)}}function N0(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function S0(r,e,t){const i=Re(r);let o=i.du[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.du[i.currentUser.toKey()]=o}}function Yh(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Iu.get(e))r.Tu.delete(i),t&&r.Pu.yu(i,t);r.Iu.delete(e),r.isPrimaryClient&&r.Vu.Gr(e).forEach((i=>{r.Vu.containsKey(i)||C0(r,i)}))}function C0(r,e){r.Eu.delete(e.path.canonicalString());const t=r.Ru.get(e);t!==null&&(Tf(r.remoteStore,t),r.Ru=r.Ru.remove(e),r.Au.delete(t),jf(r))}function vy(r,e,t){for(const i of t)i instanceof E0?(r.Vu.addReference(i.key,e),VT(r,i)):i instanceof b0?(pe(Rf,"Document no longer in limbo: "+i.key),r.Vu.removeReference(i.key,e),r.Vu.containsKey(i.key)||C0(r,i.key)):Te(19791,{wu:i})}function VT(r,e){const t=e.key,i=t.path.canonicalString();r.Ru.get(t)||r.Eu.has(i)||(pe(Rf,"New document in limbo: "+t),r.Eu.add(i),jf(r))}function jf(r){for(;r.Eu.size>0&&r.Ru.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new Ee(Ye.fromString(e)),i=r.fu.next();r.Au.set(i,new IT(t)),r.Ru=r.Ru.insert(t,i),f0(r.remoteStore,new bs(rr(pf(t.path)),i,"TargetPurposeLimboResolution",Iu.ce))}}async function ml(r,e,t){const i=Re(r),o=[],l=[],h=[];i.Tu.isEmpty()||(i.Tu.forEach(((m,p)=>{h.push(i.pu(p,e,t).then((v=>{if((v||t)&&i.isPrimaryClient){const w=v?!v.fromCache:t?.targetChanges.get(p.targetId)?.current;i.sharedClientState.updateQueryState(p.targetId,w?"current":"not-current")}if(v){o.push(v);const w=bf.Es(p.targetId,v);l.push(w)}})))})),await Promise.all(h),i.Pu.J_(o),await(async function(p,v){const w=Re(p);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",(I=>ee.forEach(v,(N=>ee.forEach(N.Ts,(M=>w.persistence.referenceDelegate.addReference(I,N.targetId,M))).next((()=>ee.forEach(N.Is,(M=>w.persistence.referenceDelegate.removeReference(I,N.targetId,M)))))))))}catch(I){if(!Lo(I))throw I;pe(If,"Failed to update sequence numbers: "+I)}for(const I of v){const N=I.targetId;if(!I.fromCache){const M=w.vs.get(N),L=M.snapshotVersion,O=M.withLastLimboFreeSnapshotVersion(L);w.vs=w.vs.insert(N,O)}}})(i.localStore,l))}async function OT(r,e){const t=Re(r);if(!t.currentUser.isEqual(e)){pe(Rf,"User change. New user:",e.toKey());const i=await c0(t.localStore,e);t.currentUser=e,(function(l,h){l.mu.forEach((m=>{m.forEach((p=>{p.reject(new he(Z.CANCELLED,h))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await ml(t,i.Ns)}}function MT(r,e){const t=Re(r),i=t.Au.get(e);if(i&&i.hu)return Me().add(i.key);{let o=Me();const l=t.Iu.get(e);if(!l)return o;for(const h of l){const m=t.Tu.get(h);o=o.unionWith(m.view.nu)}return o}}function k0(r){const e=Re(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=T0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=MT.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=RT.bind(null,e),e.Pu.J_=_T.bind(null,e.eventManager),e.Pu.yu=wT.bind(null,e.eventManager),e}function LT(r){const e=Re(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jT.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=DT.bind(null,e),e}class du{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ru(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return BI(this.persistence,new LI,e.initialUser,this.serializer)}Cu(e){return new l0(Ef.Vi,this.serializer)}Du(e){return new KI}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}du.provider={build:()=>new du};class FT extends du{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){He(this.persistence.referenceDelegate instanceof cu,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new bI(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Xt.withCacheSize(this.cacheSizeBytes):Xt.DEFAULT;return new l0((i=>cu.Vi(i,t)),this.serializer)}}class Jh{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>yy(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=OT.bind(null,this.syncEngine),await yT(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new xT})()}createDatastore(e){const t=Ru(e.databaseInfo.databaseId),i=ZI(e.databaseInfo);return sT(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,l,h,m){return new oT(i,o,l,h,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>yy(this.syncEngine,t,0)),(function(){return dy.v()?new dy:new QI})())}createSyncEngine(e,t){return(function(o,l,h,m,p,v,w){const I=new TT(o,l,h,m,p,v);return w&&(I.gu=!0),I})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=Re(t);pe(xi,"RemoteStore shutting down."),i.Ea.add(5),await fl(i),i.Aa.shutdown(),i.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Jh.provider={build:()=>new Jh};class A0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Or("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Ds="FirestoreClient";class UT{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this._databaseInfo=o,this.user=Ft.UNAUTHENTICATED,this.clientId=cf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async h=>{pe(Ds,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(i,(h=>(pe(Ds,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Dr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Af(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Th(r,e){r.asyncQueue.verifyOperationInProgress(),pe(Ds,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener((async o=>{i.isEqual(o)||(await c0(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function xy(r,e){r.asyncQueue.verifyOperationInProgress();const t=await BT(r);pe(Ds,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((i=>fy(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,o)=>fy(e.remoteStore,o))),r._onlineComponents=e}async function BT(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){pe(Ds,"Using user provided OfflineComponentProvider");try{await Th(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===Z.FAILED_PRECONDITION||o.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;ko("Error using user provided cache. Falling back to memory cache: "+t),await Th(r,new du)}}else pe(Ds,"Using default OfflineComponentProvider"),await Th(r,new FT(void 0));return r._offlineComponents}async function P0(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(pe(Ds,"Using user provided OnlineComponentProvider"),await xy(r,r._uninitializedComponentsProvider._online)):(pe(Ds,"Using default OnlineComponentProvider"),await xy(r,new Jh))),r._onlineComponents}function zT(r){return P0(r).then((e=>e.syncEngine))}async function R0(r){const e=await P0(r),t=e.eventManager;return t.onListen=NT.bind(null,e.syncEngine),t.onUnlisten=kT.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=ST.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=AT.bind(null,e.syncEngine),t}function $T(r,e,t={}){const i=new Dr;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,m,p,v){const w=new A0({next:N=>{w.Nu(),h.enqueueAndForget((()=>_0(l,I)));const M=N.docs.has(m);!M&&N.fromCache?v.reject(new he(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&N.fromCache&&p&&p.source==="server"?v.reject(new he(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(N)},error:N=>v.reject(N)}),I=new w0(pf(m.path),w,{includeMetadataChanges:!0,Ka:!0});return x0(l,I)})(await R0(r),r.asyncQueue,e,t,i))),i.promise}function qT(r,e,t={}){const i=new Dr;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,m,p,v){const w=new A0({next:N=>{w.Nu(),h.enqueueAndForget((()=>_0(l,I))),N.fromCache&&p.source==="server"?v.reject(new he(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(N)},error:N=>v.reject(N)}),I=new w0(m,w,{includeMetadataChanges:!0,Ka:!0});return x0(l,I)})(await R0(r),r.asyncQueue,e,t,i))),i.promise}function HT(r,e){const t=new Dr;return r.asyncQueue.enqueueAndForget((async()=>PT(await zT(r),e,t))),t.promise}function j0(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const WT="ComponentProvider",_y=new Map;function GT(r,e,t,i,o){return new hb(r,e,t,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,j0(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,i)}const D0="firestore.googleapis.com",wy=!0;class Ey{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new he(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=D0,this.ssl=wy}else this.host=e.host,this.ssl=e.ssl??wy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=a0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<wI)throw new he(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}eb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=j0(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new he(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new he(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new he(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Vu{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ey({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ey(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new qE;switch(i.type){case"firstParty":return new KE(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new he(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=_y.get(t);i&&(pe(WT,"Removing Datastore"),_y.delete(t),i.terminate())})(this),Promise.resolve()}}function KT(r,e,t,i={}){r=Mr(r,Vu);const o=Ei(e),l=r._getSettings(),h={...l,emulatorOptions:r._getEmulatorOptions()},m=`${e}:${t}`;o&&(nf(`https://${m}`),rf("Firestore",!0)),l.host!==D0&&l.host!==m&&ko("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...l,host:m,ssl:o,emulatorOptions:i};if(!gi(p,h)&&(r._setSettings(p),i.mockUserToken)){let v,w;if(typeof i.mockUserToken=="string")v=i.mockUserToken,w=Ft.MOCK_USER;else{v=iv(i.mockUserToken,r._app?.options.projectId);const I=i.mockUserToken.sub||i.mockUserToken.user_id;if(!I)throw new he(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new Ft(I)}r._authCredentials=new HE(new vv(v,w))}}class Ms{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Ms(this.firestore,e,this._query)}}class yt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ss(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new yt(this.firestore,e,this._key)}toJSON(){return{type:yt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(ul(t,yt._jsonSchema))return new yt(e,i||null,new Ee(Ye.fromString(t.referencePath)))}}yt._jsonSchemaVersion="firestore/documentReference/1.0",yt._jsonSchema={type:gt("string",yt._jsonSchemaVersion),referencePath:gt("string")};class Ss extends Ms{constructor(e,t,i){super(e,t,pf(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new yt(this.firestore,null,new Ee(e))}withConverter(e){return new Ss(this.firestore,e,this._path)}}function go(r,e,...t){if(r=zt(r),xv("collection","path",e),r instanceof Vu){const i=Ye.fromString(e,...t);return Vg(i),new Ss(r,null,i)}{if(!(r instanceof yt||r instanceof Ss))throw new he(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Ye.fromString(e,...t));return Vg(i),new Ss(r.firestore,null,i)}}function Kc(r,e,...t){if(r=zt(r),arguments.length===1&&(e=cf.newId()),xv("doc","path",e),r instanceof Vu){const i=Ye.fromString(e,...t);return Dg(i),new yt(r,null,new Ee(i))}{if(!(r instanceof yt||r instanceof Ss))throw new he(Z.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Ye.fromString(e,...t));return Dg(i),new yt(r.firestore,r instanceof Ss?r.converter:null,new Ee(i))}}const by="AsyncQueue";class Iy{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new d0(this,"async_queue_retry"),this._c=()=>{const i=Ih();i&&pe(by,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Ih();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Ih();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Dr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Lo(e))throw e;pe(by,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Or("INTERNAL UNHANDLED ERROR: ",Ty(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=kf.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&Te(47125,{Pc:Ty(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Ty(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class Bo extends Vu{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new Iy,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Iy(e),this._firestoreClient=void 0,await e}}}function QT(r,e){const t=typeof r=="object"?r:af(),i=typeof r=="string"?r:ru,o=Eu(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=nv("firestore");l&&KT(o,...l)}return o}function Df(r){if(r._terminated)throw new he(Z.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||YT(r),r._firestoreClient}function YT(r){const e=r._freezeSettings(),t=GT(r._databaseId,r._app?.options.appId||"",r._persistenceKey,r._app?.options.apiKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new UT(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(o){const l=o?._online.build();return{_offline:o?._offline.build(l),_online:l}})(r._componentsProvider))}class _n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _n(Pt.fromBase64String(e))}catch(t){throw new he(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new _n(Pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:_n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ul(e,_n._jsonSchema))return _n.fromBase64String(e.bytes)}}_n._jsonSchemaVersion="firestore/bytes/1.0",_n._jsonSchema={type:gt("string",_n._jsonSchemaVersion),bytes:gt("string")};class Vf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new he(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new At(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ou{constructor(e){this._methodName=e}}class ir{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new he(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new he(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Oe(this._lat,e._lat)||Oe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ir._jsonSchemaVersion}}static fromJSON(e){if(ul(e,ir._jsonSchema))return new ir(e.latitude,e.longitude)}}ir._jsonSchemaVersion="firestore/geoPoint/1.0",ir._jsonSchema={type:gt("string",ir._jsonSchemaVersion),latitude:gt("number"),longitude:gt("number")};class Vn{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Vn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ul(e,Vn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Vn(e.vectorValues);throw new he(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Vn._jsonSchemaVersion="firestore/vectorValue/1.0",Vn._jsonSchema={type:gt("string",Vn._jsonSchemaVersion),vectorValues:gt("object")};const JT=/^__.*__$/;class XT{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Os(e,this.data,this.fieldMask,t,this.fieldTransforms):new dl(e,this.data,t,this.fieldTransforms)}}class V0{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Os(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function O0(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te(40011,{dataSource:r})}}class Of{constructor(e,t,i,o,l,h){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Of({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const t=this.path?.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){const t=this.path?.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return hu(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(O0(this.dataSource)&&JT.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class ZT{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Ru(e)}createContext(e,t,i,o=!1){return new Of({dataSource:e,methodName:t,targetDoc:i,path:At.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Mf(r){const e=r._freezeSettings(),t=Ru(r._databaseId);return new ZT(r._databaseId,!!e.ignoreUndefinedProperties,t)}function e1(r,e,t,i,o,l={}){const h=r.createContext(l.merge||l.mergeFields?2:0,e,t,o);Ff("Data must be an object, but it was:",h,i);const m=M0(i,h);let p,v;if(l.merge)p=new dn(h.fieldMask),v=h.fieldTransforms;else if(l.mergeFields){const w=[];for(const I of l.mergeFields){const N=_i(e,I,t);if(!h.contains(N))throw new he(Z.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);U0(w,N)||w.push(N)}p=new dn(w),v=h.fieldTransforms.filter((I=>p.covers(I.field)))}else p=null,v=h.fieldTransforms;return new XT(new Zt(m),p,v)}class Mu extends Ou{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Mu}}class Lf extends Ou{_toFieldTransform(e){return new Bb(e.path,new sl)}isEqual(e){return e instanceof Lf}}function t1(r,e,t,i){const o=r.createContext(1,e,t);Ff("Data must be an object, but it was:",o,i);const l=[],h=Zt.empty();Vs(i,((p,v)=>{const w=F0(e,p,t);v=zt(v);const I=o.childContextForFieldPath(w);if(v instanceof Mu)l.push(w);else{const N=pl(v,I);N!=null&&(l.push(w),h.set(w,N))}}));const m=new dn(l);return new V0(h,m,o.fieldTransforms)}function n1(r,e,t,i,o,l){const h=r.createContext(1,e,t),m=[_i(e,i,t)],p=[o];if(l.length%2!=0)throw new he(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<l.length;N+=2)m.push(_i(e,l[N])),p.push(l[N+1]);const v=[],w=Zt.empty();for(let N=m.length-1;N>=0;--N)if(!U0(v,m[N])){const M=m[N];let L=p[N];L=zt(L);const O=h.childContextForFieldPath(M);if(L instanceof Mu)v.push(M);else{const F=pl(L,O);F!=null&&(v.push(M),w.set(M,F))}}const I=new dn(v);return new V0(w,I,h.fieldTransforms)}function r1(r,e,t,i=!1){return pl(t,r.createContext(i?4:3,e))}function pl(r,e){if(L0(r=zt(r)))return Ff("Unsupported field value:",e,r),M0(r,e);if(r instanceof Ou)return(function(i,o){if(!O0(o.dataSource))throw o.createError(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,o){const l=[];let h=0;for(const m of i){let p=pl(m,o.childContextForArray(h));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),h++}return{arrayValue:{values:l}}})(r,e)}return(function(i,o){if((i=zt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Lb(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=et.fromDate(i);return{timestampValue:lu(o.serializer,l)}}if(i instanceof et){const l=new et(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:lu(o.serializer,l)}}if(i instanceof ir)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof _n)return{bytesValue:Zv(o.serializer,i._byteString)};if(i instanceof yt){const l=o.databaseId,h=i.firestore._databaseId;if(!h.isEqual(l))throw o.createError(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:_f(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Vn)return(function(h,m){const p=h instanceof Vn?h.toArray():h;return{mapValue:{fields:{[Cv]:{stringValue:kv},[su]:{arrayValue:{values:p.map((w=>{if(typeof w!="number")throw m.createError("VectorValues must only contain numeric values.");return gf(m.serializer,w)}))}}}}}})(i,o);if(o0(i))return i._toProto(o.serializer);throw o.createError(`Unsupported field value: ${bu(i)}`)})(r,e)}function M0(r,e){const t={};return Ev(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Vs(r,((i,o)=>{const l=pl(o,e.childContextForField(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function L0(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof et||r instanceof ir||r instanceof _n||r instanceof yt||r instanceof Ou||r instanceof Vn||o0(r))}function Ff(r,e,t){if(!L0(t)||!_v(t)){const i=bu(t);throw i==="an object"?e.createError(r+" a custom object"):e.createError(r+" "+i)}}function _i(r,e,t){if((e=zt(e))instanceof Vf)return e._internalPath;if(typeof e=="string")return F0(r,e);throw hu("Field path arguments must be of type string or ",r,!1,void 0,t)}const s1=new RegExp("[~\\*/\\[\\]]");function F0(r,e,t){if(e.search(s1)>=0)throw hu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Vf(...e.split("."))._internalPath}catch{throw hu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function hu(r,e,t,i,o){const l=i&&!i.isEmpty(),h=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(l||h)&&(p+=" (found",l&&(p+=` in field ${i}`),h&&(p+=` in document ${o}`),p+=")"),new he(Z.INVALID_ARGUMENT,m+r+p)}function U0(r,e){return r.some((t=>t.isEqual(e)))}class i1{convertValue(e,t="none"){switch(Rs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ps(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Te(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Vs(e,((o,l)=>{i[o]=this.convertValue(l,t)})),i}convertVectorValue(e){const t=e.fields?.[su].arrayValue?.values?.map((i=>ut(i.doubleValue)));return new Vn(t)}convertGeoPoint(e){return new ir(ut(e.latitude),ut(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Nu(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(el(e));default:return null}}convertTimestamp(e){const t=As(e);return new et(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Ye.fromString(e);He(i0(i),9688,{name:e});const o=new tl(i.get(1),i.get(3)),l=new Ee(i.popFirst(5));return o.isEqual(t)||Or(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}class B0 extends i1{constructor(e){super(),this.firestore=e}convertBytes(e){return new _n(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new yt(this.firestore,null,t)}}function Nh(){return new Lf("serverTimestamp")}const Ny="@firebase/firestore",Sy="4.10.0";class z0{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new yt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new o1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const t=this._document.data.field(_i("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class o1 extends z0{data(){return super.data()}}function a1(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new he(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Uf{}class Bf extends Uf{}function Uc(r,e,...t){let i=[];e instanceof Uf&&i.push(e),i=i.concat(t),(function(l){const h=l.filter((p=>p instanceof zf)).length,m=l.filter((p=>p instanceof Lu)).length;if(h>1||h>0&&m>0)throw new he(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)r=o._apply(r);return r}class Lu extends Bf{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Lu(e,t,i)}_apply(e){const t=this._parse(e);return $0(e._query,t),new Ms(e.firestore,e.converter,zh(e._query,t))}_parse(e){const t=Mf(e.firestore);return(function(l,h,m,p,v,w,I){let N;if(v.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new he(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){ky(I,w);const L=[];for(const O of I)L.push(Cy(p,l,O));N={arrayValue:{values:L}}}else N=Cy(p,l,I)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||ky(I,w),N=r1(m,h,I,w==="in"||w==="not-in");return pt.create(v,w,N)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Sh(r,e,t){const i=e,o=_i("where",r);return Lu._create(o,i,t)}class zf extends Uf{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new zf(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:On.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let h=o;const m=l.getFlattenedFilters();for(const p of m)$0(h,p),h=zh(h,p)})(e._query,t),new Ms(e.firestore,e.converter,zh(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class $f extends Bf{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new $f(e,t)}_apply(e){const t=(function(o,l,h){if(o.startAt!==null)throw new he(Z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new he(Z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new rl(l,h)})(e._query,this._field,this._direction);return new Ms(e.firestore,e.converter,Ab(e._query,t))}}function l1(r,e="asc"){const t=e,i=_i("orderBy",r);return $f._create(i,t)}class qf extends Bf{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new qf(e,t,i)}_apply(e){return new Ms(e.firestore,e.converter,ou(e._query,this._limit,this._limitType))}}function c1(r){return tb("limit",r),qf._create("limit",r,"F")}function Cy(r,e,t){if(typeof(t=zt(t))=="string"){if(t==="")throw new he(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Mv(e)&&t.indexOf("/")!==-1)throw new he(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Ye.fromString(t));if(!Ee.isDocumentKey(i))throw new he(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return $g(r,new Ee(i))}if(t instanceof yt)return $g(r,t._key);throw new he(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${bu(t)}.`)}function ky(r,e){if(!Array.isArray(r)||r.length===0)throw new he(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function $0(r,e){const t=(function(o,l){for(const h of o)for(const m of h.getFlattenedFilters())if(l.indexOf(m.op)>=0)return m.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new he(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function u1(r,e,t){let i;return i=r?r.toFirestore(e):e,i}class $a{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class mi extends z0{constructor(e,t,i,o,l,h){super(e,t,i,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Qc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(_i("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=mi._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}mi._jsonSchemaVersion="firestore/documentSnapshot/1.0",mi._jsonSchema={type:gt("string",mi._jsonSchemaVersion),bundleSource:gt("string","DocumentSnapshot"),bundleName:gt("string"),bundle:gt("string")};class Qc extends mi{data(e={}){return super.data(e)}}class To{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new $a(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Qc(this._firestore,this._userDataWriter,i.key,i,new $a(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new he(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((m=>{const p=new Qc(o._firestore,o._userDataWriter,m.doc.key,m.doc,new $a(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>l||m.type!==3)).map((m=>{const p=new Qc(o._firestore,o._userDataWriter,m.doc.key,m.doc,new $a(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,w=-1;return m.type!==0&&(v=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),w=h.indexOf(m.doc.key)),{type:d1(m.type),doc:p,oldIndex:v,newIndex:w}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=To._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=cf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function d1(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te(61501,{type:r})}}To._jsonSchemaVersion="firestore/querySnapshot/1.0",To._jsonSchema={type:gt("string",To._jsonSchemaVersion),bundleSource:gt("string","QuerySnapshot"),bundleName:gt("string"),bundle:gt("string")};function h1(r){r=Mr(r,yt);const e=Mr(r.firestore,Bo),t=Df(e);return $T(t,r._key).then((i=>g1(e,r,i)))}function Fa(r){r=Mr(r,Ms);const e=Mr(r.firestore,Bo),t=Df(e),i=new B0(e);return a1(r._query),qT(t,r._query).then((o=>new To(e,i,r,o)))}function f1(r,e,t,...i){r=Mr(r,yt);const o=Mr(r.firestore,Bo),l=Mf(o);let h;return h=typeof(e=zt(e))=="string"||e instanceof Vf?n1(l,"updateDoc",r._key,e,t,i):t1(l,"updateDoc",r._key,e),Hf(o,[h.toMutation(r._key,Dn.exists(!0))])}function m1(r){return Hf(Mr(r.firestore,Bo),[new yf(r._key,Dn.none())])}function p1(r,e){const t=Mr(r.firestore,Bo),i=Kc(r),o=u1(r.converter,e),l=Mf(r.firestore);return Hf(t,[e1(l,"addDoc",i._key,o,r.converter!==null,{}).toMutation(i._key,Dn.exists(!1))]).then((()=>i))}function Hf(r,e){const t=Df(r);return HT(t,e)}function g1(r,e,t){const i=t.docs.get(e._key),o=new B0(r);return new mi(r,o,e._key,i,new $a(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){$E(bi),yi(new Cs("firestore",((i,{instanceIdentifier:o,options:l})=>{const h=i.getProvider("app").getImmediate(),m=new Bo(new WE(i.getProvider("auth-internal")),new QE(h,i.getProvider("app-check-internal")),fb(h,o),h);return l={useFetchStreams:t,...l},m._setSettings(l),m}),"PUBLIC").setMultipleInstances(!0)),nr(Ny,Sy,e),nr(Ny,Sy,"esm2020")})();var y1="firebase",v1="12.8.0";nr(y1,v1,"app");function q0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const x1=q0,H0=new ll("auth","Firebase",q0());const fu=new sf("@firebase/auth");function _1(r,...e){fu.logLevel<=Ve.WARN&&fu.warn(`Auth (${bi}): ${r}`,...e)}function Yc(r,...e){fu.logLevel<=Ve.ERROR&&fu.error(`Auth (${bi}): ${r}`,...e)}function Fr(r,...e){throw Wf(r,...e)}function or(r,...e){return Wf(r,...e)}function W0(r,e,t){const i={...x1(),[e]:t};return new ll("auth","Firebase",i).create(e,{appName:r.name})}function pi(r){return W0(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Wf(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return H0.create(r,...e)}function Se(r,e,...t){if(!r)throw Wf(e,...t)}function Rr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Yc(e),new Error(e)}function Ur(r,e){r||Rr(e)}function Xh(){return typeof self<"u"&&self.location?.href||""}function w1(){return Ay()==="http:"||Ay()==="https:"}function Ay(){return typeof self<"u"&&self.location?.protocol||null}function E1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(w1()||Ew()||"connection"in navigator)?navigator.onLine:!0}function b1(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class gl{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ur(t>e,"Short delay should be less than long delay!"),this.isMobile=xw()||bw()}get(){return E1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Gf(r,e){Ur(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class G0{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Rr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Rr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Rr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const I1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const T1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],N1=new gl(3e4,6e4);function Kf(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function zo(r,e,t,i,o={}){return K0(r,o,async()=>{let l={},h={};i&&(e==="GET"?h=i:l={body:JSON.stringify(i)});const m=cl({key:r.config.apiKey,...h}).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const v={method:e,headers:p,...l};return ww()||(v.referrerPolicy="no-referrer"),r.emulatorConfig&&Ei(r.emulatorConfig.host)&&(v.credentials="include"),G0.fetch()(await Q0(r,r.config.apiHost,t,m),v)})}async function K0(r,e,t){r._canInitEmulator=!1;const i={...I1,...e};try{const o=new C1(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw Bc(r,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const m=l.ok?h.errorMessage:h.error.message,[p,v]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Bc(r,"credential-already-in-use",h);if(p==="EMAIL_EXISTS")throw Bc(r,"email-already-in-use",h);if(p==="USER_DISABLED")throw Bc(r,"user-disabled",h);const w=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw W0(r,w,v);Fr(r,w)}}catch(o){if(o instanceof ur)throw o;Fr(r,"network-request-failed",{message:String(o)})}}async function S1(r,e,t,i,o={}){const l=await zo(r,e,t,i,o);return"mfaPendingCredential"in l&&Fr(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function Q0(r,e,t,i){const o=`${e}${t}?${i}`,l=r,h=l.config.emulator?Gf(r.config,o):`${r.config.apiScheme}://${o}`;return T1.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}class C1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(or(this.auth,"network-request-failed")),N1.get())})}}function Bc(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=or(r,e,i);return o.customData._tokenResponse=t,o}async function k1(r,e){return zo(r,"POST","/v1/accounts:delete",e)}async function mu(r,e){return zo(r,"POST","/v1/accounts:lookup",e)}function Ya(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function A1(r,e=!1){const t=zt(r),i=await t.getIdToken(e),o=Qf(i);Se(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l?.sign_in_provider;return{claims:o,token:i,authTime:Ya(Ch(o.auth_time)),issuedAtTime:Ya(Ch(o.iat)),expirationTime:Ya(Ch(o.exp)),signInProvider:h||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Ch(r){return Number(r)*1e3}function Qf(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return Yc("JWT malformed, contained fewer than 3 sections"),null;try{const o=ev(t);return o?JSON.parse(o):(Yc("Failed to decode base64 JWT payload"),null)}catch(o){return Yc("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Py(r){const e=Qf(r);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function al(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof ur&&P1(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function P1({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class R1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Zh{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ya(this.lastLoginAt),this.creationTime=Ya(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function pu(r){const e=r.auth,t=await r.getIdToken(),i=await al(r,mu(e,{idToken:t}));Se(i?.users.length,e,"internal-error");const o=i.users[0];r._notifyReloadListener(o);const l=o.providerUserInfo?.length?Y0(o.providerUserInfo):[],h=D1(r.providerData,l),m=r.isAnonymous,p=!(r.email&&o.passwordHash)&&!h?.length,v=m?p:!1,w={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Zh(o.createdAt,o.lastLoginAt),isAnonymous:v};Object.assign(r,w)}async function j1(r){const e=zt(r);await pu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function D1(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function Y0(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function V1(r,e){const t=await K0(r,{},async()=>{const i=cl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,h=await Q0(r,o,"/v1/token",`key=${l}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:m,body:i};return r.emulatorConfig&&Ei(r.emulatorConfig.host)&&(p.credentials="include"),G0.fetch()(h,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function O1(r,e){return zo(r,"POST","/v2/accounts:revokeToken",Kf(r,e))}class No{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Py(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const t=Py(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await V1(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,h=new No;return i&&(Se(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),o&&(Se(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(Se(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new No,this.toJSON())}_performRefresh(){return Rr("not implemented")}}function ys(r,e){Se(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Rn{constructor({uid:e,auth:t,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new R1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Zh(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await al(this,this.stsTokenManager.getToken(this.auth,e));return Se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return A1(this,e)}reload(){return j1(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Rn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await pu(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Pn(this.auth.app))return Promise.reject(pi(this.auth));const e=await this.getIdToken();return await al(this,k1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,h=t.photoURL??void 0,m=t.tenantId??void 0,p=t._redirectEventId??void 0,v=t.createdAt??void 0,w=t.lastLoginAt??void 0,{uid:I,emailVerified:N,isAnonymous:M,providerData:L,stsTokenManager:O}=t;Se(I&&O,e,"internal-error");const F=No.fromJSON(this.name,O);Se(typeof I=="string",e,"internal-error"),ys(i,e.name),ys(o,e.name),Se(typeof N=="boolean",e,"internal-error"),Se(typeof M=="boolean",e,"internal-error"),ys(l,e.name),ys(h,e.name),ys(m,e.name),ys(p,e.name),ys(v,e.name),ys(w,e.name);const $=new Rn({uid:I,auth:e,email:o,emailVerified:N,displayName:i,isAnonymous:M,photoURL:h,phoneNumber:l,tenantId:m,stsTokenManager:F,createdAt:v,lastLoginAt:w});return L&&Array.isArray(L)&&($.providerData=L.map(z=>({...z}))),p&&($._redirectEventId=p),$}static async _fromIdTokenResponse(e,t,i=!1){const o=new No;o.updateFromServerResponse(t);const l=new Rn({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await pu(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Se(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?Y0(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!l?.length,m=new No;m.updateFromIdToken(i);const p=new Rn({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:h}),v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Zh(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!l?.length};return Object.assign(p,v),p}}const Ry=new Map;function jr(r){Ur(r instanceof Function,"Expected a class definition");let e=Ry.get(r);return e?(Ur(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Ry.set(r,e),e)}class J0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}J0.type="NONE";const jy=J0;function Jc(r,e,t){return`firebase:${r}:${e}:${t}`}class So{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=Jc(this.userKey,o.apiKey,l),this.fullPersistenceKey=Jc("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await mu(this.auth,{idToken:e}).catch(()=>{});return t?Rn._fromGetAccountInfoResponse(this.auth,t,e):null}return Rn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new So(jr(jy),e,i);const o=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let l=o[0]||jr(jy);const h=Jc(i,e.config.apiKey,e.name);let m=null;for(const v of t)try{const w=await v._get(h);if(w){let I;if(typeof w=="string"){const N=await mu(e,{idToken:w}).catch(()=>{});if(!N)break;I=await Rn._fromGetAccountInfoResponse(e,N,w)}else I=Rn._fromJSON(e,w);v!==l&&(m=I),l=v;break}}catch{}const p=o.filter(v=>v._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new So(l,e,i):(l=p[0],m&&await l._set(h,m.toJSON()),await Promise.all(t.map(async v=>{if(v!==l)try{await v._remove(h)}catch{}})),new So(l,e,i))}}function Dy(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(tx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(X0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(rx(e))return"Blackberry";if(sx(e))return"Webos";if(Z0(e))return"Safari";if((e.includes("chrome/")||ex(e))&&!e.includes("edge/"))return"Chrome";if(nx(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if(i?.length===2)return i[1]}return"Other"}function X0(r=Bt()){return/firefox\//i.test(r)}function Z0(r=Bt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ex(r=Bt()){return/crios\//i.test(r)}function tx(r=Bt()){return/iemobile/i.test(r)}function nx(r=Bt()){return/android/i.test(r)}function rx(r=Bt()){return/blackberry/i.test(r)}function sx(r=Bt()){return/webos/i.test(r)}function Yf(r=Bt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function M1(r=Bt()){return Yf(r)&&!!window.navigator?.standalone}function L1(){return Iw()&&document.documentMode===10}function ix(r=Bt()){return Yf(r)||nx(r)||sx(r)||rx(r)||/windows phone/i.test(r)||tx(r)}function ox(r,e=[]){let t;switch(r){case"Browser":t=Dy(Bt());break;case"Worker":t=`${Dy(Bt())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${bi}/${i}`}class F1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((h,m)=>{try{const p=e(l);h(p)}catch(p){m(p)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function U1(r,e={}){return zo(r,"GET","/v2/passwordPolicy",Kf(r,e))}const B1=6;class z1{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??B1,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class $1{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Vy(this),this.idTokenSubscription=new Vy(this),this.beforeStateQueue=new F1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=H0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=jr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await So.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await mu(this,{idToken:e}),i=await Rn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Pn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,h=i?._redirectEventId,m=await this.tryRedirectSignIn(e);(!l||l===h)&&m?.user&&(i=m.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await pu(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=b1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Pn(this.app))return Promise.reject(pi(this));const t=e?zt(e):null;return t&&Se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Pn(this.app)?Promise.reject(pi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Pn(this.app)?Promise.reject(pi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(jr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await U1(this),t=new z1(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ll("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await O1(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&jr(e)||this._popupRedirectResolver;Se(t,this,"argument-error"),this.redirectPersistenceManager=await So.create(this,[jr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(m,this,"internal-error"),m.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,o);return()=>{h=!0,p()}}else{const p=e.addObserver(t);return()=>{h=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ox(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(Pn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&_1(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Jf(r){return zt(r)}class Vy{constructor(e){this.auth=e,this.observer=null,this.addObserver=Rw(t=>this.observer=t)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Xf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function q1(r){Xf=r}function H1(r){return Xf.loadJS(r)}function W1(){return Xf.gapiScript}function G1(r){return`__${r}${Math.floor(Math.random()*1e6)}`}function K1(r,e){const t=Eu(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(gi(l,e??{}))return o;Fr(o,"already-initialized")}return t.initialize({options:e})}function Q1(r,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(jr);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e?.popupRedirectResolver)}function Y1(r,e,t){const i=Jf(r);Se(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=ax(e),{host:h,port:m}=J1(e),p=m===null?"":`:${m}`,v={url:`${l}//${h}${p}/`},w=Object.freeze({host:h,port:m,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Se(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Se(gi(v,i.config.emulator)&&gi(w,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=v,i.emulatorConfig=w,i.settings.appVerificationDisabledForTesting=!0,Ei(h)?(nf(`${l}//${h}${p}`),rf("Auth",!0)):X1()}function ax(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function J1(r){const e=ax(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:Oy(i.substr(l.length+1))}}else{const[l,h]=i.split(":");return{host:l,port:Oy(h)}}}function Oy(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function X1(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class lx{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Rr("not implemented")}_getIdTokenResponse(e){return Rr("not implemented")}_linkToIdToken(e,t){return Rr("not implemented")}_getReauthenticationResolver(e){return Rr("not implemented")}}async function Co(r,e){return S1(r,"POST","/v1/accounts:signInWithIdp",Kf(r,e))}const Z1="http://localhost";class wi extends lx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new wi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Fr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...l}=t;if(!i||!o)return null;const h=new wi(i,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return Co(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Co(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Co(e,t)}buildRequest(){const e={requestUri:Z1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=cl(t)}return e}}class cx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class yl extends cx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class vs extends yl{constructor(){super("facebook.com")}static credential(e){return wi._fromParams({providerId:vs.PROVIDER_ID,signInMethod:vs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vs.credentialFromTaggedObject(e)}static credentialFromError(e){return vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vs.credential(e.oauthAccessToken)}catch{return null}}}vs.FACEBOOK_SIGN_IN_METHOD="facebook.com";vs.PROVIDER_ID="facebook.com";class xs extends yl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return wi._fromParams({providerId:xs.PROVIDER_ID,signInMethod:xs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return xs.credentialFromTaggedObject(e)}static credentialFromError(e){return xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return xs.credential(t,i)}catch{return null}}}xs.GOOGLE_SIGN_IN_METHOD="google.com";xs.PROVIDER_ID="google.com";class _s extends yl{constructor(){super("github.com")}static credential(e){return wi._fromParams({providerId:_s.PROVIDER_ID,signInMethod:_s.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _s.credentialFromTaggedObject(e)}static credentialFromError(e){return _s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _s.credential(e.oauthAccessToken)}catch{return null}}}_s.GITHUB_SIGN_IN_METHOD="github.com";_s.PROVIDER_ID="github.com";class ws extends yl{constructor(){super("twitter.com")}static credential(e,t){return wi._fromParams({providerId:ws.PROVIDER_ID,signInMethod:ws.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ws.credentialFromTaggedObject(e)}static credentialFromError(e){return ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return ws.credential(t,i)}catch{return null}}}ws.TWITTER_SIGN_IN_METHOD="twitter.com";ws.PROVIDER_ID="twitter.com";class Vo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await Rn._fromIdTokenResponse(e,i,o),h=My(i);return new Vo({user:l,providerId:h,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=My(i);return new Vo({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function My(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}class gu extends ur{constructor(e,t,i,o){super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,gu.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new gu(e,t,i,o)}}function ux(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?gu._fromErrorAndOperation(r,l,e,i):l})}async function eN(r,e,t=!1){const i=await al(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Vo._forOperation(r,"link",i)}async function tN(r,e,t=!1){const{auth:i}=r;if(Pn(i.app))return Promise.reject(pi(i));const o="reauthenticate";try{const l=await al(r,ux(i,o,e,r),t);Se(l.idToken,i,"internal-error");const h=Qf(l.idToken);Se(h,i,"internal-error");const{sub:m}=h;return Se(r.uid===m,i,"user-mismatch"),Vo._forOperation(r,o,l)}catch(l){throw l?.code==="auth/user-not-found"&&Fr(i,"user-mismatch"),l}}async function nN(r,e,t=!1){if(Pn(r.app))return Promise.reject(pi(r));const i="signIn",o=await ux(r,i,e),l=await Vo._fromIdTokenResponse(r,i,o);return t||await r._updateCurrentUser(l.user),l}function rN(r,e,t,i){return zt(r).onIdTokenChanged(e,t,i)}function sN(r,e,t){return zt(r).beforeAuthStateChanged(e,t)}const yu="__sak";class dx{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(yu,"1"),this.storage.removeItem(yu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const iN=1e3,oN=10;class hx extends dx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ix(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,m,p)=>{this.notifyListeners(h,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(i);!t&&this.localCache[i]===h||this.notifyListeners(i,h)},l=this.storage.getItem(i);L1()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,oN):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},iN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}hx.type="LOCAL";const aN=hx;class fx extends dx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}fx.type="SESSION";const mx=fx;function lN(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Fu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Fu(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!h?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const m=Array.from(h).map(async v=>v(t.origin,l)),p=await lN(m);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Fu.receivers=[];function Zf(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}class cN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((m,p)=>{const v=Zf("",20);o.port1.start();const w=setTimeout(()=>{p(new Error("unsupported_event"))},i);h={messageChannel:o,onMessage(I){const N=I;if(N.data.eventId===v)switch(N.data.status){case"ack":clearTimeout(w),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),m(N.data.response);break;default:clearTimeout(w),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}function ar(){return window}function uN(r){ar().location.href=r}function px(){return typeof ar().WorkerGlobalScope<"u"&&typeof ar().importScripts=="function"}async function dN(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function hN(){return navigator?.serviceWorker?.controller||null}function fN(){return px()?self:null}const gx="firebaseLocalStorageDb",mN=1,vu="firebaseLocalStorage",yx="fbase_key";class vl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Uu(r,e){return r.transaction([vu],e?"readwrite":"readonly").objectStore(vu)}function pN(){const r=indexedDB.deleteDatabase(gx);return new vl(r).toPromise()}function ef(){const r=indexedDB.open(gx,mN);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(vu,{keyPath:yx})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(vu)?e(i):(i.close(),await pN(),e(await ef()))})})}async function Ly(r,e,t){const i=Uu(r,!0).put({[yx]:e,value:t});return new vl(i).toPromise()}async function gN(r,e){const t=Uu(r,!1).get(e),i=await new vl(t).toPromise();return i===void 0?null:i.value}function Fy(r,e){const t=Uu(r,!0).delete(e);return new vl(t).toPromise()}const yN=800,vN=3;class vx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ef(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>vN)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return px()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Fu._getInstance(fN()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await dN(),!this.activeServiceWorker)return;this.sender=new cN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||hN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ef();return await Ly(e,yu,"1"),await Fy(e,yu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Ly(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>gN(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Fy(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Uu(o,!1).getAll();return new vl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),yN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}vx.type="LOCAL";const xN=vx;new gl(3e4,6e4);function _N(r,e){return e?jr(e):(Se(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class em extends lx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Co(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Co(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Co(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function wN(r){return nN(r.auth,new em(r),r.bypassAuthState)}function EN(r){const{auth:e,user:t}=r;return Se(t,e,"internal-error"),tN(t,new em(r),r.bypassAuthState)}async function bN(r){const{auth:e,user:t}=r;return Se(t,e,"internal-error"),eN(t,new em(r),r.bypassAuthState)}class xx{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:h,type:m}=e;if(h){this.reject(h);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wN;case"linkViaPopup":case"linkViaRedirect":return bN;case"reauthViaPopup":case"reauthViaRedirect":return EN;default:Fr(this.auth,"internal-error")}}resolve(e){Ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const IN=new gl(2e3,1e4);class Eo extends xx{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,Eo.currentPopupAction&&Eo.currentPopupAction.cancel(),Eo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){Ur(this.filter.length===1,"Popup operations only handle one event");const e=Zf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(or(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(or(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Eo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(or(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,IN.get())};e()}}Eo.currentPopupAction=null;const TN="pendingRedirect",Xc=new Map;class NN extends xx{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Xc.get(this.auth._key());if(!e){try{const i=await SN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Xc.set(this.auth._key(),e)}return this.bypassAuthState||Xc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function SN(r,e){const t=AN(e),i=kN(r);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function CN(r,e){Xc.set(r._key(),e)}function kN(r){return jr(r._redirectPersistence)}function AN(r){return Jc(TN,r.config.apiKey,r.name)}async function PN(r,e,t=!1){if(Pn(r.app))return Promise.reject(pi(r));const i=Jf(r),o=_N(i,e),h=await new NN(i,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}const RN=600*1e3;class jN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!DN(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!_x(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(or(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=RN&&this.cachedEventUids.clear(),this.cachedEventUids.has(Uy(e))}saveEventToCache(e){this.cachedEventUids.add(Uy(e)),this.lastProcessedEventTime=Date.now()}}function Uy(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function _x({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function DN(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _x(r);default:return!1}}async function VN(r,e={}){return zo(r,"GET","/v1/projects",e)}const ON=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,MN=/^https?/;async function LN(r){if(r.config.emulator)return;const{authorizedDomains:e}=await VN(r);for(const t of e)try{if(FN(t))return}catch{}Fr(r,"unauthorized-domain")}function FN(r){const e=Xh(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===i}if(!MN.test(t))return!1;if(ON.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}const UN=new gl(3e4,6e4);function By(){const r=ar().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function BN(r){return new Promise((e,t)=>{function i(){By(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{By(),t(or(r,"network-request-failed"))},timeout:UN.get()})}if(ar().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ar().gapi?.load)i();else{const o=G1("iframefcb");return ar()[o]=()=>{gapi.load?i():t(or(r,"network-request-failed"))},H1(`${W1()}?onload=${o}`).catch(l=>t(l))}}).catch(e=>{throw Zc=null,e})}let Zc=null;function zN(r){return Zc=Zc||BN(r),Zc}const $N=new gl(5e3,15e3),qN="__/auth/iframe",HN="emulator/auth/iframe",WN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},GN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function KN(r){const e=r.config;Se(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Gf(e,HN):`https://${r.config.authDomain}/${qN}`,i={apiKey:e.apiKey,appName:r.name,v:bi},o=GN.get(r.config.apiHost);o&&(i.eid=o);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${cl(i).slice(1)}`}async function QN(r){const e=await zN(r),t=ar().gapi;return Se(t,r,"internal-error"),e.open({where:document.body,url:KN(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:WN,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const h=or(r,"network-request-failed"),m=ar().setTimeout(()=>{l(h)},$N.get());function p(){ar().clearTimeout(m),o(i)}i.ping(p).then(p,()=>{l(h)})}))}const YN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},JN=500,XN=600,ZN="_blank",eS="http://localhost";class zy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function tS(r,e,t,i=JN,o=XN){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let m="";const p={...YN,width:i.toString(),height:o.toString(),top:l,left:h},v=Bt().toLowerCase();t&&(m=ex(v)?ZN:t),X0(v)&&(e=e||eS,p.scrollbars="yes");const w=Object.entries(p).reduce((N,[M,L])=>`${N}${M}=${L},`,"");if(M1(v)&&m!=="_self")return nS(e||"",m),new zy(null);const I=window.open(e||"",m,w);Se(I,r,"popup-blocked");try{I.focus()}catch{}return new zy(I)}function nS(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}const rS="__/auth/handler",sS="emulator/auth/handler",iS=encodeURIComponent("fac");async function $y(r,e,t,i,o,l){Se(r.config.authDomain,r,"auth-domain-config-required"),Se(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:bi,eventId:o};if(e instanceof cx){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",Pw(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,I]of Object.entries({}))h[w]=I}if(e instanceof yl){const w=e.getScopes().filter(I=>I!=="");w.length>0&&(h.scopes=w.join(","))}r.tenantId&&(h.tid=r.tenantId);const m=h;for(const w of Object.keys(m))m[w]===void 0&&delete m[w];const p=await r._getAppCheckToken(),v=p?`#${iS}=${encodeURIComponent(p)}`:"";return`${oS(r)}?${cl(m).slice(1)}${v}`}function oS({config:r}){return r.emulator?Gf(r,sS):`https://${r.authDomain}/${rS}`}const kh="webStorageSupport";class aS{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=mx,this._completeRedirectFn=PN,this._overrideRedirectResult=CN}async _openPopup(e,t,i,o){Ur(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await $y(e,t,i,Xh(),o);return tS(e,l,Zf())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await $y(e,t,i,Xh(),o);return uN(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Ur(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await QN(e),i=new jN(e);return t.register("authEvent",o=>(Se(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(kh,{type:kh},o=>{const l=o?.[0]?.[kh];l!==void 0&&t(!!l),Fr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=LN(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ix()||Z0()||Yf()}}const lS=aS;var qy="@firebase/auth",Hy="1.12.0";class cS{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function uS(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function dS(r){yi(new Cs("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:m}=i.options;Se(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:h,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ox(r)},v=new $1(i,o,l,p);return Q1(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),yi(new Cs("auth-internal",e=>{const t=Jf(e.getProvider("auth").getImmediate());return(i=>new cS(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),nr(qy,Hy,uS(r)),nr(qy,Hy,"esm2020")}const hS=300,fS=sv("authIdTokenMaxAge")||hS;let Wy=null;const mS=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>fS)return;const o=t?.token;Wy!==o&&(Wy=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function pS(r=af()){const e=Eu(r,"auth");if(e.isInitialized())return e.getImmediate();const t=K1(r,{popupRedirectResolver:lS,persistence:[xN,aN,mx]}),i=sv("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const h=mS(l.toString());sN(t,h,()=>h(t.currentUser)),rN(t,m=>h(m))}}const o=tv("auth");return o&&Y1(t,`http://${o}`),t}function gS(){return document.getElementsByTagName("head")?.[0]??document}q1({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const l=or("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",gS().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});dS("Browser");const wx="firebasestorage.googleapis.com",yS="storageBucket",vS=120*1e3,xS=600*1e3;class dr extends ur{constructor(e,t,i=0){super(Ah(e),`Firebase Storage: ${t} (${Ah(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,dr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ah(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var cr;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(cr||(cr={}));function Ah(r){return"storage/"+r}function _S(){const r="An unknown error occurred, please check the error payload for server response.";return new dr(cr.UNKNOWN,r)}function wS(){return new dr(cr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function ES(){return new dr(cr.CANCELED,"User canceled the upload/download.")}function bS(r){return new dr(cr.INVALID_URL,"Invalid URL '"+r+"'.")}function IS(r){return new dr(cr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function Gy(r){return new dr(cr.INVALID_ARGUMENT,r)}function Ex(){return new dr(cr.APP_DELETED,"The Firebase app was deleted.")}function TS(r){return new dr(cr.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class jn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=jn.makeFromUrl(e,t)}catch{return new jn(e,"")}if(i.path==="")return i;throw IS(e)}static makeFromUrl(e,t){let i=null;const o="([A-Za-z0-9.\\-_]+)";function l(ne){ne.path.charAt(ne.path.length-1)==="/"&&(ne.path_=ne.path_.slice(0,-1))}const h="(/(.*))?$",m=new RegExp("^gs://"+o+h,"i"),p={bucket:1,path:3};function v(ne){ne.path_=decodeURIComponent(ne.path)}const w="v[A-Za-z0-9_]+",I=t.replace(/[.]/g,"\\."),N="(/([^?#]*).*)?$",M=new RegExp(`^https?://${I}/${w}/b/${o}/o${N}`,"i"),L={bucket:1,path:3},O=t===wx?"(?:storage.googleapis.com|storage.cloud.google.com)":t,F="([^?#]*)",$=new RegExp(`^https?://${O}/${o}/${F}`,"i"),Y=[{regex:m,indices:p,postModify:l},{regex:M,indices:L,postModify:v},{regex:$,indices:{bucket:1,path:2},postModify:v}];for(let ne=0;ne<Y.length;ne++){const G=Y[ne],ce=G.regex.exec(e);if(ce){const C=ce[G.indices.bucket];let T=ce[G.indices.path];T||(T=""),i=new jn(C,T),G.postModify(i);break}}if(i==null)throw bS(e);return i}}class NS{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function SS(r,e,t){let i=1,o=null,l=null,h=!1,m=0;function p(){return m===2}let v=!1;function w(...F){v||(v=!0,e.apply(null,F))}function I(F){o=setTimeout(()=>{o=null,r(M,p())},F)}function N(){l&&clearTimeout(l)}function M(F,...$){if(v){N();return}if(F){N(),w.call(null,F,...$);return}if(p()||h){N(),w.call(null,F,...$);return}i<64&&(i*=2);let Y;m===1?(m=2,Y=0):Y=(i+Math.random())*1e3,I(Y)}let L=!1;function O(F){L||(L=!0,N(),!v&&(o!==null?(F||(m=2),clearTimeout(o),I(0)):F||(m=1)))}return I(0),l=setTimeout(()=>{h=!0,O(!0)},t),O}function CS(r){r(!1)}function kS(r){return r!==void 0}function Ky(r,e,t,i){if(i<e)throw Gy(`Invalid value for '${r}'. Expected ${e} or greater.`);if(i>t)throw Gy(`Invalid value for '${r}'. Expected ${t} or less.`)}function AS(r){const e=encodeURIComponent;let t="?";for(const i in r)if(r.hasOwnProperty(i)){const o=e(i)+"="+e(r[i]);t=t+o+"&"}return t=t.slice(0,-1),t}var xu;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(xu||(xu={}));function PS(r,e){const t=r>=500&&r<600,o=[408,429].indexOf(r)!==-1,l=e.indexOf(r)!==-1;return t||o||l}class RS{constructor(e,t,i,o,l,h,m,p,v,w,I,N=!0,M=!1){this.url_=e,this.method_=t,this.headers_=i,this.body_=o,this.successCodes_=l,this.additionalRetryCodes_=h,this.callback_=m,this.errorCallback_=p,this.timeout_=v,this.progressCallback_=w,this.connectionFactory_=I,this.retry=N,this.isUsingEmulator=M,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((L,O)=>{this.resolve_=L,this.reject_=O,this.start_()})}start_(){const e=(i,o)=>{if(o){i(!1,new zc(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const h=m=>{const p=m.loaded,v=m.lengthComputable?m.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,v)};this.progressCallback_!==null&&l.addUploadProgressListener(h),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(h),this.pendingConnection_=null;const m=l.getErrorCode()===xu.NO_ERROR,p=l.getStatus();if(!m||PS(p,this.additionalRetryCodes_)&&this.retry){const w=l.getErrorCode()===xu.ABORT;i(!1,new zc(!1,null,w));return}const v=this.successCodes_.indexOf(p)!==-1;i(!0,new zc(v,l))})},t=(i,o)=>{const l=this.resolve_,h=this.reject_,m=o.connection;if(o.wasSuccessCode)try{const p=this.callback_(m,m.getResponse());kS(p)?l(p):l()}catch(p){h(p)}else if(m!==null){const p=_S();p.serverResponse=m.getErrorText(),this.errorCallback_?h(this.errorCallback_(m,p)):h(p)}else if(o.canceled){const p=this.appDelete_?Ex():ES();h(p)}else{const p=wS();h(p)}};this.canceled_?t(!1,new zc(!1,null,!0)):this.backoffId_=SS(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&CS(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class zc{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function jS(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function DS(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function VS(r,e){e&&(r["X-Firebase-GMPID"]=e)}function OS(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function MS(r,e,t,i,o,l,h=!0,m=!1){const p=AS(r.urlParams),v=r.url+p,w=Object.assign({},r.headers);return VS(w,e),jS(w,t),DS(w,l),OS(w,i),new RS(v,r.method,w,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,o,h,m)}function LS(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function FS(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}class _u{constructor(e,t){this._service=e,t instanceof jn?this._location=t:this._location=jn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new _u(e,t)}get root(){const e=new jn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return FS(this._location.path)}get storage(){return this._service}get parent(){const e=LS(this._location.path);if(e===null)return null;const t=new jn(this._location.bucket,e);return new _u(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw TS(e)}}function Qy(r,e){const t=e?.[yS];return t==null?null:jn.makeFromBucketSpec(t,r)}function US(r,e,t,i={}){r.host=`${e}:${t}`;const o=Ei(e);o&&(nf(`https://${r.host}/b`),rf("Storage",!0)),r._isUsingEmulator=!0,r._protocol=o?"https":"http";const{mockUserToken:l}=i;l&&(r._overrideAuthToken=typeof l=="string"?l:iv(l,r.app.options.projectId))}class BS{constructor(e,t,i,o,l,h=!1){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=o,this._firebaseVersion=l,this._isUsingEmulator=h,this._bucket=null,this._host=wx,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=vS,this._maxUploadRetryTime=xS,this._requests=new Set,o!=null?this._bucket=jn.makeFromBucketSpec(o,this._host):this._bucket=Qy(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=jn.makeFromBucketSpec(this._url,e):this._bucket=Qy(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Ky("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Ky("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Pn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new _u(this,e)}_makeRequest(e,t,i,o,l=!0){if(this._deleted)return new NS(Ex());{const h=MS(e,this._appId,i,o,t,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(h),h.getPromise().then(()=>this._requests.delete(h),()=>this._requests.delete(h)),h}}async makeRequestWithTokens(e,t){const[i,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,o).getPromise()}}const Yy="@firebase/storage",Jy="0.14.0";const bx="storage";function zS(r=af(),e){r=zt(r);const i=Eu(r,bx).getImmediate({identifier:e}),o=nv("storage");return o&&$S(i,...o),i}function $S(r,e,t,i={}){US(r,e,t,i)}function qS(r,{instanceIdentifier:e}){const t=r.getProvider("app").getImmediate(),i=r.getProvider("auth-internal"),o=r.getProvider("app-check-internal");return new BS(t,i,o,e,bi)}function HS(){yi(new Cs(bx,qS,"PUBLIC").setMultipleInstances(!0)),nr(Yy,Jy,""),nr(Yy,Jy,"esm2020")}HS();const WS={apiKey:"AIzaSyDisIltlN9rR-tltlJaClGBld9usTYLmxM",authDomain:"luxemarket-7c4c0.firebaseapp.com",projectId:"luxemarket-7c4c0",storageBucket:"luxemarket-7c4c0.firebasestorage.app",messagingSenderId:"81635666948",appId:"1:81635666948:web:867963294814113a645951",measurementId:"G-0QQKRWXKDC"},tm=lv(WS),Ar=QT(tm);pS(tm);zS(tm);const Pr="products";class GS{async create(e){return{id:(await p1(go(Ar,Pr),{...e,createdAt:Nh(),updatedAt:Nh()})).id,...e}}async getAll(){return(await Fa(go(Ar,Pr))).docs.map(t=>({id:t.id,...t.data()}))}async getById(e){const t=Kc(Ar,Pr,e),i=await h1(t);return i.exists()?{id:i.id,...i.data()}:null}async getByCategory(e){const t=Uc(go(Ar,Pr),Sh("category","==",e));return(await Fa(t)).docs.map(o=>({id:o.id,...o.data()}))}async getFeatured(){const e=Uc(go(Ar,Pr),Sh("featured","==",!0));return(await Fa(e)).docs.map(i=>({id:i.id,...i.data()}))}async getDailyDeals(){const e=Uc(go(Ar,Pr),Sh("dailyDeal","==",!0));return(await Fa(e)).docs.map(i=>({id:i.id,...i.data()}))}async search(e){const t=await this.getAll(),i=e.toLowerCase();return t.filter(o=>o.name.toLowerCase().includes(i)||o.description?.toLowerCase().includes(i)||o.category.toLowerCase().includes(i))}async update(e,t){const i=Kc(Ar,Pr,e);return await f1(i,{...t,updatedAt:Nh()}),this.getById(e)}async delete(e){const t=Kc(Ar,Pr,e);await m1(t)}async bulkCreate(e){const t=e.map(i=>this.create(i));return await Promise.all(t)}async getPaginated(e=20){const t=Uc(go(Ar,Pr),l1("createdAt","desc"),c1(e));return(await Fa(t)).docs.map(o=>({id:o.id,...o.data()}))}}const Es=new GS;async function Ix(){try{console.log(" Starting Firebase migration...");const r=localStorage.getItem("luxemarket_products");if(!r){console.log(" No products found in localStorage");return}const e=JSON.parse(r);console.log(` Found ${e.length} products to migrate`);const t=await Es.getAll();if(t.length>0&&(console.log(` Firebase already has ${t.length} products`),!confirm(`Firebase already has ${t.length} products.
Do you want to add ${e.length} more products from localStorage?`))){console.log(" Migration cancelled");return}console.log(" Uploading products to Firebase...");let i=0,o=0;for(const l of e)try{const{id:h,...m}=l;await Es.create(m),i++,console.log(` Uploaded: ${l.name}`)}catch(h){o++,console.error(` Failed to upload ${l.name}:`,h)}console.log(`
 Migration complete!`),console.log(` Success: ${i} products`),o>0&&console.log(` Failed: ${o} products`),alert(`Migration complete!

 Uploaded: ${i} products
${o>0?` Failed: ${o} products`:""}`)}catch(r){console.error(" Migration failed:",r),alert(`Migration failed: ${r.message}`)}}typeof window<"u"&&(window.migrateToFirebase=Ix);function KS(){const[r,e]=qa.useState("idle"),[t,i]=qa.useState(""),[o,l]=qa.useState(null),h=async()=>{e("checking"),i("Checking Firebase connection...");try{const v=await Es.getAll();l(v.length),e("success"),i(` Connected! Found ${v.length} products in Firebase.`)}catch(v){e("error"),v.message.includes("apiKey")?i(" Firebase not configured. Please update src/firebase/config.js with your Firebase credentials."):i(` Connection failed: ${v.message}`)}},m=async()=>{e("migrating"),i("Migrating products to Firebase...");try{await Ix(),await h()}catch(v){e("error"),i(` Migration failed: ${v.message}`)}},p=()=>{const v=localStorage.getItem("luxemarket_products");return v?JSON.parse(v).length:0};return c.jsx("div",{className:"min-h-screen bg-gray-100 py-8",children:c.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[c.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[c.jsx("h1",{className:"text-3xl font-bold mb-2",children:" Firebase Setup"}),c.jsx("p",{className:"text-gray-600",children:"Set up Firebase to share products with all users"})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[c.jsx("h2",{className:"text-xl font-bold mb-4",children:"Setup Steps"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center flex-shrink-0 font-bold",children:"1"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold",children:"Create Firebase Project"}),c.jsxs("p",{className:"text-sm text-gray-600",children:["Go to ",c.jsx("a",{href:"https://console.firebase.google.com/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:"Firebase Console"})," and create a new project"]})]})]}),c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center flex-shrink-0 font-bold",children:"2"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold",children:"Enable Firestore Database"}),c.jsx("p",{className:"text-sm text-gray-600",children:'In Firebase Console, enable Firestore Database in "test mode"'})]})]}),c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center flex-shrink-0 font-bold",children:"3"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold",children:"Configure Your App"}),c.jsxs("p",{className:"text-sm text-gray-600",children:["Update ",c.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded",children:"src/firebase/config.js"})," with your Firebase credentials"]})]})]}),c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center flex-shrink-0 font-bold",children:"4"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold",children:"Test Connection & Migrate"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Use the buttons below to test and migrate your data"})]})]})]})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[c.jsx("h2",{className:"text-xl font-bold mb-4",children:"Status"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-center p-4 bg-gray-50 rounded",children:[c.jsx("span",{className:"font-semibold",children:"Local Products:"}),c.jsx("span",{className:"text-2xl font-bold text-blue-600",children:p()})]}),o!==null&&c.jsxs("div",{className:"flex justify-between items-center p-4 bg-gray-50 rounded",children:[c.jsx("span",{className:"font-semibold",children:"Firebase Products:"}),c.jsx("span",{className:"text-2xl font-bold text-green-600",children:o})]}),t&&c.jsx("div",{className:`p-4 rounded ${r==="success"?"bg-green-50 text-green-800":r==="error"?"bg-red-50 text-red-800":"bg-blue-50 text-blue-800"}`,children:t})]})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[c.jsx("h2",{className:"text-xl font-bold mb-4",children:"Actions"}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("button",{onClick:h,disabled:r==="checking"||r==="migrating",className:"w-full bg-blue-500 text-white py-3 px-4 rounded-lg hover:bg-blue-600 disabled:opacity-50 font-semibold",children:r==="checking"?" Checking...":" Test Firebase Connection"}),c.jsx("button",{onClick:m,disabled:r==="checking"||r==="migrating"||p()===0,className:"w-full bg-green-500 text-white py-3 px-4 rounded-lg hover:bg-green-600 disabled:opacity-50 font-semibold",children:r==="migrating"?" Migrating...":" Migrate Products to Firebase"}),c.jsx("a",{href:"https://console.firebase.google.com/",target:"_blank",rel:"noopener noreferrer",className:"block w-full bg-orange-500 text-white py-3 px-4 rounded-lg hover:bg-orange-600 text-center font-semibold",children:" Open Firebase Console"})]})]}),c.jsx("div",{className:"mt-6 text-center",children:c.jsxs("p",{className:"text-gray-600",children:["Need help? Check the ",c.jsx("a",{href:"/FIREBASE_SETUP.md",className:"text-blue-500 hover:underline",children:"complete setup guide"})]})})]})})}function QS({isOpen:r,onClose:e,onCartUpdate:t,onCheckout:i}){const[o,l]=J.useState([]),[h,m]=J.useState(!0);J.useEffect(()=>{r&&p()},[r]);const p=()=>{try{if(window.CartManager&&window.ProductManager){const O=window.CartManager.getCart().map(F=>{const $=window.ProductManager.getById(F.id);return{...F,product:$}}).filter(F=>F.product);l(O)}}catch(L){console.error("Error loading cart items:",L),we("Error loading cart","error")}finally{m(!1)}},v=(L,O)=>{try{if(O<=0){w(L);return}window.CartManager.update(L,O),p(),t(),we("Cart updated","success")}catch(F){console.error("Error updating quantity:",F),we(F.message,"error")}},w=L=>{try{window.CartManager.remove(L),p(),t(),we("Item removed from cart","success")}catch(O){console.error("Error removing item:",O),we("Error removing item","error")}},I=()=>{try{window.CartManager.clear(),p(),t(),we("Cart cleared","success")}catch(L){console.error("Error clearing cart:",L),we("Error clearing cart","error")}},N=()=>o.reduce((L,O)=>L+O.product.price*O.quantity,0),M=()=>o.reduce((L,O)=>L+O.quantity,0);return J.useEffect(()=>{const L=O=>{O.key==="Escape"&&r&&e()};return r&&(document.addEventListener("keydown",L),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",L),document.body.style.overflow="unset"}},[r,e]),r?c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4 cart-modal",children:c.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-hidden shadow-2xl",children:[c.jsxs("div",{className:"bg-white border-b border-gray-200 p-6 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Shopping Cart"}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[M()," ",M()===1?"item":"items"," in your cart"]})]}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 text-3xl leading-none w-8 h-8 flex items-center justify-center hover:bg-gray-100 rounded-full transition-colors",title:"Close (Esc)",children:""})]}),c.jsx("div",{className:"flex-1 overflow-y-auto max-h-[calc(90vh-200px)]",children:h?c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"text-gray-500",children:"Loading cart..."})}):o.length===0?c.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[c.jsx("div",{className:"text-6xl text-gray-300 mb-4",children:""}),c.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Your cart is empty"}),c.jsx("p",{className:"text-gray-500 mb-6",children:"Add some products to get started!"}),c.jsx("button",{onClick:e,className:"btn btn-primary px-6 py-3",children:"Continue Shopping"})]}):c.jsxs("div",{className:"p-6",children:[c.jsx("div",{className:"space-y-4 mb-6",children:o.map(L=>c.jsxs("div",{className:"flex items-center gap-4 p-4 border border-gray-200 rounded-lg hover:shadow-sm transition-shadow cart-item",children:[c.jsx("div",{className:"w-20 h-20 flex-shrink-0 bg-gray-100 rounded-lg overflow-hidden",children:c.jsx("img",{src:L.product.image,alt:L.product.name,className:"w-full h-full object-cover",onError:O=>{O.target.src="https://via.placeholder.com/80x80?text=No+Image"}})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:L.product.name}),c.jsx("p",{className:"text-sm text-gray-500",children:L.product.category}),c.jsxs("p",{className:"text-lg font-bold text-blue-600",children:["$",L.product.price.toFixed(2)]}),L.quantity>L.product.stock&&c.jsxs("p",{className:"text-xs text-red-600 mt-1",children:[" Only ",L.product.stock," available"]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>v(L.id,L.quantity-1),className:"w-8 h-8 rounded-full border border-gray-300 flex items-center justify-center hover:bg-gray-50 transition-colors",disabled:L.quantity<=1,children:""}),c.jsx("span",{className:"w-8 text-center font-medium",children:L.quantity}),c.jsx("button",{onClick:()=>v(L.id,L.quantity+1),className:"w-8 h-8 rounded-full border border-gray-300 flex items-center justify-center hover:bg-gray-50 transition-colors",disabled:L.quantity>=L.product.stock,children:"+"})]}),c.jsxs("div",{className:"text-right min-w-0",children:[c.jsxs("p",{className:"font-bold text-gray-900",children:["$",(L.product.price*L.quantity).toFixed(2)]}),c.jsx("button",{onClick:()=>w(L.id),className:"text-xs text-red-600 hover:text-red-800 transition-colors mt-1",children:"Remove"})]})]},L.id))}),c.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("span",{className:"text-lg font-semibold text-gray-900",children:"Total:"}),c.jsxs("span",{className:"text-2xl font-bold text-blue-600",children:["$",N().toFixed(2)]})]}),c.jsxs("div",{className:"flex gap-4",children:[c.jsx("button",{onClick:I,className:"flex-1 btn btn-secondary py-3",children:"Clear Cart"}),c.jsx("button",{onClick:()=>{i()},className:"flex-2 btn btn-primary py-3 px-8",disabled:o.length===0,children:"Proceed to Checkout"})]})]})]})})]})}):null}function YS({isOpen:r,onClose:e,onOrderComplete:t}){const[i,o]=J.useState([]),[l,h]=J.useState(!0),[m,p]=J.useState(1),[v,w]=J.useState({shipping:{firstName:"",lastName:"",email:"",phone:"",address:"",city:"",state:"",zipCode:"",country:"United States"},payment:{cardNumber:"",expiryDate:"",cvv:"",cardName:"",billingAddress:"",billingCity:"",billingState:"",billingZip:"",sameAsShipping:!0}});J.useEffect(()=>{r&&I()},[r]);const I=()=>{try{if(window.CartManager&&window.ProductManager){const ce=window.CartManager.getCart().map(C=>{const T=window.ProductManager.getById(C.id);return{...C,product:T}}).filter(C=>C.product);o(ce)}}catch(G){console.error("Error loading cart items:",G),we("Error loading cart","error")}finally{h(!1)}},N=()=>i.reduce((G,ce)=>G+ce.product.price*ce.quantity,0),M=()=>N()*.08,L=()=>N()>50?0:9.99,O=()=>N()+M()+L(),F=(G,ce,C)=>{w(T=>({...T,[G]:{...T[G],[ce]:C}}))},$=G=>{switch(G){case 1:return i.length>0;case 2:const{shipping:ce}=v;return ce.firstName&&ce.lastName&&ce.email&&ce.address&&ce.city&&ce.state&&ce.zipCode;case 3:const{payment:C}=v;return C.cardNumber&&C.expiryDate&&C.cvv&&C.cardName;default:return!0}},z=()=>{$(m)?p(m+1):we("Please fill in all required fields","error")},Y=()=>{p(m-1)},ne=async()=>{try{h(!0),await new Promise(ce=>setTimeout(ce,2e3)),window.CartManager.clear();const G="LM"+Date.now().toString().slice(-6);p(4),t(G),we("Order placed successfully!","success")}catch(G){console.error("Error placing order:",G),we("Error placing order. Please try again.","error")}finally{h(!1)}};return J.useEffect(()=>{const G=ce=>{ce.key==="Escape"&&r&&e()};return r&&(document.addEventListener("keydown",G),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",G),document.body.style.overflow="unset"}},[r,e]),r?c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-lg max-w-6xl w-full max-h-[95vh] overflow-hidden shadow-2xl",children:[c.jsxs("div",{className:"bg-white border-b border-gray-200 p-6 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Checkout"}),c.jsx("div",{className:"flex items-center mt-2 space-x-4",children:[1,2,3,4].map(G=>c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${m>=G?"bg-blue-600 text-white":"bg-gray-200 text-gray-600"}`,children:G}),c.jsxs("span",{className:`ml-2 text-sm ${m>=G?"text-blue-600 font-medium":"text-gray-500"}`,children:[G===1&&"Review",G===2&&"Shipping",G===3&&"Payment",G===4&&"Complete"]}),G<4&&c.jsx("div",{className:"w-8 h-0.5 bg-gray-200 mx-2"})]},G))})]}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 text-3xl leading-none w-8 h-8 flex items-center justify-center hover:bg-gray-100 rounded-full transition-colors",title:"Close (Esc)",children:""})]}),c.jsx("div",{className:"flex-1 overflow-y-auto max-h-[calc(95vh-200px)]",children:l&&m!==4?c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"text-gray-500",children:"Loading..."})}):c.jsx("div",{className:"p-6",children:c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"lg:col-span-2",children:[m===1&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold mb-4",children:"Review Your Order"}),c.jsx("div",{className:"space-y-4",children:i.map(G=>c.jsxs("div",{className:"flex items-center gap-4 p-4 border border-gray-200 rounded-lg",children:[c.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-lg overflow-hidden",children:c.jsx("img",{src:G.product.image,alt:G.product.name,className:"w-full h-full object-cover"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h4",{className:"font-semibold",children:G.product.name}),c.jsx("p",{className:"text-sm text-gray-500",children:G.product.category}),c.jsxs("p",{className:"text-sm",children:["Qty: ",G.quantity]})]}),c.jsx("div",{className:"text-right",children:c.jsxs("p",{className:"font-bold",children:["$",(G.product.price*G.quantity).toFixed(2)]})})]},G.id))})]}),m===2&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold mb-4",children:"Shipping Information"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"}),c.jsx("input",{type:"text",value:v.shipping.firstName,onChange:G=>F("shipping","firstName",G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"}),c.jsx("input",{type:"text",value:v.shipping.lastName,onChange:G=>F("shipping","lastName",G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),c.jsx("input",{type:"email",value:v.shipping.email,onChange:G=>F("shipping","email",G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),c.jsx("input",{type:"tel",value:v.shipping.phone,onChange:G=>F("shipping","phone",G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address *"}),c.jsx("input",{type:"text",value:v.shipping.address,onChange:G=>F("shipping","address",G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"}),c.jsx("input",{type:"text",value:v.shipping.city,onChange:G=>F("shipping","city",G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State *"}),c.jsx("input",{type:"text",value:v.shipping.state,onChange:G=>F("shipping","state",G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ZIP Code *"}),c.jsx("input",{type:"text",value:v.shipping.zipCode,onChange:G=>F("shipping","zipCode",G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country"}),c.jsxs("select",{value:v.shipping.country,onChange:G=>F("shipping","country",G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[c.jsx("option",{value:"United States",children:"United States"}),c.jsx("option",{value:"Canada",children:"Canada"}),c.jsx("option",{value:"United Kingdom",children:"United Kingdom"}),c.jsx("option",{value:"Australia",children:"Australia"})]})]})]})]}),m===3&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold mb-4",children:"Payment Information"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Card Number *"}),c.jsx("input",{type:"text",value:v.payment.cardNumber,onChange:G=>F("payment","cardNumber",G.target.value),placeholder:"1234 5678 9012 3456",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expiry Date *"}),c.jsx("input",{type:"text",value:v.payment.expiryDate,onChange:G=>F("payment","expiryDate",G.target.value),placeholder:"MM/YY",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CVV *"}),c.jsx("input",{type:"text",value:v.payment.cvv,onChange:G=>F("payment","cvv",G.target.value),placeholder:"123",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cardholder Name *"}),c.jsx("input",{type:"text",value:v.payment.cardName,onChange:G=>F("payment","cardName",G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:"sameAsShipping",checked:v.payment.sameAsShipping,onChange:G=>F("payment","sameAsShipping",G.target.checked),className:"mr-2"}),c.jsx("label",{htmlFor:"sameAsShipping",className:"text-sm text-gray-700",children:"Billing address same as shipping"})]})]})]}),m===4&&c.jsxs("div",{className:"text-center py-8",children:[c.jsx("div",{className:"text-6xl text-green-500 mb-4",children:""}),c.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Order Placed Successfully!"}),c.jsx("p",{className:"text-gray-600 mb-4",children:"Thank you for your purchase. You will receive a confirmation email shortly."}),c.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 inline-block",children:[c.jsx("p",{className:"text-sm text-gray-500",children:"Order Number"}),c.jsxs("p",{className:"text-lg font-bold text-gray-900",children:["LM",Date.now().toString().slice(-6)]})]})]})]}),c.jsx("div",{className:"lg:col-span-1",children:c.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 sticky top-0",children:[c.jsx("h3",{className:"text-lg font-bold mb-4",children:"Order Summary"}),c.jsxs("div",{className:"space-y-2 mb-4",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Subtotal:"}),c.jsxs("span",{children:["$",N().toFixed(2)]})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Tax:"}),c.jsxs("span",{children:["$",M().toFixed(2)]})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Shipping:"}),c.jsx("span",{children:L()===0?"FREE":`$${L().toFixed(2)}`})]}),c.jsx("div",{className:"border-t border-gray-200 pt-2",children:c.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[c.jsx("span",{children:"Total:"}),c.jsxs("span",{children:["$",O().toFixed(2)]})]})})]}),N()<50&&m<4&&c.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:c.jsxs("p",{className:"text-sm text-blue-800",children:["Add $",(50-N()).toFixed(2)," more for free shipping!"]})})]})})]})})}),m<4&&c.jsxs("div",{className:"bg-gray-50 border-t border-gray-200 p-6 flex justify-between",children:[c.jsx("div",{children:m>1&&c.jsx("button",{onClick:Y,className:"btn btn-secondary px-6 py-3",children:"Back"})}),c.jsxs("div",{className:"flex gap-4",children:[c.jsx("button",{onClick:e,className:"btn btn-ghost px-6 py-3",children:"Cancel"}),m<3?c.jsx("button",{onClick:z,className:"btn btn-primary px-6 py-3",disabled:!$(m),children:"Continue"}):c.jsx("button",{onClick:ne,className:"btn btn-primary px-8 py-3",disabled:l||!$(m),children:l?"Processing...":"Place Order"})]})]}),m===4&&c.jsx("div",{className:"bg-gray-50 border-t border-gray-200 p-6 flex justify-center",children:c.jsx("button",{onClick:e,className:"btn btn-primary px-8 py-3",children:"Continue Shopping"})})]})}):null}function JS({isOpen:r,onClose:e}){const[t,i]=J.useState([]),[o,l]=J.useState(!0);J.useEffect(()=>{r&&h()},[r]);const h=()=>{try{const v=localStorage.getItem("luxemarket_watchlist"),w=v?JSON.parse(v):[];if(window.ProductManager){const I=w.map(N=>window.ProductManager.getById(N)).filter(Boolean);i(I)}}catch(v){console.error("Error loading watchlist:",v),we("Error loading watchlist","error")}finally{l(!1)}},m=v=>{try{const w=localStorage.getItem("luxemarket_watchlist"),N=(w?JSON.parse(w):[]).filter(M=>M!==v);localStorage.setItem("luxemarket_watchlist",JSON.stringify(N)),h(),we("Removed from watchlist","success")}catch(w){console.error("Error removing from watchlist:",w),we("Error removing from watchlist","error")}},p=v=>{try{window.CartManager&&(window.CartManager.add(v.id,1),window.dispatchEvent(new Event("cartUpdated")),we(`Added ${v.name} to cart!`,"success"))}catch(w){console.error("Error adding to cart:",w),we(w.message,"error")}};return J.useEffect(()=>{const v=w=>{w.key==="Escape"&&r&&e()};return r&&(document.addEventListener("keydown",v),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",v),document.body.style.overflow="unset"}},[r,e]),r?c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-hidden shadow-2xl",children:[c.jsxs("div",{className:"bg-white border-b border-gray-200 p-6 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"My Watchlist"}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[t.length," ",t.length===1?"item":"items"," saved"]})]}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 text-3xl leading-none w-8 h-8 flex items-center justify-center hover:bg-gray-100 rounded-full transition-colors",title:"Close (Esc)",children:""})]}),c.jsx("div",{className:"flex-1 overflow-y-auto max-h-[calc(90vh-200px)]",children:o?c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"text-gray-500",children:"Loading watchlist..."})}):t.length===0?c.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[c.jsx("div",{className:"text-6xl text-gray-300 mb-4",children:""}),c.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Your watchlist is empty"}),c.jsx("p",{className:"text-gray-500 mb-6",children:"Save items you're interested in to view them later!"}),c.jsx("button",{onClick:e,className:"btn btn-primary px-6 py-3",children:"Continue Shopping"})]}):c.jsx("div",{className:"p-6",children:c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(v=>c.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden hover:shadow-lg transition-shadow",children:[c.jsx("div",{className:"aspect-square bg-gray-100",children:c.jsx("img",{src:v.image,alt:v.name,className:"w-full h-full object-cover"})}),c.jsxs("div",{className:"p-4",children:[c.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:v.name}),c.jsx("p",{className:"text-sm text-gray-500 mb-2",children:v.category}),c.jsxs("p",{className:"text-lg font-bold text-blue-600 mb-3",children:["$",v.price.toFixed(2)]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>p(v),disabled:v.stock===0,className:`flex-1 text-sm py-2 px-3 rounded transition-colors ${v.stock===0?"bg-gray-300 text-gray-500 cursor-not-allowed":"btn btn-primary"}`,children:v.stock===0?"Out of Stock":"Add to Cart"}),c.jsx("button",{onClick:()=>m(v.id),className:"text-red-600 hover:text-red-800 p-2 hover:bg-red-50 rounded transition-colors",title:"Remove from watchlist",children:c.jsx("div",{className:"icon-trash text-sm"})})]})]})]},v.id))})})})]})}):null}function XS({isOpen:r,onClose:e,currentUser:t}){const[i,o]=J.useState([]),[l,h]=J.useState({totalOrders:0,totalSpent:0,savedItems:0,recentActivity:[]});J.useEffect(()=>{r&&m()},[r]);const m=()=>{try{const p=[{id:"LM123456",date:"2024-01-15",total:299.99,status:"Delivered",items:3},{id:"LM123457",date:"2024-01-10",total:149.5,status:"Shipped",items:2},{id:"LM123458",date:"2024-01-05",total:89.99,status:"Processing",items:1}];o(p);const v=p.reduce((I,N)=>I+N.total,0),w=JSON.parse(localStorage.getItem("luxemarket_watchlist")||"[]");h({totalOrders:p.length,totalSpent:v,savedItems:w.length,recentActivity:["Added Premium Headphones to cart","Saved Luxury Watch to watchlist","Completed order LM123456","Updated shipping address"]})}catch(p){console.error("Error loading account data:",p),we("Error loading account data","error")}};return J.useEffect(()=>{const p=v=>{v.key==="Escape"&&r&&e()};return r&&(document.addEventListener("keydown",p),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",p),document.body.style.overflow="unset"}},[r,e]),r?c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-lg max-w-6xl w-full max-h-[95vh] overflow-hidden shadow-2xl",children:[c.jsxs("div",{className:"bg-white border-b border-gray-200 p-6 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Account Summary"}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Welcome back, ",t?.name||"User","!"]})]}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 text-3xl leading-none w-8 h-8 flex items-center justify-center hover:bg-gray-100 rounded-full transition-colors",title:"Close (Esc)",children:""})]}),c.jsx("div",{className:"flex-1 overflow-y-auto max-h-[calc(95vh-200px)]",children:c.jsx("div",{className:"p-6",children:c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsx("div",{className:"lg:col-span-3",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[c.jsx("div",{className:"bg-blue-50 rounded-lg p-6",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"icon-shopping-bag text-2xl text-blue-600 mr-3"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Total Orders"}),c.jsx("p",{className:"text-2xl font-bold text-blue-900",children:l.totalOrders})]})]})}),c.jsx("div",{className:"bg-green-50 rounded-lg p-6",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"icon-dollar-sign text-2xl text-green-600 mr-3"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Total Spent"}),c.jsxs("p",{className:"text-2xl font-bold text-green-900",children:["$",l.totalSpent.toFixed(2)]})]})]})}),c.jsx("div",{className:"bg-purple-50 rounded-lg p-6",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"icon-heart text-2xl text-purple-600 mr-3"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-purple-600 font-medium",children:"Saved Items"}),c.jsx("p",{className:"text-2xl font-bold text-purple-900",children:l.savedItems})]})]})})]})}),c.jsxs("div",{className:"lg:col-span-2",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Recent Orders"}),c.jsx("div",{className:"space-y-4",children:i.map(p=>c.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-sm transition-shadow",children:[c.jsxs("div",{className:"flex justify-between items-start mb-2",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"font-semibold text-gray-900",children:["Order #",p.id]}),c.jsx("p",{className:"text-sm text-gray-500",children:p.date})]}),c.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${p.status==="Delivered"?"bg-green-100 text-green-800":p.status==="Shipped"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:p.status})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("p",{className:"text-sm text-gray-600",children:[p.items," items"]}),c.jsxs("p",{className:"font-bold text-gray-900",children:["$",p.total.toFixed(2)]})]})]},p.id))})]}),c.jsxs("div",{className:"lg:col-span-1",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Recent Activity"}),c.jsx("div",{className:"space-y-3",children:l.recentActivity.map((p,v)=>c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full mt-2 flex-shrink-0"}),c.jsx("p",{className:"text-sm text-gray-600",children:p})]},v))})]})]})})}),c.jsx("div",{className:"bg-gray-50 border-t border-gray-200 p-6 flex justify-center",children:c.jsx("button",{onClick:e,className:"btn btn-primary px-8 py-3",children:"Continue Shopping"})})]})}):null}class un extends J.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t)}render(){return this.state.hasError?c.jsxs("div",{style:{padding:"2rem",textAlign:"center",backgroundColor:"#fee2e2",border:"1px solid #fecaca",borderRadius:"8px",margin:"1rem"},children:[c.jsx("h2",{style:{color:"#dc2626",marginBottom:"1rem"},children:"Something went wrong"}),c.jsx("p",{style:{color:"#7f1d1d",marginBottom:"1rem"},children:this.state.error?.message||"An unexpected error occurred"}),c.jsx("button",{onClick:()=>this.setState({hasError:!1,error:null}),style:{padding:"0.5rem 1rem",backgroundColor:"#dc2626",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",marginRight:"0.5rem"},children:"Try Again"}),c.jsx("button",{onClick:()=>window.location.reload(),style:{padding:"0.5rem 1rem",backgroundColor:"#6b7280",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Reload Page"})]}):this.props.children}}console.log(" FullApp component loading...");function ZS(){const[r,e]=J.useState("home"),[t,i]=J.useState(0),[o,l]=J.useState(!1),[h,m]=J.useState(null),[p,v]=J.useState({isOpen:!1,isRegister:!1}),[w,I]=J.useState(null),[N,M]=J.useState(!1),[L,O]=J.useState(!1),[F,$]=J.useState(!1),[z,Y]=J.useState(!1);J.useEffect(()=>{const B=()=>{try{const X=Ja.getItemCount();i(X)}catch(X){console.error("Cart count error:",X)}};return B(),window.addEventListener("cartUpdated",B),()=>{window.removeEventListener("cartUpdated",B)}},[]),J.useEffect(()=>{const B=()=>{const X=window.location.hash.slice(1);e(X==="admin"?"admin":X==="firebase"?"firebase":"home")};return B(),window.addEventListener("hashchange",B),()=>{window.removeEventListener("hashchange",B)}},[]),J.useEffect(()=>{const B=async X=>{try{if(!window.ProductManager){console.error("ProductManager not initialized");return}let R;window.ProductManager.getByIdAsync?R=await window.ProductManager.getByIdAsync(X.detail.productId):R=window.ProductManager.getById(X.detail.productId),R&&I(R)}catch(R){console.error("Product open error:",R)}};return window.addEventListener("openProduct",B),()=>{window.removeEventListener("openProduct",B)}},[]),J.useEffect(()=>{const B=()=>{O(!0)};return window.addEventListener("openCheckout",B),()=>{window.removeEventListener("openCheckout",B)}},[]);const ne=(B=!1)=>{v({isOpen:!0,isRegister:B})},G=()=>{v({isOpen:!1,isRegister:!1})},ce=B=>{m(B),G(),we(`Welcome back, ${B.name}!`,"success")},C=B=>{m(B),G(),we(`Welcome to LuxeMarket, ${B.name}!`,"success")},T=()=>{m(null),we("You have been logged out","info")},A=()=>{const B=Ja.getItemCount();i(B)},D=()=>{M(!0)},P=()=>{M(!1)},U=()=>{M(!1),O(!0)},E=()=>{O(!1)},ie=B=>{A(),we(`Order ${B} completed successfully!`,"success")},Ce=()=>{$(!0)},je=()=>{$(!1)},Fe=()=>{Y(!0)},oe=()=>{Y(!1)};return r==="admin"?c.jsx(un,{children:c.jsx(aw,{})}):r==="firebase"?c.jsx(un,{children:c.jsx(KS,{})}):c.jsx(un,{children:c.jsxs("div",{className:"min-h-screen bg-gray-50",children:[c.jsx(un,{children:c.jsx(z_,{cartCount:t,isMenuOpen:o,setIsMenuOpen:l,currentUser:h,onOpenAuth:ne,onLogout:T,onOpenCart:D,onOpenWatchlist:Ce,onOpenAccountSummary:Fe})}),c.jsxs("main",{children:[c.jsx(un,{children:c.jsx($_,{})}),c.jsx(un,{children:c.jsx(W_,{})})]}),c.jsx(un,{children:c.jsx(G_,{})}),p.isOpen&&c.jsx(un,{children:c.jsx(K_,{isOpen:p.isOpen,isRegister:p.isRegister,onClose:G,onLogin:ce,onRegister:C})}),w&&c.jsx(un,{children:c.jsx(Y_,{product:w,onClose:()=>I(null),currentUser:h,onOpenAuth:ne,onCartUpdate:A})}),N&&c.jsx(un,{children:c.jsx(QS,{isOpen:N,onClose:P,onCartUpdate:A,onCheckout:U})}),L&&c.jsx(un,{children:c.jsx(YS,{isOpen:L,onClose:E,onOrderComplete:ie})}),F&&c.jsx(un,{children:c.jsx(JS,{isOpen:F,onClose:je})}),z&&c.jsx(un,{children:c.jsx(XS,{isOpen:z,onClose:oe,currentUser:h})})]})})}console.log(" LuxeMarket App loading...");function eC(){return c.jsx(J.Suspense,{fallback:c.jsx("div",{style:{minHeight:"100vh",backgroundColor:"#f3f4f6",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"Inter, sans-serif"},children:c.jsxs("div",{style:{textAlign:"center"},children:[c.jsx("h1",{style:{fontSize:"3rem",color:"#111827",marginBottom:"1rem",fontWeight:"bold"},children:"LuxeMarket"}),c.jsx("p",{style:{color:"#6b7280",fontSize:"1.2rem"},children:"Loading your premium shopping experience..."}),c.jsx("div",{style:{marginTop:"2rem",width:"200px",height:"4px",backgroundColor:"#e5e7eb",borderRadius:"2px",overflow:"hidden",margin:"2rem auto"},children:c.jsx("div",{style:{width:"100%",height:"100%",backgroundColor:"#2563eb",borderRadius:"2px",animation:"loading 2s ease-in-out infinite"}})}),c.jsx("style",{children:`
            @keyframes loading {
              0% { transform: translateX(-100%); }
              50% { transform: translateX(0%); }
              100% { transform: translateX(100%); }
            }
          `})]})}),children:c.jsx(ZS,{})})}const Lt=(()=>{let r=[],e=!1;const t=async()=>{if(!e)try{console.log(" Initializing Firebase ProductManager..."),r=await Es.getAll(),e=!0,console.log(` Loaded ${r.length} products from Firebase`),r.length>0?console.log(" Sample product:",r[0]):console.warn(" No products found in Firebase!")}catch(z){console.error(" Failed to initialize Firebase ProductManager:",z),r=[]}};return{init:t,getAll:async()=>(e||await t(),r),getById:async z=>(e||await t(),r.find(Y=>Y.id===z)),getByCategory:async z=>(e||await t(),r.filter(Y=>Y.category===z)),getFeatured:async()=>(e||await t(),r.filter(z=>z.featured===!0)),getDailyDeals:async()=>(e||await t(),r.filter(z=>z.dailyDeal===!0)),search:async z=>{e||await t();const Y=z.toLowerCase();return r.filter(ne=>ne.name.toLowerCase().includes(Y)||ne.description?.toLowerCase().includes(Y)||ne.category.toLowerCase().includes(Y))},add:async z=>{try{const Y=await Es.create(z);return r.push(Y),console.log(" Product added to Firebase:",Y.name),Y}catch(Y){throw console.error(" Failed to add product:",Y),Y}},update:async(z,Y)=>{try{const ne=await Es.update(z,Y),G=r.findIndex(ce=>ce.id===z);return G!==-1&&(r[G]=ne),console.log(" Product updated in Firebase:",z),ne}catch(ne){throw console.error(" Failed to update product:",ne),ne}},remove:async z=>{try{return await Es.delete(z),r=r.filter(Y=>Y.id!==z),console.log(" Product deleted from Firebase:",z),!0}catch(Y){throw console.error(" Failed to delete product:",Y),Y}},refresh:async()=>{try{return r=await Es.getAll(),console.log(" Products refreshed from Firebase"),r}catch(z){throw console.error(" Failed to refresh products:",z),z}},getAllSync:()=>r,getByIdSync:z=>r.find(Y=>Y.id===z),getByCategorySync:z=>r.filter(Y=>Y.category===z),getFeaturedSync:()=>r.filter(z=>z.featured===!0),getDailyDealsSync:()=>r.filter(z=>z.dailyDeal===!0)}})();Lt.init().catch(console.error);typeof window<"u"&&(window.FirebaseProductManager=Lt);const tC={STORAGE_KEY:"luxemarket_watchlist",getWatchlist(){try{const r=localStorage.getItem(this.STORAGE_KEY);return r?JSON.parse(r):[]}catch(r){return console.error("Error loading watchlist:",r),[]}},isInWatchlist(r){return this.getWatchlist().includes(r)},addToWatchlist(r){try{const e=this.getWatchlist();return e.includes(r)?!1:(e.push(r),localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e)),!0)}catch(e){return console.error("Error adding to watchlist:",e),!1}},removeFromWatchlist(r){try{const t=this.getWatchlist().filter(i=>i!==r);return localStorage.setItem(this.STORAGE_KEY,JSON.stringify(t)),!0}catch(e){return console.error("Error removing from watchlist:",e),!1}},toggleWatchlist(r){return this.isInWatchlist(r)?(this.removeFromWatchlist(r),!1):(this.addToWatchlist(r),!0)},getCount(){return this.getWatchlist().length}};window.WatchlistManager=tC;const nC="luxemarket_data_reset_v5";typeof Storage<"u"&&(localStorage.getItem(nC)||(console.log(" LuxeMarket: Running AGGRESSIVE one-time data cleanup (v5)..."),Object.keys(localStorage).forEach(e=>{e.startsWith("luxemarket")&&localStorage.removeItem(e)}),sessionStorage.clear(),typeof indexedDB<"u"&&(indexedDB.deleteDatabase("LuxeMarketDB"),console.log(" IndexedDB: LuxeMarketDB scheduled for deletion")),"caches"in window&&(caches.keys().then(e=>{for(let t of e)caches.delete(t)}),console.log(" Cache API: All caches scheduled for deletion")),localStorage.setItem(MIGRATION_KEY,"done"),console.log(" Data cleared. Forcing refresh for a clean session..."),window.location.reload()));typeof Storage<"u"&&localStorage.removeItem("luxemarket_products");"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(r=>{for(let e of r)e.unregister()});window.ProductManager={getAll:()=>Lt.getAllSync(),getById:r=>Lt.getByIdSync(r),getByCategory:r=>Lt.getByCategorySync(r),getFeatured:()=>Lt.getFeaturedSync(),getDailyDeals:()=>{try{const r=localStorage.getItem("luxemarket_daily_deals");let e=[];r?e=JSON.parse(r):e=Lt.getDailyDealsSync().map(i=>({productId:i.id,discountPercent:i.discountPercent||20})),Array.isArray(e)||(e=[]);const t=new Map;return e.forEach(i=>{i&&i.productId&&t.set(i.productId.toString(),i)}),Array.from(t.values())}catch(r){return console.error(" Error parsing daily deals:",r),[]}},getAllWithDeals:()=>{const r=Lt.getAllSync(),e=window.ProductManager.getDailyDeals();return r.map(t=>{const i=e.find(o=>o.productId==t.id);if(i){const o=t.price*(i.discountPercent/100);return{...t,originalPrice:t.price,price:t.price-o,discountPercent:i.discountPercent,isDailyDeal:!0}}return t})},addToDailyDeals:(r,e)=>{const t=window.ProductManager.getDailyDeals(),i=t.findIndex(l=>l.productId==r),o={productId:r,discountPercent:Math.max(0,Math.min(90,e)),addedDate:new Date().toISOString()};return i>=0?t[i]=o:t.push(o),localStorage.setItem("luxemarket_daily_deals",JSON.stringify(t)),!0},removeFromDailyDeals:r=>{const t=window.ProductManager.getDailyDeals().filter(i=>i.productId!=r);return localStorage.setItem("luxemarket_daily_deals",JSON.stringify(t)),!0},getHomePageOrder:()=>{try{const r=localStorage.getItem("luxemarket_homepage_order");return r?JSON.parse(r):[]}catch(r){return console.error(" Error parsing homepage order:",r),[]}},getHomePageProducts:(r=12,e=null)=>{const t=window.ProductManager.getHomePageOrder(),i=e||window.ProductManager.getAllWithDeals();if(t.length>0){const o=[];if(t.forEach(l=>{const h=i.find(m=>m.id==l);h&&o.push(h)}),o.length>0)return o.slice(0,r)}return i.slice(0,r)},reorderHomePageProducts:(r,e)=>{const t=window.ProductManager.getHomePageOrder(),i=Lt.getAllSync();let o=t.length>0?[...t]:i.slice(0,12).map(h=>h.id);const[l]=o.splice(r,1);return o.splice(e,0,l),localStorage.setItem("luxemarket_homepage_order",JSON.stringify(o)),o},getAllAsync:()=>Lt.getAll(),getAllWithDealsAsync:async()=>{const r=await Lt.getAll(),e=window.ProductManager.getDailyDeals();return r.map(t=>{const i=e.find(o=>o.productId==t.id);if(i){const o=t.price*(i.discountPercent/100);return{...t,originalPrice:t.price,price:t.price-o,discountPercent:i.discountPercent,isDailyDeal:!0}}return t})},getByIdAsync:r=>Lt.getById(r),add:r=>Lt.add(r),update:(r,e)=>Lt.update(r,e),delete:r=>Lt.remove(r),refresh:()=>Lt.refresh()};console.log(" Firebase ProductManager initialized");U_.createRoot(document.getElementById("root")).render(c.jsx(qa.StrictMode,{children:c.jsx(eC,{})}));
