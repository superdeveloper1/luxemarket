(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function R_(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var dh={exports:{}},Fa={},hh={exports:{}},De={};var dg;function j_(){if(dg)return De;dg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.iterator;function N(R){return R===null||typeof R!="object"?null:(R=E&&R[E]||R["@@iterator"],typeof R=="function"?R:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,F={};function M(R,A,le){this.props=R,this.context=A,this.refs=F,this.updater=le||O}M.prototype.isReactComponent={},M.prototype.setState=function(R,A){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,A,"setState")},M.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function K(){}K.prototype=M.prototype;function q(R,A,le){this.props=R,this.context=A,this.refs=F,this.updater=le||O}var Y=q.prototype=new K;Y.constructor=q,L(Y,M.prototype),Y.isPureReactComponent=!0;var ne=Array.isArray,G=Object.prototype.hasOwnProperty,ae={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function I(R,A,le){var ue,he={},_e=null,ke=null;if(A!=null)for(ue in A.ref!==void 0&&(ke=A.ref),A.key!==void 0&&(_e=""+A.key),A)G.call(A,ue)&&!k.hasOwnProperty(ue)&&(he[ue]=A[ue]);var Be=arguments.length-2;if(Be===1)he.children=le;else if(1<Be){for(var Ge=Array(Be),zt=0;zt<Be;zt++)Ge[zt]=arguments[zt+2];he.children=Ge}if(R&&R.defaultProps)for(ue in Be=R.defaultProps,Be)he[ue]===void 0&&(he[ue]=Be[ue]);return{$$typeof:r,type:R,key:_e,ref:ke,props:he,_owner:ae.current}}function S(R,A){return{$$typeof:r,type:R.type,key:A,ref:R.ref,props:R.props,_owner:R._owner}}function D(R){return typeof R=="object"&&R!==null&&R.$$typeof===r}function P(R){var A={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(le){return A[le]})}var U=/\/+/g;function b(R,A){return typeof R=="object"&&R!==null&&R.key!=null?P(""+R.key):A.toString(36)}function ge(R,A,le,ue,he){var _e=typeof R;(_e==="undefined"||_e==="boolean")&&(R=null);var ke=!1;if(R===null)ke=!0;else switch(_e){case"string":case"number":ke=!0;break;case"object":switch(R.$$typeof){case r:case e:ke=!0}}if(ke)return ke=R,he=he(ke),R=ue===""?"."+b(ke,0):ue,ne(he)?(le="",R!=null&&(le=R.replace(U,"$&/")+"/"),ge(he,A,le,"",function(zt){return zt})):he!=null&&(D(he)&&(he=S(he,le+(!he.key||ke&&ke.key===he.key?"":(""+he.key).replace(U,"$&/")+"/")+R)),A.push(he)),1;if(ke=0,ue=ue===""?".":ue+":",ne(R))for(var Be=0;Be<R.length;Be++){_e=R[Be];var Ge=ue+b(_e,Be);ke+=ge(_e,A,le,Ge,he)}else if(Ge=N(R),typeof Ge=="function")for(R=Ge.call(R),Be=0;!(_e=R.next()).done;)_e=_e.value,Ge=ue+b(_e,Be++),ke+=ge(_e,A,le,Ge,he);else if(_e==="object")throw A=String(R),Error("Objects are not valid as a React child (found: "+(A==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":A)+"). If you meant to render a collection of children, use an array instead.");return ke}function Re(R,A,le){if(R==null)return R;var ue=[],he=0;return ge(R,ue,"","",function(_e){return A.call(le,_e,he++)}),ue}function je(R){if(R._status===-1){var A=R._result;A=A(),A.then(function(le){(R._status===0||R._status===-1)&&(R._status=1,R._result=le)},function(le){(R._status===0||R._status===-1)&&(R._status=2,R._result=le)}),R._status===-1&&(R._status=0,R._result=A)}if(R._status===1)return R._result.default;throw R._result}var Me={current:null},ie={transition:null},B={ReactCurrentDispatcher:Me,ReactCurrentBatchConfig:ie,ReactCurrentOwner:ae};function X(){throw Error("act(...) is not supported in production builds of React.")}return De.Children={map:Re,forEach:function(R,A,le){Re(R,function(){A.apply(this,arguments)},le)},count:function(R){var A=0;return Re(R,function(){A++}),A},toArray:function(R){return Re(R,function(A){return A})||[]},only:function(R){if(!D(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},De.Component=M,De.Fragment=t,De.Profiler=o,De.PureComponent=q,De.StrictMode=i,De.Suspense=m,De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B,De.act=X,De.cloneElement=function(R,A,le){if(R==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+R+".");var ue=L({},R.props),he=R.key,_e=R.ref,ke=R._owner;if(A!=null){if(A.ref!==void 0&&(_e=A.ref,ke=ae.current),A.key!==void 0&&(he=""+A.key),R.type&&R.type.defaultProps)var Be=R.type.defaultProps;for(Ge in A)G.call(A,Ge)&&!k.hasOwnProperty(Ge)&&(ue[Ge]=A[Ge]===void 0&&Be!==void 0?Be[Ge]:A[Ge])}var Ge=arguments.length-2;if(Ge===1)ue.children=le;else if(1<Ge){Be=Array(Ge);for(var zt=0;zt<Ge;zt++)Be[zt]=arguments[zt+2];ue.children=Be}return{$$typeof:r,type:R.type,key:he,ref:_e,props:ue,_owner:ke}},De.createContext=function(R){return R={$$typeof:h,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},R.Provider={$$typeof:l,_context:R},R.Consumer=R},De.createElement=I,De.createFactory=function(R){var A=I.bind(null,R);return A.type=R,A},De.createRef=function(){return{current:null}},De.forwardRef=function(R){return{$$typeof:p,render:R}},De.isValidElement=D,De.lazy=function(R){return{$$typeof:_,_payload:{_status:-1,_result:R},_init:je}},De.memo=function(R,A){return{$$typeof:v,type:R,compare:A===void 0?null:A}},De.startTransition=function(R){var A=ie.transition;ie.transition={};try{R()}finally{ie.transition=A}},De.unstable_act=X,De.useCallback=function(R,A){return Me.current.useCallback(R,A)},De.useContext=function(R){return Me.current.useContext(R)},De.useDebugValue=function(){},De.useDeferredValue=function(R){return Me.current.useDeferredValue(R)},De.useEffect=function(R,A){return Me.current.useEffect(R,A)},De.useId=function(){return Me.current.useId()},De.useImperativeHandle=function(R,A,le){return Me.current.useImperativeHandle(R,A,le)},De.useInsertionEffect=function(R,A){return Me.current.useInsertionEffect(R,A)},De.useLayoutEffect=function(R,A){return Me.current.useLayoutEffect(R,A)},De.useMemo=function(R,A){return Me.current.useMemo(R,A)},De.useReducer=function(R,A,le){return Me.current.useReducer(R,A,le)},De.useRef=function(R){return Me.current.useRef(R)},De.useState=function(R){return Me.current.useState(R)},De.useSyncExternalStore=function(R,A,le){return Me.current.useSyncExternalStore(R,A,le)},De.useTransition=function(){return Me.current.useTransition()},De.version="18.3.1",De}var hg;function nf(){return hg||(hg=1,hh.exports=j_()),hh.exports}var fg;function D_(){if(fg)return Fa;fg=1;var r=nf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(p,m,v){var _,E={},N=null,O=null;v!==void 0&&(N=""+v),m.key!==void 0&&(N=""+m.key),m.ref!==void 0&&(O=m.ref);for(_ in m)i.call(m,_)&&!l.hasOwnProperty(_)&&(E[_]=m[_]);if(p&&p.defaultProps)for(_ in m=p.defaultProps,m)E[_]===void 0&&(E[_]=m[_]);return{$$typeof:e,type:p,key:N,ref:O,props:E,_owner:o.current}}return Fa.Fragment=t,Fa.jsx=h,Fa.jsxs=h,Fa}var mg;function O_(){return mg||(mg=1,dh.exports=D_()),dh.exports}var u=O_(),Ha=nf();const J=R_(Ha);var Oc={},fh={exports:{}},Yt={},mh={exports:{}},ph={};var pg;function V_(){return pg||(pg=1,(function(r){function e(ie,B){var X=ie.length;ie.push(B);e:for(;0<X;){var R=X-1>>>1,A=ie[R];if(0<o(A,B))ie[R]=B,ie[X]=A,X=R;else break e}}function t(ie){return ie.length===0?null:ie[0]}function i(ie){if(ie.length===0)return null;var B=ie[0],X=ie.pop();if(X!==B){ie[0]=X;e:for(var R=0,A=ie.length,le=A>>>1;R<le;){var ue=2*(R+1)-1,he=ie[ue],_e=ue+1,ke=ie[_e];if(0>o(he,X))_e<A&&0>o(ke,he)?(ie[R]=ke,ie[_e]=X,R=_e):(ie[R]=he,ie[ue]=X,R=ue);else if(_e<A&&0>o(ke,X))ie[R]=ke,ie[_e]=X,R=_e;else break e}}return B}function o(ie,B){var X=ie.sortIndex-B.sortIndex;return X!==0?X:ie.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,p=h.now();r.unstable_now=function(){return h.now()-p}}var m=[],v=[],_=1,E=null,N=3,O=!1,L=!1,F=!1,M=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Y(ie){for(var B=t(v);B!==null;){if(B.callback===null)i(v);else if(B.startTime<=ie)i(v),B.sortIndex=B.expirationTime,e(m,B);else break;B=t(v)}}function ne(ie){if(F=!1,Y(ie),!L)if(t(m)!==null)L=!0,je(G);else{var B=t(v);B!==null&&Me(ne,B.startTime-ie)}}function G(ie,B){L=!1,F&&(F=!1,K(I),I=-1),O=!0;var X=N;try{for(Y(B),E=t(m);E!==null&&(!(E.expirationTime>B)||ie&&!P());){var R=E.callback;if(typeof R=="function"){E.callback=null,N=E.priorityLevel;var A=R(E.expirationTime<=B);B=r.unstable_now(),typeof A=="function"?E.callback=A:E===t(m)&&i(m),Y(B)}else i(m);E=t(m)}if(E!==null)var le=!0;else{var ue=t(v);ue!==null&&Me(ne,ue.startTime-B),le=!1}return le}finally{E=null,N=X,O=!1}}var ae=!1,k=null,I=-1,S=5,D=-1;function P(){return!(r.unstable_now()-D<S)}function U(){if(k!==null){var ie=r.unstable_now();D=ie;var B=!0;try{B=k(!0,ie)}finally{B?b():(ae=!1,k=null)}}else ae=!1}var b;if(typeof q=="function")b=function(){q(U)};else if(typeof MessageChannel<"u"){var ge=new MessageChannel,Re=ge.port2;ge.port1.onmessage=U,b=function(){Re.postMessage(null)}}else b=function(){M(U,0)};function je(ie){k=ie,ae||(ae=!0,b())}function Me(ie,B){I=M(function(){ie(r.unstable_now())},B)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(ie){ie.callback=null},r.unstable_continueExecution=function(){L||O||(L=!0,je(G))},r.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<ie?Math.floor(1e3/ie):5},r.unstable_getCurrentPriorityLevel=function(){return N},r.unstable_getFirstCallbackNode=function(){return t(m)},r.unstable_next=function(ie){switch(N){case 1:case 2:case 3:var B=3;break;default:B=N}var X=N;N=B;try{return ie()}finally{N=X}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(ie,B){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var X=N;N=ie;try{return B()}finally{N=X}},r.unstable_scheduleCallback=function(ie,B,X){var R=r.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?R+X:R):X=R,ie){case 1:var A=-1;break;case 2:A=250;break;case 5:A=1073741823;break;case 4:A=1e4;break;default:A=5e3}return A=X+A,ie={id:_++,callback:B,priorityLevel:ie,startTime:X,expirationTime:A,sortIndex:-1},X>R?(ie.sortIndex=X,e(v,ie),t(m)===null&&ie===t(v)&&(F?(K(I),I=-1):F=!0,Me(ne,X-R))):(ie.sortIndex=A,e(m,ie),L||O||(L=!0,je(G))),ie},r.unstable_shouldYield=P,r.unstable_wrapCallback=function(ie){var B=N;return function(){var X=N;N=B;try{return ie.apply(this,arguments)}finally{N=X}}}})(ph)),ph}var gg;function L_(){return gg||(gg=1,mh.exports=V_()),mh.exports}var yg;function F_(){if(yg)return Yt;yg=1;var r=nf(),e=L_();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(n,s){h(n,s),h(n+"Capture",s)}function h(n,s){for(o[n]=s,n=0;n<s.length;n++)i.add(s[n])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},E={};function N(n){return m.call(E,n)?!0:m.call(_,n)?!1:v.test(n)?E[n]=!0:(_[n]=!0,!1)}function O(n,s,a,d){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return d?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function L(n,s,a,d){if(s===null||typeof s>"u"||O(n,s,a,d))return!0;if(d)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function F(n,s,a,d,f,g,w){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=d,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=n,this.type=s,this.sanitizeURL=g,this.removeEmptyString=w}var M={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){M[n]=new F(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];M[s]=new F(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){M[n]=new F(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){M[n]=new F(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){M[n]=new F(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){M[n]=new F(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){M[n]=new F(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){M[n]=new F(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){M[n]=new F(n,5,!1,n.toLowerCase(),null,!1,!1)});var K=/[\-:]([a-z])/g;function q(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(K,q);M[s]=new F(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(K,q);M[s]=new F(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(K,q);M[s]=new F(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){M[n]=new F(n,1,!1,n.toLowerCase(),null,!1,!1)}),M.xlinkHref=new F("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){M[n]=new F(n,1,!1,n.toLowerCase(),null,!0,!0)});function Y(n,s,a,d){var f=M.hasOwnProperty(s)?M[s]:null;(f!==null?f.type!==0:d||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(L(s,a,f,d)&&(a=null),d||f===null?N(s)&&(a===null?n.removeAttribute(s):n.setAttribute(s,""+a)):f.mustUseProperty?n[f.propertyName]=a===null?f.type===3?!1:"":a:(s=f.attributeName,d=f.attributeNamespace,a===null?n.removeAttribute(s):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,d?n.setAttributeNS(d,s,a):n.setAttribute(s,a))))}var ne=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,G=Symbol.for("react.element"),ae=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),P=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),ge=Symbol.for("react.suspense_list"),Re=Symbol.for("react.memo"),je=Symbol.for("react.lazy"),Me=Symbol.for("react.offscreen"),ie=Symbol.iterator;function B(n){return n===null||typeof n!="object"?null:(n=ie&&n[ie]||n["@@iterator"],typeof n=="function"?n:null)}var X=Object.assign,R;function A(n){if(R===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);R=s&&s[1]||""}return`
`+R+n}var le=!1;function ue(n,s){if(!n||le)return"";le=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(W){var d=W}Reflect.construct(n,[],s)}else{try{s.call()}catch(W){d=W}n.call(s.prototype)}else{try{throw Error()}catch(W){d=W}n()}}catch(W){if(W&&d&&typeof W.stack=="string"){for(var f=W.stack.split(`
`),g=d.stack.split(`
`),w=f.length-1,C=g.length-1;1<=w&&0<=C&&f[w]!==g[C];)C--;for(;1<=w&&0<=C;w--,C--)if(f[w]!==g[C]){if(w!==1||C!==1)do if(w--,C--,0>C||f[w]!==g[C]){var j=`
`+f[w].replace(" at new "," at ");return n.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",n.displayName)),j}while(1<=w&&0<=C);break}}}finally{le=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?A(n):""}function he(n){switch(n.tag){case 5:return A(n.type);case 16:return A("Lazy");case 13:return A("Suspense");case 19:return A("SuspenseList");case 0:case 2:case 15:return n=ue(n.type,!1),n;case 11:return n=ue(n.type.render,!1),n;case 1:return n=ue(n.type,!0),n;default:return""}}function _e(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case k:return"Fragment";case ae:return"Portal";case S:return"Profiler";case I:return"StrictMode";case b:return"Suspense";case ge:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case P:return(n.displayName||"Context")+".Consumer";case D:return(n._context.displayName||"Context")+".Provider";case U:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Re:return s=n.displayName||null,s!==null?s:_e(n.type)||"Memo";case je:s=n._payload,n=n._init;try{return _e(n(s))}catch{}}return null}function ke(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _e(s);case 8:return s===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Be(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ge(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function zt(n){var s=Ge(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),d=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,g=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(w){d=""+w,g.call(this,w)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return d},setValue:function(w){d=""+w},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Si(n){n._valueTracker||(n._valueTracker=zt(n))}function qo(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),d="";return n&&(d=Ge(n)?n.checked?"true":"false":n.value),n=d,n!==a?(s.setValue(n),!0):!1}function zr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Ci(n,s){var a=s.checked;return X({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function _l(n,s){var a=s.defaultValue==null?"":s.defaultValue,d=s.checked!=null?s.checked:s.defaultChecked;a=Be(s.value!=null?s.value:a),n._wrapperState={initialChecked:d,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function ki(n,s){s=s.checked,s!=null&&Y(n,"checked",s,!1)}function Ms(n,s){ki(n,s);var a=Be(s.value),d=s.type;if(a!=null)d==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(d==="submit"||d==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?dt(n,s.type,a):s.hasOwnProperty("defaultValue")&&dt(n,s.type,Be(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function Ho(n,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var d=s.type;if(!(d!=="submit"&&d!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,a||s===n.value||(n.value=s),n.defaultValue=s}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function dt(n,s,a){(s!=="number"||zr(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var at=Array.isArray;function En(n,s,a,d){if(n=n.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=s.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&d&&(n[a].defaultSelected=!0)}else{for(a=""+Be(a),s=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,d&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function Wo(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return X({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Go(n,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(at(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}n._wrapperState={initialValue:Be(a)}}function wl(n,s){var a=Be(s.value),d=Be(s.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),s.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),d!=null&&(n.defaultValue=""+d)}function $r(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function Ko(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ai(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?Ko(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var qr,El=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,d,f){MSApp.execUnsafeLocalFunction(function(){return n(s,a,d,f)})}:n})(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(qr=qr||document.createElement("div"),qr.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=qr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function Us(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var Hr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bl=["Webkit","ms","Moz","O"];Object.keys(Hr).forEach(function(n){bl.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),Hr[s]=Hr[n]})});function Wr(n,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||Hr.hasOwnProperty(n)&&Hr[n]?(""+s).trim():s+"px"}function Pi(n,s){n=n.style;for(var a in s)if(s.hasOwnProperty(a)){var d=a.indexOf("--")===0,f=Wr(a,s[a],d);a==="float"&&(a="cssFloat"),d?n.setProperty(a,f):n[a]=f}}var Qo=X({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bn(n,s){if(s){if(Qo[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function Ri(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gr=null;function ji(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var fr=null,mr=null,it=null;function Yo(n){if(n=ba(n)){if(typeof fr!="function")throw Error(t(280));var s=n.stateNode;s&&(s=Yl(s),fr(n.stateNode,n.type,s))}}function Kr(n){mr?it?it.push(n):it=[n]:mr=n}function Qr(){if(mr){var n=mr,s=it;if(it=mr=null,Yo(n),s)for(n=0;n<s.length;n++)Yo(s[n])}}function Il(n,s){return n(s)}function Tl(){}var Fn=!1;function Nl(n,s,a){if(Fn)return n(s,a);Fn=!0;try{return Il(n,s,a)}finally{Fn=!1,(mr!==null||it!==null)&&(Tl(),Qr())}}function Bs(n,s){var a=n.stateNode;if(a===null)return null;var d=Yl(a);if(d===null)return null;a=d[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(n=n.type,d=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!d;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var Yr=!1;if(p)try{var Jr={};Object.defineProperty(Jr,"passive",{get:function(){Yr=!0}}),window.addEventListener("test",Jr,Jr),window.removeEventListener("test",Jr,Jr)}catch{Yr=!1}function Sl(n,s,a,d,f,g,w,C,j){var W=Array.prototype.slice.call(arguments,3);try{s.apply(a,W)}catch(re){this.onError(re)}}var pr=!1,Mn=null,Di=!1,hn=null,Cl={onError:function(n){pr=!0,Mn=n}};function kl(n,s,a,d,f,g,w,C,j){pr=!1,Mn=null,Sl.apply(Cl,arguments)}function Jo(n,s,a,d,f,g,w,C,j){if(kl.apply(this,arguments),pr){if(pr){var W=Mn;pr=!1,Mn=null}else throw Error(t(198));Di||(Di=!0,hn=W)}}function In(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function Xo(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function Al(n){if(In(n)!==n)throw Error(t(188))}function Pl(n){var s=n.alternate;if(!s){if(s=In(n),s===null)throw Error(t(188));return s!==n?null:n}for(var a=n,d=s;;){var f=a.return;if(f===null)break;var g=f.alternate;if(g===null){if(d=f.return,d!==null){a=d;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===a)return Al(f),n;if(g===d)return Al(f),s;g=g.sibling}throw Error(t(188))}if(a.return!==d.return)a=f,d=g;else{for(var w=!1,C=f.child;C;){if(C===a){w=!0,a=f,d=g;break}if(C===d){w=!0,d=f,a=g;break}C=C.sibling}if(!w){for(C=g.child;C;){if(C===a){w=!0,a=g,d=f;break}if(C===d){w=!0,d=g,a=f;break}C=C.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==d)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:s}function Rl(n){return n=Pl(n),n!==null?zs(n):null}function zs(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=zs(n);if(s!==null)return s;n=n.sibling}return null}var Zo=e.unstable_scheduleCallback,Oi=e.unstable_cancelCallback,$s=e.unstable_shouldYield,gr=e.unstable_requestPaint,Je=e.unstable_now,zu=e.unstable_getCurrentPriorityLevel,Vi=e.unstable_ImmediatePriority,ea=e.unstable_UserBlockingPriority,qs=e.unstable_NormalPriority,ta=e.unstable_LowPriority,Li=e.unstable_IdlePriority,Hs=null,Zt=null;function jl(n){if(Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(Hs,n,void 0,(n.current.flags&128)===128)}catch{}}var en=Math.clz32?Math.clz32:Ws,Un=Math.log,fn=Math.LN2;function Ws(n){return n>>>=0,n===0?32:31-(Un(n)/fn|0)|0}var Bn=64,Xr=4194304;function qe(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function yr(n,s){var a=n.pendingLanes;if(a===0)return 0;var d=0,f=n.suspendedLanes,g=n.pingedLanes,w=a&268435455;if(w!==0){var C=w&~f;C!==0?d=qe(C):(g&=w,g!==0&&(d=qe(g)))}else w=a&~f,w!==0?d=qe(w):g!==0&&(d=qe(g));if(d===0)return 0;if(s!==0&&s!==d&&(s&f)===0&&(f=d&-d,g=s&-s,f>=g||f===16&&(g&4194240)!==0))return s;if((d&4)!==0&&(d|=a&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=d;0<s;)a=31-en(s),f=1<<a,d|=n[a],s&=~f;return d}function Gs(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ks(n,s){for(var a=n.suspendedLanes,d=n.pingedLanes,f=n.expirationTimes,g=n.pendingLanes;0<g;){var w=31-en(g),C=1<<w,j=f[w];j===-1?((C&a)===0||(C&d)!==0)&&(f[w]=Gs(C,s)):j<=s&&(n.expiredLanes|=C),g&=~C}}function na(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function ra(){var n=Bn;return Bn<<=1,(Bn&4194240)===0&&(Bn=64),n}function sa(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function Qs(n,s,a){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-en(s),n[s]=a}function $u(n,s){var a=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var d=n.eventTimes;for(n=n.expirationTimes;0<a;){var f=31-en(a),g=1<<f;s[f]=0,d[f]=-1,n[f]=-1,a&=~g}}function ia(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var d=31-en(a),f=1<<d;f&s|n[d]&s&&(n[d]|=s),a&=~f}}var Fe=0;function zn(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var oa,Fi,aa,la,ca,$n=!1,Mi=[],qn=null,Hn=null,Tt=null,Ys=new Map,vr=new Map,tn=[],Dl="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zr(n,s){switch(n){case"focusin":case"focusout":qn=null;break;case"dragenter":case"dragleave":Hn=null;break;case"mouseover":case"mouseout":Tt=null;break;case"pointerover":case"pointerout":Ys.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":vr.delete(s.pointerId)}}function Tn(n,s,a,d,f,g){return n===null||n.nativeEvent!==g?(n={blockedOn:s,domEventName:a,eventSystemFlags:d,nativeEvent:g,targetContainers:[f]},s!==null&&(s=ba(s),s!==null&&Fi(s)),n):(n.eventSystemFlags|=d,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function Ol(n,s,a,d,f){switch(s){case"focusin":return qn=Tn(qn,n,s,a,d,f),!0;case"dragenter":return Hn=Tn(Hn,n,s,a,d,f),!0;case"mouseover":return Tt=Tn(Tt,n,s,a,d,f),!0;case"pointerover":var g=f.pointerId;return Ys.set(g,Tn(Ys.get(g)||null,n,s,a,d,f)),!0;case"gotpointercapture":return g=f.pointerId,vr.set(g,Tn(vr.get(g)||null,n,s,a,d,f)),!0}return!1}function Ui(n){var s=ei(n.target);if(s!==null){var a=In(s);if(a!==null){if(s=a.tag,s===13){if(s=Xo(a),s!==null){n.blockedOn=s,ca(n.priority,function(){aa(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ke(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=Bi(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var d=new a.constructor(a.type,a);Gr=d,a.target.dispatchEvent(d),Gr=null}else return s=ba(a),s!==null&&Fi(s),n.blockedOn=a,!1;s.shift()}return!0}function Vl(n,s,a){Ke(n)&&a.delete(s)}function qu(){$n=!1,qn!==null&&Ke(qn)&&(qn=null),Hn!==null&&Ke(Hn)&&(Hn=null),Tt!==null&&Ke(Tt)&&(Tt=null),Ys.forEach(Vl),vr.forEach(Vl)}function es(n,s){n.blockedOn===s&&(n.blockedOn=null,$n||($n=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,qu)))}function ts(n){function s(f){return es(f,n)}if(0<Mi.length){es(Mi[0],n);for(var a=1;a<Mi.length;a++){var d=Mi[a];d.blockedOn===n&&(d.blockedOn=null)}}for(qn!==null&&es(qn,n),Hn!==null&&es(Hn,n),Tt!==null&&es(Tt,n),Ys.forEach(s),vr.forEach(s),a=0;a<tn.length;a++)d=tn[a],d.blockedOn===n&&(d.blockedOn=null);for(;0<tn.length&&(a=tn[0],a.blockedOn===null);)Ui(a),a.blockedOn===null&&tn.shift()}var xr=ne.ReactCurrentBatchConfig,_r=!0;function Wn(n,s,a,d){var f=Fe,g=xr.transition;xr.transition=null;try{Fe=1,ua(n,s,a,d)}finally{Fe=f,xr.transition=g}}function Ll(n,s,a,d){var f=Fe,g=xr.transition;xr.transition=null;try{Fe=4,ua(n,s,a,d)}finally{Fe=f,xr.transition=g}}function ua(n,s,a,d){if(_r){var f=Bi(n,s,a,d);if(f===null)td(n,s,d,Gn,a),Zr(n,d);else if(Ol(f,n,s,a,d))d.stopPropagation();else if(Zr(n,d),s&4&&-1<Dl.indexOf(n)){for(;f!==null;){var g=ba(f);if(g!==null&&oa(g),g=Bi(n,s,a,d),g===null&&td(n,s,d,Gn,a),g===f)break;f=g}f!==null&&d.stopPropagation()}else td(n,s,d,null,a)}}var Gn=null;function Bi(n,s,a,d){if(Gn=null,n=ji(d),n=ei(n),n!==null)if(s=In(n),s===null)n=null;else if(a=s.tag,a===13){if(n=Xo(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return Gn=n,null}function zi(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zu()){case Vi:return 1;case ea:return 4;case qs:case ta:return 16;case Li:return 536870912;default:return 16}default:return 16}}var nn=null,$i=null,wr=null;function Fl(){if(wr)return wr;var n,s=$i,a=s.length,d,f="value"in nn?nn.value:nn.textContent,g=f.length;for(n=0;n<a&&s[n]===f[n];n++);var w=a-n;for(d=1;d<=w&&s[a-d]===f[g-d];d++);return wr=f.slice(n,1<d?1-d:void 0)}function Js(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Kn(){return!0}function da(){return!1}function Rt(n){function s(a,d,f,g,w){this._reactName=a,this._targetInst=f,this.type=d,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var C in n)n.hasOwnProperty(C)&&(a=n[C],this[C]=a?a(g):g[C]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Kn:da,this.isPropagationStopped=da,this}return X(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Kn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Kn)},persist:function(){},isPersistent:Kn}),s}var Qn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xs=Rt(Qn),ns=X({},Qn,{view:0,detail:0}),qi=Rt(ns),Hi,Wi,rn,Zs=X({},ns,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ae,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==rn&&(rn&&n.type==="mousemove"?(Hi=n.screenX-rn.screenX,Wi=n.screenY-rn.screenY):Wi=Hi=0,rn=n),Hi)},movementY:function(n){return"movementY"in n?n.movementY:Wi}}),ha=Rt(Zs),Ml=X({},Zs,{dataTransfer:0}),Ul=Rt(Ml),Gi=X({},ns,{relatedTarget:0}),Nt=Rt(Gi),Bl=X({},Qn,{animationName:0,elapsedTime:0,pseudoElement:0}),zl=Rt(Bl),rs=X({},Qn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),c=Rt(rs),y=X({},Qn,{data:0}),x=Rt(y),T={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Q={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ce(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=Q[n])?!!s[n]:!1}function Ae(){return ce}var lt=X({},ns,{key:function(n){if(n.key){var s=T[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Js(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?$[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ae,charCode:function(n){return n.type==="keypress"?Js(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Js(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),We=Rt(lt),ht=X({},Zs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sn=Rt(ht),Er=X({},ns,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ae}),Yn=Rt(Er),Jn=X({},Qn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ki=Rt(Jn),fa=X({},Zs,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Nx=Rt(fa),Sx=[9,13,27,32],Hu=p&&"CompositionEvent"in window,ma=null;p&&"documentMode"in document&&(ma=document.documentMode);var Cx=p&&"TextEvent"in window&&!ma,rm=p&&(!Hu||ma&&8<ma&&11>=ma),sm=" ",im=!1;function om(n,s){switch(n){case"keyup":return Sx.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function am(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Qi=!1;function kx(n,s){switch(n){case"compositionend":return am(s);case"keypress":return s.which!==32?null:(im=!0,sm);case"textInput":return n=s.data,n===sm&&im?null:n;default:return null}}function Ax(n,s){if(Qi)return n==="compositionend"||!Hu&&om(n,s)?(n=Fl(),wr=$i=nn=null,Qi=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return rm&&s.locale!=="ko"?null:s.data;default:return null}}var Px={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lm(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!Px[n.type]:s==="textarea"}function cm(n,s,a,d){Kr(d),s=Gl(s,"onChange"),0<s.length&&(a=new Xs("onChange","change",null,a,d),n.push({event:a,listeners:s}))}var pa=null,ga=null;function Rx(n){Sm(n,0)}function $l(n){var s=eo(n);if(qo(s))return n}function jx(n,s){if(n==="change")return s}var um=!1;if(p){var Wu;if(p){var Gu="oninput"in document;if(!Gu){var dm=document.createElement("div");dm.setAttribute("oninput","return;"),Gu=typeof dm.oninput=="function"}Wu=Gu}else Wu=!1;um=Wu&&(!document.documentMode||9<document.documentMode)}function hm(){pa&&(pa.detachEvent("onpropertychange",fm),ga=pa=null)}function fm(n){if(n.propertyName==="value"&&$l(ga)){var s=[];cm(s,ga,n,ji(n)),Nl(Rx,s)}}function Dx(n,s,a){n==="focusin"?(hm(),pa=s,ga=a,pa.attachEvent("onpropertychange",fm)):n==="focusout"&&hm()}function Ox(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return $l(ga)}function Vx(n,s){if(n==="click")return $l(s)}function Lx(n,s){if(n==="input"||n==="change")return $l(s)}function Fx(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Nn=typeof Object.is=="function"?Object.is:Fx;function ya(n,s){if(Nn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),d=Object.keys(s);if(a.length!==d.length)return!1;for(d=0;d<a.length;d++){var f=a[d];if(!m.call(s,f)||!Nn(n[f],s[f]))return!1}return!0}function mm(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function pm(n,s){var a=mm(n);n=0;for(var d;a;){if(a.nodeType===3){if(d=n+a.textContent.length,n<=s&&d>=s)return{node:a,offset:s-n};n=d}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=mm(a)}}function gm(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?gm(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function ym(){for(var n=window,s=zr();s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=zr(n.document)}return s}function Ku(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function Mx(n){var s=ym(),a=n.focusedElem,d=n.selectionRange;if(s!==a&&a&&a.ownerDocument&&gm(a.ownerDocument.documentElement,a)){if(d!==null&&Ku(a)){if(s=d.start,n=d.end,n===void 0&&(n=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(n,a.value.length);else if(n=(s=a.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var f=a.textContent.length,g=Math.min(d.start,f);d=d.end===void 0?g:Math.min(d.end,f),!n.extend&&g>d&&(f=d,d=g,g=f),f=pm(a,g);var w=pm(a,d);f&&w&&(n.rangeCount!==1||n.anchorNode!==f.node||n.anchorOffset!==f.offset||n.focusNode!==w.node||n.focusOffset!==w.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),n.removeAllRanges(),g>d?(n.addRange(s),n.extend(w.node,w.offset)):(s.setEnd(w.node,w.offset),n.addRange(s)))}}for(s=[],n=a;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)n=s[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Ux=p&&"documentMode"in document&&11>=document.documentMode,Yi=null,Qu=null,va=null,Yu=!1;function vm(n,s,a){var d=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Yu||Yi==null||Yi!==zr(d)||(d=Yi,"selectionStart"in d&&Ku(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),va&&ya(va,d)||(va=d,d=Gl(Qu,"onSelect"),0<d.length&&(s=new Xs("onSelect","select",null,s,a),n.push({event:s,listeners:d}),s.target=Yi)))}function ql(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var Ji={animationend:ql("Animation","AnimationEnd"),animationiteration:ql("Animation","AnimationIteration"),animationstart:ql("Animation","AnimationStart"),transitionend:ql("Transition","TransitionEnd")},Ju={},xm={};p&&(xm=document.createElement("div").style,"AnimationEvent"in window||(delete Ji.animationend.animation,delete Ji.animationiteration.animation,delete Ji.animationstart.animation),"TransitionEvent"in window||delete Ji.transitionend.transition);function Hl(n){if(Ju[n])return Ju[n];if(!Ji[n])return n;var s=Ji[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in xm)return Ju[n]=s[a];return n}var _m=Hl("animationend"),wm=Hl("animationiteration"),Em=Hl("animationstart"),bm=Hl("transitionend"),Im=new Map,Tm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ss(n,s){Im.set(n,s),l(s,[n])}for(var Xu=0;Xu<Tm.length;Xu++){var Zu=Tm[Xu],Bx=Zu.toLowerCase(),zx=Zu[0].toUpperCase()+Zu.slice(1);ss(Bx,"on"+zx)}ss(_m,"onAnimationEnd"),ss(wm,"onAnimationIteration"),ss(Em,"onAnimationStart"),ss("dblclick","onDoubleClick"),ss("focusin","onFocus"),ss("focusout","onBlur"),ss(bm,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$x=new Set("cancel close invalid load scroll toggle".split(" ").concat(xa));function Nm(n,s,a){var d=n.type||"unknown-event";n.currentTarget=a,Jo(d,s,void 0,n),n.currentTarget=null}function Sm(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var d=n[a],f=d.event;d=d.listeners;e:{var g=void 0;if(s)for(var w=d.length-1;0<=w;w--){var C=d[w],j=C.instance,W=C.currentTarget;if(C=C.listener,j!==g&&f.isPropagationStopped())break e;Nm(f,C,W),g=j}else for(w=0;w<d.length;w++){if(C=d[w],j=C.instance,W=C.currentTarget,C=C.listener,j!==g&&f.isPropagationStopped())break e;Nm(f,C,W),g=j}}}if(Di)throw n=hn,Di=!1,hn=null,n}function Xe(n,s){var a=s[ad];a===void 0&&(a=s[ad]=new Set);var d=n+"__bubble";a.has(d)||(Cm(s,n,2,!1),a.add(d))}function ed(n,s,a){var d=0;s&&(d|=4),Cm(a,n,d,s)}var Wl="_reactListening"+Math.random().toString(36).slice(2);function _a(n){if(!n[Wl]){n[Wl]=!0,i.forEach(function(a){a!=="selectionchange"&&($x.has(a)||ed(a,!1,n),ed(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Wl]||(s[Wl]=!0,ed("selectionchange",!1,s))}}function Cm(n,s,a,d){switch(zi(s)){case 1:var f=Wn;break;case 4:f=Ll;break;default:f=ua}a=f.bind(null,s,a,n),f=void 0,!Yr||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),d?f!==void 0?n.addEventListener(s,a,{capture:!0,passive:f}):n.addEventListener(s,a,!0):f!==void 0?n.addEventListener(s,a,{passive:f}):n.addEventListener(s,a,!1)}function td(n,s,a,d,f){var g=d;if((s&1)===0&&(s&2)===0&&d!==null)e:for(;;){if(d===null)return;var w=d.tag;if(w===3||w===4){var C=d.stateNode.containerInfo;if(C===f||C.nodeType===8&&C.parentNode===f)break;if(w===4)for(w=d.return;w!==null;){var j=w.tag;if((j===3||j===4)&&(j=w.stateNode.containerInfo,j===f||j.nodeType===8&&j.parentNode===f))return;w=w.return}for(;C!==null;){if(w=ei(C),w===null)return;if(j=w.tag,j===5||j===6){d=g=w;continue e}C=C.parentNode}}d=d.return}Nl(function(){var W=g,re=ji(a),se=[];e:{var te=Im.get(n);if(te!==void 0){var fe=Xs,ye=n;switch(n){case"keypress":if(Js(a)===0)break e;case"keydown":case"keyup":fe=We;break;case"focusin":ye="focus",fe=Nt;break;case"focusout":ye="blur",fe=Nt;break;case"beforeblur":case"afterblur":fe=Nt;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=ha;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=Ul;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=Yn;break;case _m:case wm:case Em:fe=zl;break;case bm:fe=Ki;break;case"scroll":fe=qi;break;case"wheel":fe=Nx;break;case"copy":case"cut":case"paste":fe=c;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=sn}var ve=(s&4)!==0,ct=!ve&&n==="scroll",z=ve?te!==null?te+"Capture":null:te;ve=[];for(var V=W,H;V!==null;){H=V;var oe=H.stateNode;if(H.tag===5&&oe!==null&&(H=oe,z!==null&&(oe=Bs(V,z),oe!=null&&ve.push(wa(V,oe,H)))),ct)break;V=V.return}0<ve.length&&(te=new fe(te,ye,null,a,re),se.push({event:te,listeners:ve}))}}if((s&7)===0){e:{if(te=n==="mouseover"||n==="pointerover",fe=n==="mouseout"||n==="pointerout",te&&a!==Gr&&(ye=a.relatedTarget||a.fromElement)&&(ei(ye)||ye[br]))break e;if((fe||te)&&(te=re.window===re?re:(te=re.ownerDocument)?te.defaultView||te.parentWindow:window,fe?(ye=a.relatedTarget||a.toElement,fe=W,ye=ye?ei(ye):null,ye!==null&&(ct=In(ye),ye!==ct||ye.tag!==5&&ye.tag!==6)&&(ye=null)):(fe=null,ye=W),fe!==ye)){if(ve=ha,oe="onMouseLeave",z="onMouseEnter",V="mouse",(n==="pointerout"||n==="pointerover")&&(ve=sn,oe="onPointerLeave",z="onPointerEnter",V="pointer"),ct=fe==null?te:eo(fe),H=ye==null?te:eo(ye),te=new ve(oe,V+"leave",fe,a,re),te.target=ct,te.relatedTarget=H,oe=null,ei(re)===W&&(ve=new ve(z,V+"enter",ye,a,re),ve.target=H,ve.relatedTarget=ct,oe=ve),ct=oe,fe&&ye)t:{for(ve=fe,z=ye,V=0,H=ve;H;H=Xi(H))V++;for(H=0,oe=z;oe;oe=Xi(oe))H++;for(;0<V-H;)ve=Xi(ve),V--;for(;0<H-V;)z=Xi(z),H--;for(;V--;){if(ve===z||z!==null&&ve===z.alternate)break t;ve=Xi(ve),z=Xi(z)}ve=null}else ve=null;fe!==null&&km(se,te,fe,ve,!1),ye!==null&&ct!==null&&km(se,ct,ye,ve,!0)}}e:{if(te=W?eo(W):window,fe=te.nodeName&&te.nodeName.toLowerCase(),fe==="select"||fe==="input"&&te.type==="file")var xe=jx;else if(lm(te))if(um)xe=Lx;else{xe=Ox;var be=Dx}else(fe=te.nodeName)&&fe.toLowerCase()==="input"&&(te.type==="checkbox"||te.type==="radio")&&(xe=Vx);if(xe&&(xe=xe(n,W))){cm(se,xe,a,re);break e}be&&be(n,te,W),n==="focusout"&&(be=te._wrapperState)&&be.controlled&&te.type==="number"&&dt(te,"number",te.value)}switch(be=W?eo(W):window,n){case"focusin":(lm(be)||be.contentEditable==="true")&&(Yi=be,Qu=W,va=null);break;case"focusout":va=Qu=Yi=null;break;case"mousedown":Yu=!0;break;case"contextmenu":case"mouseup":case"dragend":Yu=!1,vm(se,a,re);break;case"selectionchange":if(Ux)break;case"keydown":case"keyup":vm(se,a,re)}var Ie;if(Hu)e:{switch(n){case"compositionstart":var Ne="onCompositionStart";break e;case"compositionend":Ne="onCompositionEnd";break e;case"compositionupdate":Ne="onCompositionUpdate";break e}Ne=void 0}else Qi?om(n,a)&&(Ne="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Ne="onCompositionStart");Ne&&(rm&&a.locale!=="ko"&&(Qi||Ne!=="onCompositionStart"?Ne==="onCompositionEnd"&&Qi&&(Ie=Fl()):(nn=re,$i="value"in nn?nn.value:nn.textContent,Qi=!0)),be=Gl(W,Ne),0<be.length&&(Ne=new x(Ne,n,null,a,re),se.push({event:Ne,listeners:be}),Ie?Ne.data=Ie:(Ie=am(a),Ie!==null&&(Ne.data=Ie)))),(Ie=Cx?kx(n,a):Ax(n,a))&&(W=Gl(W,"onBeforeInput"),0<W.length&&(re=new x("onBeforeInput","beforeinput",null,a,re),se.push({event:re,listeners:W}),re.data=Ie))}Sm(se,s)})}function wa(n,s,a){return{instance:n,listener:s,currentTarget:a}}function Gl(n,s){for(var a=s+"Capture",d=[];n!==null;){var f=n,g=f.stateNode;f.tag===5&&g!==null&&(f=g,g=Bs(n,a),g!=null&&d.unshift(wa(n,g,f)),g=Bs(n,s),g!=null&&d.push(wa(n,g,f))),n=n.return}return d}function Xi(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function km(n,s,a,d,f){for(var g=s._reactName,w=[];a!==null&&a!==d;){var C=a,j=C.alternate,W=C.stateNode;if(j!==null&&j===d)break;C.tag===5&&W!==null&&(C=W,f?(j=Bs(a,g),j!=null&&w.unshift(wa(a,j,C))):f||(j=Bs(a,g),j!=null&&w.push(wa(a,j,C)))),a=a.return}w.length!==0&&n.push({event:s,listeners:w})}var qx=/\r\n?/g,Hx=/\u0000|\uFFFD/g;function Am(n){return(typeof n=="string"?n:""+n).replace(qx,`
`).replace(Hx,"")}function Kl(n,s,a){if(s=Am(s),Am(n)!==s&&a)throw Error(t(425))}function Ql(){}var nd=null,rd=null;function sd(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var id=typeof setTimeout=="function"?setTimeout:void 0,Wx=typeof clearTimeout=="function"?clearTimeout:void 0,Pm=typeof Promise=="function"?Promise:void 0,Gx=typeof queueMicrotask=="function"?queueMicrotask:typeof Pm<"u"?function(n){return Pm.resolve(null).then(n).catch(Kx)}:id;function Kx(n){setTimeout(function(){throw n})}function od(n,s){var a=s,d=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(d===0){n.removeChild(f),ts(s);return}d--}else a!=="$"&&a!=="$?"&&a!=="$!"||d++;a=f}while(a);ts(s)}function is(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function Rm(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}var Zi=Math.random().toString(36).slice(2),Xn="__reactFiber$"+Zi,Ea="__reactProps$"+Zi,br="__reactContainer$"+Zi,ad="__reactEvents$"+Zi,Qx="__reactListeners$"+Zi,Yx="__reactHandles$"+Zi;function ei(n){var s=n[Xn];if(s)return s;for(var a=n.parentNode;a;){if(s=a[br]||a[Xn]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=Rm(n);n!==null;){if(a=n[Xn])return a;n=Rm(n)}return s}n=a,a=n.parentNode}return null}function ba(n){return n=n[Xn]||n[br],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function eo(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Yl(n){return n[Ea]||null}var ld=[],to=-1;function os(n){return{current:n}}function Ze(n){0>to||(n.current=ld[to],ld[to]=null,to--)}function Qe(n,s){to++,ld[to]=n.current,n.current=s}var as={},jt=os(as),Ht=os(!1),ti=as;function no(n,s){var a=n.type.contextTypes;if(!a)return as;var d=n.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===s)return d.__reactInternalMemoizedMaskedChildContext;var f={},g;for(g in a)f[g]=s[g];return d&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=f),f}function Wt(n){return n=n.childContextTypes,n!=null}function Jl(){Ze(Ht),Ze(jt)}function jm(n,s,a){if(jt.current!==as)throw Error(t(168));Qe(jt,s),Qe(Ht,a)}function Dm(n,s,a){var d=n.stateNode;if(s=s.childContextTypes,typeof d.getChildContext!="function")return a;d=d.getChildContext();for(var f in d)if(!(f in s))throw Error(t(108,ke(n)||"Unknown",f));return X({},a,d)}function Xl(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||as,ti=jt.current,Qe(jt,n),Qe(Ht,Ht.current),!0}function Om(n,s,a){var d=n.stateNode;if(!d)throw Error(t(169));a?(n=Dm(n,s,ti),d.__reactInternalMemoizedMergedChildContext=n,Ze(Ht),Ze(jt),Qe(jt,n)):Ze(Ht),Qe(Ht,a)}var Ir=null,Zl=!1,cd=!1;function Vm(n){Ir===null?Ir=[n]:Ir.push(n)}function Jx(n){Zl=!0,Vm(n)}function ls(){if(!cd&&Ir!==null){cd=!0;var n=0,s=Fe;try{var a=Ir;for(Fe=1;n<a.length;n++){var d=a[n];do d=d(!0);while(d!==null)}Ir=null,Zl=!1}catch(f){throw Ir!==null&&(Ir=Ir.slice(n+1)),Zo(Vi,ls),f}finally{Fe=s,cd=!1}}return null}var ro=[],so=0,ec=null,tc=0,mn=[],pn=0,ni=null,Tr=1,Nr="";function ri(n,s){ro[so++]=tc,ro[so++]=ec,ec=n,tc=s}function Lm(n,s,a){mn[pn++]=Tr,mn[pn++]=Nr,mn[pn++]=ni,ni=n;var d=Tr;n=Nr;var f=32-en(d)-1;d&=~(1<<f),a+=1;var g=32-en(s)+f;if(30<g){var w=f-f%5;g=(d&(1<<w)-1).toString(32),d>>=w,f-=w,Tr=1<<32-en(s)+f|a<<f|d,Nr=g+n}else Tr=1<<g|a<<f|d,Nr=n}function ud(n){n.return!==null&&(ri(n,1),Lm(n,1,0))}function dd(n){for(;n===ec;)ec=ro[--so],ro[so]=null,tc=ro[--so],ro[so]=null;for(;n===ni;)ni=mn[--pn],mn[pn]=null,Nr=mn[--pn],mn[pn]=null,Tr=mn[--pn],mn[pn]=null}var on=null,an=null,tt=!1,Sn=null;function Fm(n,s){var a=xn(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=n,s=n.deletions,s===null?(n.deletions=[a],n.flags|=16):s.push(a)}function Mm(n,s){switch(n.tag){case 5:var a=n.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,on=n,an=is(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,on=n,an=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=ni!==null?{id:Tr,overflow:Nr}:null,n.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=xn(18,null,null,0),a.stateNode=s,a.return=n,n.child=a,on=n,an=null,!0):!1;default:return!1}}function hd(n){return(n.mode&1)!==0&&(n.flags&128)===0}function fd(n){if(tt){var s=an;if(s){var a=s;if(!Mm(n,s)){if(hd(n))throw Error(t(418));s=is(a.nextSibling);var d=on;s&&Mm(n,s)?Fm(d,a):(n.flags=n.flags&-4097|2,tt=!1,on=n)}}else{if(hd(n))throw Error(t(418));n.flags=n.flags&-4097|2,tt=!1,on=n}}}function Um(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;on=n}function nc(n){if(n!==on)return!1;if(!tt)return Um(n),tt=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!sd(n.type,n.memoizedProps)),s&&(s=an)){if(hd(n))throw Bm(),Error(t(418));for(;s;)Fm(n,s),s=is(s.nextSibling)}if(Um(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(s===0){an=is(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}n=n.nextSibling}an=null}}else an=on?is(n.stateNode.nextSibling):null;return!0}function Bm(){for(var n=an;n;)n=is(n.nextSibling)}function io(){an=on=null,tt=!1}function md(n){Sn===null?Sn=[n]:Sn.push(n)}var Xx=ne.ReactCurrentBatchConfig;function Ia(n,s,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var d=a.stateNode}if(!d)throw Error(t(147,n));var f=d,g=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===g?s.ref:(s=function(w){var C=f.refs;w===null?delete C[g]:C[g]=w},s._stringRef=g,s)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function rc(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function zm(n){var s=n._init;return s(n._payload)}function $m(n){function s(z,V){if(n){var H=z.deletions;H===null?(z.deletions=[V],z.flags|=16):H.push(V)}}function a(z,V){if(!n)return null;for(;V!==null;)s(z,V),V=V.sibling;return null}function d(z,V){for(z=new Map;V!==null;)V.key!==null?z.set(V.key,V):z.set(V.index,V),V=V.sibling;return z}function f(z,V){return z=gs(z,V),z.index=0,z.sibling=null,z}function g(z,V,H){return z.index=H,n?(H=z.alternate,H!==null?(H=H.index,H<V?(z.flags|=2,V):H):(z.flags|=2,V)):(z.flags|=1048576,V)}function w(z){return n&&z.alternate===null&&(z.flags|=2),z}function C(z,V,H,oe){return V===null||V.tag!==6?(V=ih(H,z.mode,oe),V.return=z,V):(V=f(V,H),V.return=z,V)}function j(z,V,H,oe){var xe=H.type;return xe===k?re(z,V,H.props.children,oe,H.key):V!==null&&(V.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===je&&zm(xe)===V.type)?(oe=f(V,H.props),oe.ref=Ia(z,V,H),oe.return=z,oe):(oe=Sc(H.type,H.key,H.props,null,z.mode,oe),oe.ref=Ia(z,V,H),oe.return=z,oe)}function W(z,V,H,oe){return V===null||V.tag!==4||V.stateNode.containerInfo!==H.containerInfo||V.stateNode.implementation!==H.implementation?(V=oh(H,z.mode,oe),V.return=z,V):(V=f(V,H.children||[]),V.return=z,V)}function re(z,V,H,oe,xe){return V===null||V.tag!==7?(V=di(H,z.mode,oe,xe),V.return=z,V):(V=f(V,H),V.return=z,V)}function se(z,V,H){if(typeof V=="string"&&V!==""||typeof V=="number")return V=ih(""+V,z.mode,H),V.return=z,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case G:return H=Sc(V.type,V.key,V.props,null,z.mode,H),H.ref=Ia(z,null,V),H.return=z,H;case ae:return V=oh(V,z.mode,H),V.return=z,V;case je:var oe=V._init;return se(z,oe(V._payload),H)}if(at(V)||B(V))return V=di(V,z.mode,H,null),V.return=z,V;rc(z,V)}return null}function te(z,V,H,oe){var xe=V!==null?V.key:null;if(typeof H=="string"&&H!==""||typeof H=="number")return xe!==null?null:C(z,V,""+H,oe);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case G:return H.key===xe?j(z,V,H,oe):null;case ae:return H.key===xe?W(z,V,H,oe):null;case je:return xe=H._init,te(z,V,xe(H._payload),oe)}if(at(H)||B(H))return xe!==null?null:re(z,V,H,oe,null);rc(z,H)}return null}function fe(z,V,H,oe,xe){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return z=z.get(H)||null,C(V,z,""+oe,xe);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case G:return z=z.get(oe.key===null?H:oe.key)||null,j(V,z,oe,xe);case ae:return z=z.get(oe.key===null?H:oe.key)||null,W(V,z,oe,xe);case je:var be=oe._init;return fe(z,V,H,be(oe._payload),xe)}if(at(oe)||B(oe))return z=z.get(H)||null,re(V,z,oe,xe,null);rc(V,oe)}return null}function ye(z,V,H,oe){for(var xe=null,be=null,Ie=V,Ne=V=0,bt=null;Ie!==null&&Ne<H.length;Ne++){Ie.index>Ne?(bt=Ie,Ie=null):bt=Ie.sibling;var $e=te(z,Ie,H[Ne],oe);if($e===null){Ie===null&&(Ie=bt);break}n&&Ie&&$e.alternate===null&&s(z,Ie),V=g($e,V,Ne),be===null?xe=$e:be.sibling=$e,be=$e,Ie=bt}if(Ne===H.length)return a(z,Ie),tt&&ri(z,Ne),xe;if(Ie===null){for(;Ne<H.length;Ne++)Ie=se(z,H[Ne],oe),Ie!==null&&(V=g(Ie,V,Ne),be===null?xe=Ie:be.sibling=Ie,be=Ie);return tt&&ri(z,Ne),xe}for(Ie=d(z,Ie);Ne<H.length;Ne++)bt=fe(Ie,z,Ne,H[Ne],oe),bt!==null&&(n&&bt.alternate!==null&&Ie.delete(bt.key===null?Ne:bt.key),V=g(bt,V,Ne),be===null?xe=bt:be.sibling=bt,be=bt);return n&&Ie.forEach(function(ys){return s(z,ys)}),tt&&ri(z,Ne),xe}function ve(z,V,H,oe){var xe=B(H);if(typeof xe!="function")throw Error(t(150));if(H=xe.call(H),H==null)throw Error(t(151));for(var be=xe=null,Ie=V,Ne=V=0,bt=null,$e=H.next();Ie!==null&&!$e.done;Ne++,$e=H.next()){Ie.index>Ne?(bt=Ie,Ie=null):bt=Ie.sibling;var ys=te(z,Ie,$e.value,oe);if(ys===null){Ie===null&&(Ie=bt);break}n&&Ie&&ys.alternate===null&&s(z,Ie),V=g(ys,V,Ne),be===null?xe=ys:be.sibling=ys,be=ys,Ie=bt}if($e.done)return a(z,Ie),tt&&ri(z,Ne),xe;if(Ie===null){for(;!$e.done;Ne++,$e=H.next())$e=se(z,$e.value,oe),$e!==null&&(V=g($e,V,Ne),be===null?xe=$e:be.sibling=$e,be=$e);return tt&&ri(z,Ne),xe}for(Ie=d(z,Ie);!$e.done;Ne++,$e=H.next())$e=fe(Ie,z,Ne,$e.value,oe),$e!==null&&(n&&$e.alternate!==null&&Ie.delete($e.key===null?Ne:$e.key),V=g($e,V,Ne),be===null?xe=$e:be.sibling=$e,be=$e);return n&&Ie.forEach(function(P_){return s(z,P_)}),tt&&ri(z,Ne),xe}function ct(z,V,H,oe){if(typeof H=="object"&&H!==null&&H.type===k&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case G:e:{for(var xe=H.key,be=V;be!==null;){if(be.key===xe){if(xe=H.type,xe===k){if(be.tag===7){a(z,be.sibling),V=f(be,H.props.children),V.return=z,z=V;break e}}else if(be.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===je&&zm(xe)===be.type){a(z,be.sibling),V=f(be,H.props),V.ref=Ia(z,be,H),V.return=z,z=V;break e}a(z,be);break}else s(z,be);be=be.sibling}H.type===k?(V=di(H.props.children,z.mode,oe,H.key),V.return=z,z=V):(oe=Sc(H.type,H.key,H.props,null,z.mode,oe),oe.ref=Ia(z,V,H),oe.return=z,z=oe)}return w(z);case ae:e:{for(be=H.key;V!==null;){if(V.key===be)if(V.tag===4&&V.stateNode.containerInfo===H.containerInfo&&V.stateNode.implementation===H.implementation){a(z,V.sibling),V=f(V,H.children||[]),V.return=z,z=V;break e}else{a(z,V);break}else s(z,V);V=V.sibling}V=oh(H,z.mode,oe),V.return=z,z=V}return w(z);case je:return be=H._init,ct(z,V,be(H._payload),oe)}if(at(H))return ye(z,V,H,oe);if(B(H))return ve(z,V,H,oe);rc(z,H)}return typeof H=="string"&&H!==""||typeof H=="number"?(H=""+H,V!==null&&V.tag===6?(a(z,V.sibling),V=f(V,H),V.return=z,z=V):(a(z,V),V=ih(H,z.mode,oe),V.return=z,z=V),w(z)):a(z,V)}return ct}var oo=$m(!0),qm=$m(!1),sc=os(null),ic=null,ao=null,pd=null;function gd(){pd=ao=ic=null}function yd(n){var s=sc.current;Ze(sc),n._currentValue=s}function vd(n,s,a){for(;n!==null;){var d=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,d!==null&&(d.childLanes|=s)):d!==null&&(d.childLanes&s)!==s&&(d.childLanes|=s),n===a)break;n=n.return}}function lo(n,s){ic=n,pd=ao=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(Gt=!0),n.firstContext=null)}function gn(n){var s=n._currentValue;if(pd!==n)if(n={context:n,memoizedValue:s,next:null},ao===null){if(ic===null)throw Error(t(308));ao=n,ic.dependencies={lanes:0,firstContext:n}}else ao=ao.next=n;return s}var si=null;function xd(n){si===null?si=[n]:si.push(n)}function Hm(n,s,a,d){var f=s.interleaved;return f===null?(a.next=a,xd(s)):(a.next=f.next,f.next=a),s.interleaved=a,Sr(n,d)}function Sr(n,s){n.lanes|=s;var a=n.alternate;for(a!==null&&(a.lanes|=s),a=n,n=n.return;n!==null;)n.childLanes|=s,a=n.alternate,a!==null&&(a.childLanes|=s),a=n,n=n.return;return a.tag===3?a.stateNode:null}var cs=!1;function _d(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Wm(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Cr(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function us(n,s,a){var d=n.updateQueue;if(d===null)return null;if(d=d.shared,(ze&2)!==0){var f=d.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),d.pending=s,Sr(n,a)}return f=d.interleaved,f===null?(s.next=s,xd(d)):(s.next=f.next,f.next=s),d.interleaved=s,Sr(n,a)}function oc(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var d=s.lanes;d&=n.pendingLanes,a|=d,s.lanes=a,ia(n,a)}}function Gm(n,s){var a=n.updateQueue,d=n.alternate;if(d!==null&&(d=d.updateQueue,a===d)){var f=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?f=g=w:g=g.next=w,a=a.next}while(a!==null);g===null?f=g=s:g=g.next=s}else f=g=s;a={baseState:d.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:d.shared,effects:d.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}function ac(n,s,a,d){var f=n.updateQueue;cs=!1;var g=f.firstBaseUpdate,w=f.lastBaseUpdate,C=f.shared.pending;if(C!==null){f.shared.pending=null;var j=C,W=j.next;j.next=null,w===null?g=W:w.next=W,w=j;var re=n.alternate;re!==null&&(re=re.updateQueue,C=re.lastBaseUpdate,C!==w&&(C===null?re.firstBaseUpdate=W:C.next=W,re.lastBaseUpdate=j))}if(g!==null){var se=f.baseState;w=0,re=W=j=null,C=g;do{var te=C.lane,fe=C.eventTime;if((d&te)===te){re!==null&&(re=re.next={eventTime:fe,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});e:{var ye=n,ve=C;switch(te=s,fe=a,ve.tag){case 1:if(ye=ve.payload,typeof ye=="function"){se=ye.call(fe,se,te);break e}se=ye;break e;case 3:ye.flags=ye.flags&-65537|128;case 0:if(ye=ve.payload,te=typeof ye=="function"?ye.call(fe,se,te):ye,te==null)break e;se=X({},se,te);break e;case 2:cs=!0}}C.callback!==null&&C.lane!==0&&(n.flags|=64,te=f.effects,te===null?f.effects=[C]:te.push(C))}else fe={eventTime:fe,lane:te,tag:C.tag,payload:C.payload,callback:C.callback,next:null},re===null?(W=re=fe,j=se):re=re.next=fe,w|=te;if(C=C.next,C===null){if(C=f.shared.pending,C===null)break;te=C,C=te.next,te.next=null,f.lastBaseUpdate=te,f.shared.pending=null}}while(!0);if(re===null&&(j=se),f.baseState=j,f.firstBaseUpdate=W,f.lastBaseUpdate=re,s=f.shared.interleaved,s!==null){f=s;do w|=f.lane,f=f.next;while(f!==s)}else g===null&&(f.shared.lanes=0);ai|=w,n.lanes=w,n.memoizedState=se}}function Km(n,s,a){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var d=n[s],f=d.callback;if(f!==null){if(d.callback=null,d=a,typeof f!="function")throw Error(t(191,f));f.call(d)}}}var Ta={},Zn=os(Ta),Na=os(Ta),Sa=os(Ta);function ii(n){if(n===Ta)throw Error(t(174));return n}function wd(n,s){switch(Qe(Sa,s),Qe(Na,n),Qe(Zn,Ta),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Ai(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=Ai(s,n)}Ze(Zn),Qe(Zn,s)}function co(){Ze(Zn),Ze(Na),Ze(Sa)}function Qm(n){ii(Sa.current);var s=ii(Zn.current),a=Ai(s,n.type);s!==a&&(Qe(Na,n),Qe(Zn,a))}function Ed(n){Na.current===n&&(Ze(Zn),Ze(Na))}var nt=os(0);function lc(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var bd=[];function Id(){for(var n=0;n<bd.length;n++)bd[n]._workInProgressVersionPrimary=null;bd.length=0}var cc=ne.ReactCurrentDispatcher,Td=ne.ReactCurrentBatchConfig,oi=0,rt=null,vt=null,wt=null,uc=!1,Ca=!1,ka=0,Zx=0;function Dt(){throw Error(t(321))}function Nd(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!Nn(n[a],s[a]))return!1;return!0}function Sd(n,s,a,d,f,g){if(oi=g,rt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,cc.current=n===null||n.memoizedState===null?r_:s_,n=a(d,f),Ca){g=0;do{if(Ca=!1,ka=0,25<=g)throw Error(t(301));g+=1,wt=vt=null,s.updateQueue=null,cc.current=i_,n=a(d,f)}while(Ca)}if(cc.current=fc,s=vt!==null&&vt.next!==null,oi=0,wt=vt=rt=null,uc=!1,s)throw Error(t(300));return n}function Cd(){var n=ka!==0;return ka=0,n}function er(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?rt.memoizedState=wt=n:wt=wt.next=n,wt}function yn(){if(vt===null){var n=rt.alternate;n=n!==null?n.memoizedState:null}else n=vt.next;var s=wt===null?rt.memoizedState:wt.next;if(s!==null)wt=s,vt=n;else{if(n===null)throw Error(t(310));vt=n,n={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},wt===null?rt.memoizedState=wt=n:wt=wt.next=n}return wt}function Aa(n,s){return typeof s=="function"?s(n):s}function kd(n){var s=yn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var d=vt,f=d.baseQueue,g=a.pending;if(g!==null){if(f!==null){var w=f.next;f.next=g.next,g.next=w}d.baseQueue=f=g,a.pending=null}if(f!==null){g=f.next,d=d.baseState;var C=w=null,j=null,W=g;do{var re=W.lane;if((oi&re)===re)j!==null&&(j=j.next={lane:0,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),d=W.hasEagerState?W.eagerState:n(d,W.action);else{var se={lane:re,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null};j===null?(C=j=se,w=d):j=j.next=se,rt.lanes|=re,ai|=re}W=W.next}while(W!==null&&W!==g);j===null?w=d:j.next=C,Nn(d,s.memoizedState)||(Gt=!0),s.memoizedState=d,s.baseState=w,s.baseQueue=j,a.lastRenderedState=d}if(n=a.interleaved,n!==null){f=n;do g=f.lane,rt.lanes|=g,ai|=g,f=f.next;while(f!==n)}else f===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function Ad(n){var s=yn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var d=a.dispatch,f=a.pending,g=s.memoizedState;if(f!==null){a.pending=null;var w=f=f.next;do g=n(g,w.action),w=w.next;while(w!==f);Nn(g,s.memoizedState)||(Gt=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),a.lastRenderedState=g}return[g,d]}function Ym(){}function Jm(n,s){var a=rt,d=yn(),f=s(),g=!Nn(d.memoizedState,f);if(g&&(d.memoizedState=f,Gt=!0),d=d.queue,Pd(ep.bind(null,a,d,n),[n]),d.getSnapshot!==s||g||wt!==null&&wt.memoizedState.tag&1){if(a.flags|=2048,Pa(9,Zm.bind(null,a,d,f,s),void 0,null),Et===null)throw Error(t(349));(oi&30)!==0||Xm(a,s,f)}return f}function Xm(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=rt.updateQueue,s===null?(s={lastEffect:null,stores:null},rt.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function Zm(n,s,a,d){s.value=a,s.getSnapshot=d,tp(s)&&np(n)}function ep(n,s,a){return a(function(){tp(s)&&np(n)})}function tp(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!Nn(n,a)}catch{return!0}}function np(n){var s=Sr(n,1);s!==null&&Pn(s,n,1,-1)}function rp(n){var s=er();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Aa,lastRenderedState:n},s.queue=n,n=n.dispatch=n_.bind(null,rt,n),[s.memoizedState,n]}function Pa(n,s,a,d){return n={tag:n,create:s,destroy:a,deps:d,next:null},s=rt.updateQueue,s===null?(s={lastEffect:null,stores:null},rt.updateQueue=s,s.lastEffect=n.next=n):(a=s.lastEffect,a===null?s.lastEffect=n.next=n:(d=a.next,a.next=n,n.next=d,s.lastEffect=n)),n}function sp(){return yn().memoizedState}function dc(n,s,a,d){var f=er();rt.flags|=n,f.memoizedState=Pa(1|s,a,void 0,d===void 0?null:d)}function hc(n,s,a,d){var f=yn();d=d===void 0?null:d;var g=void 0;if(vt!==null){var w=vt.memoizedState;if(g=w.destroy,d!==null&&Nd(d,w.deps)){f.memoizedState=Pa(s,a,g,d);return}}rt.flags|=n,f.memoizedState=Pa(1|s,a,g,d)}function ip(n,s){return dc(8390656,8,n,s)}function Pd(n,s){return hc(2048,8,n,s)}function op(n,s){return hc(4,2,n,s)}function ap(n,s){return hc(4,4,n,s)}function lp(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function cp(n,s,a){return a=a!=null?a.concat([n]):null,hc(4,4,lp.bind(null,s,n),a)}function Rd(){}function up(n,s){var a=yn();s=s===void 0?null:s;var d=a.memoizedState;return d!==null&&s!==null&&Nd(s,d[1])?d[0]:(a.memoizedState=[n,s],n)}function dp(n,s){var a=yn();s=s===void 0?null:s;var d=a.memoizedState;return d!==null&&s!==null&&Nd(s,d[1])?d[0]:(n=n(),a.memoizedState=[n,s],n)}function hp(n,s,a){return(oi&21)===0?(n.baseState&&(n.baseState=!1,Gt=!0),n.memoizedState=a):(Nn(a,s)||(a=ra(),rt.lanes|=a,ai|=a,n.baseState=!0),s)}function e_(n,s){var a=Fe;Fe=a!==0&&4>a?a:4,n(!0);var d=Td.transition;Td.transition={};try{n(!1),s()}finally{Fe=a,Td.transition=d}}function fp(){return yn().memoizedState}function t_(n,s,a){var d=ms(n);if(a={lane:d,action:a,hasEagerState:!1,eagerState:null,next:null},mp(n))pp(s,a);else if(a=Hm(n,s,a,d),a!==null){var f=qt();Pn(a,n,d,f),gp(a,s,d)}}function n_(n,s,a){var d=ms(n),f={lane:d,action:a,hasEagerState:!1,eagerState:null,next:null};if(mp(n))pp(s,f);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var w=s.lastRenderedState,C=g(w,a);if(f.hasEagerState=!0,f.eagerState=C,Nn(C,w)){var j=s.interleaved;j===null?(f.next=f,xd(s)):(f.next=j.next,j.next=f),s.interleaved=f;return}}catch{}a=Hm(n,s,f,d),a!==null&&(f=qt(),Pn(a,n,d,f),gp(a,s,d))}}function mp(n){var s=n.alternate;return n===rt||s!==null&&s===rt}function pp(n,s){Ca=uc=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function gp(n,s,a){if((a&4194240)!==0){var d=s.lanes;d&=n.pendingLanes,a|=d,s.lanes=a,ia(n,a)}}var fc={readContext:gn,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useInsertionEffect:Dt,useLayoutEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useMutableSource:Dt,useSyncExternalStore:Dt,useId:Dt,unstable_isNewReconciler:!1},r_={readContext:gn,useCallback:function(n,s){return er().memoizedState=[n,s===void 0?null:s],n},useContext:gn,useEffect:ip,useImperativeHandle:function(n,s,a){return a=a!=null?a.concat([n]):null,dc(4194308,4,lp.bind(null,s,n),a)},useLayoutEffect:function(n,s){return dc(4194308,4,n,s)},useInsertionEffect:function(n,s){return dc(4,2,n,s)},useMemo:function(n,s){var a=er();return s=s===void 0?null:s,n=n(),a.memoizedState=[n,s],n},useReducer:function(n,s,a){var d=er();return s=a!==void 0?a(s):s,d.memoizedState=d.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},d.queue=n,n=n.dispatch=t_.bind(null,rt,n),[d.memoizedState,n]},useRef:function(n){var s=er();return n={current:n},s.memoizedState=n},useState:rp,useDebugValue:Rd,useDeferredValue:function(n){return er().memoizedState=n},useTransition:function(){var n=rp(!1),s=n[0];return n=e_.bind(null,n[1]),er().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,a){var d=rt,f=er();if(tt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),Et===null)throw Error(t(349));(oi&30)!==0||Xm(d,s,a)}f.memoizedState=a;var g={value:a,getSnapshot:s};return f.queue=g,ip(ep.bind(null,d,g,n),[n]),d.flags|=2048,Pa(9,Zm.bind(null,d,g,a,s),void 0,null),a},useId:function(){var n=er(),s=Et.identifierPrefix;if(tt){var a=Nr,d=Tr;a=(d&~(1<<32-en(d)-1)).toString(32)+a,s=":"+s+"R"+a,a=ka++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=Zx++,s=":"+s+"r"+a.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},s_={readContext:gn,useCallback:up,useContext:gn,useEffect:Pd,useImperativeHandle:cp,useInsertionEffect:op,useLayoutEffect:ap,useMemo:dp,useReducer:kd,useRef:sp,useState:function(){return kd(Aa)},useDebugValue:Rd,useDeferredValue:function(n){var s=yn();return hp(s,vt.memoizedState,n)},useTransition:function(){var n=kd(Aa)[0],s=yn().memoizedState;return[n,s]},useMutableSource:Ym,useSyncExternalStore:Jm,useId:fp,unstable_isNewReconciler:!1},i_={readContext:gn,useCallback:up,useContext:gn,useEffect:Pd,useImperativeHandle:cp,useInsertionEffect:op,useLayoutEffect:ap,useMemo:dp,useReducer:Ad,useRef:sp,useState:function(){return Ad(Aa)},useDebugValue:Rd,useDeferredValue:function(n){var s=yn();return vt===null?s.memoizedState=n:hp(s,vt.memoizedState,n)},useTransition:function(){var n=Ad(Aa)[0],s=yn().memoizedState;return[n,s]},useMutableSource:Ym,useSyncExternalStore:Jm,useId:fp,unstable_isNewReconciler:!1};function Cn(n,s){if(n&&n.defaultProps){s=X({},s),n=n.defaultProps;for(var a in n)s[a]===void 0&&(s[a]=n[a]);return s}return s}function jd(n,s,a,d){s=n.memoizedState,a=a(d,s),a=a==null?s:X({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var mc={isMounted:function(n){return(n=n._reactInternals)?In(n)===n:!1},enqueueSetState:function(n,s,a){n=n._reactInternals;var d=qt(),f=ms(n),g=Cr(d,f);g.payload=s,a!=null&&(g.callback=a),s=us(n,g,f),s!==null&&(Pn(s,n,f,d),oc(s,n,f))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var d=qt(),f=ms(n),g=Cr(d,f);g.tag=1,g.payload=s,a!=null&&(g.callback=a),s=us(n,g,f),s!==null&&(Pn(s,n,f,d),oc(s,n,f))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=qt(),d=ms(n),f=Cr(a,d);f.tag=2,s!=null&&(f.callback=s),s=us(n,f,d),s!==null&&(Pn(s,n,d,a),oc(s,n,d))}};function yp(n,s,a,d,f,g,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(d,g,w):s.prototype&&s.prototype.isPureReactComponent?!ya(a,d)||!ya(f,g):!0}function vp(n,s,a){var d=!1,f=as,g=s.contextType;return typeof g=="object"&&g!==null?g=gn(g):(f=Wt(s)?ti:jt.current,d=s.contextTypes,g=(d=d!=null)?no(n,f):as),s=new s(a,g),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=mc,n.stateNode=s,s._reactInternals=n,d&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=f,n.__reactInternalMemoizedMaskedChildContext=g),s}function xp(n,s,a,d){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,d),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,d),s.state!==n&&mc.enqueueReplaceState(s,s.state,null)}function Dd(n,s,a,d){var f=n.stateNode;f.props=a,f.state=n.memoizedState,f.refs={},_d(n);var g=s.contextType;typeof g=="object"&&g!==null?f.context=gn(g):(g=Wt(s)?ti:jt.current,f.context=no(n,g)),f.state=n.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&(jd(n,s,g,a),f.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&mc.enqueueReplaceState(f,f.state,null),ac(n,a,f,d),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308)}function uo(n,s){try{var a="",d=s;do a+=he(d),d=d.return;while(d);var f=a}catch(g){f=`
Error generating stack: `+g.message+`
`+g.stack}return{value:n,source:s,stack:f,digest:null}}function Od(n,s,a){return{value:n,source:null,stack:a??null,digest:s??null}}function Vd(n,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var o_=typeof WeakMap=="function"?WeakMap:Map;function _p(n,s,a){a=Cr(-1,a),a.tag=3,a.payload={element:null};var d=s.value;return a.callback=function(){wc||(wc=!0,Jd=d),Vd(n,s)},a}function wp(n,s,a){a=Cr(-1,a),a.tag=3;var d=n.type.getDerivedStateFromError;if(typeof d=="function"){var f=s.value;a.payload=function(){return d(f)},a.callback=function(){Vd(n,s)}}var g=n.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){Vd(n,s),typeof d!="function"&&(hs===null?hs=new Set([this]):hs.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})}),a}function Ep(n,s,a){var d=n.pingCache;if(d===null){d=n.pingCache=new o_;var f=new Set;d.set(s,f)}else f=d.get(s),f===void 0&&(f=new Set,d.set(s,f));f.has(a)||(f.add(a),n=__.bind(null,n,s,a),s.then(n,n))}function bp(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function Ip(n,s,a,d,f){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=Cr(-1,1),s.tag=2,us(a,s,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=f,n)}var a_=ne.ReactCurrentOwner,Gt=!1;function $t(n,s,a,d){s.child=n===null?qm(s,null,a,d):oo(s,n.child,a,d)}function Tp(n,s,a,d,f){a=a.render;var g=s.ref;return lo(s,f),d=Sd(n,s,a,d,g,f),a=Cd(),n!==null&&!Gt?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,kr(n,s,f)):(tt&&a&&ud(s),s.flags|=1,$t(n,s,d,f),s.child)}function Np(n,s,a,d,f){if(n===null){var g=a.type;return typeof g=="function"&&!sh(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=g,Sp(n,s,g,d,f)):(n=Sc(a.type,null,d,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(g=n.child,(n.lanes&f)===0){var w=g.memoizedProps;if(a=a.compare,a=a!==null?a:ya,a(w,d)&&n.ref===s.ref)return kr(n,s,f)}return s.flags|=1,n=gs(g,d),n.ref=s.ref,n.return=s,s.child=n}function Sp(n,s,a,d,f){if(n!==null){var g=n.memoizedProps;if(ya(g,d)&&n.ref===s.ref)if(Gt=!1,s.pendingProps=d=g,(n.lanes&f)!==0)(n.flags&131072)!==0&&(Gt=!0);else return s.lanes=n.lanes,kr(n,s,f)}return Ld(n,s,a,d,f)}function Cp(n,s,a){var d=s.pendingProps,f=d.children,g=n!==null?n.memoizedState:null;if(d.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qe(fo,ln),ln|=a;else{if((a&1073741824)===0)return n=g!==null?g.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,Qe(fo,ln),ln|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=g!==null?g.baseLanes:a,Qe(fo,ln),ln|=d}else g!==null?(d=g.baseLanes|a,s.memoizedState=null):d=a,Qe(fo,ln),ln|=d;return $t(n,s,f,a),s.child}function kp(n,s){var a=s.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function Ld(n,s,a,d,f){var g=Wt(a)?ti:jt.current;return g=no(s,g),lo(s,f),a=Sd(n,s,a,d,g,f),d=Cd(),n!==null&&!Gt?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,kr(n,s,f)):(tt&&d&&ud(s),s.flags|=1,$t(n,s,a,f),s.child)}function Ap(n,s,a,d,f){if(Wt(a)){var g=!0;Xl(s)}else g=!1;if(lo(s,f),s.stateNode===null)gc(n,s),vp(s,a,d),Dd(s,a,d,f),d=!0;else if(n===null){var w=s.stateNode,C=s.memoizedProps;w.props=C;var j=w.context,W=a.contextType;typeof W=="object"&&W!==null?W=gn(W):(W=Wt(a)?ti:jt.current,W=no(s,W));var re=a.getDerivedStateFromProps,se=typeof re=="function"||typeof w.getSnapshotBeforeUpdate=="function";se||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(C!==d||j!==W)&&xp(s,w,d,W),cs=!1;var te=s.memoizedState;w.state=te,ac(s,d,w,f),j=s.memoizedState,C!==d||te!==j||Ht.current||cs?(typeof re=="function"&&(jd(s,a,re,d),j=s.memoizedState),(C=cs||yp(s,a,C,d,te,j,W))?(se||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=d,s.memoizedState=j),w.props=d,w.state=j,w.context=W,d=C):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),d=!1)}else{w=s.stateNode,Wm(n,s),C=s.memoizedProps,W=s.type===s.elementType?C:Cn(s.type,C),w.props=W,se=s.pendingProps,te=w.context,j=a.contextType,typeof j=="object"&&j!==null?j=gn(j):(j=Wt(a)?ti:jt.current,j=no(s,j));var fe=a.getDerivedStateFromProps;(re=typeof fe=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(C!==se||te!==j)&&xp(s,w,d,j),cs=!1,te=s.memoizedState,w.state=te,ac(s,d,w,f);var ye=s.memoizedState;C!==se||te!==ye||Ht.current||cs?(typeof fe=="function"&&(jd(s,a,fe,d),ye=s.memoizedState),(W=cs||yp(s,a,W,d,te,ye,j)||!1)?(re||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(d,ye,j),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(d,ye,j)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||C===n.memoizedProps&&te===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&te===n.memoizedState||(s.flags|=1024),s.memoizedProps=d,s.memoizedState=ye),w.props=d,w.state=ye,w.context=j,d=W):(typeof w.componentDidUpdate!="function"||C===n.memoizedProps&&te===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&te===n.memoizedState||(s.flags|=1024),d=!1)}return Fd(n,s,a,d,g,f)}function Fd(n,s,a,d,f,g){kp(n,s);var w=(s.flags&128)!==0;if(!d&&!w)return f&&Om(s,a,!1),kr(n,s,g);d=s.stateNode,a_.current=s;var C=w&&typeof a.getDerivedStateFromError!="function"?null:d.render();return s.flags|=1,n!==null&&w?(s.child=oo(s,n.child,null,g),s.child=oo(s,null,C,g)):$t(n,s,C,g),s.memoizedState=d.state,f&&Om(s,a,!0),s.child}function Pp(n){var s=n.stateNode;s.pendingContext?jm(n,s.pendingContext,s.pendingContext!==s.context):s.context&&jm(n,s.context,!1),wd(n,s.containerInfo)}function Rp(n,s,a,d,f){return io(),md(f),s.flags|=256,$t(n,s,a,d),s.child}var Md={dehydrated:null,treeContext:null,retryLane:0};function Ud(n){return{baseLanes:n,cachePool:null,transitions:null}}function jp(n,s,a){var d=s.pendingProps,f=nt.current,g=!1,w=(s.flags&128)!==0,C;if((C=w)||(C=n!==null&&n.memoizedState===null?!1:(f&2)!==0),C?(g=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(f|=1),Qe(nt,f&1),n===null)return fd(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(w=d.children,n=d.fallback,g?(d=s.mode,g=s.child,w={mode:"hidden",children:w},(d&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=w):g=Cc(w,d,0,null),n=di(n,d,a,null),g.return=s,n.return=s,g.sibling=n,s.child=g,s.child.memoizedState=Ud(a),s.memoizedState=Md,n):Bd(s,w));if(f=n.memoizedState,f!==null&&(C=f.dehydrated,C!==null))return l_(n,s,w,d,C,f,a);if(g){g=d.fallback,w=s.mode,f=n.child,C=f.sibling;var j={mode:"hidden",children:d.children};return(w&1)===0&&s.child!==f?(d=s.child,d.childLanes=0,d.pendingProps=j,s.deletions=null):(d=gs(f,j),d.subtreeFlags=f.subtreeFlags&14680064),C!==null?g=gs(C,g):(g=di(g,w,a,null),g.flags|=2),g.return=s,d.return=s,d.sibling=g,s.child=d,d=g,g=s.child,w=n.child.memoizedState,w=w===null?Ud(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},g.memoizedState=w,g.childLanes=n.childLanes&~a,s.memoizedState=Md,d}return g=n.child,n=g.sibling,d=gs(g,{mode:"visible",children:d.children}),(s.mode&1)===0&&(d.lanes=a),d.return=s,d.sibling=null,n!==null&&(a=s.deletions,a===null?(s.deletions=[n],s.flags|=16):a.push(n)),s.child=d,s.memoizedState=null,d}function Bd(n,s){return s=Cc({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function pc(n,s,a,d){return d!==null&&md(d),oo(s,n.child,null,a),n=Bd(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function l_(n,s,a,d,f,g,w){if(a)return s.flags&256?(s.flags&=-257,d=Od(Error(t(422))),pc(n,s,w,d)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(g=d.fallback,f=s.mode,d=Cc({mode:"visible",children:d.children},f,0,null),g=di(g,f,w,null),g.flags|=2,d.return=s,g.return=s,d.sibling=g,s.child=d,(s.mode&1)!==0&&oo(s,n.child,null,w),s.child.memoizedState=Ud(w),s.memoizedState=Md,g);if((s.mode&1)===0)return pc(n,s,w,null);if(f.data==="$!"){if(d=f.nextSibling&&f.nextSibling.dataset,d)var C=d.dgst;return d=C,g=Error(t(419)),d=Od(g,d,void 0),pc(n,s,w,d)}if(C=(w&n.childLanes)!==0,Gt||C){if(d=Et,d!==null){switch(w&-w){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(d.suspendedLanes|w))!==0?0:f,f!==0&&f!==g.retryLane&&(g.retryLane=f,Sr(n,f),Pn(d,n,f,-1))}return rh(),d=Od(Error(t(421))),pc(n,s,w,d)}return f.data==="$?"?(s.flags|=128,s.child=n.child,s=w_.bind(null,n),f._reactRetry=s,null):(n=g.treeContext,an=is(f.nextSibling),on=s,tt=!0,Sn=null,n!==null&&(mn[pn++]=Tr,mn[pn++]=Nr,mn[pn++]=ni,Tr=n.id,Nr=n.overflow,ni=s),s=Bd(s,d.children),s.flags|=4096,s)}function Dp(n,s,a){n.lanes|=s;var d=n.alternate;d!==null&&(d.lanes|=s),vd(n.return,s,a)}function zd(n,s,a,d,f){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:d,tail:a,tailMode:f}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=d,g.tail=a,g.tailMode=f)}function Op(n,s,a){var d=s.pendingProps,f=d.revealOrder,g=d.tail;if($t(n,s,d.children,a),d=nt.current,(d&2)!==0)d=d&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Dp(n,a,s);else if(n.tag===19)Dp(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}d&=1}if(Qe(nt,d),(s.mode&1)===0)s.memoizedState=null;else switch(f){case"forwards":for(a=s.child,f=null;a!==null;)n=a.alternate,n!==null&&lc(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),zd(s,!1,f,a,g);break;case"backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&lc(n)===null){s.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}zd(s,!0,a,null,g);break;case"together":zd(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function gc(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function kr(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),ai|=s.lanes,(a&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,a=gs(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=gs(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function c_(n,s,a){switch(s.tag){case 3:Pp(s),io();break;case 5:Qm(s);break;case 1:Wt(s.type)&&Xl(s);break;case 4:wd(s,s.stateNode.containerInfo);break;case 10:var d=s.type._context,f=s.memoizedProps.value;Qe(sc,d._currentValue),d._currentValue=f;break;case 13:if(d=s.memoizedState,d!==null)return d.dehydrated!==null?(Qe(nt,nt.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?jp(n,s,a):(Qe(nt,nt.current&1),n=kr(n,s,a),n!==null?n.sibling:null);Qe(nt,nt.current&1);break;case 19:if(d=(a&s.childLanes)!==0,(n.flags&128)!==0){if(d)return Op(n,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Qe(nt,nt.current),d)break;return null;case 22:case 23:return s.lanes=0,Cp(n,s,a)}return kr(n,s,a)}var Vp,$d,Lp,Fp;Vp=function(n,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},$d=function(){},Lp=function(n,s,a,d){var f=n.memoizedProps;if(f!==d){n=s.stateNode,ii(Zn.current);var g=null;switch(a){case"input":f=Ci(n,f),d=Ci(n,d),g=[];break;case"select":f=X({},f,{value:void 0}),d=X({},d,{value:void 0}),g=[];break;case"textarea":f=Wo(n,f),d=Wo(n,d),g=[];break;default:typeof f.onClick!="function"&&typeof d.onClick=="function"&&(n.onclick=Ql)}bn(a,d);var w;a=null;for(W in f)if(!d.hasOwnProperty(W)&&f.hasOwnProperty(W)&&f[W]!=null)if(W==="style"){var C=f[W];for(w in C)C.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else W!=="dangerouslySetInnerHTML"&&W!=="children"&&W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&W!=="autoFocus"&&(o.hasOwnProperty(W)?g||(g=[]):(g=g||[]).push(W,null));for(W in d){var j=d[W];if(C=f?.[W],d.hasOwnProperty(W)&&j!==C&&(j!=null||C!=null))if(W==="style")if(C){for(w in C)!C.hasOwnProperty(w)||j&&j.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in j)j.hasOwnProperty(w)&&C[w]!==j[w]&&(a||(a={}),a[w]=j[w])}else a||(g||(g=[]),g.push(W,a)),a=j;else W==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,C=C?C.__html:void 0,j!=null&&C!==j&&(g=g||[]).push(W,j)):W==="children"?typeof j!="string"&&typeof j!="number"||(g=g||[]).push(W,""+j):W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&(o.hasOwnProperty(W)?(j!=null&&W==="onScroll"&&Xe("scroll",n),g||C===j||(g=[])):(g=g||[]).push(W,j))}a&&(g=g||[]).push("style",a);var W=g;(s.updateQueue=W)&&(s.flags|=4)}},Fp=function(n,s,a,d){a!==d&&(s.flags|=4)};function Ra(n,s){if(!tt)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:d.sibling=null}}function Ot(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,d=0;if(s)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,d|=f.subtreeFlags&14680064,d|=f.flags&14680064,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,d|=f.subtreeFlags,d|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=d,n.childLanes=a,s}function u_(n,s,a){var d=s.pendingProps;switch(dd(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(s),null;case 1:return Wt(s.type)&&Jl(),Ot(s),null;case 3:return d=s.stateNode,co(),Ze(Ht),Ze(jt),Id(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(n===null||n.child===null)&&(nc(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Sn!==null&&(eh(Sn),Sn=null))),$d(n,s),Ot(s),null;case 5:Ed(s);var f=ii(Sa.current);if(a=s.type,n!==null&&s.stateNode!=null)Lp(n,s,a,d,f),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!d){if(s.stateNode===null)throw Error(t(166));return Ot(s),null}if(n=ii(Zn.current),nc(s)){d=s.stateNode,a=s.type;var g=s.memoizedProps;switch(d[Xn]=s,d[Ea]=g,n=(s.mode&1)!==0,a){case"dialog":Xe("cancel",d),Xe("close",d);break;case"iframe":case"object":case"embed":Xe("load",d);break;case"video":case"audio":for(f=0;f<xa.length;f++)Xe(xa[f],d);break;case"source":Xe("error",d);break;case"img":case"image":case"link":Xe("error",d),Xe("load",d);break;case"details":Xe("toggle",d);break;case"input":_l(d,g),Xe("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!g.multiple},Xe("invalid",d);break;case"textarea":Go(d,g),Xe("invalid",d)}bn(a,g),f=null;for(var w in g)if(g.hasOwnProperty(w)){var C=g[w];w==="children"?typeof C=="string"?d.textContent!==C&&(g.suppressHydrationWarning!==!0&&Kl(d.textContent,C,n),f=["children",C]):typeof C=="number"&&d.textContent!==""+C&&(g.suppressHydrationWarning!==!0&&Kl(d.textContent,C,n),f=["children",""+C]):o.hasOwnProperty(w)&&C!=null&&w==="onScroll"&&Xe("scroll",d)}switch(a){case"input":Si(d),Ho(d,g,!0);break;case"textarea":Si(d),$r(d);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(d.onclick=Ql)}d=f,s.updateQueue=d,d!==null&&(s.flags|=4)}else{w=f.nodeType===9?f:f.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Ko(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=w.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof d.is=="string"?n=w.createElement(a,{is:d.is}):(n=w.createElement(a),a==="select"&&(w=n,d.multiple?w.multiple=!0:d.size&&(w.size=d.size))):n=w.createElementNS(n,a),n[Xn]=s,n[Ea]=d,Vp(n,s,!1,!1),s.stateNode=n;e:{switch(w=Ri(a,d),a){case"dialog":Xe("cancel",n),Xe("close",n),f=d;break;case"iframe":case"object":case"embed":Xe("load",n),f=d;break;case"video":case"audio":for(f=0;f<xa.length;f++)Xe(xa[f],n);f=d;break;case"source":Xe("error",n),f=d;break;case"img":case"image":case"link":Xe("error",n),Xe("load",n),f=d;break;case"details":Xe("toggle",n),f=d;break;case"input":_l(n,d),f=Ci(n,d),Xe("invalid",n);break;case"option":f=d;break;case"select":n._wrapperState={wasMultiple:!!d.multiple},f=X({},d,{value:void 0}),Xe("invalid",n);break;case"textarea":Go(n,d),f=Wo(n,d),Xe("invalid",n);break;default:f=d}bn(a,f),C=f;for(g in C)if(C.hasOwnProperty(g)){var j=C[g];g==="style"?Pi(n,j):g==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,j!=null&&El(n,j)):g==="children"?typeof j=="string"?(a!=="textarea"||j!=="")&&Us(n,j):typeof j=="number"&&Us(n,""+j):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?j!=null&&g==="onScroll"&&Xe("scroll",n):j!=null&&Y(n,g,j,w))}switch(a){case"input":Si(n),Ho(n,d,!1);break;case"textarea":Si(n),$r(n);break;case"option":d.value!=null&&n.setAttribute("value",""+Be(d.value));break;case"select":n.multiple=!!d.multiple,g=d.value,g!=null?En(n,!!d.multiple,g,!1):d.defaultValue!=null&&En(n,!!d.multiple,d.defaultValue,!0);break;default:typeof f.onClick=="function"&&(n.onclick=Ql)}switch(a){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Ot(s),null;case 6:if(n&&s.stateNode!=null)Fp(n,s,n.memoizedProps,d);else{if(typeof d!="string"&&s.stateNode===null)throw Error(t(166));if(a=ii(Sa.current),ii(Zn.current),nc(s)){if(d=s.stateNode,a=s.memoizedProps,d[Xn]=s,(g=d.nodeValue!==a)&&(n=on,n!==null))switch(n.tag){case 3:Kl(d.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Kl(d.nodeValue,a,(n.mode&1)!==0)}g&&(s.flags|=4)}else d=(a.nodeType===9?a:a.ownerDocument).createTextNode(d),d[Xn]=s,s.stateNode=d}return Ot(s),null;case 13:if(Ze(nt),d=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(tt&&an!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Bm(),io(),s.flags|=98560,g=!1;else if(g=nc(s),d!==null&&d.dehydrated!==null){if(n===null){if(!g)throw Error(t(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[Xn]=s}else io(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ot(s),g=!1}else Sn!==null&&(eh(Sn),Sn=null),g=!0;if(!g)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(d=d!==null,d!==(n!==null&&n.memoizedState!==null)&&d&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(nt.current&1)!==0?xt===0&&(xt=3):rh())),s.updateQueue!==null&&(s.flags|=4),Ot(s),null);case 4:return co(),$d(n,s),n===null&&_a(s.stateNode.containerInfo),Ot(s),null;case 10:return yd(s.type._context),Ot(s),null;case 17:return Wt(s.type)&&Jl(),Ot(s),null;case 19:if(Ze(nt),g=s.memoizedState,g===null)return Ot(s),null;if(d=(s.flags&128)!==0,w=g.rendering,w===null)if(d)Ra(g,!1);else{if(xt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(w=lc(n),w!==null){for(s.flags|=128,Ra(g,!1),d=w.updateQueue,d!==null&&(s.updateQueue=d,s.flags|=4),s.subtreeFlags=0,d=a,a=s.child;a!==null;)g=a,n=d,g.flags&=14680066,w=g.alternate,w===null?(g.childLanes=0,g.lanes=n,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=w.childLanes,g.lanes=w.lanes,g.child=w.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=w.memoizedProps,g.memoizedState=w.memoizedState,g.updateQueue=w.updateQueue,g.type=w.type,n=w.dependencies,g.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Qe(nt,nt.current&1|2),s.child}n=n.sibling}g.tail!==null&&Je()>mo&&(s.flags|=128,d=!0,Ra(g,!1),s.lanes=4194304)}else{if(!d)if(n=lc(w),n!==null){if(s.flags|=128,d=!0,a=n.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),Ra(g,!0),g.tail===null&&g.tailMode==="hidden"&&!w.alternate&&!tt)return Ot(s),null}else 2*Je()-g.renderingStartTime>mo&&a!==1073741824&&(s.flags|=128,d=!0,Ra(g,!1),s.lanes=4194304);g.isBackwards?(w.sibling=s.child,s.child=w):(a=g.last,a!==null?a.sibling=w:s.child=w,g.last=w)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=Je(),s.sibling=null,a=nt.current,Qe(nt,d?a&1|2:a&1),s):(Ot(s),null);case 22:case 23:return nh(),d=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==d&&(s.flags|=8192),d&&(s.mode&1)!==0?(ln&1073741824)!==0&&(Ot(s),s.subtreeFlags&6&&(s.flags|=8192)):Ot(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function d_(n,s){switch(dd(s),s.tag){case 1:return Wt(s.type)&&Jl(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return co(),Ze(Ht),Ze(jt),Id(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return Ed(s),null;case 13:if(Ze(nt),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));io()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return Ze(nt),null;case 4:return co(),null;case 10:return yd(s.type._context),null;case 22:case 23:return nh(),null;case 24:return null;default:return null}}var yc=!1,Vt=!1,h_=typeof WeakSet=="function"?WeakSet:Set,pe=null;function ho(n,s){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(d){ot(n,s,d)}else a.current=null}function qd(n,s,a){try{a()}catch(d){ot(n,s,d)}}var Mp=!1;function f_(n,s){if(nd=_r,n=ym(),Ku(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var d=a.getSelection&&a.getSelection();if(d&&d.rangeCount!==0){a=d.anchorNode;var f=d.anchorOffset,g=d.focusNode;d=d.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var w=0,C=-1,j=-1,W=0,re=0,se=n,te=null;t:for(;;){for(var fe;se!==a||f!==0&&se.nodeType!==3||(C=w+f),se!==g||d!==0&&se.nodeType!==3||(j=w+d),se.nodeType===3&&(w+=se.nodeValue.length),(fe=se.firstChild)!==null;)te=se,se=fe;for(;;){if(se===n)break t;if(te===a&&++W===f&&(C=w),te===g&&++re===d&&(j=w),(fe=se.nextSibling)!==null)break;se=te,te=se.parentNode}se=fe}a=C===-1||j===-1?null:{start:C,end:j}}else a=null}a=a||{start:0,end:0}}else a=null;for(rd={focusedElem:n,selectionRange:a},_r=!1,pe=s;pe!==null;)if(s=pe,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,pe=n;else for(;pe!==null;){s=pe;try{var ye=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(ye!==null){var ve=ye.memoizedProps,ct=ye.memoizedState,z=s.stateNode,V=z.getSnapshotBeforeUpdate(s.elementType===s.type?ve:Cn(s.type,ve),ct);z.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var H=s.stateNode.containerInfo;H.nodeType===1?H.textContent="":H.nodeType===9&&H.documentElement&&H.removeChild(H.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(oe){ot(s,s.return,oe)}if(n=s.sibling,n!==null){n.return=s.return,pe=n;break}pe=s.return}return ye=Mp,Mp=!1,ye}function ja(n,s,a){var d=s.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var f=d=d.next;do{if((f.tag&n)===n){var g=f.destroy;f.destroy=void 0,g!==void 0&&qd(s,a,g)}f=f.next}while(f!==d)}}function vc(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&n)===n){var d=a.create;a.destroy=d()}a=a.next}while(a!==s)}}function Hd(n){var s=n.ref;if(s!==null){var a=n.stateNode;n.tag,n=a,typeof s=="function"?s(n):s.current=n}}function Up(n){var s=n.alternate;s!==null&&(n.alternate=null,Up(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[Xn],delete s[Ea],delete s[ad],delete s[Qx],delete s[Yx])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Bp(n){return n.tag===5||n.tag===3||n.tag===4}function zp(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Bp(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Wd(n,s,a){var d=n.tag;if(d===5||d===6)n=n.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(n,s):a.insertBefore(n,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(n,a)):(s=a,s.appendChild(n)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Ql));else if(d!==4&&(n=n.child,n!==null))for(Wd(n,s,a),n=n.sibling;n!==null;)Wd(n,s,a),n=n.sibling}function Gd(n,s,a){var d=n.tag;if(d===5||d===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(d!==4&&(n=n.child,n!==null))for(Gd(n,s,a),n=n.sibling;n!==null;)Gd(n,s,a),n=n.sibling}var St=null,kn=!1;function ds(n,s,a){for(a=a.child;a!==null;)$p(n,s,a),a=a.sibling}function $p(n,s,a){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(Hs,a)}catch{}switch(a.tag){case 5:Vt||ho(a,s);case 6:var d=St,f=kn;St=null,ds(n,s,a),St=d,kn=f,St!==null&&(kn?(n=St,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):St.removeChild(a.stateNode));break;case 18:St!==null&&(kn?(n=St,a=a.stateNode,n.nodeType===8?od(n.parentNode,a):n.nodeType===1&&od(n,a),ts(n)):od(St,a.stateNode));break;case 4:d=St,f=kn,St=a.stateNode.containerInfo,kn=!0,ds(n,s,a),St=d,kn=f;break;case 0:case 11:case 14:case 15:if(!Vt&&(d=a.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){f=d=d.next;do{var g=f,w=g.destroy;g=g.tag,w!==void 0&&((g&2)!==0||(g&4)!==0)&&qd(a,s,w),f=f.next}while(f!==d)}ds(n,s,a);break;case 1:if(!Vt&&(ho(a,s),d=a.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=a.memoizedProps,d.state=a.memoizedState,d.componentWillUnmount()}catch(C){ot(a,s,C)}ds(n,s,a);break;case 21:ds(n,s,a);break;case 22:a.mode&1?(Vt=(d=Vt)||a.memoizedState!==null,ds(n,s,a),Vt=d):ds(n,s,a);break;default:ds(n,s,a)}}function qp(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new h_),s.forEach(function(d){var f=E_.bind(null,n,d);a.has(d)||(a.add(d),d.then(f,f))})}}function An(n,s){var a=s.deletions;if(a!==null)for(var d=0;d<a.length;d++){var f=a[d];try{var g=n,w=s,C=w;e:for(;C!==null;){switch(C.tag){case 5:St=C.stateNode,kn=!1;break e;case 3:St=C.stateNode.containerInfo,kn=!0;break e;case 4:St=C.stateNode.containerInfo,kn=!0;break e}C=C.return}if(St===null)throw Error(t(160));$p(g,w,f),St=null,kn=!1;var j=f.alternate;j!==null&&(j.return=null),f.return=null}catch(W){ot(f,s,W)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Hp(s,n),s=s.sibling}function Hp(n,s){var a=n.alternate,d=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(An(s,n),tr(n),d&4){try{ja(3,n,n.return),vc(3,n)}catch(ve){ot(n,n.return,ve)}try{ja(5,n,n.return)}catch(ve){ot(n,n.return,ve)}}break;case 1:An(s,n),tr(n),d&512&&a!==null&&ho(a,a.return);break;case 5:if(An(s,n),tr(n),d&512&&a!==null&&ho(a,a.return),n.flags&32){var f=n.stateNode;try{Us(f,"")}catch(ve){ot(n,n.return,ve)}}if(d&4&&(f=n.stateNode,f!=null)){var g=n.memoizedProps,w=a!==null?a.memoizedProps:g,C=n.type,j=n.updateQueue;if(n.updateQueue=null,j!==null)try{C==="input"&&g.type==="radio"&&g.name!=null&&ki(f,g),Ri(C,w);var W=Ri(C,g);for(w=0;w<j.length;w+=2){var re=j[w],se=j[w+1];re==="style"?Pi(f,se):re==="dangerouslySetInnerHTML"?El(f,se):re==="children"?Us(f,se):Y(f,re,se,W)}switch(C){case"input":Ms(f,g);break;case"textarea":wl(f,g);break;case"select":var te=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!g.multiple;var fe=g.value;fe!=null?En(f,!!g.multiple,fe,!1):te!==!!g.multiple&&(g.defaultValue!=null?En(f,!!g.multiple,g.defaultValue,!0):En(f,!!g.multiple,g.multiple?[]:"",!1))}f[Ea]=g}catch(ve){ot(n,n.return,ve)}}break;case 6:if(An(s,n),tr(n),d&4){if(n.stateNode===null)throw Error(t(162));f=n.stateNode,g=n.memoizedProps;try{f.nodeValue=g}catch(ve){ot(n,n.return,ve)}}break;case 3:if(An(s,n),tr(n),d&4&&a!==null&&a.memoizedState.isDehydrated)try{ts(s.containerInfo)}catch(ve){ot(n,n.return,ve)}break;case 4:An(s,n),tr(n);break;case 13:An(s,n),tr(n),f=n.child,f.flags&8192&&(g=f.memoizedState!==null,f.stateNode.isHidden=g,!g||f.alternate!==null&&f.alternate.memoizedState!==null||(Yd=Je())),d&4&&qp(n);break;case 22:if(re=a!==null&&a.memoizedState!==null,n.mode&1?(Vt=(W=Vt)||re,An(s,n),Vt=W):An(s,n),tr(n),d&8192){if(W=n.memoizedState!==null,(n.stateNode.isHidden=W)&&!re&&(n.mode&1)!==0)for(pe=n,re=n.child;re!==null;){for(se=pe=re;pe!==null;){switch(te=pe,fe=te.child,te.tag){case 0:case 11:case 14:case 15:ja(4,te,te.return);break;case 1:ho(te,te.return);var ye=te.stateNode;if(typeof ye.componentWillUnmount=="function"){d=te,a=te.return;try{s=d,ye.props=s.memoizedProps,ye.state=s.memoizedState,ye.componentWillUnmount()}catch(ve){ot(d,a,ve)}}break;case 5:ho(te,te.return);break;case 22:if(te.memoizedState!==null){Kp(se);continue}}fe!==null?(fe.return=te,pe=fe):Kp(se)}re=re.sibling}e:for(re=null,se=n;;){if(se.tag===5){if(re===null){re=se;try{f=se.stateNode,W?(g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(C=se.stateNode,j=se.memoizedProps.style,w=j!=null&&j.hasOwnProperty("display")?j.display:null,C.style.display=Wr("display",w))}catch(ve){ot(n,n.return,ve)}}}else if(se.tag===6){if(re===null)try{se.stateNode.nodeValue=W?"":se.memoizedProps}catch(ve){ot(n,n.return,ve)}}else if((se.tag!==22&&se.tag!==23||se.memoizedState===null||se===n)&&se.child!==null){se.child.return=se,se=se.child;continue}if(se===n)break e;for(;se.sibling===null;){if(se.return===null||se.return===n)break e;re===se&&(re=null),se=se.return}re===se&&(re=null),se.sibling.return=se.return,se=se.sibling}}break;case 19:An(s,n),tr(n),d&4&&qp(n);break;case 21:break;default:An(s,n),tr(n)}}function tr(n){var s=n.flags;if(s&2){try{e:{for(var a=n.return;a!==null;){if(Bp(a)){var d=a;break e}a=a.return}throw Error(t(160))}switch(d.tag){case 5:var f=d.stateNode;d.flags&32&&(Us(f,""),d.flags&=-33);var g=zp(n);Gd(n,g,f);break;case 3:case 4:var w=d.stateNode.containerInfo,C=zp(n);Wd(n,C,w);break;default:throw Error(t(161))}}catch(j){ot(n,n.return,j)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function m_(n,s,a){pe=n,Wp(n)}function Wp(n,s,a){for(var d=(n.mode&1)!==0;pe!==null;){var f=pe,g=f.child;if(f.tag===22&&d){var w=f.memoizedState!==null||yc;if(!w){var C=f.alternate,j=C!==null&&C.memoizedState!==null||Vt;C=yc;var W=Vt;if(yc=w,(Vt=j)&&!W)for(pe=f;pe!==null;)w=pe,j=w.child,w.tag===22&&w.memoizedState!==null?Qp(f):j!==null?(j.return=w,pe=j):Qp(f);for(;g!==null;)pe=g,Wp(g),g=g.sibling;pe=f,yc=C,Vt=W}Gp(n)}else(f.subtreeFlags&8772)!==0&&g!==null?(g.return=f,pe=g):Gp(n)}}function Gp(n){for(;pe!==null;){var s=pe;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Vt||vc(5,s);break;case 1:var d=s.stateNode;if(s.flags&4&&!Vt)if(a===null)d.componentDidMount();else{var f=s.elementType===s.type?a.memoizedProps:Cn(s.type,a.memoizedProps);d.componentDidUpdate(f,a.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var g=s.updateQueue;g!==null&&Km(s,g,d);break;case 3:var w=s.updateQueue;if(w!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}Km(s,w,a)}break;case 5:var C=s.stateNode;if(a===null&&s.flags&4){a=C;var j=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":j.autoFocus&&a.focus();break;case"img":j.src&&(a.src=j.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var W=s.alternate;if(W!==null){var re=W.memoizedState;if(re!==null){var se=re.dehydrated;se!==null&&ts(se)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Vt||s.flags&512&&Hd(s)}catch(te){ot(s,s.return,te)}}if(s===n){pe=null;break}if(a=s.sibling,a!==null){a.return=s.return,pe=a;break}pe=s.return}}function Kp(n){for(;pe!==null;){var s=pe;if(s===n){pe=null;break}var a=s.sibling;if(a!==null){a.return=s.return,pe=a;break}pe=s.return}}function Qp(n){for(;pe!==null;){var s=pe;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{vc(4,s)}catch(j){ot(s,a,j)}break;case 1:var d=s.stateNode;if(typeof d.componentDidMount=="function"){var f=s.return;try{d.componentDidMount()}catch(j){ot(s,f,j)}}var g=s.return;try{Hd(s)}catch(j){ot(s,g,j)}break;case 5:var w=s.return;try{Hd(s)}catch(j){ot(s,w,j)}}}catch(j){ot(s,s.return,j)}if(s===n){pe=null;break}var C=s.sibling;if(C!==null){C.return=s.return,pe=C;break}pe=s.return}}var p_=Math.ceil,xc=ne.ReactCurrentDispatcher,Kd=ne.ReactCurrentOwner,vn=ne.ReactCurrentBatchConfig,ze=0,Et=null,ft=null,Ct=0,ln=0,fo=os(0),xt=0,Da=null,ai=0,_c=0,Qd=0,Oa=null,Kt=null,Yd=0,mo=1/0,Ar=null,wc=!1,Jd=null,hs=null,Ec=!1,fs=null,bc=0,Va=0,Xd=null,Ic=-1,Tc=0;function qt(){return(ze&6)!==0?Je():Ic!==-1?Ic:Ic=Je()}function ms(n){return(n.mode&1)===0?1:(ze&2)!==0&&Ct!==0?Ct&-Ct:Xx.transition!==null?(Tc===0&&(Tc=ra()),Tc):(n=Fe,n!==0||(n=window.event,n=n===void 0?16:zi(n.type)),n)}function Pn(n,s,a,d){if(50<Va)throw Va=0,Xd=null,Error(t(185));Qs(n,a,d),((ze&2)===0||n!==Et)&&(n===Et&&((ze&2)===0&&(_c|=a),xt===4&&ps(n,Ct)),Qt(n,d),a===1&&ze===0&&(s.mode&1)===0&&(mo=Je()+500,Zl&&ls()))}function Qt(n,s){var a=n.callbackNode;Ks(n,s);var d=yr(n,n===Et?Ct:0);if(d===0)a!==null&&Oi(a),n.callbackNode=null,n.callbackPriority=0;else if(s=d&-d,n.callbackPriority!==s){if(a!=null&&Oi(a),s===1)n.tag===0?Jx(Jp.bind(null,n)):Vm(Jp.bind(null,n)),Gx(function(){(ze&6)===0&&ls()}),a=null;else{switch(zn(d)){case 1:a=Vi;break;case 4:a=ea;break;case 16:a=qs;break;case 536870912:a=Li;break;default:a=qs}a=ig(a,Yp.bind(null,n))}n.callbackPriority=s,n.callbackNode=a}}function Yp(n,s){if(Ic=-1,Tc=0,(ze&6)!==0)throw Error(t(327));var a=n.callbackNode;if(po()&&n.callbackNode!==a)return null;var d=yr(n,n===Et?Ct:0);if(d===0)return null;if((d&30)!==0||(d&n.expiredLanes)!==0||s)s=Nc(n,d);else{s=d;var f=ze;ze|=2;var g=Zp();(Et!==n||Ct!==s)&&(Ar=null,mo=Je()+500,ci(n,s));do try{v_();break}catch(C){Xp(n,C)}while(!0);gd(),xc.current=g,ze=f,ft!==null?s=0:(Et=null,Ct=0,s=xt)}if(s!==0){if(s===2&&(f=na(n),f!==0&&(d=f,s=Zd(n,f))),s===1)throw a=Da,ci(n,0),ps(n,d),Qt(n,Je()),a;if(s===6)ps(n,d);else{if(f=n.current.alternate,(d&30)===0&&!g_(f)&&(s=Nc(n,d),s===2&&(g=na(n),g!==0&&(d=g,s=Zd(n,g))),s===1))throw a=Da,ci(n,0),ps(n,d),Qt(n,Je()),a;switch(n.finishedWork=f,n.finishedLanes=d,s){case 0:case 1:throw Error(t(345));case 2:ui(n,Kt,Ar);break;case 3:if(ps(n,d),(d&130023424)===d&&(s=Yd+500-Je(),10<s)){if(yr(n,0)!==0)break;if(f=n.suspendedLanes,(f&d)!==d){qt(),n.pingedLanes|=n.suspendedLanes&f;break}n.timeoutHandle=id(ui.bind(null,n,Kt,Ar),s);break}ui(n,Kt,Ar);break;case 4:if(ps(n,d),(d&4194240)===d)break;for(s=n.eventTimes,f=-1;0<d;){var w=31-en(d);g=1<<w,w=s[w],w>f&&(f=w),d&=~g}if(d=f,d=Je()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*p_(d/1960))-d,10<d){n.timeoutHandle=id(ui.bind(null,n,Kt,Ar),d);break}ui(n,Kt,Ar);break;case 5:ui(n,Kt,Ar);break;default:throw Error(t(329))}}}return Qt(n,Je()),n.callbackNode===a?Yp.bind(null,n):null}function Zd(n,s){var a=Oa;return n.current.memoizedState.isDehydrated&&(ci(n,s).flags|=256),n=Nc(n,s),n!==2&&(s=Kt,Kt=a,s!==null&&eh(s)),n}function eh(n){Kt===null?Kt=n:Kt.push.apply(Kt,n)}function g_(n){for(var s=n;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var d=0;d<a.length;d++){var f=a[d],g=f.getSnapshot;f=f.value;try{if(!Nn(g(),f))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ps(n,s){for(s&=~Qd,s&=~_c,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var a=31-en(s),d=1<<a;n[a]=-1,s&=~d}}function Jp(n){if((ze&6)!==0)throw Error(t(327));po();var s=yr(n,0);if((s&1)===0)return Qt(n,Je()),null;var a=Nc(n,s);if(n.tag!==0&&a===2){var d=na(n);d!==0&&(s=d,a=Zd(n,d))}if(a===1)throw a=Da,ci(n,0),ps(n,s),Qt(n,Je()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,ui(n,Kt,Ar),Qt(n,Je()),null}function th(n,s){var a=ze;ze|=1;try{return n(s)}finally{ze=a,ze===0&&(mo=Je()+500,Zl&&ls())}}function li(n){fs!==null&&fs.tag===0&&(ze&6)===0&&po();var s=ze;ze|=1;var a=vn.transition,d=Fe;try{if(vn.transition=null,Fe=1,n)return n()}finally{Fe=d,vn.transition=a,ze=s,(ze&6)===0&&ls()}}function nh(){ln=fo.current,Ze(fo)}function ci(n,s){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,Wx(a)),ft!==null)for(a=ft.return;a!==null;){var d=a;switch(dd(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&Jl();break;case 3:co(),Ze(Ht),Ze(jt),Id();break;case 5:Ed(d);break;case 4:co();break;case 13:Ze(nt);break;case 19:Ze(nt);break;case 10:yd(d.type._context);break;case 22:case 23:nh()}a=a.return}if(Et=n,ft=n=gs(n.current,null),Ct=ln=s,xt=0,Da=null,Qd=_c=ai=0,Kt=Oa=null,si!==null){for(s=0;s<si.length;s++)if(a=si[s],d=a.interleaved,d!==null){a.interleaved=null;var f=d.next,g=a.pending;if(g!==null){var w=g.next;g.next=f,d.next=w}a.pending=d}si=null}return n}function Xp(n,s){do{var a=ft;try{if(gd(),cc.current=fc,uc){for(var d=rt.memoizedState;d!==null;){var f=d.queue;f!==null&&(f.pending=null),d=d.next}uc=!1}if(oi=0,wt=vt=rt=null,Ca=!1,ka=0,Kd.current=null,a===null||a.return===null){xt=1,Da=s,ft=null;break}e:{var g=n,w=a.return,C=a,j=s;if(s=Ct,C.flags|=32768,j!==null&&typeof j=="object"&&typeof j.then=="function"){var W=j,re=C,se=re.tag;if((re.mode&1)===0&&(se===0||se===11||se===15)){var te=re.alternate;te?(re.updateQueue=te.updateQueue,re.memoizedState=te.memoizedState,re.lanes=te.lanes):(re.updateQueue=null,re.memoizedState=null)}var fe=bp(w);if(fe!==null){fe.flags&=-257,Ip(fe,w,C,g,s),fe.mode&1&&Ep(g,W,s),s=fe,j=W;var ye=s.updateQueue;if(ye===null){var ve=new Set;ve.add(j),s.updateQueue=ve}else ye.add(j);break e}else{if((s&1)===0){Ep(g,W,s),rh();break e}j=Error(t(426))}}else if(tt&&C.mode&1){var ct=bp(w);if(ct!==null){(ct.flags&65536)===0&&(ct.flags|=256),Ip(ct,w,C,g,s),md(uo(j,C));break e}}g=j=uo(j,C),xt!==4&&(xt=2),Oa===null?Oa=[g]:Oa.push(g),g=w;do{switch(g.tag){case 3:g.flags|=65536,s&=-s,g.lanes|=s;var z=_p(g,j,s);Gm(g,z);break e;case 1:C=j;var V=g.type,H=g.stateNode;if((g.flags&128)===0&&(typeof V.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(hs===null||!hs.has(H)))){g.flags|=65536,s&=-s,g.lanes|=s;var oe=wp(g,C,s);Gm(g,oe);break e}}g=g.return}while(g!==null)}tg(a)}catch(xe){s=xe,ft===a&&a!==null&&(ft=a=a.return);continue}break}while(!0)}function Zp(){var n=xc.current;return xc.current=fc,n===null?fc:n}function rh(){(xt===0||xt===3||xt===2)&&(xt=4),Et===null||(ai&268435455)===0&&(_c&268435455)===0||ps(Et,Ct)}function Nc(n,s){var a=ze;ze|=2;var d=Zp();(Et!==n||Ct!==s)&&(Ar=null,ci(n,s));do try{y_();break}catch(f){Xp(n,f)}while(!0);if(gd(),ze=a,xc.current=d,ft!==null)throw Error(t(261));return Et=null,Ct=0,xt}function y_(){for(;ft!==null;)eg(ft)}function v_(){for(;ft!==null&&!$s();)eg(ft)}function eg(n){var s=sg(n.alternate,n,ln);n.memoizedProps=n.pendingProps,s===null?tg(n):ft=s,Kd.current=null}function tg(n){var s=n;do{var a=s.alternate;if(n=s.return,(s.flags&32768)===0){if(a=u_(a,s,ln),a!==null){ft=a;return}}else{if(a=d_(a,s),a!==null){a.flags&=32767,ft=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{xt=6,ft=null;return}}if(s=s.sibling,s!==null){ft=s;return}ft=s=n}while(s!==null);xt===0&&(xt=5)}function ui(n,s,a){var d=Fe,f=vn.transition;try{vn.transition=null,Fe=1,x_(n,s,a,d)}finally{vn.transition=f,Fe=d}return null}function x_(n,s,a,d){do po();while(fs!==null);if((ze&6)!==0)throw Error(t(327));a=n.finishedWork;var f=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var g=a.lanes|a.childLanes;if($u(n,g),n===Et&&(ft=Et=null,Ct=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Ec||(Ec=!0,ig(qs,function(){return po(),null})),g=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||g){g=vn.transition,vn.transition=null;var w=Fe;Fe=1;var C=ze;ze|=4,Kd.current=null,f_(n,a),Hp(a,n),Mx(rd),_r=!!nd,rd=nd=null,n.current=a,m_(a),gr(),ze=C,Fe=w,vn.transition=g}else n.current=a;if(Ec&&(Ec=!1,fs=n,bc=f),g=n.pendingLanes,g===0&&(hs=null),jl(a.stateNode),Qt(n,Je()),s!==null)for(d=n.onRecoverableError,a=0;a<s.length;a++)f=s[a],d(f.value,{componentStack:f.stack,digest:f.digest});if(wc)throw wc=!1,n=Jd,Jd=null,n;return(bc&1)!==0&&n.tag!==0&&po(),g=n.pendingLanes,(g&1)!==0?n===Xd?Va++:(Va=0,Xd=n):Va=0,ls(),null}function po(){if(fs!==null){var n=zn(bc),s=vn.transition,a=Fe;try{if(vn.transition=null,Fe=16>n?16:n,fs===null)var d=!1;else{if(n=fs,fs=null,bc=0,(ze&6)!==0)throw Error(t(331));var f=ze;for(ze|=4,pe=n.current;pe!==null;){var g=pe,w=g.child;if((pe.flags&16)!==0){var C=g.deletions;if(C!==null){for(var j=0;j<C.length;j++){var W=C[j];for(pe=W;pe!==null;){var re=pe;switch(re.tag){case 0:case 11:case 15:ja(8,re,g)}var se=re.child;if(se!==null)se.return=re,pe=se;else for(;pe!==null;){re=pe;var te=re.sibling,fe=re.return;if(Up(re),re===W){pe=null;break}if(te!==null){te.return=fe,pe=te;break}pe=fe}}}var ye=g.alternate;if(ye!==null){var ve=ye.child;if(ve!==null){ye.child=null;do{var ct=ve.sibling;ve.sibling=null,ve=ct}while(ve!==null)}}pe=g}}if((g.subtreeFlags&2064)!==0&&w!==null)w.return=g,pe=w;else e:for(;pe!==null;){if(g=pe,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:ja(9,g,g.return)}var z=g.sibling;if(z!==null){z.return=g.return,pe=z;break e}pe=g.return}}var V=n.current;for(pe=V;pe!==null;){w=pe;var H=w.child;if((w.subtreeFlags&2064)!==0&&H!==null)H.return=w,pe=H;else e:for(w=V;pe!==null;){if(C=pe,(C.flags&2048)!==0)try{switch(C.tag){case 0:case 11:case 15:vc(9,C)}}catch(xe){ot(C,C.return,xe)}if(C===w){pe=null;break e}var oe=C.sibling;if(oe!==null){oe.return=C.return,pe=oe;break e}pe=C.return}}if(ze=f,ls(),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(Hs,n)}catch{}d=!0}return d}finally{Fe=a,vn.transition=s}}return!1}function ng(n,s,a){s=uo(a,s),s=_p(n,s,1),n=us(n,s,1),s=qt(),n!==null&&(Qs(n,1,s),Qt(n,s))}function ot(n,s,a){if(n.tag===3)ng(n,n,a);else for(;s!==null;){if(s.tag===3){ng(s,n,a);break}else if(s.tag===1){var d=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(hs===null||!hs.has(d))){n=uo(a,n),n=wp(s,n,1),s=us(s,n,1),n=qt(),s!==null&&(Qs(s,1,n),Qt(s,n));break}}s=s.return}}function __(n,s,a){var d=n.pingCache;d!==null&&d.delete(s),s=qt(),n.pingedLanes|=n.suspendedLanes&a,Et===n&&(Ct&a)===a&&(xt===4||xt===3&&(Ct&130023424)===Ct&&500>Je()-Yd?ci(n,0):Qd|=a),Qt(n,s)}function rg(n,s){s===0&&((n.mode&1)===0?s=1:(s=Xr,Xr<<=1,(Xr&130023424)===0&&(Xr=4194304)));var a=qt();n=Sr(n,s),n!==null&&(Qs(n,s,a),Qt(n,a))}function w_(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),rg(n,a)}function E_(n,s){var a=0;switch(n.tag){case 13:var d=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:d=n.stateNode;break;default:throw Error(t(314))}d!==null&&d.delete(s),rg(n,a)}var sg;sg=function(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps||Ht.current)Gt=!0;else{if((n.lanes&a)===0&&(s.flags&128)===0)return Gt=!1,c_(n,s,a);Gt=(n.flags&131072)!==0}else Gt=!1,tt&&(s.flags&1048576)!==0&&Lm(s,tc,s.index);switch(s.lanes=0,s.tag){case 2:var d=s.type;gc(n,s),n=s.pendingProps;var f=no(s,jt.current);lo(s,a),f=Sd(null,s,d,n,f,a);var g=Cd();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Wt(d)?(g=!0,Xl(s)):g=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,_d(s),f.updater=mc,s.stateNode=f,f._reactInternals=s,Dd(s,d,n,a),s=Fd(null,s,d,!0,g,a)):(s.tag=0,tt&&g&&ud(s),$t(null,s,f,a),s=s.child),s;case 16:d=s.elementType;e:{switch(gc(n,s),n=s.pendingProps,f=d._init,d=f(d._payload),s.type=d,f=s.tag=I_(d),n=Cn(d,n),f){case 0:s=Ld(null,s,d,n,a);break e;case 1:s=Ap(null,s,d,n,a);break e;case 11:s=Tp(null,s,d,n,a);break e;case 14:s=Np(null,s,d,Cn(d.type,n),a);break e}throw Error(t(306,d,""))}return s;case 0:return d=s.type,f=s.pendingProps,f=s.elementType===d?f:Cn(d,f),Ld(n,s,d,f,a);case 1:return d=s.type,f=s.pendingProps,f=s.elementType===d?f:Cn(d,f),Ap(n,s,d,f,a);case 3:e:{if(Pp(s),n===null)throw Error(t(387));d=s.pendingProps,g=s.memoizedState,f=g.element,Wm(n,s),ac(s,d,null,a);var w=s.memoizedState;if(d=w.element,g.isDehydrated)if(g={element:d,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){f=uo(Error(t(423)),s),s=Rp(n,s,d,a,f);break e}else if(d!==f){f=uo(Error(t(424)),s),s=Rp(n,s,d,a,f);break e}else for(an=is(s.stateNode.containerInfo.firstChild),on=s,tt=!0,Sn=null,a=qm(s,null,d,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(io(),d===f){s=kr(n,s,a);break e}$t(n,s,d,a)}s=s.child}return s;case 5:return Qm(s),n===null&&fd(s),d=s.type,f=s.pendingProps,g=n!==null?n.memoizedProps:null,w=f.children,sd(d,f)?w=null:g!==null&&sd(d,g)&&(s.flags|=32),kp(n,s),$t(n,s,w,a),s.child;case 6:return n===null&&fd(s),null;case 13:return jp(n,s,a);case 4:return wd(s,s.stateNode.containerInfo),d=s.pendingProps,n===null?s.child=oo(s,null,d,a):$t(n,s,d,a),s.child;case 11:return d=s.type,f=s.pendingProps,f=s.elementType===d?f:Cn(d,f),Tp(n,s,d,f,a);case 7:return $t(n,s,s.pendingProps,a),s.child;case 8:return $t(n,s,s.pendingProps.children,a),s.child;case 12:return $t(n,s,s.pendingProps.children,a),s.child;case 10:e:{if(d=s.type._context,f=s.pendingProps,g=s.memoizedProps,w=f.value,Qe(sc,d._currentValue),d._currentValue=w,g!==null)if(Nn(g.value,w)){if(g.children===f.children&&!Ht.current){s=kr(n,s,a);break e}}else for(g=s.child,g!==null&&(g.return=s);g!==null;){var C=g.dependencies;if(C!==null){w=g.child;for(var j=C.firstContext;j!==null;){if(j.context===d){if(g.tag===1){j=Cr(-1,a&-a),j.tag=2;var W=g.updateQueue;if(W!==null){W=W.shared;var re=W.pending;re===null?j.next=j:(j.next=re.next,re.next=j),W.pending=j}}g.lanes|=a,j=g.alternate,j!==null&&(j.lanes|=a),vd(g.return,a,s),C.lanes|=a;break}j=j.next}}else if(g.tag===10)w=g.type===s.type?null:g.child;else if(g.tag===18){if(w=g.return,w===null)throw Error(t(341));w.lanes|=a,C=w.alternate,C!==null&&(C.lanes|=a),vd(w,a,s),w=g.sibling}else w=g.child;if(w!==null)w.return=g;else for(w=g;w!==null;){if(w===s){w=null;break}if(g=w.sibling,g!==null){g.return=w.return,w=g;break}w=w.return}g=w}$t(n,s,f.children,a),s=s.child}return s;case 9:return f=s.type,d=s.pendingProps.children,lo(s,a),f=gn(f),d=d(f),s.flags|=1,$t(n,s,d,a),s.child;case 14:return d=s.type,f=Cn(d,s.pendingProps),f=Cn(d.type,f),Np(n,s,d,f,a);case 15:return Sp(n,s,s.type,s.pendingProps,a);case 17:return d=s.type,f=s.pendingProps,f=s.elementType===d?f:Cn(d,f),gc(n,s),s.tag=1,Wt(d)?(n=!0,Xl(s)):n=!1,lo(s,a),vp(s,d,f),Dd(s,d,f,a),Fd(null,s,d,!0,n,a);case 19:return Op(n,s,a);case 22:return Cp(n,s,a)}throw Error(t(156,s.tag))};function ig(n,s){return Zo(n,s)}function b_(n,s,a,d){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(n,s,a,d){return new b_(n,s,a,d)}function sh(n){return n=n.prototype,!(!n||!n.isReactComponent)}function I_(n){if(typeof n=="function")return sh(n)?1:0;if(n!=null){if(n=n.$$typeof,n===U)return 11;if(n===Re)return 14}return 2}function gs(n,s){var a=n.alternate;return a===null?(a=xn(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Sc(n,s,a,d,f,g){var w=2;if(d=n,typeof n=="function")sh(n)&&(w=1);else if(typeof n=="string")w=5;else e:switch(n){case k:return di(a.children,f,g,s);case I:w=8,f|=8;break;case S:return n=xn(12,a,s,f|2),n.elementType=S,n.lanes=g,n;case b:return n=xn(13,a,s,f),n.elementType=b,n.lanes=g,n;case ge:return n=xn(19,a,s,f),n.elementType=ge,n.lanes=g,n;case Me:return Cc(a,f,g,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case D:w=10;break e;case P:w=9;break e;case U:w=11;break e;case Re:w=14;break e;case je:w=16,d=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=xn(w,a,s,f),s.elementType=n,s.type=d,s.lanes=g,s}function di(n,s,a,d){return n=xn(7,n,d,s),n.lanes=a,n}function Cc(n,s,a,d){return n=xn(22,n,d,s),n.elementType=Me,n.lanes=a,n.stateNode={isHidden:!1},n}function ih(n,s,a){return n=xn(6,n,null,s),n.lanes=a,n}function oh(n,s,a){return s=xn(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function T_(n,s,a,d,f){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=sa(0),this.expirationTimes=sa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sa(0),this.identifierPrefix=d,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function ah(n,s,a,d,f,g,w,C,j){return n=new T_(n,s,a,C,j),s===1?(s=1,g===!0&&(s|=8)):s=0,g=xn(3,null,null,s),n.current=g,g.stateNode=n,g.memoizedState={element:d,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},_d(g),n}function N_(n,s,a){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ae,key:d==null?null:""+d,children:n,containerInfo:s,implementation:a}}function og(n){if(!n)return as;n=n._reactInternals;e:{if(In(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Wt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Wt(a))return Dm(n,a,s)}return s}function ag(n,s,a,d,f,g,w,C,j){return n=ah(a,d,!0,n,f,g,w,C,j),n.context=og(null),a=n.current,d=qt(),f=ms(a),g=Cr(d,f),g.callback=s??null,us(a,g,f),n.current.lanes=f,Qs(n,f,d),Qt(n,d),n}function kc(n,s,a,d){var f=s.current,g=qt(),w=ms(f);return a=og(a),s.context===null?s.context=a:s.pendingContext=a,s=Cr(g,w),s.payload={element:n},d=d===void 0?null:d,d!==null&&(s.callback=d),n=us(f,s,w),n!==null&&(Pn(n,f,w,g),oc(n,f,w)),w}function Ac(n){return n=n.current,n.child?(n.child.tag===5,n.child.stateNode):null}function lg(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function lh(n,s){lg(n,s),(n=n.alternate)&&lg(n,s)}function S_(){return null}var cg=typeof reportError=="function"?reportError:function(n){console.error(n)};function ch(n){this._internalRoot=n}Pc.prototype.render=ch.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));kc(n,s,null,null)},Pc.prototype.unmount=ch.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;li(function(){kc(null,n,null,null)}),s[br]=null}};function Pc(n){this._internalRoot=n}Pc.prototype.unstable_scheduleHydration=function(n){if(n){var s=la();n={blockedOn:null,target:n,priority:s};for(var a=0;a<tn.length&&s!==0&&s<tn[a].priority;a++);tn.splice(a,0,n),a===0&&Ui(n)}};function uh(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Rc(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function ug(){}function C_(n,s,a,d,f){if(f){if(typeof d=="function"){var g=d;d=function(){var W=Ac(w);g.call(W)}}var w=ag(s,d,n,0,null,!1,!1,"",ug);return n._reactRootContainer=w,n[br]=w.current,_a(n.nodeType===8?n.parentNode:n),li(),w}for(;f=n.lastChild;)n.removeChild(f);if(typeof d=="function"){var C=d;d=function(){var W=Ac(j);C.call(W)}}var j=ah(n,0,!1,null,null,!1,!1,"",ug);return n._reactRootContainer=j,n[br]=j.current,_a(n.nodeType===8?n.parentNode:n),li(function(){kc(s,j,a,d)}),j}function jc(n,s,a,d,f){var g=a._reactRootContainer;if(g){var w=g;if(typeof f=="function"){var C=f;f=function(){var j=Ac(w);C.call(j)}}kc(s,w,n,f)}else w=C_(a,s,n,f,d);return Ac(w)}oa=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var a=qe(s.pendingLanes);a!==0&&(ia(s,a|1),Qt(s,Je()),(ze&6)===0&&(mo=Je()+500,ls()))}break;case 13:li(function(){var d=Sr(n,1);if(d!==null){var f=qt();Pn(d,n,1,f)}}),lh(n,1)}},Fi=function(n){if(n.tag===13){var s=Sr(n,134217728);if(s!==null){var a=qt();Pn(s,n,134217728,a)}lh(n,134217728)}},aa=function(n){if(n.tag===13){var s=ms(n),a=Sr(n,s);if(a!==null){var d=qt();Pn(a,n,s,d)}lh(n,s)}},la=function(){return Fe},ca=function(n,s){var a=Fe;try{return Fe=n,s()}finally{Fe=a}},fr=function(n,s,a){switch(s){case"input":if(Ms(n,a),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var d=a[s];if(d!==n&&d.form===n.form){var f=Yl(d);if(!f)throw Error(t(90));qo(d),Ms(d,f)}}}break;case"textarea":wl(n,a);break;case"select":s=a.value,s!=null&&En(n,!!a.multiple,s,!1)}},Il=th,Tl=li;var k_={usingClientEntryPoint:!1,Events:[ba,eo,Yl,Kr,Qr,th]},La={findFiberByHostInstance:ei,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},A_={bundleType:La.bundleType,version:La.version,rendererPackageName:La.rendererPackageName,rendererConfig:La.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ne.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Rl(n),n===null?null:n.stateNode},findFiberByHostInstance:La.findFiberByHostInstance||S_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dc.isDisabled&&Dc.supportsFiber)try{Hs=Dc.inject(A_),Zt=Dc}catch{}}return Yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=k_,Yt.createPortal=function(n,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!uh(s))throw Error(t(200));return N_(n,s,null,a)},Yt.createRoot=function(n,s){if(!uh(n))throw Error(t(299));var a=!1,d="",f=cg;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=ah(n,1,!1,null,null,a,!1,d,f),n[br]=s.current,_a(n.nodeType===8?n.parentNode:n),new ch(s)},Yt.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Rl(s),n=n===null?null:n.stateNode,n},Yt.flushSync=function(n){return li(n)},Yt.hydrate=function(n,s,a){if(!Rc(s))throw Error(t(200));return jc(null,n,s,!0,a)},Yt.hydrateRoot=function(n,s,a){if(!uh(n))throw Error(t(405));var d=a!=null&&a.hydratedSources||null,f=!1,g="",w=cg;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),s=ag(s,null,n,1,a??null,f,!1,g,w),n[br]=s.current,_a(n),d)for(n=0;n<d.length;n++)a=d[n],f=a._getVersion,f=f(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,f]:s.mutableSourceEagerHydrationData.push(a,f);return new Pc(s)},Yt.render=function(n,s,a){if(!Rc(s))throw Error(t(200));return jc(null,n,s,!1,a)},Yt.unmountComponentAtNode=function(n){if(!Rc(n))throw Error(t(40));return n._reactRootContainer?(li(function(){jc(null,null,n,!1,function(){n._reactRootContainer=null,n[br]=null})}),!0):!1},Yt.unstable_batchedUpdates=th,Yt.unstable_renderSubtreeIntoContainer=function(n,s,a,d){if(!Rc(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return jc(n,s,a,!1,d)},Yt.version="18.3.1-next-f1338f8080-20240426",Yt}var vg;function M_(){if(vg)return fh.exports;vg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),fh.exports=F_(),fh.exports}var xg;function U_(){if(xg)return Oc;xg=1;var r=M_();return Oc.createRoot=r.createRoot,Oc.hydrateRoot=r.hydrateRoot,Oc}var B_=U_();let go=null;function z_(){return go||(go=document.createElement("div"),go.className="fixed bottom-4 right-4 space-y-2 z-50",go.style.pointerEvents="none",document.body.appendChild(go)),go}function we(r,e="info"){const t=z_(),i=document.createElement("div");i.className=`bg-white shadow-lg rounded-lg px-4 py-3 border-l-4 transform translate-x-full transition-transform duration-300 ${e==="success"?"border-green-500 text-green-800":e==="error"?"border-red-500 text-red-800":e==="info"?"border-blue-500 text-blue-800":"border-gray-500 text-gray-800"}`,i.style.pointerEvents="auto",i.textContent=r,t.appendChild(i),setTimeout(()=>{i.style.transform="translateX(0)"},10),setTimeout(()=>{i.style.transform="translateX(full)",setTimeout(()=>{t.contains(i)&&t.removeChild(i)},300)},3e3)}function $_({cartCount:r,isMenuOpen:e,setIsMenuOpen:t,currentUser:i,onOpenAuth:o,onLogout:l,onOpenCart:h,onOpenWatchlist:p,onOpenAccountSummary:m}){const[v,_]=J.useState(!1),[E,N]=J.useState(["Electronics","Fashion","Furniture","Accessories","Sporting Goods","Industrial","Motors","Deals"]),[O,L]=J.useState(""),[F,M]=J.useState("All Categories"),[K,q]=J.useState([]),[Y,ne]=J.useState(!1),G=J.useRef(null),ae=J.useRef(null);J.useEffect(()=>{const b=ge=>{v&&G.current&&!G.current.contains(ge.target)&&_(!1),Y&&ae.current&&!ae.current.contains(ge.target)&&ne(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[v,Y]),J.useEffect(()=>{window.CategoryManager&&N(window.CategoryManager.getAll());const b=ge=>{ge.key==="luxemarket_categories"&&window.CategoryManager&&N(window.CategoryManager.getAll())};return window.addEventListener("storage",b),()=>window.removeEventListener("storage",b)},[]);const k=b=>`/#featured-products?category=${encodeURIComponent(b)}`,I=(b,ge)=>{b.preventDefault(),_(!1),M(ge),L(""),window.location.hash="products-section",window.dispatchEvent(new CustomEvent("filterByCategory",{detail:{category:ge}}))};J.useEffect(()=>{const b=new URLSearchParams(window.location.search),ge=b.get("search"),Re=b.get("category");ge&&L(ge),Re&&M(Re)},[]),J.useEffect(()=>{if(O&&O.trim().length>0){const b=window.ProductManager?window.ProductManager.getAll():[],ge=O.toLowerCase(),Re=b.filter(je=>{const Me=je.name.toLowerCase().includes(ge)||je.description.toLowerCase().includes(ge)||je.category.toLowerCase().includes(ge),ie=F==="All Categories"||je.category.toLowerCase()===F.toLowerCase()||je.category.toLowerCase().includes(ge);return Me&&ie}).slice(0,5);q(Re),console.log(" Search Debug:",{searchTerm:ge,searchCategory:F,totalProducts:b.length,filteredResults:Re.length,furnitureProducts:b.filter(je=>je.category.toLowerCase().includes("furniture")).length,allCategories:[...new Set(b.map(je=>je.category))]})}else q([])},[O,F]);const S=(b,ge)=>{try{let Re=O,je=F;typeof b=="string"&&(Re=b),typeof ge=="string"&&(je=ge),b===""&&(Re="");let Me="index.html?";const ie=[];Re&&typeof Re=="string"&&Re.trim()&&ie.push(`search=${encodeURIComponent(Re.trim())}`),je&&typeof je=="string"&&je!=="All Categories"&&ie.push(`category=${encodeURIComponent(je)}`);const B=Me+ie.join("&")+"#featured-products";window.location.href=B,ne(!1)}catch(Re){console.error("Search error:",Re),we("Search failed: "+Re.message,"error")}},D=b=>{ne(!1),L(""),window.dispatchEvent(new CustomEvent("openProduct",{detail:{productId:b.id}}))},P=(b,ge)=>{b.preventDefault(),we(`${ge} feature coming soon!`,"info")},U=(b,ge)=>{b.preventDefault(),ge()};return u.jsxs("header",{className:"font-sans text-sm","data-name":"header","data-file":"components/Header.js",children:[u.jsx("div",{className:"bg-white border-b border-gray-200 py-1 hidden md:block",children:u.jsxs("div",{className:"container-custom flex justify-between items-center text-xs text-gray-600",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[i?u.jsxs("span",{className:"flex items-center gap-1",children:["Hi, ",u.jsx("span",{className:"font-bold text-gray-800",children:i.name}),"!",u.jsx("button",{onClick:l,className:"text-blue-600 hover:underline ml-1",children:"Sign out"})]}):u.jsxs("span",{className:"flex items-center gap-1",children:["Hi! ",u.jsx("button",{onClick:()=>o(!1),className:"text-blue-600 hover:underline",children:"Sign in"})," or ",u.jsx("button",{onClick:()=>o(!0),className:"text-blue-600 hover:underline",children:"register"})]}),u.jsx("button",{onClick:b=>{b.preventDefault(),window.dispatchEvent(new CustomEvent("filterByDeals"))},className:"hover:underline text-[var(--accent-color)] font-medium cursor-pointer bg-transparent border-none",children:"Daily Deals"}),u.jsx("a",{href:"#footer",className:"hover:underline",children:"Help & Contact"})]}),u.jsxs("div",{className:"flex items-center gap-6",children:[u.jsx("a",{href:"#",onClick:b=>P(b,"Shipping selection"),className:"hover:underline",children:"Ship to"}),u.jsxs("a",{href:"#admin",className:"hover:underline flex items-center gap-1",children:[u.jsx("div",{className:"icon-store text-xs"}),"Sell"]}),u.jsxs("a",{href:"#",onClick:b=>U(b,p),className:"hover:underline flex items-center gap-1",children:["Watchlist ",u.jsx("div",{className:"icon-chevron-down text-[10px]"})]}),u.jsxs("div",{className:"relative group cursor-pointer z-[50]",children:[u.jsxs("span",{className:"hover:underline flex items-center gap-1",children:["My LuxeMarket ",u.jsx("div",{className:"icon-chevron-down text-[10px]"})]}),u.jsxs("div",{className:"absolute right-0 top-full bg-white border border-gray-200 shadow-lg rounded-b-md p-2 hidden group-hover:block w-40",children:[u.jsx("button",{onClick:m,className:"block w-full text-left px-2 py-1 hover:bg-gray-100",children:"Summary"}),u.jsx("a",{href:"#",onClick:b=>P(b,"Recently Viewed"),className:"block px-2 py-1 hover:bg-gray-100",children:"Recently Viewed"}),u.jsx("a",{href:"#",onClick:b=>P(b,"Bids/Offers"),className:"block px-2 py-1 hover:bg-gray-100",children:"Bids/Offers"}),u.jsx("a",{href:"#",onClick:b=>P(b,"Purchase History"),className:"block px-2 py-1 hover:bg-gray-100",children:"Purchase History"})]})]}),u.jsx("a",{href:"#",onClick:b=>P(b,"Notifications"),className:"hover:text-gray-900 relative",title:"Notifications",children:u.jsx("div",{className:"icon-bell text-lg"})}),u.jsxs("button",{onClick:h,className:"hover:text-gray-900 relative cart-button",title:"Cart",children:[u.jsx("div",{className:"icon-shopping-cart text-lg"}),r>0&&u.jsx("span",{className:"absolute -top-1 -right-2 inline-flex items-center justify-center px-1.5 py-0.5 text-[10px] font-bold leading-none text-white transform bg-red-600 rounded-full cart-count-badge",children:r})]})]})]})}),u.jsx("div",{className:"bg-white py-3 border-b border-gray-200 sticky top-0 z-[100] shadow-sm",children:u.jsx("div",{className:"container-custom",children:u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("button",{onClick:()=>t(!e),className:"md:hidden text-gray-600 hover:text-gray-900",children:u.jsx("div",{className:"icon-menu text-2xl"})}),u.jsxs("a",{href:"#",onClick:b=>{b.preventDefault(),window.location.hash=""},className:"flex-shrink-0 flex items-center gap-1 group",children:[u.jsx("div",{className:"icon-shopping-bag text-3xl text-[var(--primary-color)]"}),u.jsxs("span",{className:"text-2xl font-bold tracking-tighter text-gray-900",children:["Luxe",u.jsx("span",{className:"text-[var(--primary-color)]",children:"Market"})]})]}),u.jsxs("div",{ref:G,className:"relative hidden md:block",children:[u.jsxs("button",{onClick:b=>{console.log(`[Header] Toggle button clicked. Current state: ${v}`),b.stopPropagation(),_(!v)},className:`text-gray-600 hover:text-gray-900 text-sm font-medium flex items-center gap-1 whitespace-nowrap px-2 py-2 rounded-md transition-colors ${v?"bg-gray-100":""}`,children:["Shop by category ",u.jsx("div",{className:`icon-chevron-down text-xs transition-transform ${v?"rotate-180":""}`})]}),v&&u.jsxs("div",{className:"absolute top-full left-0 mt-2 w-64 bg-white border border-gray-200 shadow-xl rounded-lg p-4 z-[150] grid grid-cols-1 gap-2 animate-[fadeIn_0.2s_ease-out] category-dropdown",children:[E.map(b=>u.jsxs("a",{href:k(b),onClick:ge=>I(ge,b),className:"hover:text-[var(--primary-color)] hover:underline flex items-center gap-2 p-1 rounded hover:bg-gray-50",children:[u.jsx("div",{className:"icon-chevron-right text-xs text-gray-400"}),b]},b)),u.jsx("div",{className:"border-t border-gray-100 mt-2 pt-2",children:u.jsx("a",{href:"#featured-products",className:"font-bold hover:underline block p-1",children:"See all categories"})})]})]}),u.jsxs("div",{ref:ae,className:"flex-grow flex items-center max-w-4xl mx-auto relative",children:[u.jsxs("div",{className:"flex-grow flex border-2 border-gray-300 rounded-full hover:border-gray-400 focus-within:border-[var(--primary-color)] transition-colors h-10 md:h-11 relative bg-gray-100",children:[u.jsx("div",{className:"pl-3 flex items-center text-gray-400",children:u.jsx("div",{className:"icon-search text-gray-500"})}),u.jsx("input",{type:"text",placeholder:"Search for anything",className:"flex-grow px-3 bg-transparent border-none focus:outline-none text-gray-900 placeholder-gray-500 w-full",value:O,onChange:b=>{L(b.target.value),ne(!0)},onKeyDown:b=>b.key==="Enter"&&S(),onFocus:()=>ne(!0)}),u.jsx("div",{className:"hidden md:flex items-center border-l border-gray-300 px-3",children:u.jsxs("select",{value:F,onChange:b=>{const ge=b.target.value;M(ge),S(O,ge)},className:"bg-transparent text-gray-600 text-sm focus:outline-none cursor-pointer max-w-[120px] truncate",children:[u.jsx("option",{value:"All Categories",children:"All Categories"}),E.map(b=>u.jsx("option",{value:b,children:b},b))]})})]}),u.jsx("button",{onClick:()=>S(),className:"btn btn-primary rounded-full px-6 ml-2 h-10 md:h-11 text-base font-semibold min-w-[100px] hidden md:block hover:shadow-md transition-shadow",children:"Search"}),Y&&O.length>0&&u.jsxs("div",{className:"absolute top-full left-0 right-0 mt-3 bg-white border border-gray-200 shadow-2xl rounded-2xl overflow-hidden max-h-[70vh] overflow-y-auto z-[200] animate-[fadeIn_0.2s_ease-out] search-dropdown",children:[u.jsxs("div",{className:"p-4 border-b border-gray-50 bg-gray-50/50 flex justify-between items-center",children:[u.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Suggested Products"}),u.jsxs("span",{className:"text-xs text-gray-400",children:[K.length," results"]})]}),K.length>0?u.jsxs("div",{className:"divide-y divide-gray-50",children:[K.map(b=>u.jsxs("button",{onClick:()=>D(b),className:"flex items-center gap-4 p-4 hover:bg-blue-50/50 transition-all group w-full text-left",children:[u.jsx("div",{className:"w-14 h-14 rounded-xl overflow-hidden border border-gray-100 bg-gray-50 flex-shrink-0 group-hover:scale-105 transition-transform",children:u.jsx("img",{src:b.image,alt:b.name,className:"w-full h-full object-cover"})}),u.jsxs("div",{className:"flex-grow min-w-0",children:[u.jsx("div",{className:"text-sm font-bold text-gray-900 truncate mb-0.5",children:b.name}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-xs px-2 py-0.5 bg-gray-100 rounded text-gray-500",children:b.category}),u.jsxs("div",{className:"flex text-yellow-400 text-[10px]",children:[u.jsx("div",{className:"icon-star fill-current"}),u.jsx("span",{className:"text-gray-400 ml-1 font-medium",children:b.rating})]})]})]}),u.jsxs("div",{className:"text-base font-black text-[var(--primary-color)]",children:["$",b.price.toFixed(2)]})]},b.id)),u.jsxs("button",{onClick:()=>S(),className:"w-full text-center py-4 text-sm text-[var(--primary-color)] font-bold hover:bg-blue-50 transition-colors bg-white border-t border-gray-100 flex items-center justify-center gap-2",children:[u.jsxs("span",{children:['View all results for "',O,'"']}),u.jsx("div",{className:"icon-arrow-right text-sm"})]})]}):u.jsxs("div",{className:"p-12 text-center",children:[u.jsx("div",{className:"icon-search text-gray-200 text-5xl mb-4 mx-auto"}),u.jsxs("p",{className:"text-gray-500 font-medium",children:['No products found for "',O,'"']}),u.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Try different keywords or categories"})]})]})]}),u.jsx("a",{href:"#",onClick:b=>P(b,"Advanced Search"),className:"text-xs text-gray-500 hover:text-gray-700 whitespace-nowrap hidden lg:block",children:"Advanced"}),u.jsxs("button",{onClick:h,className:"md:hidden relative text-gray-600 cart-button",children:[u.jsx("div",{className:"icon-shopping-cart text-2xl"}),r>0&&u.jsx("span",{className:"absolute -top-1 -right-2 inline-flex items-center justify-center px-1.5 py-0.5 text-xs font-bold leading-none text-white transform bg-red-600 rounded-full cart-count-badge",children:r})]})]})})}),u.jsx("div",{className:"border-b border-gray-200 bg-white hidden md:block",children:u.jsx("div",{className:"container-custom",children:u.jsxs("nav",{className:"flex items-center justify-center gap-6 py-2 text-[13px] text-gray-600",children:[u.jsx("a",{href:"#",onClick:b=>{b.preventDefault(),window.location.hash=""},className:"hover:text-[var(--primary-color)] font-medium border-b-2 border-transparent hover:border-[var(--primary-color)] pb-1 transition-colors",children:"Home"}),u.jsxs("a",{href:"#",onClick:b=>U(b,p),className:"hover:text-[var(--primary-color)] hover:border-[var(--primary-color)] border-b-2 border-transparent pb-1 transition-colors flex items-center gap-1",children:[u.jsx("div",{className:"icon-heart text-xs"})," Saved"]}),E.slice(0,6).map(b=>u.jsx("a",{href:k(b),onClick:ge=>I(ge,b),className:"hover:text-[var(--primary-color)] hover:border-[var(--primary-color)] border-b-2 border-transparent pb-1 transition-colors",children:b},b)),u.jsxs("a",{href:"#admin",className:"text-[var(--primary-color)] hover:underline flex items-center gap-1 ml-4 border-l pl-4 border-gray-300",children:[u.jsx("div",{className:"icon-cog text-xs"})," Admin"]})]})})}),e&&u.jsx("div",{className:"md:hidden bg-white border-b border-gray-200 shadow-xl absolute top-full left-0 right-0 z-[150] max-h-[80vh] overflow-y-auto",children:u.jsxs("div",{className:"p-4 flex flex-col space-y-4",children:[u.jsxs("div",{className:"font-bold text-lg mb-2 flex justify-between items-center",children:["Categories",u.jsx("button",{onClick:()=>t(!1),className:"text-gray-400",children:u.jsx("div",{className:"icon-x text-xl"})})]}),E.map(b=>u.jsx("a",{href:k(b),onClick:ge=>I(ge,b),className:"text-gray-700 py-1 border-b border-gray-50 pl-2",children:b},b)),u.jsx("div",{className:"font-bold text-lg mt-4 mb-2",children:"My Account"}),i?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"text-gray-700 py-1 pl-2",children:["Hi, ",i.name]}),u.jsx("button",{onClick:l,className:"text-left text-gray-700 py-1 pl-2",children:"Sign Out"})]}):u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>{t(!1),o(!1)},className:"text-left text-gray-700 py-1 pl-2",children:"Sign In"}),u.jsx("button",{onClick:()=>{t(!1),o(!0)},className:"text-left text-gray-700 py-1 pl-2",children:"Register"})]}),u.jsxs("a",{href:"#admin",className:"text-[var(--primary-color)] font-medium py-1 mt-2 pl-2 flex items-center gap-2",children:[u.jsx("div",{className:"icon-database text-sm"}),"Admin Dashboard"]})]})})]})}function q_(){const[r,e]=J.useState(0),t=(h,p)=>{h&&h.preventDefault(),we(`${p} feature coming soon!`,"info")},i=[{id:1,image:"https://images.unsplash.com/photo-1483985988355-763728e1935b?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80",subtitle:"NEW SEASON ARRIVALS",title:"Elevate Your Style With Premium Essentials",description:"Discover our curated collection of high-quality products designed to enhance your lifestyle.",ctaPrimary:"Shop Now",ctaSecondary:"View Collections",linkPrimary:"#featured-products",linkSecondary:"#featured-products"},{id:2,image:"https://images.unsplash.com/photo-1496181133206-80ce9b88a853?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80",subtitle:"LATEST TECH",title:"Next Gen Electronics For Your Home",description:"Upgrade your space with smart home devices and premium audio equipment.",ctaPrimary:"Shop Electronics",ctaSecondary:"See All Deals",linkPrimary:"?category=Electronics#featured-products",linkSecondary:"#featured-products"},{id:3,image:"https://images.unsplash.com/photo-1555041469-a586c61ea9bc?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80",subtitle:"COMFORT & DESIGN",title:"Modern Furniture For Modern Living",description:"Transform your workspace and living area with our ergonomic furniture collection.",ctaPrimary:"Browse Furniture",ctaSecondary:"Read Blog",linkPrimary:"?category=Furniture#featured-products",linkSecondary:"#"}];J.useEffect(()=>{const h=setInterval(()=>{e(p=>(p+1)%i.length)},5e3);return()=>clearInterval(h)},[i.length]);const o=()=>{e(h=>(h+1)%i.length)},l=()=>{e(h=>(h-1+i.length)%i.length)};return u.jsxs("div",{className:"hero-section relative bg-gray-900 overflow-hidden h-[300px] md:h-[400px] lg:h-[500px] group hero-carousel","data-name":"hero-carousel","data-file":"components/Hero.js",children:[i.map((h,p)=>u.jsxs("div",{className:`hero-carousel-slide transition-opacity duration-1000 ease-in-out ${p===r?"opacity-100 active":"opacity-0"}`,children:[u.jsxs("div",{className:"absolute inset-0",children:[u.jsx("img",{className:`w-full h-full object-cover opacity-60 transition-opacity duration-1000 ${p===r?"animate-zoom":""}`,src:h.image,alt:h.title}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900 via-gray-900/40 to-transparent"})]}),u.jsx("div",{className:"relative container-custom h-full flex items-center",children:u.jsxs("div",{className:"max-w-2xl animate-[fadeIn_0.8s_ease-out]",children:[u.jsx("span",{className:"inline-block py-1 px-3 rounded bg-[var(--primary-color)] bg-opacity-20 text-[var(--accent-color)] text-sm font-semibold tracking-wider mb-4 border border-[var(--primary-color)] border-opacity-30",children:h.subtitle}),u.jsx("h1",{className:"text-4xl md:text-5xl lg:text-7xl font-bold text-white mb-6 leading-[1.1] tracking-tight drop-shadow-lg",children:h.title}),u.jsx("p",{className:"text-xl text-gray-200 mb-8 leading-relaxed max-w-xl drop-shadow-md",children:h.description}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[u.jsx("a",{href:h.linkPrimary,className:"btn bg-white text-gray-900 hover:bg-gray-100 text-lg px-10 py-4 rounded-full font-bold shadow-xl transition-all hover:scale-105 active:scale-95",children:h.ctaPrimary}),h.linkSecondary==="#"?u.jsx("button",{onClick:m=>t(m,h.ctaSecondary),className:"btn bg-white/10 text-white hover:bg-white/20 border-2 border-white/30 text-lg px-10 py-4 rounded-full backdrop-blur-md font-semibold transition-all hover:border-white/60",children:h.ctaSecondary}):u.jsx("a",{href:h.linkSecondary,className:"btn bg-white/10 text-white hover:bg-white/20 border-2 border-white/30 text-lg px-10 py-4 rounded-full backdrop-blur-md font-semibold transition-all hover:border-white/60",children:h.ctaSecondary})]})]})})]},h.id)),u.jsx("button",{onClick:l,className:"hero-carousel-controls absolute left-4 top-1/2 -translate-y-1/2 w-12 h-12 rounded-full bg-white/10 hover:bg-white/20 backdrop-blur-sm text-white flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:u.jsx("div",{className:"icon-chevron-left text-2xl"})}),u.jsx("button",{onClick:o,className:"hero-carousel-controls absolute right-4 top-1/2 -translate-y-1/2 w-12 h-12 rounded-full bg-white/10 hover:bg-white/20 backdrop-blur-sm text-white flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:u.jsx("div",{className:"icon-chevron-right text-2xl"})}),u.jsx("div",{className:"hero-carousel-indicators absolute bottom-6 left-1/2 -translate-x-1/2 flex gap-2",children:i.map((h,p)=>u.jsx("button",{onClick:()=>e(p),className:`w-3 h-3 rounded-full transition-all duration-300 ${p===r?"bg-[var(--primary-color)] w-8":"bg-white/50 hover:bg-white/80"}`},p))})]})}function H_({product:r,onProductClick:e}){const[t,i]=J.useState(0),o=r.images&&r.images.length>0?r.images:[r.image||"https://via.placeholder.com/300x300?text=No+Image"],l=o[t];return J.useEffect(()=>{if(o.length<=1)return;const h=setInterval(()=>{i(p=>(p+1)%o.length)},3e3);return()=>clearInterval(h)},[o.length]),u.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-lg transition-all duration-300 group cursor-pointer minimal-product-card",onClick:()=>e(r.id),children:[u.jsxs("div",{className:"relative aspect-square overflow-hidden bg-gray-100 product-image-container",children:[u.jsx("img",{src:l,alt:r.name,className:"w-full h-full object-cover product-image transition-opacity duration-500"},t),r.isDailyDeal&&u.jsxs("div",{className:"absolute top-2 left-2 bg-red-600 text-white px-2 py-1 rounded-full text-xs font-bold shadow-lg animate-pulse",children:[" ",r.discountPercent,"% OFF"]}),o.length>1&&u.jsx("div",{className:"absolute bottom-2 left-0 right-0 flex justify-center gap-1",children:o.map((h,p)=>u.jsx("div",{className:`w-1.5 h-1.5 rounded-full transition-all duration-300 ${p===t?"bg-white w-4":"bg-white/50"}`},p))})]}),u.jsxs("div",{className:"p-4 text-center",children:[u.jsx("h3",{className:"font-semibold text-gray-900 text-sm mb-1 product-name-hover line-clamp-2",children:r.name}),u.jsx("p",{className:"text-xs text-gray-500",children:r.category}),r.isDailyDeal&&u.jsxs("div",{className:"mt-2",children:[u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsxs("span",{className:"text-sm font-bold text-red-600",children:["$",r.price.toFixed(2)]}),u.jsxs("span",{className:"text-xs text-gray-500 line-through",children:["$",r.originalPrice.toFixed(2)]})]}),u.jsx("p",{className:"text-xs text-red-600 font-medium",children:"Daily Deal!"})]})]})]})}function W_({products:r,onProductClick:e}){return u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-6 home-products-grid",children:r&&r.length>0?r.map(t=>u.jsx(H_,{product:t,onProductClick:e},t.id)):u.jsx("div",{className:"col-span-full text-center py-12",children:u.jsx("p",{className:"text-gray-500",children:"No products available"})})})}function G_(){const[r,e]=J.useState([]),[t,i]=J.useState(!0),[o,l]=J.useState(""),[h,p]=J.useState(!1),[m,v]=J.useState(!1),[_,E]=J.useState(1),N=12,O=J.useRef(null),L=J.useCallback(async()=>{try{if(i(!0),window.ProductManager){let G;window.ProductManager.getAllAsync?G=await window.ProductManager.getAllAsync():G=window.ProductManager.getAll();const ae=G[0];ae&&typeof ae.stock>"u"&&(console.log(" Products missing stock field, resetting data..."),window.ProductManager.resetToDefaults&&(window.ProductManager.resetToDefaults(),G=window.ProductManager.getAll()));let k;h?(k=G.filter(I=>I.isDailyDeal||I.dailyDeal),console.log(` Daily deals filter: ${k.length} deals found`)):o&&o!=="All Categories"?(k=G.filter(I=>I.category&&I.category.toLowerCase()===o.toLowerCase()),console.log(` Filtered by category "${o}":`,k.length,"products found")):m?(k=G,console.log(" Showing all products:",k.length)):(k=G.slice(0,12),console.log(" Home page: Setting",k.length,"products")),console.log(" Daily deals found:",k.filter(I=>I.isDailyDeal||I.dailyDeal).length),e(k),E(1)}else console.error(" ProductManager not found on window")}catch(G){console.error(" Error loading products:",G)}finally{i(!1)}},[o,h,m]);J.useEffect(()=>{L();const G=()=>{console.log(" Admin update detected, refreshing home page products..."),L()},ae=S=>{const{category:D}=S.detail;console.log(" Category filter event received:",D),l(D),p(!1),v(!1),setTimeout(()=>{O.current&&O.current.scrollIntoView({behavior:"smooth",block:"start"})},100)},k=()=>{console.log(" Daily deals filter event received"),p(!0),l(""),v(!1),setTimeout(()=>{O.current&&O.current.scrollIntoView({behavior:"smooth",block:"start"})},100)},I=()=>{console.log(" Show all products event received"),v(!0),l(""),p(!1),setTimeout(()=>{O.current&&O.current.scrollIntoView({behavior:"smooth",block:"start"})},100)};return window.addEventListener("adminUpdate",G),window.addEventListener("filterByCategory",ae),window.addEventListener("filterByDeals",k),window.addEventListener("showAllProducts",I),()=>{window.removeEventListener("adminUpdate",G),window.removeEventListener("filterByCategory",ae),window.removeEventListener("filterByDeals",k),window.removeEventListener("showAllProducts",I)}},[L]);const F=G=>{window.dispatchEvent(new CustomEvent("openProduct",{detail:{productId:G}}))},M=Math.ceil(r.length/N),K=(_-1)*N,q=K+N,Y=r.slice(K,q),ne=G=>{E(G),O.current&&O.current.scrollIntoView({behavior:"smooth",block:"start"})};return t?u.jsx("section",{className:"py-16 bg-white",ref:O,children:u.jsx("div",{className:"container-custom",children:u.jsxs("div",{className:"text-center",children:[u.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Featured Products"}),u.jsx("p",{className:"text-gray-600",children:"Loading products..."})]})})}):u.jsx("section",{className:"py-16 bg-white featured-products-section featured-products-home",ref:O,id:"products-section",children:u.jsxs("div",{className:"container-custom",children:[u.jsxs("div",{className:"text-center mb-12",children:[u.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:h?" Daily Deals":o&&o!=="All Categories"?`${o} Products`:m?"All Products":"Featured Products"}),u.jsx("p",{className:"text-gray-600 mb-6",children:h?"Special discounts available for a limited time!":o&&o!=="All Categories"?`Browse our ${o.toLowerCase()} collection`:m?"Browse our complete product catalog":"Click on any product to see details, pricing, and purchase options"}),o&&o!=="All Categories"||h||m?u.jsx("button",{onClick:()=>{l(""),p(!1),v(!1),E(1)},className:"btn btn-secondary text-sm mb-4",children:" Back to Home"}):null]}),u.jsx("div",{className:"home-products-grid",children:u.jsx(W_,{products:Y,onProductClick:F})}),M>1&&u.jsxs("div",{className:"flex justify-center items-center gap-2 mt-12",children:[u.jsx("button",{onClick:()=>ne(_-1),disabled:_===1,className:"btn btn-secondary px-4 py-2 disabled:opacity-50 disabled:cursor-not-allowed",children:" Previous"}),u.jsx("div",{className:"flex gap-2",children:Array.from({length:M},(G,ae)=>ae+1).map(G=>u.jsx("button",{onClick:()=>ne(G),className:`px-4 py-2 rounded-md font-medium transition-colors ${_===G?"bg-[var(--primary-color)] text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:G},G))}),u.jsx("button",{onClick:()=>ne(_+1),disabled:_===M,className:"btn btn-secondary px-4 py-2 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next "})]}),u.jsxs("div",{className:"text-center mt-8",children:[!m&&!o&&!h&&u.jsx("button",{onClick:()=>{v(!0),l(""),p(!1),E(1)},className:"btn btn-primary px-8 py-3 text-lg hover:shadow-lg transition-shadow view-all-btn mr-4",children:"View All Products"}),u.jsx("p",{className:"text-sm text-gray-500 mt-4",children:h?`Showing ${r.length} daily deals`:o&&o!=="All Categories"?`Showing ${K+1}-${Math.min(q,r.length)} of ${r.length} ${o.toLowerCase()} products`:m?`Showing ${K+1}-${Math.min(q,r.length)} of ${r.length} products (Page ${_} of ${M})`:`Showing ${r.length} featured products`})]})]})})}function K_(){const r=new Date().getFullYear(),e=(i,o)=>{i&&i.preventDefault(),we(`${o} feature coming soon!`,"info")},t=[{title:"Buy",links:["Registration","Money Back Guarantee","Bidding & buying help","Stores","Charity Shop","Seasonal Sales"]},{title:"Sell",links:["Start selling","Learn to sell","Affiliates","Seller Information Center"]},{title:"Stay Connected",links:["LuxeMarket Blog","Facebook","Twitter","Instagram","Pinterest"]},{title:"About LuxeMarket",links:["Company Info","News","Investors","Careers","Government Relations","Advertise with us","Policies"]},{title:"Help & Contact",links:["Seller Information Center","Contact Us","Resolution Center","Returns","Shipping"]}];return u.jsx("footer",{className:"bg-white border-t border-gray-200 pt-12 pb-6 text-[13px]","data-name":"footer","data-file":"components/Footer.js",children:u.jsxs("div",{className:"container-custom",children:[u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-8 mb-12",children:t.map((i,o)=>u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-gray-700 mb-4",children:i.title}),u.jsx("ul",{className:"space-y-2",children:i.links.map(l=>u.jsx("li",{children:u.jsx("a",{href:"#",onClick:h=>e(h,l),className:"text-gray-600 hover:text-[var(--primary-color)] hover:underline transition-colors block",children:l})},l))}),i.title==="Stay Connected"&&u.jsxs("div",{className:"flex gap-3 mt-4",children:[u.jsx("a",{href:"#",onClick:l=>e(l,"Facebook"),className:"w-8 h-8 flex items-center justify-center rounded-full bg-gray-100 hover:bg-blue-600 hover:text-white transition-colors",children:u.jsx("div",{className:"icon-facebook text-sm"})}),u.jsx("a",{href:"#",onClick:l=>e(l,"Twitter"),className:"w-8 h-8 flex items-center justify-center rounded-full bg-gray-100 hover:bg-sky-400 hover:text-white transition-colors",children:u.jsx("div",{className:"icon-twitter text-sm"})}),u.jsx("a",{href:"#",onClick:l=>e(l,"Instagram"),className:"w-8 h-8 flex items-center justify-center rounded-full bg-gray-100 hover:bg-pink-600 hover:text-white transition-colors",children:u.jsx("div",{className:"icon-instagram text-sm"})})]})]},o))}),u.jsx("div",{className:"border-t border-gray-200 pt-8",children:u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 text-xs text-gray-500",children:[u.jsxs("div",{className:"flex flex-wrap justify-center md:justify-start gap-4 mb-2 md:mb-0",children:[u.jsx("a",{href:"#",onClick:i=>e(i,"Accessibility"),className:"hover:underline",children:"Accessibility"}),u.jsx("span",{className:"hidden md:inline",children:"|"}),u.jsx("a",{href:"#",onClick:i=>e(i,"User Agreement"),className:"hover:underline",children:"User Agreement"}),u.jsx("span",{className:"hidden md:inline",children:"|"}),u.jsx("a",{href:"#",onClick:i=>e(i,"Privacy"),className:"hover:underline",children:"Privacy"}),u.jsx("span",{className:"hidden md:inline",children:"|"}),u.jsx("a",{href:"#",onClick:i=>e(i,"Payments Terms of Use"),className:"hover:underline",children:"Payments Terms of Use"}),u.jsx("span",{className:"hidden md:inline",children:"|"}),u.jsx("a",{href:"#",onClick:i=>e(i,"Cookies"),className:"hover:underline",children:"Cookies"}),u.jsx("span",{className:"hidden md:inline",children:"|"}),u.jsx("a",{href:"#",onClick:i=>e(i,"Individual Privacy Rights"),className:"hover:underline",children:"Do not sell my personal info"})]}),u.jsx("div",{className:"flex items-center gap-1",children:u.jsxs("span",{children:["Copyright  1995-",r," LuxeMarket Inc. All Rights Reserved."]})})]})})]})})}function Q_({isOpen:r,isRegister:e=!1,onClose:t,onLogin:i}){const[o,l]=J.useState(e),[h,p]=J.useState({name:"",email:"",password:""});if(J.useEffect(()=>{l(e)},[e]),!r)return null;const m=v=>{v.preventDefault();const _={name:o?h.name:h.email.split("@")[0]||"User",email:h.email};sessionStorage.setItem("luxemarket_user",JSON.stringify(_)),i(_),t(),p({name:"",email:"",password:""})};return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999] animate-[fadeIn_0.2s_ease-out]",onClick:t,children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md overflow-hidden relative m-4",onClick:v=>v.stopPropagation(),children:[u.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:u.jsx("div",{className:"icon-x text-xl"})}),u.jsxs("div",{className:"p-8",children:[u.jsxs("div",{className:"text-center mb-6",children:[u.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-blue-100 text-[var(--primary-color)] mb-4",children:u.jsx("div",{className:"icon-user text-2xl"})}),u.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:o?"Create Account":"Welcome Back"}),u.jsx("p",{className:"text-gray-500 text-sm mt-1",children:o?"Create an account to complete your purchase":"Sign in to add items to cart and checkout"})]}),u.jsxs("form",{onSubmit:m,className:"space-y-4",children:[o&&u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),u.jsx("input",{type:"text",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[var(--primary-color)] outline-none",value:h.name,onChange:v=>p({...h,name:v.target.value})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),u.jsx("input",{type:"email",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[var(--primary-color)] outline-none",value:h.email,onChange:v=>p({...h,email:v.target.value})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),u.jsx("input",{type:"password",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[var(--primary-color)] outline-none",value:h.password,onChange:v=>p({...h,password:v.target.value})})]}),u.jsx("button",{type:"submit",className:"w-full btn btn-primary py-2.5 mt-2",children:o?"Register":"Sign In"})]}),u.jsxs("div",{className:"mt-6 text-center text-sm",children:[u.jsx("span",{className:"text-gray-500",children:o?"Already have an account?":"New to LuxeMarket?"}),u.jsx("button",{onClick:()=>l(!o),className:"text-[var(--primary-color)] font-medium hover:underline ml-1",children:o?"Sign In":"Create account"})]}),u.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:u.jsx("button",{onClick:()=>{const v={name:"Demo User",email:"demo@luxemarket.com"};sessionStorage.setItem("luxemarket_user",JSON.stringify(v)),i(v),t()},className:"w-full text-sm text-gray-600 hover:text-gray-800 py-2 px-4 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:" Continue as Demo User (for testing)"})})]})]})})}const wn=(()=>{const r="luxemarket_products",e="luxemarket_data_version",t="v2.0",i=[{id:1,name:"Premium Wireless Headphones",price:299.99,category:"Electronics",description:"High-quality wireless headphones with noise cancellation",image:"https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=300",images:["https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=300","https://images.unsplash.com/photo-1484704849700-f032a568e944?w=300","https://images.unsplash.com/photo-1583394838336-acd977736f90?w=300"],colors:[{name:"Black",hex:"#000000",images:["https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=300","https://images.unsplash.com/photo-1484704849700-f032a568e944?w=300"]},{name:"White",hex:"#FFFFFF",images:["https://images.unsplash.com/photo-1583394838336-acd977736f90?w=300","https://images.unsplash.com/photo-1572569511254-d8f925fe2cbb?w=300"]}],sizes:[],rating:4.5,reviews:128,stock:15},{id:2,name:"Designer Leather Jacket",price:449.99,category:"Fashion",description:"Premium leather jacket with modern styling",image:"https://images.unsplash.com/photo-1551028719-00167b16eac5?w=300",images:["https://images.unsplash.com/photo-1551028719-00167b16eac5?w=300","https://images.unsplash.com/photo-1520975954732-35dd22299614?w=300","https://images.unsplash.com/photo-1594633312681-425c7b97ccd1?w=300"],colors:[{name:"Black",hex:"#000000",images:["https://images.unsplash.com/photo-1551028719-00167b16eac5?w=300","https://images.unsplash.com/photo-1520975954732-35dd22299614?w=300"]},{name:"Brown",hex:"#8B4513",images:["https://images.unsplash.com/photo-1594633312681-425c7b97ccd1?w=300","https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=300"]}],sizes:["S","M","L","XL"],rating:4.7,reviews:89,stock:8},{id:3,name:"Smart Watch Pro",price:399.99,category:"Electronics",description:"Advanced smartwatch with health monitoring",image:"https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=300",images:["https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=300","https://images.unsplash.com/photo-1508685096489-7aacd43bd3b1?w=300","https://images.unsplash.com/photo-1434493789847-2f02dc6ca35d?w=300"],colors:[{name:"Silver",hex:"#C0C0C0",images:["https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=300","https://images.unsplash.com/photo-1508685096489-7aacd43bd3b1?w=300"]},{name:"Black",hex:"#000000",images:["https://images.unsplash.com/photo-1434493789847-2f02dc6ca35d?w=300","https://images.unsplash.com/photo-1546868871-7041f2a55e12?w=300"]}],sizes:[],rating:4.6,reviews:203,stock:12},{id:4,name:"Luxury Sofa Set",price:1299.99,category:"Furniture",description:"Comfortable 3-piece luxury sofa set",image:"https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=300",images:["https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=300","https://images.unsplash.com/photo-1555041469-a586c61ea9bc?w=300","https://images.unsplash.com/photo-1567538096630-e0c55bd6374c?w=300"],colors:[{name:"Gray",hex:"#808080",images:["https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=300","https://images.unsplash.com/photo-1555041469-a586c61ea9bc?w=300"]},{name:"Navy",hex:"#000080",images:["https://images.unsplash.com/photo-1567538096630-e0c55bd6374c?w=300","https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=300"]}],sizes:[],rating:4.8,reviews:45,stock:3},{id:5,name:"Running Sneakers",price:129.99,category:"Fashion",description:"High-performance running shoes",image:"https://images.unsplash.com/photo-1542291026-7eec264c27ff?w=300",images:["https://images.unsplash.com/photo-1542291026-7eec264c27ff?w=300","https://images.unsplash.com/photo-1549298916-b41d501d3772?w=300","https://images.unsplash.com/photo-1460353581641-37baddab0fa2?w=300"],colors:[{name:"White",hex:"#FFFFFF",images:["https://images.unsplash.com/photo-1542291026-7eec264c27ff?w=300","https://images.unsplash.com/photo-1549298916-b41d501d3772?w=300"]},{name:"Black",hex:"#000000",images:["https://images.unsplash.com/photo-1460353581641-37baddab0fa2?w=300","https://images.unsplash.com/photo-1551107696-a4b0c5a0d9a2?w=300"]},{name:"Red",hex:"#EF4444",images:["https://images.unsplash.com/photo-1542291026-7eec264c27ff?w=300","https://images.unsplash.com/photo-1549298916-b41d501d3772?w=300"]}],sizes:["7","8","9","10","11","12"],rating:4.4,reviews:156,stock:0},{id:6,name:"Wireless Speaker",price:199.99,category:"Electronics",description:"Portable Bluetooth speaker with premium sound",image:"https://images.unsplash.com/photo-1608043152269-423dbba4e7e1?w=300",images:["https://images.unsplash.com/photo-1608043152269-423dbba4e7e1?w=300","https://images.unsplash.com/photo-1545454675-3531b543be5d?w=300"],colors:[{name:"Black",hex:"#000000",images:["https://images.unsplash.com/photo-1608043152269-423dbba4e7e1?w=300","https://images.unsplash.com/photo-1545454675-3531b543be5d?w=300"]},{name:"Blue",hex:"#3B82F6",images:["https://images.unsplash.com/photo-1608043152269-423dbba4e7e1?w=300"]}],sizes:[],rating:4.3,reviews:92,stock:25},{id:7,name:"Designer Handbag",price:349.99,category:"Accessories",description:"Elegant leather handbag for everyday use",image:"https://images.unsplash.com/photo-1584917865442-de89df76afd3?w=300",colors:[{name:"Brown",hex:"#8B4513"},{name:"Black",hex:"#000000"}],sizes:[],rating:4.6,reviews:74,stock:18},{id:8,name:"Gaming Laptop",price:1599.99,category:"Electronics",description:"High-performance gaming laptop",image:"https://images.unsplash.com/photo-1603302576837-37561b2e2302?w=300",colors:[{name:"Black",hex:"#000000"}],sizes:[],rating:4.7,reviews:167,stock:7},{id:9,name:"Yoga Mat Premium",price:79.99,category:"Sporting Goods",description:"Non-slip premium yoga mat",image:"https://images.unsplash.com/photo-1544367567-0f2fcb009e0b?w=300",colors:[{name:"Purple",hex:"#8B5CF6"},{name:"Blue",hex:"#3B82F6"}],sizes:[],rating:4.5,reviews:88,stock:14},{id:10,name:"Coffee Table Modern",price:299.99,category:"Furniture",description:"Modern glass coffee table",image:"https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=300",colors:[{name:"Clear",hex:"#F8F9FA"}],sizes:[],rating:4.4,reviews:56,stock:9},{id:11,name:"Sunglasses Classic",price:159.99,category:"Accessories",description:"Classic aviator sunglasses",image:"https://images.unsplash.com/photo-1572635196237-14b3f281503f?w=300",colors:[{name:"Gold",hex:"#FFD700"},{name:"Silver",hex:"#C0C0C0"}],sizes:[],rating:4.2,reviews:134,stock:0},{id:12,name:"Casual T-Shirt",price:29.99,category:"Fashion",description:"Comfortable cotton t-shirt",image:"https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=300",colors:[{name:"White",hex:"#FFFFFF"},{name:"Black",hex:"#000000"},{name:"Gray",hex:"#808080"}],sizes:["S","M","L","XL","XXL"],rating:4.1,reviews:245,stock:22},{id:13,name:"Bluetooth Earbuds",price:149.99,category:"Electronics",description:"True wireless earbuds with charging case",image:"https://images.unsplash.com/photo-1590658268037-6bf12165a8df?w=300",colors:[{name:"White",hex:"#FFFFFF"},{name:"Black",hex:"#000000"}],sizes:[],rating:4.3,reviews:189,stock:11}],o=()=>{const m=localStorage.getItem(r);if(!m)return null;try{return JSON.parse(m)}catch{return null}},l=m=>{localStorage.setItem(r,JSON.stringify(m))},h=()=>{if(localStorage.getItem(e)!==t)return localStorage.setItem(r,JSON.stringify(i)),localStorage.setItem(e,t),i;const v=o();return!v||v.length===0?(l(i),i):v};let p=h();return{getAll(){return[...p]},getById(m){return p.find(v=>v.id==m||v.id===m)||null},add(m){const _={id:(p.length>0?Math.max(...p.map(E=>typeof E.id=="number"?E.id:0)):0)+1,...m};return p.push(_),l(p),_},update(m,v){const _=p.findIndex(E=>E.id===m);return _===-1?!1:(p[_]={...p[_],...v},l(p),!0)},delete(m){const v=p.filter(E=>E.id!==m),_=v.length!==p.length;return _&&(p=v,l(p)),_},clearAll(){p=[],l(p)},resetToDefaults(){return console.log(" Resetting ProductManager to defaults..."),localStorage.removeItem(r),localStorage.removeItem(e),p=h(),console.log(" Reset complete, products:",p.length),p},isInStock(m){const v=this.getById(m);return v&&v.stock>0},getStock(m){const v=this.getById(m);return v&&v.stock||0},updateStock(m,v){const _=p.findIndex(E=>E.id===m);return _===-1?!1:(p[_].stock=Math.max(0,v),l(p),!0)},decreaseStock(m,v=1){const _=this.getById(m);return!_||_.stock<v?!1:this.updateStock(m,_.stock-v)},increaseStock(m,v=1){const _=this.getById(m);return _?this.updateStock(m,_.stock+v):!1},getDailyDeals(){const m=localStorage.getItem("luxemarket_daily_deals");return m?JSON.parse(m):[]},addToDailyDeals(m,v){const _=this.getDailyDeals(),E=_.findIndex(O=>O.productId===m),N={productId:m,discountPercent:Math.max(0,Math.min(90,v)),addedDate:new Date().toISOString()};return E>=0?_[E]=N:_.push(N),localStorage.setItem("luxemarket_daily_deals",JSON.stringify(_)),!0},removeFromDailyDeals(m){const _=this.getDailyDeals().filter(E=>E.productId!==m);return localStorage.setItem("luxemarket_daily_deals",JSON.stringify(_)),!0},getProductWithDeal(m){const v=this.getById(m);if(!v)return null;const E=this.getDailyDeals().find(N=>N.productId===m);if(E){const N=v.price*(E.discountPercent/100);return{...v,originalPrice:v.price,price:v.price-N,discountPercent:E.discountPercent,isDailyDeal:!0}}return v},getAllWithDeals(){return p.map(m=>this.getProductWithDeal(m.id))},getHomePageOrder(){const m=localStorage.getItem("luxemarket_homepage_order");return m?JSON.parse(m):[]},setHomePageOrder(m){return localStorage.setItem("luxemarket_homepage_order",JSON.stringify(m)),!0},getHomePageProducts(m=12){const v=this.getHomePageOrder(),_=this.getAllWithDeals();if(v.length>0){const E=[];return v.forEach(N=>{const O=_.find(L=>L.id===N);O&&E.push(O)}),E.slice(0,m)}return _.slice(0,m)},reorderHomePageProducts(m,v){const _=this.getHomePageOrder(),E=this.getAllWithDeals();let N=_.length>0?[..._]:E.slice(0,12).map(L=>L.id);const[O]=N.splice(m,1);return N.splice(v,0,O),this.setHomePageOrder(N),N},getProductsByCategory(m,v=!0){const _=this.getAll();return v?_.filter(E=>E.category&&E.category.toLowerCase()===m.toLowerCase()):_.filter(E=>E.category===m)},getAllCategories(){const m=this.getAll();return[...new Set(m.map(v=>v.category))].sort()},getCategoryStats(){const m=this.getAll();return this.getAllCategories().map(_=>({category:_,count:m.filter(E=>E.category===_).length,products:m.filter(E=>E.category===_).map(E=>({id:E.id,name:E.name,stock:E.stock}))}))},fixCategoryCase(m="Furniture"){const v=this.getAll();let _=0;return v.forEach(E=>{E.category&&E.category.toLowerCase()===m.toLowerCase()&&E.category!==m&&(this.update(E.id,{category:m}),_++)}),_},enableAutoSave(m=3e4){return this._autoSaveInterval&&clearInterval(this._autoSaveInterval),this._autoSaveInterval=setInterval(()=>{try{l(p),console.log(" Auto-saved products data")}catch(v){console.error(" Auto-save failed:",v)}},m),this._autoSaveInterval},disableAutoSave(){this._autoSaveInterval&&(clearInterval(this._autoSaveInterval),this._autoSaveInterval=null)},forceSave(){try{l(p);const m=this.getDailyDeals(),v=this.getHomePageOrder();return localStorage.setItem("luxemarket_daily_deals",JSON.stringify(m)),localStorage.setItem("luxemarket_homepage_order",JSON.stringify(v)),console.log(" Force saved all product data"),!0}catch(m){return console.error(" Force save failed:",m),!1}},createBackup(){const m={products:this.getAll(),dailyDeals:this.getDailyDeals(),homePageOrder:this.getHomePageOrder(),timestamp:new Date().toISOString(),version:localStorage.getItem(e)},v=`luxemarket_backup_${Date.now()}`;return localStorage.setItem(v,JSON.stringify(m)),console.log(" Created backup:",v),v},restoreFromBackup(m){try{const v=localStorage.getItem(m);if(!v)throw new Error("Backup not found");const _=JSON.parse(v);return p=_.products||[],l(p),_.dailyDeals&&localStorage.setItem("luxemarket_daily_deals",JSON.stringify(_.dailyDeals)),_.homePageOrder&&localStorage.setItem("luxemarket_homepage_order",JSON.stringify(_.homePageOrder)),_.version&&localStorage.setItem(e,_.version),console.log(" Restored from backup:",m),!0}catch(v){return console.error(" Restore failed:",v),!1}}}})();window.ProductManager=wn;const Xa=(()=>{const r="luxemarket_cart",e=()=>{const o=localStorage.getItem(r);if(!o)return[];try{return JSON.parse(o)}catch{return[]}},t=o=>{localStorage.setItem(r,JSON.stringify(o)),window.dispatchEvent(new Event("cartUpdated"))};let i=e();return{getCart(){return[...i]},getCount(){return i.reduce((o,l)=>o+l.quantity,0)},getItemCount(){return this.getCount()},getTotal(){return i.reduce((o,l)=>{const h=window.ProductManager?window.ProductManager.getById(l.id):null;return h?o+h.price*l.quantity:o},0)},add(o,l=1){if(window.ProductManager){const p=window.ProductManager.getById(o);if(!p)throw new Error("Product not found");if(!window.ProductManager.isInStock(o))throw new Error("Product is out of stock");const m=i.find(_=>_.id===o)?.quantity||0;if(m+l>p.stock)throw new Error(`Only ${p.stock} items available (${m} already in cart)`)}const h=i.find(p=>p.id===o);return h?h.quantity+=l:i.push({id:o,quantity:l}),t(i),!0},update(o,l){const h=i.find(p=>p.id===o);if(!h)return!1;if(l<=0)return this.remove(o),!0;if(window.ProductManager){const p=window.ProductManager.getById(o);if(p&&l>p.stock)throw new Error(`Only ${p.stock} items available`)}return h.quantity=l,t(i),!0},remove(o){const l=i.filter(p=>p.id!==o),h=l.length!==i.length;return h&&(i=l,t(i)),h},clear(){i=[],t(i)},enableAutoSave(o=3e4){return this._autoSaveInterval&&clearInterval(this._autoSaveInterval),this._autoSaveInterval=setInterval(()=>{try{t(i),console.log(" Auto-saved cart data")}catch(l){console.error(" Cart auto-save failed:",l)}},o),this._autoSaveInterval},disableAutoSave(){this._autoSaveInterval&&(clearInterval(this._autoSaveInterval),this._autoSaveInterval=null)},forceSave(){try{return t(i),console.log(" Force saved cart data"),!0}catch(o){return console.error(" Cart force save failed:",o),!1}}}})();window.CartManager=Xa;function Y_({currentProduct:r,onProductClick:e}){const[t,i]=J.useState([]);return J.useEffect(()=>{if(!r||!window.ProductManager)return;const l=window.ProductManager.getAll().filter(h=>h.id!==r.id&&h.category===r.category).slice(0,4);i(l)},[r]),!t||t.length===0?null:u.jsxs("div",{className:"mt-8 pt-8 border-t border-gray-200",children:[u.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Related Products"}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:t.map(o=>u.jsxs("div",{onClick:()=>e(o.id),className:"bg-white rounded-lg border border-gray-200 overflow-hidden hover:shadow-lg transition-all duration-300 cursor-pointer group",children:[u.jsx("div",{className:"relative aspect-square overflow-hidden bg-gray-100",children:u.jsx("img",{src:o.images?.[0]||o.image||"https://via.placeholder.com/200",alt:o.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"})}),u.jsxs("div",{className:"p-3",children:[u.jsx("h4",{className:"font-semibold text-sm text-gray-900 line-clamp-2 mb-1",children:o.name}),u.jsx("p",{className:"text-xs text-gray-500 mb-2",children:o.category}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("span",{className:"text-sm font-bold text-[var(--primary-color)]",children:["$",o.price.toFixed(2)]}),u.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[u.jsx("div",{className:"icon-star text-yellow-400 fill-current text-[10px]"}),o.rating]})]})]})]},o.id))})]})}function J_({product:r,onClose:e,currentUser:t,onOpenAuth:i,onCartUpdate:o}){const[l,h]=J.useState(null),[p,m]=J.useState(0),[v,_]=J.useState(!1),[E,N]=J.useState(1);if(J.useEffect(()=>{r&&(r.colors&&r.colors.length>0&&h(r.colors[0].name),m(0),window.WatchlistManager&&_(window.WatchlistManager.isInWatchlist(r.id)))},[r]),!r)return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:u.jsxs("div",{className:"bg-white rounded-lg p-8",children:[u.jsx("p",{children:"Product not found"}),u.jsx("button",{onClick:e,className:"btn btn-primary mt-4",children:"Close"})]})});let O=[];if(l&&r.colors){const I=r.colors.find(S=>S.name===l);I&&I.images&&(O=I.images)}O.length===0&&r.images&&(O=r.images.map(I=>typeof I=="string"?I:I.url)),O.length===0&&r.image&&(O=[r.image]);const L=[...O];r.videoUrl&&L.push({type:"video",url:r.videoUrl,thumbnail:O[0]||"https://via.placeholder.com/500x500?text=Video"});const F=L[p],M=F&&typeof F=="object"&&F.type==="video",K=()=>{L.length>1&&m(I=>(I+1)%L.length)},q=()=>{L.length>1&&m(I=>(I-1+L.length)%L.length)},Y=I=>{m(I)},ne=I=>{h(I),m(0)};J.useEffect(()=>{document.body.style.overflow="hidden";const I=S=>{S.key==="ArrowLeft"?(S.preventDefault(),q()):S.key==="ArrowRight"?(S.preventDefault(),K()):S.key==="Escape"&&(S.preventDefault(),e())};return document.addEventListener("keydown",I),()=>{document.body.style.overflow="unset",document.removeEventListener("keydown",I)}},[]);const G=()=>{if(!t){we("Please sign in to add items to your cart","info"),i(!1);return}if(r.stock===0){we("This product is out of stock","error");return}if(E>r.stock){we(`Only ${r.stock} items available`,"error");return}try{Xa.add(r.id,E)?(o(),window.dispatchEvent(new CustomEvent("cartUpdated")),we(`Added ${E} ${r.name}${E>1?"s":""} to cart`,"success")):we("Failed to add item to cart","error")}catch(I){console.error("Add to cart error:",I),we(I.message||"Failed to add item to cart","error")}},ae=()=>{if(window.WatchlistManager){const I=window.WatchlistManager.toggleWatchlist(r.id);_(I),we(I?`Added ${r.name} to watchlist`:`Removed ${r.name} from watchlist`,"success")}},k=()=>{if(!t){we("Please sign in to purchase this item","info"),i(!0);return}if(r.stock===0){we("This product is out of stock","error");return}if(E>r.stock){we(`Only ${r.stock} items available`,"error");return}try{Xa.add(r.id,E)?(o(),window.dispatchEvent(new CustomEvent("cartUpdated")),e(),setTimeout(()=>{window.dispatchEvent(new CustomEvent("openCheckout")),we(`Proceeding to checkout with ${E} ${r.name}${E>1?"s":""}`,"success")},100)):we("Failed to add item to cart","error")}catch(I){console.error("Buy now error:",I),we(I.message||"Failed to process purchase","error")}};return u.jsx("div",{className:"modal-overlay fixed inset-0 bg-black bg-opacity-50 modal-backdrop flex items-center justify-center p-4 overflow-y-auto",children:u.jsxs("div",{className:"product-modal bg-white rounded-lg max-w-4xl w-full my-8 shadow-2xl",children:[u.jsxs("div",{className:"bg-white border-b border-gray-200 p-4 flex justify-between items-center rounded-t-lg",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Product Details"}),L.length>1&&u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Use   keys or click thumbnails to navigate"})]}),u.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 text-3xl leading-none w-8 h-8 flex items-center justify-center hover:bg-gray-100 rounded-full transition-colors",title:"Close (Esc)",children:""})]}),u.jsx("div",{className:"max-h-[calc(90vh-80px)] overflow-y-auto",children:u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"aspect-square rounded-lg overflow-hidden bg-gray-100 relative",children:[M?u.jsx("video",{src:F.url,controls:!0,className:"w-full h-full object-cover",poster:F.thumbnail,children:"Your browser does not support the video tag."}):u.jsx("img",{src:typeof F=="string"?F:F?.url||"https://via.placeholder.com/500x500?text=No+Image",alt:r.name,className:"w-full h-full object-cover"}),L.length>1&&u.jsxs("div",{className:"absolute top-4 right-4 bg-black bg-opacity-70 text-white text-sm px-3 py-1 rounded-full",children:[p+1," / ",L.length,M&&u.jsx("span",{className:"ml-1",children:""})]})]}),L.length>1&&u.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:L.map((I,S)=>{const D=typeof I=="object"&&I.type==="video",P=D?I.thumbnail:typeof I=="string"?I:I.url;return u.jsxs("button",{onClick:()=>Y(S),onMouseEnter:()=>Y(S),className:`flex-shrink-0 w-16 h-16 rounded-lg border-2 overflow-hidden relative transition-all hover:scale-105 ${S===p?"border-blue-500 shadow-md":"border-gray-300 hover:border-gray-400"}`,title:D?"Play video":`View image ${S+1}`,children:[u.jsx("img",{src:P,alt:D?"Video thumbnail":`View ${S+1}`,className:"w-full h-full object-cover"}),D&&u.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-30 flex items-center justify-center",children:u.jsx("div",{className:"w-6 h-6 bg-white bg-opacity-90 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-black text-xs",children:""})})})]},S)})})]}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2 break-words",children:r.name}),u.jsxs("div",{className:"text-2xl font-bold text-blue-600 mb-4",children:["$",r.price.toFixed(2)]}),u.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[u.jsx("span",{className:"inline-block px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm",children:r.category}),r.stock===0?u.jsx("span",{className:"inline-block px-4 py-2 bg-red-100 text-red-700 rounded-full text-sm font-bold border border-red-200 stock-status out-of-stock",children:" Out of Stock"}):r.stock<=5?u.jsxs("span",{className:"inline-block px-4 py-2 bg-orange-100 text-orange-700 rounded-full text-sm font-bold border border-orange-200 stock-status low-stock",children:[" Only ",r.stock," left"]}):u.jsxs("span",{className:"inline-block px-4 py-2 bg-green-100 text-green-700 rounded-full text-sm font-bold border border-green-200 stock-status",children:[" In Stock (",r.stock," available)"]})]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Description"}),u.jsx("div",{className:"text-gray-600 leading-relaxed break-words",children:r.description})]}),r.colors&&r.colors.length>0&&u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Colors"}),u.jsx("div",{className:"space-y-2",children:r.colors.map((I,S)=>u.jsx("button",{onClick:()=>ne(I.name),className:`w-full p-3 rounded-lg border-2 text-left transition-all ${l===I.name?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400 hover:bg-gray-50"}`,children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-gray-400 flex-shrink-0",style:{backgroundColor:I.hex}}),u.jsxs("div",{className:"min-w-0 flex-1",children:[u.jsx("div",{className:"font-medium break-words",children:I.name}),u.jsxs("div",{className:"text-sm text-gray-500",children:[(I.images||[]).length," photos"]})]})]})},S))})]}),r.rating&&u.jsxs("div",{className:"flex items-center gap-4 py-3 border-t border-gray-200",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"flex text-yellow-400",children:[...Array(5)].map((I,S)=>u.jsx("span",{className:S<Math.floor(r.rating)?"text-yellow-400":"text-gray-300",children:""},S))}),u.jsx("span",{className:"font-semibold text-gray-900",children:r.rating})]}),r.reviews&&u.jsxs("span",{className:"text-gray-500",children:["(",r.reviews," reviews)"]})]}),r.stock>0&&u.jsxs("div",{className:"mb-6",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Quantity"}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg",children:[u.jsx("button",{onClick:()=>N(Math.max(1,E-1)),className:"px-4 py-2 text-gray-600 hover:text-gray-800 hover:bg-gray-50 transition-colors",disabled:E<=1,children:""}),u.jsx("span",{className:"px-4 py-2 font-semibold text-gray-900 min-w-[3rem] text-center",children:E}),u.jsx("button",{onClick:()=>N(Math.min(r.stock,E+1)),className:"px-4 py-2 text-gray-600 hover:text-gray-800 hover:bg-gray-50 transition-colors",disabled:E>=r.stock,children:"+"})]}),u.jsxs("span",{className:"text-sm text-gray-500",children:["Max: ",r.stock]})]})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("button",{onClick:G,disabled:r.stock===0,className:`w-full py-4 text-lg font-semibold transition-all ${r.stock===0?"bg-gray-300 text-gray-500 cursor-not-allowed":"btn btn-primary hover:shadow-lg"}`,children:r.stock===0?"Out of Stock":t?`Add ${E} to Cart - $${(r.price*E).toFixed(2)}`:"Sign In to Add to Cart"}),r.stock>0&&u.jsx("button",{onClick:k,className:"w-full py-4 text-lg font-semibold text-white rounded-lg hover:shadow-lg transition-all buy-now-btn",children:t?` Buy Now - $${(r.price*E).toFixed(2)}`:" Sign In to Buy Now"}),u.jsxs("button",{onClick:ae,className:`w-full py-3 text-base font-medium rounded-lg border-2 transition-all flex items-center justify-center gap-2 ${v?"bg-red-50 border-red-500 text-red-600 hover:bg-red-100":"bg-white border-gray-300 text-gray-600 hover:border-gray-400 hover:bg-gray-50"}`,children:[u.jsx("div",{className:`icon-heart text-lg ${v?"fill-current":""}`}),v?"Remove from Watchlist":"Add to Watchlist"]})]})]})]}),u.jsx(Y_,{currentProduct:r,onProductClick:I=>{wn.getById(I)&&(e(),setTimeout(()=>{window.dispatchEvent(new CustomEvent("openProduct",{detail:{productId:I}}))},100))}})]})})]})})}const hi=(()=>{const r="luxemarket_categories",e=()=>{const l=localStorage.getItem(r);if(!l)return null;try{return JSON.parse(l)}catch{return null}},t=l=>{localStorage.setItem(r,JSON.stringify(l))},i=()=>{const l=window.ProductManager?window.ProductManager.getAll():[],h=new Set(l.map(p=>p.category));return Array.from(h)};let o=e();return(!o||o.length===0)&&(o=i(),t(o)),{getAll(){return[...o]},add(l){const h=l.trim();return h?o.includes(h)?!1:(o.push(h),t(o),!0):!1},delete(l){const h=o.filter(m=>m!==l),p=h.length!==o.length;return p&&(o=h,t(o)),p},syncWithProducts(){o=i(),t(o)}}})();window.CategoryManager=hi;const Eo={black:"#000000",white:"#FFFFFF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",yellow:"#FFFF00",cyan:"#00FFFF",magenta:"#FF00FF",gray:"#808080",grey:"#808080",silver:"#C0C0C0",maroon:"#800000",olive:"#808000",lime:"#00FF00",aqua:"#00FFFF",teal:"#008080",navy:"#000080",fuchsia:"#FF00FF",purple:"#800080",orange:"#FFA500",pink:"#FFC0CB",brown:"#A52A2A",beige:"#F5F5DC",tan:"#D2B48C",khaki:"#F0E68C",gold:"#FFD700",bronze:"#CD7F32",copper:"#B87333",brass:"#B5A642",crimson:"#DC143C",scarlet:"#FF2400",ruby:"#E0115F",cherry:"#DE3163",rose:"#FF007F",coral:"#FF7F50",salmon:"#FA8072",tomato:"#FF6347",azure:"#007FFF",cobalt:"#0047AB",sapphire:"#0F52BA",indigo:"#4B0082",turquoise:"#40E0D0",sky:"#87CEEB",royal:"#4169E1",midnight:"#191970",emerald:"#50C878",jade:"#00A86B",forest:"#228B22",mint:"#98FF98",sage:"#9DC183",olive:"#808000",chartreuse:"#7FFF00",amber:"#FFBF00",mustard:"#FFDB58",lemon:"#FFF700",cream:"#FFFDD0",ivory:"#FFFFF0",peach:"#FFE5B4",apricot:"#FBCEB1",violet:"#8F00FF",lavender:"#E6E6FA",plum:"#DDA0DD",mauve:"#E0B0FF",lilac:"#C8A2C8",orchid:"#DA70D6",chocolate:"#D2691E",coffee:"#6F4E37",mocha:"#967969",chestnut:"#954535",mahogany:"#C04000",walnut:"#773F1A",oak:"#806517",charcoal:"#36454F",slate:"#708090",ash:"#B2BEB5",smoke:"#738276",pearl:"#EAE0C8",platinum:"#E5E4E2",steel:"#71797E",iron:"#4C4646",titanium:"#878681",chrome:"#C0C0C0",sand:"#C2B280",stone:"#8D8D8D",clay:"#B66A50",earth:"#8B4513",moss:"#8A9A5B",grass:"#7CFC00",leaf:"#228B22","sky blue":"#87CEEB",ocean:"#006994",sea:"#2E8B57",burgundy:"#800020",wine:"#722F37",champagne:"#F7E7CE",taupe:"#483C32",nude:"#E3BC9A",blush:"#DE5D83",marigold:"#EAA221",denim:"#1560BD","charcoal gray":"#36454F","off white":"#FAF9F6"};function gh(r){if(!r)return"#000000";if(r.startsWith("#")||r.startsWith("rgb"))return r;const e=r.toLowerCase().trim();if(Eo[e])return Eo[e];const t=Object.keys(Eo).find(i=>e.includes(i)||i.includes(e));return t?Eo[t]:(console.warn(`Color "${r}" not found, using black`),"#000000")}function X_(r){if(!r)return!1;const e=r.toLowerCase().trim();return Eo.hasOwnProperty(e)}function Z_(r){if(!r)return[];const e=r.toLowerCase().trim();return Object.keys(Eo).filter(t=>t.includes(e)).sort().slice(0,10)}function ew({onColorSelect:r,selectedColor:e}){const[t,i]=J.useState(!1),[o,l]=J.useState("#FF0000"),[h,p]=J.useState({r:255,g:0,b:0}),[m,v]=J.useState("visual"),[_,E]=J.useState(""),[N,O]=J.useState([]),[L,F]=J.useState(0),[M,K]=J.useState(100),[q,Y]=J.useState(100),ne=J.useRef(null),G=J.useRef(null),ae=B=>{const X=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(B);return X?{r:parseInt(X[1],16),g:parseInt(X[2],16),b:parseInt(X[3],16)}:{r:0,g:0,b:0}},k=(B,X,R)=>{const A=le=>{const ue=Math.max(0,Math.min(255,Math.round(le))).toString(16);return ue.length===1?"0"+ue:ue};return`#${A(B)}${A(X)}${A(R)}`},I=(B,X,R)=>{X=X/100,R=R/100;const A=R*X,le=A*(1-Math.abs(B/60%2-1)),ue=R-A;let he=0,_e=0,ke=0;return B>=0&&B<60?(he=A,_e=le,ke=0):B>=60&&B<120?(he=le,_e=A,ke=0):B>=120&&B<180?(he=0,_e=A,ke=le):B>=180&&B<240?(he=0,_e=le,ke=A):B>=240&&B<300?(he=le,_e=0,ke=A):B>=300&&B<360&&(he=A,_e=0,ke=le),{r:Math.round((he+ue)*255),g:Math.round((_e+ue)*255),b:Math.round((ke+ue)*255)}},S=(B,X,R)=>{B=B/255,X=X/255,R=R/255;const A=Math.max(B,X,R),le=Math.min(B,X,R),ue=A-le;let he=0;ue!==0&&(A===B?he=60*((X-R)/ue%6):A===X?he=60*((R-B)/ue+2):A===R&&(he=60*((B-X)/ue+4))),he<0&&(he+=360);const _e=A===0?0:ue/A*100,ke=A*100;return{h:he,s:_e,v:ke}};J.useEffect(()=>{const B=ne.current;if(!B)return;const X=B.getContext("2d"),R=B.width,A=B.height;I(L,100,100);for(let le=0;le<R;le++){const ue=le/R*100;for(let he=0;he<A;he++){const _e=100-he/A*100,ke=I(L,ue,_e);X.fillStyle=`rgb(${ke.r}, ${ke.g}, ${ke.b})`,X.fillRect(le,he,1,1)}}},[L]),J.useEffect(()=>{const B=I(L,M,q);p(B),l(k(B.r,B.g,B.b))},[L,M,q]);const D=B=>{const X=k(B.r,B.g,B.b);l(X);const R=S(B.r,B.g,B.b);F(R.h),K(R.s),Y(R.v)},P=(B,X)=>{const R=Math.max(0,Math.min(255,parseInt(X)||0)),A={...h,[B]:R};p(A),D(A)},U=B=>{const X=ne.current;if(!X)return;const R=X.getBoundingClientRect(),A=B.clientX-R.left,le=B.clientY-R.top,ue=A/X.width*100,he=100-le/X.height*100;K(ue),Y(he)},b=B=>{const X=G.current;if(!X)return;const R=X.getBoundingClientRect(),le=(B.clientX-R.left)/R.width*360;F(le)},ge=B=>{if(E(B),B.length>0){const X=Z_(B);O(X)}else O([]);if(X_(B)){const X=gh(B);l(X)}},Re=B=>{E(B);const X=gh(B);l(X),O([])},je=[{name:"Black",hex:"#000000"},{name:"White",hex:"#FFFFFF"},{name:"Gray",hex:"#808080"},{name:"Light Gray",hex:"#D3D3D3"},{name:"Dark Gray",hex:"#404040"},{name:"Red",hex:"#FF0000"},{name:"Dark Red",hex:"#DC2626"},{name:"Pink",hex:"#FFC0CB"},{name:"Hot Pink",hex:"#FF69B4"},{name:"Orange",hex:"#FFA500"},{name:"Dark Orange",hex:"#FF8C00"},{name:"Yellow",hex:"#FFFF00"},{name:"Gold",hex:"#FFD700"},{name:"Lime",hex:"#00FF00"},{name:"Green",hex:"#008000"},{name:"Forest Green",hex:"#228B22"},{name:"Teal",hex:"#008080"},{name:"Cyan",hex:"#00FFFF"},{name:"Sky Blue",hex:"#87CEEB"},{name:"Blue",hex:"#0000FF"},{name:"Navy",hex:"#000080"},{name:"Indigo",hex:"#4B0082"},{name:"Violet",hex:"#8B00FF"},{name:"Purple",hex:"#800080"},{name:"Magenta",hex:"#FF00FF"},{name:"Brown",hex:"#A52A2A"},{name:"Tan",hex:"#D2B48C"},{name:"Beige",hex:"#F5F5DC"},{name:"Maroon",hex:"#800000"},{name:"Olive",hex:"#808000"},{name:"Silver",hex:"#C0C0C0"},{name:"Coral",hex:"#FF7F50"},{name:"Crimson",hex:"#DC143C"},{name:"Turquoise",hex:"#40E0D0"},{name:"Salmon",hex:"#FA8072"},{name:"Khaki",hex:"#F0E68C"},{name:"Plum",hex:"#DDA0DD"},{name:"Orchid",hex:"#DA70D6"},{name:"Steel Blue",hex:"#4682B4"},{name:"Slate Gray",hex:"#708090"}],Me=B=>{r(B),i(!1)},ie=()=>{const B=prompt("Enter a name for this color:")||"Custom Color";r({name:B,hex:o}),i(!1)};return u.jsxs("div",{className:"relative",children:[u.jsxs("button",{type:"button",onClick:()=>i(!t),className:"flex items-center gap-2 px-3 py-2 border border-gray-300 rounded-md hover:border-gray-400 transition-colors bg-white",children:[u.jsx("div",{className:"w-6 h-6 rounded border border-gray-300",style:{backgroundColor:e?.hex||"#000000"}}),u.jsx("span",{className:"text-sm",children:e?.name||"Select Color"}),u.jsx("div",{className:`icon-chevron-down text-xs transition-transform ${t?"rotate-180":""}`})]}),t&&u.jsxs("div",{className:"absolute top-full left-0 mt-2 bg-white border border-gray-200 rounded-lg shadow-xl z-50 p-4 w-80",children:[u.jsxs("div",{className:"mb-4",children:[u.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Color Palette"}),u.jsx("div",{className:"grid grid-cols-10 gap-2",children:je.map((B,X)=>u.jsx("button",{type:"button",onClick:()=>Me(B),className:`w-8 h-8 rounded border-2 transition-all color-picker-button ${e?.hex===B.hex?"border-[var(--primary-color)] ring-2 ring-[var(--primary-color)]/20 scale-110":"border-gray-300 hover:border-gray-400 hover:scale-110"}`,style:{backgroundColor:B.hex},title:`${B.name} (${B.hex}) - RGB(${ae(B.hex).r}, ${ae(B.hex).g}, ${ae(B.hex).b})`},X))})]}),u.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Custom Color"}),u.jsxs("div",{className:"flex bg-gray-100 rounded-md p-1",children:[u.jsx("button",{type:"button",onClick:()=>v("visual"),className:`px-2 py-1 text-xs rounded transition-colors ${m==="visual"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"VISUAL"}),u.jsx("button",{type:"button",onClick:()=>v("hex"),className:`px-2 py-1 text-xs rounded transition-colors ${m==="hex"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"HEX"}),u.jsx("button",{type:"button",onClick:()=>v("rgb"),className:`px-2 py-1 text-xs rounded transition-colors ${m==="rgb"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"RGB"}),u.jsx("button",{type:"button",onClick:()=>v("name"),className:`px-2 py-1 text-xs rounded transition-colors ${m==="name"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"NAME"})]})]}),m==="visual"?u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"relative",children:[u.jsx("canvas",{ref:ne,width:300,height:200,onClick:U,className:"w-full h-48 rounded-lg border-2 border-gray-300 cursor-crosshair",style:{imageRendering:"pixelated"}}),u.jsx("div",{className:"absolute w-4 h-4 border-2 border-white rounded-full pointer-events-none shadow-lg",style:{left:`${M}%`,top:`${100-q}%`,transform:"translate(-50%, -50%)",boxShadow:"0 0 0 1px black"}})]}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{ref:G,onClick:b,className:"w-full h-8 rounded-lg cursor-pointer border-2 border-gray-300",style:{background:"linear-gradient(to right, #ff0000 0%, #ffff00 17%, #00ff00 33%, #00ffff 50%, #0000ff 67%, #ff00ff 83%, #ff0000 100%)"}}),u.jsx("div",{className:"absolute top-0 bottom-0 w-1 bg-white border border-gray-800 pointer-events-none rounded-full",style:{left:`${L/360*100}%`,transform:"translateX(-50%)"}})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"icon-eyedropper text-2xl text-gray-600"}),u.jsx("div",{className:"w-16 h-16 rounded-lg border-2 border-gray-300 shadow-inner",style:{backgroundColor:o}})]}),u.jsxs("div",{className:"flex-1 grid grid-cols-3 gap-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1 text-center",children:"R"}),u.jsx("input",{type:"number",min:"0",max:"255",value:h.r,onChange:B=>P("r",B.target.value),className:"w-full px-2 py-2 text-center text-lg font-bold border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1 text-center",children:"G"}),u.jsx("input",{type:"number",min:"0",max:"255",value:h.g,onChange:B=>P("g",B.target.value),className:"w-full px-2 py-2 text-center text-lg font-bold border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1 text-center",children:"B"}),u.jsx("input",{type:"number",min:"0",max:"255",value:h.b,onChange:B=>P("b",B.target.value),className:"w-full px-2 py-2 text-center text-lg font-bold border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent"})]})]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("div",{className:"text-sm font-mono text-gray-600",children:o.toUpperCase()}),u.jsx("button",{type:"button",onClick:ie,className:"btn btn-primary text-sm px-4 py-2",children:"Add Color"})]})]}):m==="hex"?u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"color",value:o,onChange:B=>l(B.target.value),className:"w-12 h-8 rounded border border-gray-300 cursor-pointer"}),u.jsx("input",{type:"text",value:o,onChange:B=>l(B.target.value),placeholder:"#000000",className:"flex-1 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent"}),u.jsx("button",{type:"button",onClick:ie,className:"btn btn-primary text-xs px-3 py-1",children:"Add"})]}):m==="rgb"?u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-12 h-8 rounded border border-gray-300",style:{backgroundColor:o}}),u.jsxs("div",{className:"flex-1 grid grid-cols-3 gap-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"R"}),u.jsx("input",{type:"number",min:"0",max:"255",value:h.r,onChange:B=>P("r",B.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"G"}),u.jsx("input",{type:"number",min:"0",max:"255",value:h.g,onChange:B=>P("g",B.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"B"}),u.jsx("input",{type:"number",min:"0",max:"255",value:h.b,onChange:B=>P("b",B.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent"})]})]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("div",{className:"text-xs text-gray-500 flex-1",children:["RGB(",h.r,", ",h.g,", ",h.b,") = ",o]}),u.jsx("button",{type:"button",onClick:ie,className:"btn btn-primary text-xs px-3 py-1",children:"Add Color"})]})]}):u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-12 h-8 rounded border border-gray-300",style:{backgroundColor:o}}),u.jsxs("div",{className:"flex-1 relative",children:[u.jsx("input",{type:"text",value:_,onChange:B=>ge(B.target.value),placeholder:"Type color name (e.g., red, blue, emerald)",className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent"}),N.length>0&&u.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-300 rounded shadow-lg max-h-40 overflow-y-auto z-10",children:N.map(B=>u.jsxs("button",{type:"button",onClick:()=>Re(B),className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 flex items-center gap-2",children:[u.jsx("div",{className:"w-4 h-4 rounded border border-gray-300",style:{backgroundColor:gh(B)}}),B]},B))})]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"text-xs text-gray-500 flex-1",children:_?`"${_}" = ${o}`:"Enter a color name"}),u.jsx("button",{type:"button",onClick:ie,disabled:!_,className:"btn btn-primary text-xs px-3 py-1 disabled:opacity-50 disabled:cursor-not-allowed",children:"Add Color"})]})]})]}),u.jsx("div",{className:"flex justify-end mt-4 pt-3 border-t border-gray-200",children:u.jsx("button",{type:"button",onClick:()=>i(!1),className:"btn btn-secondary text-sm px-4 py-1",children:"Close"})})]})]})}function tw({colors:r,onChange:e}){const[t,i]=J.useState(r||[]),[o,l]=J.useState(-1),[h,p]=J.useState(-1),[m,v]=J.useState(""),[_,E]=J.useState("");J.useEffect(()=>{e(t)},[t]),J.useEffect(()=>{i(r||[])},[r]);const N=K=>{const q={name:K.name,hex:K.hex,images:[]};i(Y=>[...Y,q])},O=(K,q,Y)=>{i(ne=>ne.map((G,ae)=>ae===K?{...G,[q]:Y}:G))},L=K=>{i(q=>q.filter((Y,ne)=>ne!==K))},F=K=>{_.trim()&&(i(q=>q.map((Y,ne)=>ne===K?{...Y,images:[...Y.images||[],_.trim()]}:Y)),E(""))},M=(K,q)=>{i(Y=>Y.map((ne,G)=>G===K?{...ne,images:ne.images.filter((ae,k)=>k!==q)}:ne))};return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Product Colors"}),u.jsx(ew,{onColorSelect:N,selectedColor:null})]}),t.length===0?u.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[u.jsx("div",{className:"icon-palette text-3xl text-gray-400 mx-auto mb-2"}),u.jsx("p",{className:"text-gray-500",children:"No colors added yet"}),u.jsx("p",{className:"text-sm text-gray-400",children:"Use the color picker above to add colors"})]}):u.jsx("div",{className:"space-y-3",children:t.map((K,q)=>u.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-white",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[h===q?u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"color",value:K.hex,onChange:Y=>O(q,"hex",Y.target.value),className:"w-8 h-8 rounded border border-gray-300 cursor-pointer"}),u.jsx("input",{type:"text",value:K.hex,onChange:Y=>O(q,"hex",Y.target.value),onBlur:()=>p(-1),onKeyDown:Y=>Y.key==="Enter"&&p(-1),className:"px-2 py-1 border border-gray-300 rounded text-sm w-24 focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent",placeholder:"#000000",autoFocus:!0}),u.jsx("button",{type:"button",onClick:()=>p(-1),className:"text-xs text-green-600 hover:text-green-800",children:" Done"})]}):u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-8 h-8 rounded border border-gray-300 cursor-pointer hover:ring-2 hover:ring-blue-300 transition-all",style:{backgroundColor:K.hex},onClick:()=>p(q),title:"Click to edit color"}),u.jsx("button",{type:"button",onClick:()=>p(q),className:"text-xs text-blue-600 hover:text-blue-800",children:"Edit color"})]}),o===q?u.jsx("input",{type:"text",value:K.name,onChange:Y=>O(q,"name",Y.target.value),onBlur:()=>l(-1),onKeyDown:Y=>Y.key==="Enter"&&l(-1),className:"px-2 py-1 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent",autoFocus:!0}):u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"font-medium text-gray-900",children:K.name}),u.jsx("span",{className:"text-sm text-gray-500",children:K.hex}),u.jsx("button",{type:"button",onClick:()=>l(q),className:"text-xs text-blue-600 hover:text-blue-800",children:"Edit name"})]})]}),u.jsxs("button",{type:"button",onClick:()=>L(q),className:"text-red-500 hover:text-red-700 text-sm flex items-center gap-1",children:[u.jsx("div",{className:"icon-trash text-sm"}),"Remove"]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"flex items-center gap-2 mb-2",children:u.jsxs("label",{className:"text-sm font-medium text-gray-700",children:["Images for ",K.name," (",(K.images||[]).length,")"]})}),u.jsxs("div",{className:"flex gap-2 mb-2",children:[u.jsx("input",{type:"text",value:_,onChange:Y=>E(Y.target.value),placeholder:"https://example.com/color-image.jpg",className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent"}),u.jsx("button",{type:"button",onClick:()=>F(q),className:"btn btn-secondary text-sm px-3 py-2",children:"Add Image"})]}),(K.images||[]).length===0?u.jsxs("div",{className:"text-center py-6 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[u.jsx("div",{className:"text-2xl mb-2",children:""}),u.jsxs("p",{className:"text-gray-500 text-sm",children:["No images for ",K.name," yet"]})]}):u.jsx("div",{className:"grid grid-cols-6 gap-2",children:(K.images||[]).map((Y,ne)=>u.jsxs("div",{className:"relative group",children:[u.jsx("img",{src:Y,alt:`${K.name} - Image ${ne+1}`,className:"w-full h-20 object-cover rounded border hover:border-[var(--primary-color)] transition-colors",onError:G=>{G.target.src="https://via.placeholder.com/80x80?text=Error"}}),u.jsx("button",{type:"button",onClick:()=>M(q,ne),className:"absolute top-1 right-1 w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-lg text-sm flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity shadow-lg hover:scale-110 transform",title:"Delete image",children:""}),u.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-black/70 text-white text-xs p-1 text-center opacity-0 group-hover:opacity-100 transition-opacity rounded-b",children:["#",ne+1]})]},`${Y}-${ne}`))})]})]},q))}),u.jsxs("div",{className:"text-xs text-gray-500 bg-blue-50 p-3 rounded",children:[u.jsx("strong",{children:"Tip:"})," Each color can have its own set of images. When customers select a color, they'll see the images specific to that color variant. Hover over images to see the delete button."]})]})}function nw({images:r,onUpdate:e,title:t="Product Images"}){const[i,o]=J.useState(""),[l,h]=J.useState("front"),p=[{value:"front",label:"Front View",icon:""},{value:"back",label:"Back View",icon:""},{value:"left",label:"Left Side",icon:""},{value:"right",label:"Right Side",icon:""},{value:"top",label:"Top View",icon:""},{value:"bottom",label:"Bottom View",icon:""},{value:"detail",label:"Detail Shot",icon:""},{value:"lifestyle",label:"Lifestyle",icon:""},{value:"packaging",label:"Packaging",icon:""},{value:"other",label:"Other",icon:""}],m=J.useMemo(()=>!r||r.length===0?[]:r.map((F,M)=>typeof F=="string"?{id:`img-${M}-${F.slice(-10)}`,url:F,angle:M===0?"front":"other",description:""}:F),[r]),v=()=>{if(!i.trim())return;const F={id:`img-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,url:i.trim(),angle:l,description:""},M=[...m,F];e(M),o(""),h("front")},_=F=>{const M=m.filter(K=>K.id!==F);e(M)},E=(F,M)=>{const K=m.map(q=>q.id===F?{...q,angle:M}:q);e(K)},N=(F,M)=>{const K=m.map(q=>q.id===F?{...q,description:M}:q);e(K)},O=F=>p.find(M=>M.value===F)||p.find(M=>M.value==="other"),L=J.useMemo(()=>{const F={};return m.forEach(M=>{F[M.angle]||(F[M.angle]=[]),F[M.angle].push(M)}),F},[m]);return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border-2 border-dashed border-gray-300",children:[u.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2",children:[u.jsx("span",{className:"text-lg",children:""}),"Add New Image"]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Image URL"}),u.jsx("input",{type:"url",value:i,onChange:F=>o(F.target.value),placeholder:"https://example.com/image.jpg",className:"w-full border border-gray-300 p-2 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Angle/View"}),u.jsx("select",{value:l,onChange:F=>h(F.target.value),className:"w-full border border-gray-300 p-2 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:p.map(F=>u.jsxs("option",{value:F.value,children:[F.icon," ",F.label]},F.value))})]})]}),u.jsxs("div",{className:"flex items-center gap-3 mt-3",children:[u.jsx("button",{type:"button",onClick:v,disabled:!i.trim(),className:"btn btn-primary text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Add Image"}),i&&u.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[u.jsx("img",{src:i,alt:"Preview",className:"w-8 h-8 object-cover rounded border",onError:F=>{F.target.style.display="none"}}),u.jsx("span",{children:"Preview"})]})]})]}),m.length===0?u.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[u.jsx("div",{className:"text-4xl mb-3",children:""}),u.jsx("p",{className:"text-gray-500 font-medium",children:"No images added yet"}),u.jsx("p",{className:"text-gray-400 text-sm",children:"Add images with different angles to showcase your product"})]}):u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[u.jsx("span",{children:""}),t," (",m.length,")"]})}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:m.map((F,M)=>{const K=O(F.angle);return u.jsxs("div",{className:"relative group transition-all duration-200 bg-white rounded-lg border-2 border-gray-200 hover:border-gray-300 overflow-hidden",children:[u.jsxs("div",{className:"aspect-square overflow-hidden bg-gray-100 relative",children:[u.jsx("img",{src:F.url,alt:`${K.label} view`,className:"w-full h-full object-cover",onError:q=>{q.target.src="https://via.placeholder.com/200x200?text=Error"}}),u.jsxs("div",{className:"absolute top-2 left-2 bg-black/70 text-white text-xs px-2 py-1 rounded-full font-medium",children:["#",M+1]}),u.jsx("button",{type:"button",onClick:()=>_(F.id),className:"absolute top-2 right-2 w-10 h-10 bg-red-500 hover:bg-red-600 text-white rounded-lg text-lg flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity shadow-lg hover:scale-110 transform",title:"Delete image",children:""})]}),u.jsxs("div",{className:"p-3 space-y-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"View Angle"}),u.jsx("select",{value:F.angle,onChange:q=>E(F.id,q.target.value),className:"w-full border border-gray-300 p-1 rounded text-xs focus:ring-1 focus:ring-blue-500 focus:border-transparent",children:p.map(q=>u.jsxs("option",{value:q.value,children:[q.icon," ",q.label]},q.value))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Description (Optional)"}),u.jsx("input",{type:"text",value:F.description||"",onChange:q=>N(F.id,q.target.value),placeholder:"e.g., Close-up of texture",className:"w-full border border-gray-300 p-1 rounded text-xs focus:ring-1 focus:ring-blue-500 focus:border-transparent"})]})]})]},F.id)})}),u.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[u.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[u.jsx("span",{children:""}),"Images by Angle"]}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-2 text-xs",children:Object.entries(L).map(([F,M])=>{const K=O(F);return u.jsxs("div",{className:"bg-white p-2 rounded border text-center",children:[u.jsx("div",{className:"text-lg mb-1",children:K.icon}),u.jsx("div",{className:"font-medium text-gray-700",children:K.label}),u.jsxs("div",{className:"text-gray-500",children:[M.length," image",M.length!==1?"s":""]})]},F)})})]}),u.jsxs("div",{className:"bg-yellow-50 p-3 rounded-lg border border-yellow-200",children:[u.jsxs("h4",{className:"text-sm font-medium text-yellow-800 mb-1 flex items-center gap-2",children:[u.jsx("span",{children:""}),"Pro Tips"]}),u.jsxs("ul",{className:"text-xs text-yellow-700 space-y-1",children:[u.jsx("li",{children:" The first image will be used as the main product image"}),u.jsx("li",{children:" Add multiple angles to give customers a complete view"}),u.jsx("li",{children:' Use descriptive angles like "Front View", "Detail Shot", etc.'}),u.jsx("li",{children:" Hover over images to see the large delete button"})]})]})]})]})}const rw=J.memo(nw);function _g({isOpen:r,onClose:e,onConfirm:t,title:i="Confirm Action",message:o="Are you sure you want to proceed?",confirmText:l="Confirm",cancelText:h="Cancel",type:p="danger",itemDetails:m=null}){if(!r)return null;const _=(()=>{switch(p){case"danger":return{icon:"icon-triangle-alert",iconColor:"text-red-600",iconBg:"bg-red-100",confirmBtn:"bg-red-600 hover:bg-red-700 text-white",border:"border-red-200"};case"warning":return{icon:"icon-triangle-alert",iconColor:"text-yellow-600",iconBg:"bg-yellow-100",confirmBtn:"bg-yellow-600 hover:bg-yellow-700 text-white",border:"border-yellow-200"};case"info":return{icon:"icon-info-circle",iconColor:"text-blue-600",iconBg:"bg-blue-100",confirmBtn:"bg-blue-600 hover:bg-blue-700 text-white",border:"border-blue-200"};default:return{icon:"icon-triangle-alert",iconColor:"text-red-600",iconBg:"bg-red-100",confirmBtn:"bg-red-600 hover:bg-red-700 text-white",border:"border-red-200"}}})(),E=()=>{t(),e()},N=()=>{e()};return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 modal-backdrop flex items-center justify-center z-[100] animate-[fadeIn_0.2s_ease-out]",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4 overflow-hidden modal-content",children:[u.jsx("div",{className:`p-6 border-b ${_.border}`,children:u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:`w-12 h-12 rounded-full ${_.iconBg} flex items-center justify-center flex-shrink-0`,children:u.jsx("div",{className:`${_.icon} text-2xl ${_.iconColor}`})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:i}),u.jsx("p",{className:"text-sm text-gray-600 mt-1",children:o})]})]})}),m&&u.jsx("div",{className:"p-6 bg-gray-50 border-b border-gray-200",children:u.jsxs("div",{className:"flex items-center gap-4",children:[m.image&&u.jsx("img",{src:m.image,alt:m.name,className:"w-16 h-16 object-cover rounded border",onError:O=>{O.target.src="https://via.placeholder.com/64x64?text=No+Image"}}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h4",{className:"font-semibold text-gray-900",children:m.name}),m.price&&u.jsxs("p",{className:"text-sm text-gray-600",children:["$",m.price.toFixed(2)]}),m.category&&u.jsx("p",{className:"text-xs text-gray-500",children:m.category})]})]})}),u.jsx("div",{className:"p-6",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("div",{className:"icon-triangle-alert text-yellow-500 text-lg mt-0.5"}),u.jsxs("div",{className:"text-sm text-gray-700",children:[u.jsx("p",{className:"font-medium mb-2",children:"This action cannot be undone."}),u.jsxs("ul",{className:"list-disc list-inside space-y-1 text-gray-600",children:[u.jsx("li",{children:"The product will be permanently removed from your store"}),u.jsx("li",{children:"All associated images and data will be deleted"}),u.jsx("li",{children:"This product will no longer appear in search results"}),m?.reviews>0&&u.jsxs("li",{children:["All customer reviews (",m.reviews,") will be lost"]})]})]})]})}),u.jsxs("div",{className:"p-6 bg-gray-50 flex gap-3 justify-end",children:[u.jsx("button",{onClick:N,className:"btn btn-secondary px-6 py-2",children:h}),u.jsx("button",{onClick:E,className:`btn px-6 py-2 ${_.confirmBtn}`,children:l})]})]})})}function sw({product:r,isVisible:e}){const[t,i]=J.useState(0),[o,l]=J.useState(null);if(J.useEffect(()=>{r?.colors?.length>0&&!o&&l(r.colors[0].name)},[r?.colors?.length,o]),J.useEffect(()=>{i(0)},[o]),!e||!r)return null;let h=[];if(o&&r.colors){const N=r.colors.find(O=>O.name===o);N&&N.images&&(h=N.images)}h.length===0&&r.images&&(h=r.images.map(N=>typeof N=="string"?N:N.url)),h.length===0&&r.image&&(h=[r.image]);const p=h[t]||"https://via.placeholder.com/400x400?text=No+Image",m=N=>{l(N),i(0)},v=()=>{h.length>1&&i(N=>(N+1)%h.length)},_=()=>{h.length>1&&i(N=>(N-1+h.length)%h.length)},E=N=>{i(N)};return u.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-8 border-l-4 border-blue-500",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:u.jsx("span",{className:"text-lg",children:""})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Product Preview"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Live preview of how this product will appear"})]})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"aspect-square rounded-lg overflow-hidden bg-gray-100 relative border-2 border-blue-200",children:[u.jsx("img",{src:p,alt:`${r.name} - ${o||"default"}`,className:"w-full h-full object-cover",onError:N=>{N.target.src="https://via.placeholder.com/400x400?text=No+Image"}}),h.length>1&&u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:_,className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-12 h-12 bg-red-600 hover:bg-red-700 text-white rounded-full flex items-center justify-center text-xl font-bold shadow-lg",children:""}),u.jsx("button",{onClick:v,className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-12 h-12 bg-green-600 hover:bg-green-700 text-white rounded-full flex items-center justify-center text-xl font-bold shadow-lg",children:""}),u.jsxs("div",{className:"absolute top-3 right-3 bg-black bg-opacity-80 text-white text-lg px-4 py-2 rounded",children:[t+1," / ",h.length]})]})]}),h.length>1&&u.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:h.map((N,O)=>u.jsx("button",{onClick:()=>E(O),className:`flex-shrink-0 w-20 h-20 rounded-md overflow-hidden border-2 ${O===t?"border-blue-500 shadow-lg":"border-gray-300 hover:border-gray-400"}`,children:u.jsx("img",{src:N,alt:`View ${O+1}`,className:"w-full h-full object-cover"})},O))}),h.length>1&&u.jsxs("div",{className:"flex gap-2 justify-center",children:[u.jsx("button",{onClick:_,className:"bg-red-500 text-white px-3 py-1 rounded text-sm",children:" PREV"}),u.jsx("button",{onClick:v,className:"bg-green-500 text-white px-3 py-1 rounded text-sm",children:"NEXT "}),u.jsx("button",{onClick:()=>E(0),className:"bg-blue-500 text-white px-3 py-1 rounded text-sm",children:"FIRST"})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:r.name||"Product Name"}),u.jsxs("div",{className:"text-2xl font-bold text-blue-600 mb-3",children:["$",r.price?r.price.toFixed(2):"0.00"]}),u.jsx("span",{className:"inline-block px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm",children:r.category||"No Category"})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Description"}),u.jsx("p",{className:"text-gray-600",children:r.description||"No description provided"})]}),r.colors&&r.colors.length>0&&u.jsxs("div",{children:[u.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:["Colors (",r.colors.length,")"]}),u.jsx("div",{className:"space-y-2",children:r.colors.map((N,O)=>u.jsx("button",{onClick:()=>m(N.name),className:`w-full p-3 rounded-md border-2 text-left ${o===N.name?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-gray-400",style:{backgroundColor:N.hex}}),u.jsxs("div",{children:[u.jsx("div",{className:"font-medium",children:N.name}),u.jsxs("div",{className:"text-sm text-gray-500",children:[(N.images||[]).length," photos"]})]})]})},O))})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t border-gray-200",children:[u.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded",children:[u.jsx("div",{className:"text-lg font-semibold text-blue-600",children:h.length}),u.jsx("div",{className:"text-sm text-gray-600",children:"Images"})]}),u.jsxs("div",{className:"text-center p-3 bg-purple-50 rounded",children:[u.jsx("div",{className:"text-lg font-semibold text-purple-600",children:r.colors?.length||0}),u.jsx("div",{className:"text-sm text-gray-600",children:"Colors"})]})]})]})]})]})}const iw=J.memo(sw);function ow({products:r,onUpdate:e}){const[t,i]=J.useState([]),[o,l]=J.useState(""),[h,p]=J.useState(20);J.useEffect(()=>{m()},[]);const m=()=>{const E=wn.getDailyDeals();i(E)},v=()=>{if(!o||h<=0){we("Please select a product and enter a valid discount","error");return}wn.addToDailyDeals(parseInt(o),h),m(),e(),l(""),p(20),we("Product added to daily deals!","success"),window.dispatchEvent(new CustomEvent("adminUpdate"))},_=E=>{wn.removeFromDailyDeals(E),m(),e(),we("Product removed from daily deals","success"),window.dispatchEvent(new CustomEvent("adminUpdate"))};return u.jsxs("div",{className:"bg-gradient-to-r from-red-50 to-orange-50 p-6 rounded-lg shadow mb-8",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[u.jsx("div",{className:"icon-tag text-2xl text-red-600"}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Daily Deals Management"}),u.jsx("p",{className:"text-gray-600",children:"Add special discounts to featured products"})]})]}),u.jsxs("div",{className:"bg-white p-4 rounded-lg mb-6",children:[u.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Add Product to Daily Deals"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product"}),u.jsxs("select",{value:o,onChange:E=>l(E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",children:[u.jsx("option",{value:"",children:"Select a product..."}),r.map(E=>u.jsxs("option",{value:E.id,children:[E.name," - $",E.price.toFixed(2)]},E.id))]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Discount %"}),u.jsx("input",{type:"number",min:"1",max:"90",value:h,onChange:E=>p(parseInt(E.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500"})]}),u.jsx("div",{className:"flex items-end",children:u.jsx("button",{onClick:v,className:"w-full btn bg-red-600 text-white hover:bg-red-700 py-2 px-4 rounded-md",children:"Add to Daily Deals"})})]})]}),u.jsxs("div",{className:"bg-white p-4 rounded-lg",children:[u.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Current Daily Deals (",t.length,")"]}),t.length===0?u.jsx("p",{className:"text-gray-500 text-center py-4",children:"No daily deals active"}):u.jsx("div",{className:"space-y-3",children:t.map(E=>{const N=r.find(F=>F.id===E.productId);if(!N)return null;const O=N.price*(E.discountPercent/100),L=N.price-O;return u.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg border border-red-200",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("img",{src:N.image,alt:N.name,className:"w-12 h-12 object-cover rounded-lg"}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold text-gray-900",children:N.name}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("span",{className:"text-lg font-bold text-red-600",children:["$",L.toFixed(2)]}),u.jsxs("span",{className:"text-sm text-gray-500 line-through",children:["$",N.price.toFixed(2)]}),u.jsxs("span",{className:"bg-red-600 text-white px-2 py-1 rounded-full text-xs font-bold",children:[E.discountPercent,"% OFF"]})]})]})]}),u.jsx("button",{onClick:()=>_(E.productId),className:"text-red-600 hover:text-red-800 p-2 hover:bg-red-100 rounded-lg transition-colors",title:"Remove from daily deals",children:u.jsx("div",{className:"icon-trash text-lg"})})]},E.productId)})})]})]})}function aw({products:r,onUpdate:e}){const[t,i]=J.useState([]),[o,l]=J.useState([]),[h,p]=J.useState(null),[m,v]=J.useState(null);J.useEffect(()=>{_()},[r]);const _=()=>{const K=wn.getHomePageProducts();i(K);const q=new Set(K.map(ne=>ne.id)),Y=r.filter(ne=>!q.has(ne.id));l(Y),console.log(" Home page products:",K.length),console.log(" Available products:",Y.length)},E=(K,q,Y)=>{p(q),v(Y),K.dataTransfer.effectAllowed="move"},N=K=>{K.preventDefault(),K.dataTransfer.dropEffect="move"},O=(K,q)=>{if(K.preventDefault(),h!==null){if(m==="home"){if(h===q)return;wn.reorderHomePageProducts(h,q)}else{const Y=o[h];if(t.length>=12){we("Home page can only have 12 products","error"),p(null),v(null);return}const ne=[...t];ne.splice(q,0,Y);const G=ne.map(ae=>ae.id);localStorage.setItem("luxemarket_homepage_order",JSON.stringify(G))}_(),e(),p(null),v(null),we("Home page updated!","success"),window.dispatchEvent(new CustomEvent("adminUpdate"))}},L=K=>{if(t.length>=12){we("Home page can only have 12 products","error");return}const Y=[...t,K].map(ne=>ne.id);localStorage.setItem("luxemarket_homepage_order",JSON.stringify(Y)),_(),e(),we(`"${K.name}" added to home page`,"success"),window.dispatchEvent(new CustomEvent("adminUpdate"))},F=K=>{const Y=t.filter((ne,G)=>G!==K).map(ne=>ne.id);localStorage.setItem("luxemarket_homepage_order",JSON.stringify(Y)),_(),e(),we("Product removed from home page","success"),window.dispatchEvent(new CustomEvent("adminUpdate"))},M=()=>{localStorage.removeItem("luxemarket_homepage_order"),_(),e(),we("Reset to default order","success"),window.dispatchEvent(new CustomEvent("adminUpdate"))};return u.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-lg shadow mb-8",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"icon-home text-2xl text-blue-600"}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Home Page Product Manager"}),u.jsx("p",{className:"text-gray-600",children:"Select and arrange products for the home page (max 12)"})]})]}),u.jsx("button",{onClick:M,className:"btn btn-secondary px-4 py-2 text-sm",children:"Reset to Default"})]}),u.jsxs("div",{className:"bg-white p-4 rounded-lg mb-6",children:[u.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center justify-between",children:[u.jsxs("span",{children:["Current Home Page Products (",t.length,"/12)"]}),t.length<12&&u.jsxs("span",{className:"text-sm text-orange-600 font-normal",children:[" Add ",12-t.length," more product",12-t.length!==1?"s":""]})]}),t.length===0?u.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[u.jsx("div",{className:"text-4xl mb-3",children:""}),u.jsx("p",{className:"text-gray-500 font-medium",children:"No products on home page"}),u.jsx("p",{className:"text-gray-400 text-sm",children:"Add products from the list below"})]}):u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4",children:t.map((K,q)=>u.jsxs("div",{draggable:!0,onDragStart:Y=>E(Y,q,"home"),onDragOver:N,onDrop:Y=>O(Y,q),className:`relative bg-white border-2 rounded-lg overflow-hidden cursor-move transition-all group ${h===q&&m==="home"?"border-blue-500 opacity-50":"border-gray-200 hover:border-blue-300"}`,children:[u.jsx("div",{className:"aspect-square bg-gray-100",children:u.jsx("img",{src:K.image,alt:K.name,className:"w-full h-full object-cover"})}),u.jsxs("div",{className:"p-2",children:[u.jsx("div",{className:"absolute top-2 left-2 bg-blue-600 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold",children:q+1}),K.isDailyDeal&&u.jsxs("div",{className:"absolute top-10 left-2 bg-red-600 text-white px-1 py-0.5 rounded text-xs font-bold",children:[" ",K.discountPercent,"%"]}),u.jsx("button",{onClick:()=>F(q),className:"absolute top-2 right-2 w-6 h-6 bg-red-500 hover:bg-red-600 text-white rounded-full text-xs flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity shadow-lg",title:"Remove from home page",children:""}),u.jsx("h4",{className:"text-xs font-semibold text-gray-900 line-clamp-2",children:K.name}),u.jsx("p",{className:"text-xs text-gray-500",children:K.category})]})]},K.id))}),u.jsx("p",{className:"text-sm text-gray-500 mt-4 text-center",children:" Drag and drop to reorder  Click  to remove"})]}),u.jsxs("div",{className:"bg-white p-4 rounded-lg",children:[u.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Available Products (",o.length,")"]}),o.length===0?u.jsx("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:u.jsx("p",{className:"text-gray-500",children:"All products are on the home page"})}):u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4",children:o.map((K,q)=>u.jsxs("div",{draggable:!0,onDragStart:Y=>E(Y,q,"available"),className:`relative bg-white border-2 rounded-lg overflow-hidden cursor-move transition-all group ${h===q&&m==="available"?"border-green-500 opacity-50":"border-gray-200 hover:border-green-300"}`,children:[u.jsx("div",{className:"aspect-square bg-gray-100",children:u.jsx("img",{src:K.image,alt:K.name,className:"w-full h-full object-cover"})}),u.jsxs("div",{className:"p-2",children:[u.jsx("button",{onClick:()=>L(K),disabled:t.length>=12,className:"absolute top-2 right-2 w-6 h-6 bg-green-500 hover:bg-green-600 text-white rounded-full text-xs flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity shadow-lg disabled:bg-gray-400 disabled:cursor-not-allowed",title:t.length>=12?"Home page is full":"Add to home page",children:"+"}),u.jsx("h4",{className:"text-xs font-semibold text-gray-900 line-clamp-2",children:K.name}),u.jsx("p",{className:"text-xs text-gray-500",children:K.category})]})]},K.id))}),u.jsx("p",{className:"text-sm text-gray-500 mt-4 text-center",children:" Drag to home page section above or click + to add"})]})]})}function lw(){const[r,e]=J.useState([]),[t,i]=J.useState([]),[o,l]=J.useState(null),[h,p]=J.useState("All Categories"),[m,v]=J.useState({name:"",price:"",category:"",image:"",images:[],description:"",videoUrl:"",colors:[],sizes:"",rating:4,reviews:0,stock:0}),[_,E]=J.useState(""),[N,O]=J.useState(!0),[L,F]=J.useState({isOpen:!1,product:null}),[M,K]=J.useState({isOpen:!1,categoryName:null}),[q,Y]=J.useState(!0),[ne,G]=J.useState(!1);J.useEffect(()=>{k()},[]),J.useEffect(()=>{const A=()=>{G(window.scrollY>300)};return window.addEventListener("scroll",A),()=>window.removeEventListener("scroll",A)},[]);const ae=()=>{window.scrollTo({top:0,behavior:"smooth"})},k=()=>{e(wn.getAll()),i(hi.getAll()),window.dispatchEvent(new CustomEvent("adminUpdate"))},I=A=>{v({...m,[A.target.name]:A.target.value})},S=J.useMemo(()=>({...m,price:parseFloat(m.price)||0,rating:parseFloat(m.rating)||4,reviews:parseInt(m.reviews)||0,stock:parseInt(m.stock)||0}),[m]),D=J.useCallback(A=>{v(le=>({...le,colors:A}))},[]),P=J.useCallback(A=>{v(le=>({...le,images:A,image:A.length>0?typeof A[0]=="string"?A[0]:A[0].url:le.image}))},[]),U=()=>{v({name:"",price:"",category:"",image:"",images:[],description:"",videoUrl:"",colors:[],sizes:"",rating:4,reviews:0,stock:0}),E(""),l(null)},b=A=>{A.preventDefault();const le=m.sizes?m.sizes.split(",").map(_e=>_e.trim()).filter(_e=>_e):[];let ue=[];m.images&&m.images.length>0?ue=m.images.map(_e=>typeof _e=="string"?_e:_e.url):m.image.trim()&&(ue=[m.image.trim()]);const he={name:m.name.trim(),price:parseFloat(m.price),category:m.category.trim(),image:m.image.trim()||(ue.length>0?ue[0]:""),images:ue,enhancedImages:m.images,description:m.description.trim(),videoUrl:m.videoUrl.trim(),colors:m.colors,sizes:le,rating:parseFloat(m.rating)||4,reviews:parseInt(m.reviews)||0,stock:parseInt(m.stock)||0};o?(wn.update(o.id,he),we("Product updated successfully","success")):(wn.add(he),we("Product added successfully","success")),hi.syncWithProducts(),k(),U()},ge=A=>{l(A);const le=A.sizes?A.sizes.join(", "):"";let ue=[];A.enhancedImages&&A.enhancedImages.length>0?ue=A.enhancedImages:A.images&&A.images.length>0&&(ue=A.images.map((he,_e)=>({id:`img-${_e}-${Date.now()}`,url:he,angle:_e===0?"front":"other",description:""}))),v({name:A.name,price:A.price,category:A.category,image:A.image,images:ue,description:A.description,videoUrl:A.videoUrl||"",colors:A.colors||[],sizes:le,rating:A.rating||4,reviews:A.reviews||0,stock:A.stock||0}),setTimeout(()=>{const he=document.getElementById("product-form-section");he&&(he.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"}),he.classList.add("highlight-form"),setTimeout(()=>{he.classList.remove("highlight-form")},2e3))},100)},Re=()=>{_.trim()&&(v(A=>({...A,images:[...A.images,_.trim()]})),E(""))},je=A=>{v(le=>({...le,images:le.images.filter((ue,he)=>he!==A)}))},Me=A=>{const le=r.find(ue=>ue.id===A);le&&F({isOpen:!0,product:le})},ie=()=>{L.product&&(wn.delete(L.product.id),hi.syncWithProducts(),k(),we(`"${L.product.name}" deleted successfully`,"success"),o&&o.id===L.product.id&&U()),F({isOpen:!1,product:null})},B=()=>{const A=prompt("Enter new category name:");A&&(hi.add(A)?(we("Category added successfully","success"),k()):we("Category already exists","error"))},X=A=>{K({isOpen:!0,categoryName:A})},R=()=>{M.categoryName&&(hi.delete(M.categoryName),k(),we(`Category "${M.categoryName}" deleted successfully`,"success")),K({isOpen:!1,categoryName:null})};return u.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[u.jsxs("div",{className:"container-custom",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-12 h-12 admin-header rounded-lg flex items-center justify-center admin-icon",children:u.jsx("div",{className:"icon-chart-line text-2xl text-white"})}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Dashboard"}),u.jsx("p",{className:"text-gray-600",children:"Manage your products, categories, and store settings"})]})]}),u.jsxs("a",{href:"index.html",className:"btn btn-secondary flex items-center gap-2",children:[u.jsx("div",{className:"icon-arrow-left text-sm"}),"Back to Store"]})]}),u.jsxs("div",{id:"product-form-section",className:"bg-white p-6 rounded-lg shadow mb-8 transition-all duration-500",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:u.jsx("div",{className:"icon-tools text-lg text-[var(--primary-color)]"})}),u.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:o?`Edit Product: ${o.name}`:"Add New Product"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("button",{type:"button",onClick:()=>Y(!q),className:`btn text-sm flex items-center gap-2 ${q?"btn-primary":"btn-secondary"}`,children:[u.jsx("div",{className:"icon-eye text-xs"}),q?"Hide Preview":"Show Preview"]}),o&&u.jsx("button",{type:"button",onClick:()=>{U(),we("Edit cancelled","info")},className:"btn btn-secondary text-sm",children:"Cancel Edit"})]})]}),u.jsxs("form",{onSubmit:b,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name"}),u.jsx("input",{name:"name",value:m.name,onChange:I,placeholder:"Enter product name",className:"w-full border border-gray-300 p-3 rounded-md focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price ($)"}),u.jsx("input",{name:"price",type:"number",step:"0.01",value:m.price,onChange:I,placeholder:"0.00",className:"w-full border border-gray-300 p-3 rounded-md focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stock Quantity"}),u.jsx("input",{name:"stock",type:"number",min:"0",value:m.stock,onChange:I,placeholder:"0",className:"w-full border border-gray-300 p-3 rounded-md focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent",required:!0}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Number of items available for sale"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{name:"category",value:m.category,onChange:I,placeholder:"Enter or select category",className:"flex-1 border border-gray-300 p-3 rounded-md focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent",list:"category-list",required:!0}),u.jsx("button",{type:"button",onClick:()=>{const A=m.category.trim();A&&!t.includes(A)&&(hi.add(A),k(),we(`Category "${A}" added`,"success"))},className:"btn btn-secondary px-4 whitespace-nowrap",title:"Add this category if it doesn't exist",children:"+ Add"})]}),u.jsx("datalist",{id:"category-list",children:t.map(A=>u.jsx("option",{value:A},A))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Main Image URL"}),u.jsx("input",{name:"image",value:m.image,onChange:I,placeholder:"https://example.com/image.jpg",className:"w-full border border-gray-300 p-3 rounded-md focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent"}),m.image&&u.jsxs("div",{className:"mt-2",children:[u.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Main Image Preview"}),u.jsx("img",{src:m.image,alt:"Main product image preview",className:"w-24 h-24 object-cover rounded border hover:border-[var(--primary-color)] transition-colors",onError:A=>{A.target.style.display="none"}})]})]}),u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Images"}),u.jsxs("div",{className:"flex items-center gap-4 mb-4 p-3 bg-gray-50 rounded-lg",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"checkbox",id:"useEnhancedImages",checked:N,onChange:A=>O(A.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),u.jsx("label",{htmlFor:"useEnhancedImages",className:"text-sm font-medium text-gray-700",children:"Enhanced Image Management"})]}),u.jsx("div",{className:"text-xs text-gray-500",children:N?" Manage angles & descriptions":" Simple image list"})]}),N?u.jsx(rw,{images:m.images,onUpdate:P,title:"Product Images"}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex gap-2 mb-2",children:[u.jsx("input",{value:_,onChange:A=>E(A.target.value),placeholder:"https://example.com/additional-image.jpg",className:"flex-1 border border-gray-300 p-3 rounded-md focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent"}),u.jsx("button",{type:"button",onClick:Re,className:"btn btn-secondary px-4 whitespace-nowrap",children:"Add Image"})]}),m.images.length===0?u.jsxs("div",{className:"text-center py-6 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[u.jsx("div",{className:"text-2xl mb-2",children:""}),u.jsx("p",{className:"text-gray-500 text-sm",children:"No additional images yet"})]}):u.jsxs("div",{children:[u.jsx("div",{className:"flex items-center justify-between mb-2",children:u.jsxs("p",{className:"text-sm font-medium text-gray-700",children:["Additional Images (",m.images.length,")"]})}),u.jsx("div",{className:"grid grid-cols-6 gap-2",children:m.images.map((A,le)=>{const ue=typeof A=="string"?A:A.url;return u.jsxs("div",{className:"relative group",children:[u.jsx("img",{src:ue,alt:`Image ${le+1}`,className:"w-full h-20 object-cover rounded border hover:border-[var(--primary-color)] transition-colors",onError:he=>{he.target.src="https://via.placeholder.com/80x80?text=Error"}}),u.jsx("button",{type:"button",onClick:()=>je(le),className:"absolute top-1 right-1 w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-lg text-sm flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity shadow-lg hover:scale-110 transform",title:"Delete image",children:""}),u.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-black/70 text-white text-xs p-1 text-center opacity-0 group-hover:opacity-100 transition-opacity rounded-b",children:["#",le+1]})]},`${ue}-${le}`)})})]}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Add multiple images showing different angles of the product"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Video URL (Optional)"}),u.jsx("input",{name:"videoUrl",value:m.videoUrl,onChange:I,placeholder:"https://example.com/video.mp4",className:"w-full border border-gray-300 p-3 rounded-md focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Add a video URL for product demonstrations"})]}),u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Colors"}),u.jsx(tw,{colors:m.colors,onChange:D})]}),u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sizes (comma-separated)"}),u.jsx("input",{name:"sizes",value:m.sizes,onChange:I,placeholder:"S, M, L, XL or 7, 8, 9, 10, 11, 12",className:"w-full border border-gray-300 p-3 rounded-md focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter sizes separated by commas"})]}),u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),u.jsx("textarea",{name:"description",value:m.description,onChange:I,placeholder:"Enter product description",className:"w-full border border-gray-300 p-3 rounded-md focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent",rows:"3"})]}),u.jsxs("div",{className:"md:col-span-2 flex gap-4",children:[u.jsx("button",{type:"submit",className:"btn btn-primary px-6 py-3",children:o?"Update Product":"Add Product"}),o&&u.jsx("button",{type:"button",onClick:U,className:"btn btn-secondary px-6 py-3",children:"Cancel Edit"})]})]})]}),u.jsx(iw,{product:S,isVisible:q&&(m.name||m.image||m.description||m.colors.length>0)}),u.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-8",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:u.jsx("div",{className:"icon-palette text-lg text-green-600"})}),u.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Categories"})]}),u.jsx("button",{onClick:B,className:"btn btn-primary",children:"Add Category"})]}),u.jsx("div",{className:"flex gap-3 flex-wrap",children:t.map(A=>u.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 px-4 py-2 rounded-full",children:[u.jsx("span",{className:"text-gray-700",children:A}),u.jsx("button",{onClick:()=>X(A),className:"text-red-500 hover:text-red-700 font-bold",title:"Delete category",children:""})]},A))})]}),u.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:u.jsx("div",{className:"icon-database text-lg text-purple-600"})}),u.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:["Products (",h==="All Categories"?r.length:r.filter(A=>A.category===h).length,")"]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("select",{value:h,onChange:A=>p(A.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--primary-color)] text-sm",children:[u.jsx("option",{value:"All Categories",children:"All Categories"}),t.map(A=>u.jsx("option",{value:A,children:A},A))]}),u.jsxs("button",{onClick:()=>{const A=document.getElementById("product-form-section");A&&A.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},className:"btn btn-secondary text-sm flex items-center gap-2",children:[u.jsx("div",{className:"icon-arrow-up text-xs"}),"Jump to Form"]})]})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:r.filter(A=>h==="All Categories"||A.category===h).map(A=>u.jsxs("div",{className:`border rounded-lg overflow-hidden hover:shadow-md transition-all ${o&&o.id===A.id?"border-[var(--primary-color)] ring-2 ring-[var(--primary-color)]/20 bg-blue-50/30":"border-gray-200"}`,children:[u.jsxs("div",{className:"aspect-square overflow-hidden bg-gray-100 relative",children:[o&&o.id===A.id&&u.jsx("div",{className:"absolute top-2 left-2 bg-[var(--primary-color)] text-white text-xs px-2 py-1 rounded-full font-medium",children:"Editing"}),u.jsx("img",{src:A.image,alt:A.name,className:"w-full h-full object-cover",onError:le=>{le.target.src="https://via.placeholder.com/300x300?text=No+Image"}})]}),u.jsxs("div",{className:"p-4",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:A.name}),u.jsxs("p",{className:"text-xl font-bold text-[var(--primary-color)] mb-1",children:["$",A.price.toFixed(2)]}),u.jsx("p",{className:"text-sm text-gray-500 mb-2",children:A.category}),u.jsx("div",{className:"mb-2",children:A.stock===0?u.jsx("span",{className:"inline-block px-2 py-1 bg-red-100 text-red-700 text-xs font-medium rounded-full",children:"Out of Stock (0)"}):A.stock<=5?u.jsxs("span",{className:"inline-block px-2 py-1 bg-orange-100 text-orange-700 text-xs font-medium rounded-full",children:["Low Stock (",A.stock,")"]}):u.jsxs("span",{className:"inline-block px-2 py-1 bg-green-100 text-green-700 text-xs font-medium rounded-full",children:["In Stock (",A.stock,")"]})}),u.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 mb-2",children:A.description}),A.videoUrl&&u.jsxs("div",{className:"flex items-center gap-1 text-xs text-blue-600 mb-4",children:[u.jsx("div",{className:"icon-play text-xs"}),u.jsx("span",{children:"Video available"})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>ge(A),className:`btn flex-1 text-sm ${o&&o.id===A.id?"btn-primary":"btn-secondary"}`,children:o&&o.id===A.id?"Editing...":"Edit"}),u.jsx("button",{onClick:()=>Me(A.id),className:"btn bg-red-600 hover:bg-red-700 text-white flex-1 text-sm",children:"Delete"})]})]})]},A.id))}),r.filter(A=>h==="All Categories"||A.category===h).length===0&&u.jsxs("div",{className:"text-center py-12",children:[u.jsx("div",{className:"icon-shopping-bag text-4xl text-gray-300 mx-auto mb-3"}),u.jsx("p",{className:"text-gray-500",children:"No products found. Add your first product above."})]})]}),u.jsx(ow,{products:r,onUpdate:k}),u.jsx(aw,{products:r,onUpdate:k})]}),u.jsx(_g,{isOpen:L.isOpen,onClose:()=>F({isOpen:!1,product:null}),onConfirm:ie,title:"Delete Product",message:"Are you sure you want to delete this product?",confirmText:"Delete Product",cancelText:"Keep Product",type:"danger",itemDetails:L.product?{name:L.product.name,price:L.product.price,category:L.product.category,image:L.product.image,reviews:L.product.reviews}:null}),u.jsx(_g,{isOpen:M.isOpen,onClose:()=>K({isOpen:!1,categoryName:null}),onConfirm:R,title:"Delete Category",message:`Are you sure you want to delete the category "${M.categoryName}"?`,confirmText:"Delete Category",cancelText:"Keep Category",type:"warning"}),ne&&u.jsx("button",{onClick:ae,className:"fixed bottom-6 right-6 bg-[var(--primary-color)] hover:bg-[var(--primary-hover)] text-white p-3 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 z-50 group",title:"Go to top",children:u.jsx("div",{className:"icon-arrow-up text-lg group-hover:animate-bounce"})})]})}const cw=()=>{};var wg={};const Zy=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},uw=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const o=r[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],h=r[t++],p=r[t++],m=((o&7)<<18|(l&63)<<12|(h&63)<<6|p&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const l=r[t++],h=r[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},e0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const l=r[o],h=o+1<r.length,p=h?r[o+1]:0,m=o+2<r.length,v=m?r[o+2]:0,_=l>>2,E=(l&3)<<4|p>>4;let N=(p&15)<<2|v>>6,O=v&63;m||(O=64,h||(N=64)),i.push(t[_],t[E],t[N],t[O])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Zy(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):uw(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],p=o<r.length?t[r.charAt(o)]:0;++o;const v=o<r.length?t[r.charAt(o)]:64;++o;const E=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||p==null||v==null||E==null)throw new dw;const N=l<<2|p>>4;if(i.push(N),v!==64){const O=p<<4&240|v>>2;if(i.push(O),E!==64){const L=v<<6&192|E;i.push(L)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class dw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const hw=function(r){const e=Zy(r);return e0.encodeByteArray(e,!0)},tu=function(r){return hw(r).replace(/\./g,"")},t0=function(r){try{return e0.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function fw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const mw=()=>fw().__FIREBASE_DEFAULTS__,pw=()=>{if(typeof process>"u"||typeof wg>"u")return;const r=wg.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},gw=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&t0(r[1]);return e&&JSON.parse(e)},Eu=()=>{try{return cw()||mw()||pw()||gw()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},n0=r=>Eu()?.emulatorHosts?.[r],r0=r=>{const e=n0(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},s0=()=>Eu()?.config,i0=r=>Eu()?.[`_${r}`];class yw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}function bi(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function rf(r){return(await fetch(r,{credentials:"include"})).ok}function o0(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...r};return[tu(JSON.stringify(t)),tu(JSON.stringify(h)),""].join(".")}const Wa={};function vw(){const r={prod:[],emulator:[]};for(const e of Object.keys(Wa))Wa[e]?r.emulator.push(e):r.prod.push(e);return r}function xw(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Eg=!1;function sf(r,e){if(typeof window>"u"||typeof document>"u"||!bi(window.location.host)||Wa[r]===e||Wa[r]||Eg)return;Wa[r]=e;function t(N){return`__firebase__banner__${N}`}const i="__firebase__banner",l=vw().prod.length>0;function h(){const N=document.getElementById(i);N&&N.remove()}function p(N){N.style.display="flex",N.style.background="#7faaf0",N.style.position="fixed",N.style.bottom="5px",N.style.left="5px",N.style.padding=".5em",N.style.borderRadius="5px",N.style.alignItems="center"}function m(N,O){N.setAttribute("width","24"),N.setAttribute("id",O),N.setAttribute("height","24"),N.setAttribute("viewBox","0 0 24 24"),N.setAttribute("fill","none"),N.style.marginLeft="-6px"}function v(){const N=document.createElement("span");return N.style.cursor="pointer",N.style.marginLeft="16px",N.style.fontSize="24px",N.innerHTML=" &times;",N.onclick=()=>{Eg=!0,h()},N}function _(N,O){N.setAttribute("id",O),N.innerText="Learn more",N.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",N.setAttribute("target","__blank"),N.style.paddingLeft="5px",N.style.textDecoration="underline"}function E(){const N=xw(i),O=t("text"),L=document.getElementById(O)||document.createElement("span"),F=t("learnmore"),M=document.getElementById(F)||document.createElement("a"),K=t("preprendIcon"),q=document.getElementById(K)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(N.created){const Y=N.element;p(Y),_(M,F);const ne=v();m(q,K),Y.append(q,L,M,ne),document.body.appendChild(Y)}l?(L.innerText="Preview backend disconnected.",q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",O)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}function Ut(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _w(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ut())}function ww(){const r=Eu()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Ew(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function bw(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function Iw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Tw(){const r=Ut();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function Nw(){return!ww()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Sw(){try{return typeof indexedDB=="object"}catch{return!1}}function Cw(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}const kw="FirebaseError";class dr extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=kw,Object.setPrototypeOf(this,dr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cl.prototype.create)}}class cl{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?Aw(l,i):"Error",p=`${this.serviceName}: ${h} (${o}).`;return new dr(o,p,i)}}function Aw(r,e){return r.replace(Pw,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const Pw=/\{\$([^}]+)}/g;function Rw(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function yi(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=r[o],h=e[o];if(bg(l)&&bg(h)){if(!yi(l,h))return!1}else if(l!==h)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function bg(r){return r!==null&&typeof r=="object"}function ul(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function jw(r,e){const t=new Dw(r,e);return t.subscribe.bind(t)}class Dw{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");Ow(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=yh),o.error===void 0&&(o.error=yh),o.complete===void 0&&(o.complete=yh);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ow(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function yh(){}function Bt(r){return r&&r._delegate?r._delegate:r}class ks{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const fi="[DEFAULT]";class Vw{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new yw;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Fw(e))try{this.getOrInitializeService({instanceIdentifier:fi})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=fi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=fi){return this.instances.has(e)}getOptions(e=fi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,h]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(l);i===p&&h.resolve(o)}return o}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const l=this.instances.get(i);return l&&e(l,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Lw(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=fi){return this.component?this.component.multipleInstances?e:fi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Lw(r){return r===fi?void 0:r}function Fw(r){return r.instantiationMode==="EAGER"}class Mw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Vw(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Oe;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Oe||(Oe={}));const Uw={debug:Oe.DEBUG,verbose:Oe.VERBOSE,info:Oe.INFO,warn:Oe.WARN,error:Oe.ERROR,silent:Oe.SILENT},Bw=Oe.INFO,zw={[Oe.DEBUG]:"log",[Oe.VERBOSE]:"log",[Oe.INFO]:"info",[Oe.WARN]:"warn",[Oe.ERROR]:"error"},$w=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=zw[e];if(o)console[o](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class of{constructor(e){this.name=e,this._logLevel=Bw,this._logHandler=$w,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Uw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Oe.DEBUG,...e),this._logHandler(this,Oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Oe.VERBOSE,...e),this._logHandler(this,Oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Oe.INFO,...e),this._logHandler(this,Oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Oe.WARN,...e),this._logHandler(this,Oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Oe.ERROR,...e),this._logHandler(this,Oe.ERROR,...e)}}const qw=(r,e)=>e.some(t=>r instanceof t);let Ig,Tg;function Hw(){return Ig||(Ig=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ww(){return Tg||(Tg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const a0=new WeakMap,Rh=new WeakMap,l0=new WeakMap,vh=new WeakMap,af=new WeakMap;function Gw(r){const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{t(Ts(r.result)),o()},h=()=>{i(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&a0.set(t,r)}).catch(()=>{}),af.set(e,r),e}function Kw(r){if(Rh.has(r))return;const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});Rh.set(r,e)}let jh={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Rh.get(r);if(e==="objectStoreNames")return r.objectStoreNames||l0.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ts(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function Qw(r){jh=r(jh)}function Yw(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(xh(this),e,...t);return l0.set(i,e.sort?e.sort():[e]),Ts(i)}:Ww().includes(r)?function(...e){return r.apply(xh(this),e),Ts(a0.get(this))}:function(...e){return Ts(r.apply(xh(this),e))}}function Jw(r){return typeof r=="function"?Yw(r):(r instanceof IDBTransaction&&Kw(r),qw(r,Hw())?new Proxy(r,jh):r)}function Ts(r){if(r instanceof IDBRequest)return Gw(r);if(vh.has(r))return vh.get(r);const e=Jw(r);return e!==r&&(vh.set(r,e),af.set(e,r)),e}const xh=r=>af.get(r);function Xw(r,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const h=indexedDB.open(r,e),p=Ts(h);return i&&h.addEventListener("upgradeneeded",m=>{i(Ts(h.result),m.oldVersion,m.newVersion,Ts(h.transaction),m)}),t&&h.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),p.then(m=>{l&&m.addEventListener("close",()=>l()),o&&m.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),p}const Zw=["get","getKey","getAll","getAllKeys","count"],eE=["put","add","delete","clear"],_h=new Map;function Ng(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(_h.get(e))return _h.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=eE.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||Zw.includes(t)))return;const l=async function(h,...p){const m=this.transaction(h,o?"readwrite":"readonly");let v=m.store;return i&&(v=v.index(p.shift())),(await Promise.all([v[t](...p),o&&m.done]))[0]};return _h.set(e,l),l}Qw(r=>({...r,get:(e,t,i)=>Ng(e,t)||r.get(e,t,i),has:(e,t)=>!!Ng(e,t)||r.has(e,t)}));class tE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(nE(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function nE(r){return r.getComponent()?.type==="VERSION"}const Dh="@firebase/app",Sg="0.14.7";const Vr=new of("@firebase/app"),rE="@firebase/app-compat",sE="@firebase/analytics-compat",iE="@firebase/analytics",oE="@firebase/app-check-compat",aE="@firebase/app-check",lE="@firebase/auth",cE="@firebase/auth-compat",uE="@firebase/database",dE="@firebase/data-connect",hE="@firebase/database-compat",fE="@firebase/functions",mE="@firebase/functions-compat",pE="@firebase/installations",gE="@firebase/installations-compat",yE="@firebase/messaging",vE="@firebase/messaging-compat",xE="@firebase/performance",_E="@firebase/performance-compat",wE="@firebase/remote-config",EE="@firebase/remote-config-compat",bE="@firebase/storage",IE="@firebase/storage-compat",TE="@firebase/firestore",NE="@firebase/ai",SE="@firebase/firestore-compat",CE="firebase",kE="12.8.0";const Oh="[DEFAULT]",AE={[Dh]:"fire-core",[rE]:"fire-core-compat",[iE]:"fire-analytics",[sE]:"fire-analytics-compat",[aE]:"fire-app-check",[oE]:"fire-app-check-compat",[lE]:"fire-auth",[cE]:"fire-auth-compat",[uE]:"fire-rtdb",[dE]:"fire-data-connect",[hE]:"fire-rtdb-compat",[fE]:"fire-fn",[mE]:"fire-fn-compat",[pE]:"fire-iid",[gE]:"fire-iid-compat",[yE]:"fire-fcm",[vE]:"fire-fcm-compat",[xE]:"fire-perf",[_E]:"fire-perf-compat",[wE]:"fire-rc",[EE]:"fire-rc-compat",[bE]:"fire-gcs",[IE]:"fire-gcs-compat",[TE]:"fire-fst",[SE]:"fire-fst-compat",[NE]:"fire-vertex","fire-js":"fire-js",[CE]:"fire-js-all"};const nu=new Map,PE=new Map,Vh=new Map;function Cg(r,e){try{r.container.addComponent(e)}catch(t){Vr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function vi(r){const e=r.name;if(Vh.has(e))return Vr.debug(`There were multiple attempts to register component ${e}.`),!1;Vh.set(e,r);for(const t of nu.values())Cg(t,r);for(const t of PE.values())Cg(t,r);return!0}function bu(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Rn(r){return r==null?!1:r.settings!==void 0}const RE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ns=new cl("app","Firebase",RE);class jE{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ks("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ns.create("app-deleted",{appName:this._name})}}const Ii=kE;function c0(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i={name:Oh,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw Ns.create("bad-app-name",{appName:String(o)});if(t||(t=s0()),!t)throw Ns.create("no-options");const l=nu.get(o);if(l){if(yi(t,l.options)&&yi(i,l.config))return l;throw Ns.create("duplicate-app",{appName:o})}const h=new Mw(o);for(const m of Vh.values())h.addComponent(m);const p=new jE(t,i,h);return nu.set(o,p),p}function lf(r=Oh){const e=nu.get(r);if(!e&&r===Oh&&s0())return c0();if(!e)throw Ns.create("no-app",{appName:r});return e}function rr(r,e,t){let i=AE[r]??r;t&&(i+=`-${t}`);const o=i.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const h=[`Unable to register library "${i}" with version "${e}":`];o&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Vr.warn(h.join(" "));return}vi(new ks(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const DE="firebase-heartbeat-database",OE=1,Za="firebase-heartbeat-store";let wh=null;function u0(){return wh||(wh=Xw(DE,OE,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Za)}catch(t){console.warn(t)}}}}).catch(r=>{throw Ns.create("idb-open",{originalErrorMessage:r.message})})),wh}async function VE(r){try{const t=(await u0()).transaction(Za),i=await t.objectStore(Za).get(d0(r));return await t.done,i}catch(e){if(e instanceof dr)Vr.warn(e.message);else{const t=Ns.create("idb-get",{originalErrorMessage:e?.message});Vr.warn(t.message)}}}async function kg(r,e){try{const i=(await u0()).transaction(Za,"readwrite");await i.objectStore(Za).put(e,d0(r)),await i.done}catch(t){if(t instanceof dr)Vr.warn(t.message);else{const i=Ns.create("idb-set",{originalErrorMessage:t?.message});Vr.warn(i.message)}}}function d0(r){return`${r.name}!${r.options.appId}`}const LE=1024,FE=30;class ME{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new BE(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Ag();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>FE){const o=zE(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Vr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Ag(),{heartbeatsToSend:t,unsentEntries:i}=UE(this._heartbeatsCache.heartbeats),o=tu(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Vr.warn(e),""}}}function Ag(){return new Date().toISOString().substring(0,10)}function UE(r,e=LE){const t=[];let i=r.slice();for(const o of r){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),Pg(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Pg(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class BE{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Sw()?Cw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await VE(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return kg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return kg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Pg(r){return tu(JSON.stringify({version:2,heartbeats:r})).length}function zE(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}function $E(r){vi(new ks("platform-logger",e=>new tE(e),"PRIVATE")),vi(new ks("heartbeat",e=>new ME(e),"PRIVATE")),rr(Dh,Sg,r),rr(Dh,Sg,"esm2020"),rr("fire-js","")}$E("");var Rg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ss,h0;(function(){var r;function e(k,I){function S(){}S.prototype=I.prototype,k.F=I.prototype,k.prototype=new S,k.prototype.constructor=k,k.D=function(D,P,U){for(var b=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)b[ge-2]=arguments[ge];return I.prototype[P].apply(D,b)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(k,I,S){S||(S=0);const D=Array(16);if(typeof I=="string")for(var P=0;P<16;++P)D[P]=I.charCodeAt(S++)|I.charCodeAt(S++)<<8|I.charCodeAt(S++)<<16|I.charCodeAt(S++)<<24;else for(P=0;P<16;++P)D[P]=I[S++]|I[S++]<<8|I[S++]<<16|I[S++]<<24;I=k.g[0],S=k.g[1],P=k.g[2];let U=k.g[3],b;b=I+(U^S&(P^U))+D[0]+3614090360&4294967295,I=S+(b<<7&4294967295|b>>>25),b=U+(P^I&(S^P))+D[1]+3905402710&4294967295,U=I+(b<<12&4294967295|b>>>20),b=P+(S^U&(I^S))+D[2]+606105819&4294967295,P=U+(b<<17&4294967295|b>>>15),b=S+(I^P&(U^I))+D[3]+3250441966&4294967295,S=P+(b<<22&4294967295|b>>>10),b=I+(U^S&(P^U))+D[4]+4118548399&4294967295,I=S+(b<<7&4294967295|b>>>25),b=U+(P^I&(S^P))+D[5]+1200080426&4294967295,U=I+(b<<12&4294967295|b>>>20),b=P+(S^U&(I^S))+D[6]+2821735955&4294967295,P=U+(b<<17&4294967295|b>>>15),b=S+(I^P&(U^I))+D[7]+4249261313&4294967295,S=P+(b<<22&4294967295|b>>>10),b=I+(U^S&(P^U))+D[8]+1770035416&4294967295,I=S+(b<<7&4294967295|b>>>25),b=U+(P^I&(S^P))+D[9]+2336552879&4294967295,U=I+(b<<12&4294967295|b>>>20),b=P+(S^U&(I^S))+D[10]+4294925233&4294967295,P=U+(b<<17&4294967295|b>>>15),b=S+(I^P&(U^I))+D[11]+2304563134&4294967295,S=P+(b<<22&4294967295|b>>>10),b=I+(U^S&(P^U))+D[12]+1804603682&4294967295,I=S+(b<<7&4294967295|b>>>25),b=U+(P^I&(S^P))+D[13]+4254626195&4294967295,U=I+(b<<12&4294967295|b>>>20),b=P+(S^U&(I^S))+D[14]+2792965006&4294967295,P=U+(b<<17&4294967295|b>>>15),b=S+(I^P&(U^I))+D[15]+1236535329&4294967295,S=P+(b<<22&4294967295|b>>>10),b=I+(P^U&(S^P))+D[1]+4129170786&4294967295,I=S+(b<<5&4294967295|b>>>27),b=U+(S^P&(I^S))+D[6]+3225465664&4294967295,U=I+(b<<9&4294967295|b>>>23),b=P+(I^S&(U^I))+D[11]+643717713&4294967295,P=U+(b<<14&4294967295|b>>>18),b=S+(U^I&(P^U))+D[0]+3921069994&4294967295,S=P+(b<<20&4294967295|b>>>12),b=I+(P^U&(S^P))+D[5]+3593408605&4294967295,I=S+(b<<5&4294967295|b>>>27),b=U+(S^P&(I^S))+D[10]+38016083&4294967295,U=I+(b<<9&4294967295|b>>>23),b=P+(I^S&(U^I))+D[15]+3634488961&4294967295,P=U+(b<<14&4294967295|b>>>18),b=S+(U^I&(P^U))+D[4]+3889429448&4294967295,S=P+(b<<20&4294967295|b>>>12),b=I+(P^U&(S^P))+D[9]+568446438&4294967295,I=S+(b<<5&4294967295|b>>>27),b=U+(S^P&(I^S))+D[14]+3275163606&4294967295,U=I+(b<<9&4294967295|b>>>23),b=P+(I^S&(U^I))+D[3]+4107603335&4294967295,P=U+(b<<14&4294967295|b>>>18),b=S+(U^I&(P^U))+D[8]+1163531501&4294967295,S=P+(b<<20&4294967295|b>>>12),b=I+(P^U&(S^P))+D[13]+2850285829&4294967295,I=S+(b<<5&4294967295|b>>>27),b=U+(S^P&(I^S))+D[2]+4243563512&4294967295,U=I+(b<<9&4294967295|b>>>23),b=P+(I^S&(U^I))+D[7]+1735328473&4294967295,P=U+(b<<14&4294967295|b>>>18),b=S+(U^I&(P^U))+D[12]+2368359562&4294967295,S=P+(b<<20&4294967295|b>>>12),b=I+(S^P^U)+D[5]+4294588738&4294967295,I=S+(b<<4&4294967295|b>>>28),b=U+(I^S^P)+D[8]+2272392833&4294967295,U=I+(b<<11&4294967295|b>>>21),b=P+(U^I^S)+D[11]+1839030562&4294967295,P=U+(b<<16&4294967295|b>>>16),b=S+(P^U^I)+D[14]+4259657740&4294967295,S=P+(b<<23&4294967295|b>>>9),b=I+(S^P^U)+D[1]+2763975236&4294967295,I=S+(b<<4&4294967295|b>>>28),b=U+(I^S^P)+D[4]+1272893353&4294967295,U=I+(b<<11&4294967295|b>>>21),b=P+(U^I^S)+D[7]+4139469664&4294967295,P=U+(b<<16&4294967295|b>>>16),b=S+(P^U^I)+D[10]+3200236656&4294967295,S=P+(b<<23&4294967295|b>>>9),b=I+(S^P^U)+D[13]+681279174&4294967295,I=S+(b<<4&4294967295|b>>>28),b=U+(I^S^P)+D[0]+3936430074&4294967295,U=I+(b<<11&4294967295|b>>>21),b=P+(U^I^S)+D[3]+3572445317&4294967295,P=U+(b<<16&4294967295|b>>>16),b=S+(P^U^I)+D[6]+76029189&4294967295,S=P+(b<<23&4294967295|b>>>9),b=I+(S^P^U)+D[9]+3654602809&4294967295,I=S+(b<<4&4294967295|b>>>28),b=U+(I^S^P)+D[12]+3873151461&4294967295,U=I+(b<<11&4294967295|b>>>21),b=P+(U^I^S)+D[15]+530742520&4294967295,P=U+(b<<16&4294967295|b>>>16),b=S+(P^U^I)+D[2]+3299628645&4294967295,S=P+(b<<23&4294967295|b>>>9),b=I+(P^(S|~U))+D[0]+4096336452&4294967295,I=S+(b<<6&4294967295|b>>>26),b=U+(S^(I|~P))+D[7]+1126891415&4294967295,U=I+(b<<10&4294967295|b>>>22),b=P+(I^(U|~S))+D[14]+2878612391&4294967295,P=U+(b<<15&4294967295|b>>>17),b=S+(U^(P|~I))+D[5]+4237533241&4294967295,S=P+(b<<21&4294967295|b>>>11),b=I+(P^(S|~U))+D[12]+1700485571&4294967295,I=S+(b<<6&4294967295|b>>>26),b=U+(S^(I|~P))+D[3]+2399980690&4294967295,U=I+(b<<10&4294967295|b>>>22),b=P+(I^(U|~S))+D[10]+4293915773&4294967295,P=U+(b<<15&4294967295|b>>>17),b=S+(U^(P|~I))+D[1]+2240044497&4294967295,S=P+(b<<21&4294967295|b>>>11),b=I+(P^(S|~U))+D[8]+1873313359&4294967295,I=S+(b<<6&4294967295|b>>>26),b=U+(S^(I|~P))+D[15]+4264355552&4294967295,U=I+(b<<10&4294967295|b>>>22),b=P+(I^(U|~S))+D[6]+2734768916&4294967295,P=U+(b<<15&4294967295|b>>>17),b=S+(U^(P|~I))+D[13]+1309151649&4294967295,S=P+(b<<21&4294967295|b>>>11),b=I+(P^(S|~U))+D[4]+4149444226&4294967295,I=S+(b<<6&4294967295|b>>>26),b=U+(S^(I|~P))+D[11]+3174756917&4294967295,U=I+(b<<10&4294967295|b>>>22),b=P+(I^(U|~S))+D[2]+718787259&4294967295,P=U+(b<<15&4294967295|b>>>17),b=S+(U^(P|~I))+D[9]+3951481745&4294967295,k.g[0]=k.g[0]+I&4294967295,k.g[1]=k.g[1]+(P+(b<<21&4294967295|b>>>11))&4294967295,k.g[2]=k.g[2]+P&4294967295,k.g[3]=k.g[3]+U&4294967295}i.prototype.v=function(k,I){I===void 0&&(I=k.length);const S=I-this.blockSize,D=this.C;let P=this.h,U=0;for(;U<I;){if(P==0)for(;U<=S;)o(this,k,U),U+=this.blockSize;if(typeof k=="string"){for(;U<I;)if(D[P++]=k.charCodeAt(U++),P==this.blockSize){o(this,D),P=0;break}}else for(;U<I;)if(D[P++]=k[U++],P==this.blockSize){o(this,D),P=0;break}}this.h=P,this.o+=I},i.prototype.A=function(){var k=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);k[0]=128;for(var I=1;I<k.length-8;++I)k[I]=0;I=this.o*8;for(var S=k.length-8;S<k.length;++S)k[S]=I&255,I/=256;for(this.v(k),k=Array(16),I=0,S=0;S<4;++S)for(let D=0;D<32;D+=8)k[I++]=this.g[S]>>>D&255;return k};function l(k,I){var S=p;return Object.prototype.hasOwnProperty.call(S,k)?S[k]:S[k]=I(k)}function h(k,I){this.h=I;const S=[];let D=!0;for(let P=k.length-1;P>=0;P--){const U=k[P]|0;D&&U==I||(S[P]=U,D=!1)}this.g=S}var p={};function m(k){return-128<=k&&k<128?l(k,function(I){return new h([I|0],I<0?-1:0)}):new h([k|0],k<0?-1:0)}function v(k){if(isNaN(k)||!isFinite(k))return E;if(k<0)return M(v(-k));const I=[];let S=1;for(let D=0;k>=S;D++)I[D]=k/S|0,S*=4294967296;return new h(I,0)}function _(k,I){if(k.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(k.charAt(0)=="-")return M(_(k.substring(1),I));if(k.indexOf("-")>=0)throw Error('number format error: interior "-" character');const S=v(Math.pow(I,8));let D=E;for(let U=0;U<k.length;U+=8){var P=Math.min(8,k.length-U);const b=parseInt(k.substring(U,U+P),I);P<8?(P=v(Math.pow(I,P)),D=D.j(P).add(v(b))):(D=D.j(S),D=D.add(v(b)))}return D}var E=m(0),N=m(1),O=m(16777216);r=h.prototype,r.m=function(){if(F(this))return-M(this).m();let k=0,I=1;for(let S=0;S<this.g.length;S++){const D=this.i(S);k+=(D>=0?D:4294967296+D)*I,I*=4294967296}return k},r.toString=function(k){if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(L(this))return"0";if(F(this))return"-"+M(this).toString(k);const I=v(Math.pow(k,6));var S=this;let D="";for(;;){const P=ne(S,I).g;S=K(S,P.j(I));let U=((S.g.length>0?S.g[0]:S.h)>>>0).toString(k);if(S=P,L(S))return U+D;for(;U.length<6;)U="0"+U;D=U+D}},r.i=function(k){return k<0?0:k<this.g.length?this.g[k]:this.h};function L(k){if(k.h!=0)return!1;for(let I=0;I<k.g.length;I++)if(k.g[I]!=0)return!1;return!0}function F(k){return k.h==-1}r.l=function(k){return k=K(this,k),F(k)?-1:L(k)?0:1};function M(k){const I=k.g.length,S=[];for(let D=0;D<I;D++)S[D]=~k.g[D];return new h(S,~k.h).add(N)}r.abs=function(){return F(this)?M(this):this},r.add=function(k){const I=Math.max(this.g.length,k.g.length),S=[];let D=0;for(let P=0;P<=I;P++){let U=D+(this.i(P)&65535)+(k.i(P)&65535),b=(U>>>16)+(this.i(P)>>>16)+(k.i(P)>>>16);D=b>>>16,U&=65535,b&=65535,S[P]=b<<16|U}return new h(S,S[S.length-1]&-2147483648?-1:0)};function K(k,I){return k.add(M(I))}r.j=function(k){if(L(this)||L(k))return E;if(F(this))return F(k)?M(this).j(M(k)):M(M(this).j(k));if(F(k))return M(this.j(M(k)));if(this.l(O)<0&&k.l(O)<0)return v(this.m()*k.m());const I=this.g.length+k.g.length,S=[];for(var D=0;D<2*I;D++)S[D]=0;for(D=0;D<this.g.length;D++)for(let P=0;P<k.g.length;P++){const U=this.i(D)>>>16,b=this.i(D)&65535,ge=k.i(P)>>>16,Re=k.i(P)&65535;S[2*D+2*P]+=b*Re,q(S,2*D+2*P),S[2*D+2*P+1]+=U*Re,q(S,2*D+2*P+1),S[2*D+2*P+1]+=b*ge,q(S,2*D+2*P+1),S[2*D+2*P+2]+=U*ge,q(S,2*D+2*P+2)}for(k=0;k<I;k++)S[k]=S[2*k+1]<<16|S[2*k];for(k=I;k<2*I;k++)S[k]=0;return new h(S,0)};function q(k,I){for(;(k[I]&65535)!=k[I];)k[I+1]+=k[I]>>>16,k[I]&=65535,I++}function Y(k,I){this.g=k,this.h=I}function ne(k,I){if(L(I))throw Error("division by zero");if(L(k))return new Y(E,E);if(F(k))return I=ne(M(k),I),new Y(M(I.g),M(I.h));if(F(I))return I=ne(k,M(I)),new Y(M(I.g),I.h);if(k.g.length>30){if(F(k)||F(I))throw Error("slowDivide_ only works with positive integers.");for(var S=N,D=I;D.l(k)<=0;)S=G(S),D=G(D);var P=ae(S,1),U=ae(D,1);for(D=ae(D,2),S=ae(S,2);!L(D);){var b=U.add(D);b.l(k)<=0&&(P=P.add(S),U=b),D=ae(D,1),S=ae(S,1)}return I=K(k,P.j(I)),new Y(P,I)}for(P=E;k.l(I)>=0;){for(S=Math.max(1,Math.floor(k.m()/I.m())),D=Math.ceil(Math.log(S)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),U=v(S),b=U.j(I);F(b)||b.l(k)>0;)S-=D,U=v(S),b=U.j(I);L(U)&&(U=N),P=P.add(U),k=K(k,b)}return new Y(P,k)}r.B=function(k){return ne(this,k).h},r.and=function(k){const I=Math.max(this.g.length,k.g.length),S=[];for(let D=0;D<I;D++)S[D]=this.i(D)&k.i(D);return new h(S,this.h&k.h)},r.or=function(k){const I=Math.max(this.g.length,k.g.length),S=[];for(let D=0;D<I;D++)S[D]=this.i(D)|k.i(D);return new h(S,this.h|k.h)},r.xor=function(k){const I=Math.max(this.g.length,k.g.length),S=[];for(let D=0;D<I;D++)S[D]=this.i(D)^k.i(D);return new h(S,this.h^k.h)};function G(k){const I=k.g.length+1,S=[];for(let D=0;D<I;D++)S[D]=k.i(D)<<1|k.i(D-1)>>>31;return new h(S,k.h)}function ae(k,I){const S=I>>5;I%=32;const D=k.g.length-S,P=[];for(let U=0;U<D;U++)P[U]=I>0?k.i(U+S)>>>I|k.i(U+S+1)<<32-I:k.i(U+S);return new h(P,k.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,h0=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=v,h.fromString=_,Ss=h}).apply(typeof Rg<"u"?Rg:typeof self<"u"?self:typeof window<"u"?window:{});var Vc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var f0,Ba,m0,qc,Lh,p0,g0,y0;(function(){var r,e=Object.defineProperty;function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Vc=="object"&&Vc];for(var y=0;y<c.length;++y){var x=c[y];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var i=t(this);function o(c,y){if(y)e:{var x=i;c=c.split(".");for(var T=0;T<c.length-1;T++){var $=c[T];if(!($ in x))break e;x=x[$]}c=c[c.length-1],T=x[c],y=y(T),y!=T&&y!=null&&e(x,c,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(c){return c||function(y){var x=[],T;for(T in y)Object.prototype.hasOwnProperty.call(y,T)&&x.push([T,y[T]]);return x}});var l=l||{},h=this||self;function p(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function m(c,y,x){return c.call.apply(c.bind,arguments)}function v(c,y,x){return v=m,v.apply(null,arguments)}function _(c,y){var x=Array.prototype.slice.call(arguments,1);return function(){var T=x.slice();return T.push.apply(T,arguments),c.apply(this,T)}}function E(c,y){function x(){}x.prototype=y.prototype,c.Z=y.prototype,c.prototype=new x,c.prototype.constructor=c,c.Ob=function(T,$,Q){for(var ce=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)ce[Ae-2]=arguments[Ae];return y.prototype[$].apply(T,ce)}}var N=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function O(c){const y=c.length;if(y>0){const x=Array(y);for(let T=0;T<y;T++)x[T]=c[T];return x}return[]}function L(c,y){for(let T=1;T<arguments.length;T++){const $=arguments[T];var x=typeof $;if(x=x!="object"?x:$?Array.isArray($)?"array":x:"null",x=="array"||x=="object"&&typeof $.length=="number"){x=c.length||0;const Q=$.length||0;c.length=x+Q;for(let ce=0;ce<Q;ce++)c[x+ce]=$[ce]}else c.push($)}}class F{constructor(y,x){this.i=y,this.j=x,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function M(c){h.setTimeout(()=>{throw c},0)}function K(){var c=k;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class q{constructor(){this.h=this.g=null}add(y,x){const T=Y.get();T.set(y,x),this.h?this.h.next=T:this.g=T,this.h=T}}var Y=new F(()=>new ne,c=>c.reset());class ne{constructor(){this.next=this.g=this.h=null}set(y,x){this.h=y,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let G,ae=!1,k=new q,I=()=>{const c=Promise.resolve(void 0);G=()=>{c.then(S)}};function S(){for(var c;c=K();){try{c.h.call(c.g)}catch(x){M(x)}var y=Y;y.j(c),y.h<100&&(y.h++,c.next=y.g,y.g=c)}ae=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const x=()=>{};h.addEventListener("test",x,y),h.removeEventListener("test",x,y)}catch{}return c})();function b(c){return/^[\s\xa0]*$/.test(c)}function ge(c,y){P.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,y)}E(ge,P),ge.prototype.init=function(c,y){const x=this.type=c.type,T=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget,y||(x=="mouseover"?y=c.fromElement:x=="mouseout"&&(y=c.toElement)),this.relatedTarget=y,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&ge.Z.h.call(this)},ge.prototype.h=function(){ge.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Re="closure_listenable_"+(Math.random()*1e6|0),je=0;function Me(c,y,x,T,$){this.listener=c,this.proxy=null,this.src=y,this.type=x,this.capture=!!T,this.ha=$,this.key=++je,this.da=this.fa=!1}function ie(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function B(c,y,x){for(const T in c)y.call(x,c[T],T,c)}function X(c,y){for(const x in c)y.call(void 0,c[x],x,c)}function R(c){const y={};for(const x in c)y[x]=c[x];return y}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function le(c,y){let x,T;for(let $=1;$<arguments.length;$++){T=arguments[$];for(x in T)c[x]=T[x];for(let Q=0;Q<A.length;Q++)x=A[Q],Object.prototype.hasOwnProperty.call(T,x)&&(c[x]=T[x])}}function ue(c){this.src=c,this.g={},this.h=0}ue.prototype.add=function(c,y,x,T,$){const Q=c.toString();c=this.g[Q],c||(c=this.g[Q]=[],this.h++);const ce=_e(c,y,T,$);return ce>-1?(y=c[ce],x||(y.fa=!1)):(y=new Me(y,this.src,Q,!!T,$),y.fa=x,c.push(y)),y};function he(c,y){const x=y.type;if(x in c.g){var T=c.g[x],$=Array.prototype.indexOf.call(T,y,void 0),Q;(Q=$>=0)&&Array.prototype.splice.call(T,$,1),Q&&(ie(y),c.g[x].length==0&&(delete c.g[x],c.h--))}}function _e(c,y,x,T){for(let $=0;$<c.length;++$){const Q=c[$];if(!Q.da&&Q.listener==y&&Q.capture==!!x&&Q.ha==T)return $}return-1}var ke="closure_lm_"+(Math.random()*1e6|0),Be={};function Ge(c,y,x,T,$){if(Array.isArray(y)){for(let Q=0;Q<y.length;Q++)Ge(c,y[Q],x,T,$);return null}return x=Ho(x),c&&c[Re]?c.J(y,x,p(T)?!!T.capture:!1,$):zt(c,y,x,!1,T,$)}function zt(c,y,x,T,$,Q){if(!y)throw Error("Invalid event type");const ce=p($)?!!$.capture:!!$;let Ae=ki(c);if(Ae||(c[ke]=Ae=new ue(c)),x=Ae.add(y,x,T,ce,Q),x.proxy)return x;if(T=Si(),x.proxy=T,T.src=c,T.listener=x,c.addEventListener)U||($=ce),$===void 0&&($=!1),c.addEventListener(y.toString(),T,$);else if(c.attachEvent)c.attachEvent(Ci(y.toString()),T);else if(c.addListener&&c.removeListener)c.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return x}function Si(){function c(x){return y.call(c.src,c.listener,x)}const y=_l;return c}function qo(c,y,x,T,$){if(Array.isArray(y))for(var Q=0;Q<y.length;Q++)qo(c,y[Q],x,T,$);else T=p(T)?!!T.capture:!!T,x=Ho(x),c&&c[Re]?(c=c.i,Q=String(y).toString(),Q in c.g&&(y=c.g[Q],x=_e(y,x,T,$),x>-1&&(ie(y[x]),Array.prototype.splice.call(y,x,1),y.length==0&&(delete c.g[Q],c.h--)))):c&&(c=ki(c))&&(y=c.g[y.toString()],c=-1,y&&(c=_e(y,x,T,$)),(x=c>-1?y[c]:null)&&zr(x))}function zr(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[Re])he(y.i,c);else{var x=c.type,T=c.proxy;y.removeEventListener?y.removeEventListener(x,T,c.capture):y.detachEvent?y.detachEvent(Ci(x),T):y.addListener&&y.removeListener&&y.removeListener(T),(x=ki(y))?(he(x,c),x.h==0&&(x.src=null,y[ke]=null)):ie(c)}}}function Ci(c){return c in Be?Be[c]:Be[c]="on"+c}function _l(c,y){if(c.da)c=!0;else{y=new ge(y,this);const x=c.listener,T=c.ha||c.src;c.fa&&zr(c),c=x.call(T,y)}return c}function ki(c){return c=c[ke],c instanceof ue?c:null}var Ms="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ho(c){return typeof c=="function"?c:(c[Ms]||(c[Ms]=function(y){return c.handleEvent(y)}),c[Ms])}function dt(){D.call(this),this.i=new ue(this),this.M=this,this.G=null}E(dt,D),dt.prototype[Re]=!0,dt.prototype.removeEventListener=function(c,y,x,T){qo(this,c,y,x,T)};function at(c,y){var x,T=c.G;if(T)for(x=[];T;T=T.G)x.push(T);if(c=c.M,T=y.type||y,typeof y=="string")y=new P(y,c);else if(y instanceof P)y.target=y.target||c;else{var $=y;y=new P(T,c),le(y,$)}$=!0;let Q,ce;if(x)for(ce=x.length-1;ce>=0;ce--)Q=y.g=x[ce],$=En(Q,T,!0,y)&&$;if(Q=y.g=c,$=En(Q,T,!0,y)&&$,$=En(Q,T,!1,y)&&$,x)for(ce=0;ce<x.length;ce++)Q=y.g=x[ce],$=En(Q,T,!1,y)&&$}dt.prototype.N=function(){if(dt.Z.N.call(this),this.i){var c=this.i;for(const y in c.g){const x=c.g[y];for(let T=0;T<x.length;T++)ie(x[T]);delete c.g[y],c.h--}}this.G=null},dt.prototype.J=function(c,y,x,T){return this.i.add(String(c),y,!1,x,T)},dt.prototype.K=function(c,y,x,T){return this.i.add(String(c),y,!0,x,T)};function En(c,y,x,T){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();let $=!0;for(let Q=0;Q<y.length;++Q){const ce=y[Q];if(ce&&!ce.da&&ce.capture==x){const Ae=ce.listener,lt=ce.ha||ce.src;ce.fa&&he(c.i,ce),$=Ae.call(lt,T)!==!1&&$}}return $&&!T.defaultPrevented}function Wo(c,y){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=v(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:h.setTimeout(c,y||0)}function Go(c){c.g=Wo(()=>{c.g=null,c.i&&(c.i=!1,Go(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class wl extends D{constructor(y,x){super(),this.m=y,this.l=x,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Go(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $r(c){D.call(this),this.h=c,this.g={}}E($r,D);var Ko=[];function Ai(c){B(c.g,function(y,x){this.g.hasOwnProperty(x)&&zr(y)},c),c.g={}}$r.prototype.N=function(){$r.Z.N.call(this),Ai(this)},$r.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var qr=h.JSON.stringify,El=h.JSON.parse,Us=class{stringify(c){return h.JSON.stringify(c,void 0)}parse(c){return h.JSON.parse(c,void 0)}};function Hr(){}function bl(){}var Wr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Pi(){P.call(this,"d")}E(Pi,P);function Qo(){P.call(this,"c")}E(Qo,P);var bn={},Ri=null;function Gr(){return Ri=Ri||new dt}bn.Ia="serverreachability";function ji(c){P.call(this,bn.Ia,c)}E(ji,P);function fr(c){const y=Gr();at(y,new ji(y))}bn.STAT_EVENT="statevent";function mr(c,y){P.call(this,bn.STAT_EVENT,c),this.stat=y}E(mr,P);function it(c){const y=Gr();at(y,new mr(y,c))}bn.Ja="timingevent";function Yo(c,y){P.call(this,bn.Ja,c),this.size=y}E(Yo,P);function Kr(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){c()},y)}function Qr(){this.g=!0}Qr.prototype.ua=function(){this.g=!1};function Il(c,y,x,T,$,Q){c.info(function(){if(c.g)if(Q){var ce="",Ae=Q.split("&");for(let We=0;We<Ae.length;We++){var lt=Ae[We].split("=");if(lt.length>1){const ht=lt[0];lt=lt[1];const sn=ht.split("_");ce=sn.length>=2&&sn[1]=="type"?ce+(ht+"="+lt+"&"):ce+(ht+"=redacted&")}}}else ce=null;else ce=Q;return"XMLHTTP REQ ("+T+") [attempt "+$+"]: "+y+`
`+x+`
`+ce})}function Tl(c,y,x,T,$,Q,ce){c.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+$+"]: "+y+`
`+x+`
`+Q+" "+ce})}function Fn(c,y,x,T){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+Bs(c,x)+(T?" "+T:"")})}function Nl(c,y){c.info(function(){return"TIMEOUT: "+y})}Qr.prototype.info=function(){};function Bs(c,y){if(!c.g)return y;if(!y)return null;try{const Q=JSON.parse(y);if(Q){for(c=0;c<Q.length;c++)if(Array.isArray(Q[c])){var x=Q[c];if(!(x.length<2)){var T=x[1];if(Array.isArray(T)&&!(T.length<1)){var $=T[0];if($!="noop"&&$!="stop"&&$!="close")for(let ce=1;ce<T.length;ce++)T[ce]=""}}}}return qr(Q)}catch{return y}}var Yr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Jr={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Sl;function pr(){}E(pr,Hr),pr.prototype.g=function(){return new XMLHttpRequest},Sl=new pr;function Mn(c){return encodeURIComponent(String(c))}function Di(c){var y=1;c=c.split(":");const x=[];for(;y>0&&c.length;)x.push(c.shift()),y--;return c.length&&x.push(c.join(":")),x}function hn(c,y,x,T){this.j=c,this.i=y,this.l=x,this.S=T||1,this.V=new $r(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Cl}function Cl(){this.i=null,this.g="",this.h=!1}var kl={},Jo={};function In(c,y,x){c.M=1,c.A=yr(fn(y)),c.u=x,c.R=!0,Xo(c,null)}function Xo(c,y){c.F=Date.now(),zs(c),c.B=fn(c.A);var x=c.B,T=c.S;Array.isArray(T)||(T=[String(T)]),la(x.i,"t",T),c.C=0,x=c.j.L,c.h=new Cl,c.g=Ml(c.j,x?y:null,!c.u),c.P>0&&(c.O=new wl(v(c.Y,c,c.g),c.P)),y=c.V,x=c.g,T=c.ba;var $="readystatechange";Array.isArray($)||($&&(Ko[0]=$.toString()),$=Ko);for(let Q=0;Q<$.length;Q++){const ce=Ge(x,$[Q],T||y.handleEvent,!1,y.h||y);if(!ce)break;y.g[ce.key]=ce}y=c.J?R(c.J):{},c.u?(c.v||(c.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,y)):(c.v="GET",c.g.ea(c.B,c.v,null,y)),fr(),Il(c.i,c.v,c.B,c.l,c.S,c.u)}hn.prototype.ba=function(c){c=c.target;const y=this.O;y&&Wn(c)==3?y.j():this.Y(c)},hn.prototype.Y=function(c){try{if(c==this.g)e:{const Ae=Wn(this.g),lt=this.g.ya(),We=this.g.ca();if(!(Ae<3)&&(Ae!=3||this.g&&(this.h.h||this.g.la()||Ll(this.g)))){this.K||Ae!=4||lt==7||(lt==8||We<=0?fr(3):fr(2)),Oi(this);var y=this.g.ca();this.X=y;var x=Al(this);if(this.o=y==200,Tl(this.i,this.v,this.B,this.l,this.S,Ae,y),this.o){if(this.U&&!this.L){t:{if(this.g){var T,$=this.g;if((T=$.g?$.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(T)){var Q=T;break t}}Q=null}if(c=Q)Fn(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Je(this,c);else{this.o=!1,this.m=3,it(12),gr(this),$s(this);break e}}if(this.R){c=!0;let ht;for(;!this.K&&this.C<x.length;)if(ht=Rl(this,x),ht==Jo){Ae==4&&(this.m=4,it(14),c=!1),Fn(this.i,this.l,null,"[Incomplete Response]");break}else if(ht==kl){this.m=4,it(15),Fn(this.i,this.l,x,"[Invalid Chunk]"),c=!1;break}else Fn(this.i,this.l,ht,null),Je(this,ht);if(Pl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ae!=4||x.length!=0||this.h.h||(this.m=1,it(16),c=!1),this.o=this.o&&c,!c)Fn(this.i,this.l,x,"[Invalid Chunked Response]"),gr(this),$s(this);else if(x.length>0&&!this.W){this.W=!0;var ce=this.j;ce.g==this&&ce.aa&&!ce.P&&(ce.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),Xs(ce),ce.P=!0,it(11))}}else Fn(this.i,this.l,x,null),Je(this,x);Ae==4&&gr(this),this.o&&!this.K&&(Ae==4?Hi(this.j,this):(this.o=!1,zs(this)))}else ua(this.g),y==400&&x.indexOf("Unknown SID")>0?(this.m=3,it(12)):(this.m=0,it(13)),gr(this),$s(this)}}}catch{}};function Al(c){if(!Pl(c))return c.g.la();const y=Ll(c.g);if(y==="")return"";let x="";const T=y.length,$=Wn(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return gr(c),$s(c),"";c.h.i=new h.TextDecoder}for(let Q=0;Q<T;Q++)c.h.h=!0,x+=c.h.i.decode(y[Q],{stream:!($&&Q==T-1)});return y.length=0,c.h.g+=x,c.C=0,c.h.g}function Pl(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function Rl(c,y){var x=c.C,T=y.indexOf(`
`,x);return T==-1?Jo:(x=Number(y.substring(x,T)),isNaN(x)?kl:(T+=1,T+x>y.length?Jo:(y=y.slice(T,T+x),c.C=T+x,y)))}hn.prototype.cancel=function(){this.K=!0,gr(this)};function zs(c){c.T=Date.now()+c.H,Zo(c,c.H)}function Zo(c,y){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Kr(v(c.aa,c),y)}function Oi(c){c.D&&(h.clearTimeout(c.D),c.D=null)}hn.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(Nl(this.i,this.B),this.M!=2&&(fr(),it(17)),gr(this),this.m=2,$s(this)):Zo(this,this.T-c)};function $s(c){c.j.I==0||c.K||Hi(c.j,c)}function gr(c){Oi(c);var y=c.O;y&&typeof y.dispose=="function"&&y.dispose(),c.O=null,Ai(c.V),c.g&&(y=c.g,c.g=null,y.abort(),y.dispose())}function Je(c,y){try{var x=c.j;if(x.I!=0&&(x.g==c||ta(x.h,c))){if(!c.L&&ta(x.h,c)&&x.I==3){try{var T=x.Ba.g.parse(y)}catch{T=null}if(Array.isArray(T)&&T.length==3){var $=T;if($[0]==0){e:if(!x.v){if(x.g)if(x.g.F+3e3<c.F)qi(x),nn(x);else break e;Qn(x),it(18)}}else x.xa=$[1],0<x.xa-x.K&&$[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=Kr(v(x.Va,x),6e3));qs(x.h)<=1&&x.ta&&(x.ta=void 0)}else rn(x,11)}else if((c.L||x.g==c)&&qi(x),!b(y))for($=x.Ba.g.parse(y),y=0;y<$.length;y++){let We=$[y];const ht=We[0];if(!(ht<=x.K))if(x.K=ht,We=We[1],x.I==2)if(We[0]=="c"){x.M=We[1],x.ba=We[2];const sn=We[3];sn!=null&&(x.ka=sn,x.j.info("VER="+x.ka));const Er=We[4];Er!=null&&(x.za=Er,x.j.info("SVER="+x.za));const Yn=We[5];Yn!=null&&typeof Yn=="number"&&Yn>0&&(T=1.5*Yn,x.O=T,x.j.info("backChannelRequestTimeoutMs_="+T)),T=x;const Jn=c.g;if(Jn){const Ki=Jn.g?Jn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ki){var Q=T.h;Q.g||Ki.indexOf("spdy")==-1&&Ki.indexOf("quic")==-1&&Ki.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Li(Q,Q.h),Q.h=null))}if(T.G){const fa=Jn.g?Jn.g.getResponseHeader("X-HTTP-Session-Id"):null;fa&&(T.wa=fa,qe(T.J,T.G,fa))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-c.F,x.j.info("Handshake RTT: "+x.T+"ms")),T=x;var ce=c;if(T.na=ha(T,T.L?T.ba:null,T.W),ce.L){Hs(T.h,ce);var Ae=ce,lt=T.O;lt&&(Ae.H=lt),Ae.D&&(Oi(Ae),zs(Ae)),T.g=ce}else Rt(T);x.i.length>0&&wr(x)}else We[0]!="stop"&&We[0]!="close"||rn(x,7);else x.I==3&&(We[0]=="stop"||We[0]=="close"?We[0]=="stop"?rn(x,7):zi(x):We[0]!="noop"&&x.l&&x.l.qa(We),x.A=0)}}fr(4)}catch{}}var zu=class{constructor(c,y){this.g=c,this.map=y}};function Vi(c){this.l=c||10,h.PerformanceNavigationTiming?(c=h.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ea(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function qs(c){return c.h?1:c.g?c.g.size:0}function ta(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function Li(c,y){c.g?c.g.add(y):c.h=y}function Hs(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}Vi.prototype.cancel=function(){if(this.i=Zt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Zt(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const x of c.g.values())y=y.concat(x.G);return y}return O(c.i)}var jl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function en(c,y){if(c){c=c.split("&");for(let x=0;x<c.length;x++){const T=c[x].indexOf("=");let $,Q=null;T>=0?($=c[x].substring(0,T),Q=c[x].substring(T+1)):$=c[x],y($,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function Un(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;c instanceof Un?(this.l=c.l,Ws(this,c.j),this.o=c.o,this.g=c.g,Bn(this,c.u),this.h=c.h,Xr(this,ca(c.i)),this.m=c.m):c&&(y=String(c).match(jl))?(this.l=!1,Ws(this,y[1]||"",!0),this.o=Gs(y[2]||""),this.g=Gs(y[3]||"",!0),Bn(this,y[4]),this.h=Gs(y[5]||"",!0),Xr(this,y[6]||"",!0),this.m=Gs(y[7]||"")):(this.l=!1,this.i=new Fe(null,this.l))}Un.prototype.toString=function(){const c=[];var y=this.j;y&&c.push(Ks(y,ra,!0),":");var x=this.g;return(x||y=="file")&&(c.push("//"),(y=this.o)&&c.push(Ks(y,ra,!0),"@"),c.push(Mn(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&c.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&c.push("/"),c.push(Ks(x,x.charAt(0)=="/"?Qs:sa,!0))),(x=this.i.toString())&&c.push("?",x),(x=this.m)&&c.push("#",Ks(x,ia)),c.join("")},Un.prototype.resolve=function(c){const y=fn(this);let x=!!c.j;x?Ws(y,c.j):x=!!c.o,x?y.o=c.o:x=!!c.g,x?y.g=c.g:x=c.u!=null;var T=c.h;if(x)Bn(y,c.u);else if(x=!!c.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var $=y.h.lastIndexOf("/");$!=-1&&(T=y.h.slice(0,$+1)+T)}if($=T,$==".."||$==".")T="";else if($.indexOf("./")!=-1||$.indexOf("/.")!=-1){T=$.lastIndexOf("/",0)==0,$=$.split("/");const Q=[];for(let ce=0;ce<$.length;){const Ae=$[ce++];Ae=="."?T&&ce==$.length&&Q.push(""):Ae==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),T&&ce==$.length&&Q.push("")):(Q.push(Ae),T=!0)}T=Q.join("/")}else T=$}return x?y.h=T:x=c.i.toString()!=="",x?Xr(y,ca(c.i)):x=!!c.m,x&&(y.m=c.m),y};function fn(c){return new Un(c)}function Ws(c,y,x){c.j=x?Gs(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function Bn(c,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);c.u=y}else c.u=null}function Xr(c,y,x){y instanceof Fe?(c.i=y,Mi(c.i,c.l)):(x||(y=Ks(y,$u)),c.i=new Fe(y,c.l))}function qe(c,y,x){c.i.set(y,x)}function yr(c){return qe(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function Gs(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ks(c,y,x){return typeof c=="string"?(c=encodeURI(c).replace(y,na),x&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function na(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var ra=/[#\/\?@]/g,sa=/[#\?:]/g,Qs=/[#\?]/g,$u=/[#\?@]/g,ia=/#/g;function Fe(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function zn(c){c.g||(c.g=new Map,c.h=0,c.i&&en(c.i,function(y,x){c.add(decodeURIComponent(y.replace(/\+/g," ")),x)}))}r=Fe.prototype,r.add=function(c,y){zn(this),this.i=null,c=$n(this,c);let x=this.g.get(c);return x||this.g.set(c,x=[]),x.push(y),this.h+=1,this};function oa(c,y){zn(c),y=$n(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function Fi(c,y){return zn(c),y=$n(c,y),c.g.has(y)}r.forEach=function(c,y){zn(this),this.g.forEach(function(x,T){x.forEach(function($){c.call(y,$,T,this)},this)},this)};function aa(c,y){zn(c);let x=[];if(typeof y=="string")Fi(c,y)&&(x=x.concat(c.g.get($n(c,y))));else for(c=Array.from(c.g.values()),y=0;y<c.length;y++)x=x.concat(c[y]);return x}r.set=function(c,y){return zn(this),this.i=null,c=$n(this,c),Fi(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},r.get=function(c,y){return c?(c=aa(this,c),c.length>0?String(c[0]):y):y};function la(c,y,x){oa(c,y),x.length>0&&(c.i=null,c.g.set($n(c,y),O(x)),c.h+=x.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(let T=0;T<y.length;T++){var x=y[T];const $=Mn(x);x=aa(this,x);for(let Q=0;Q<x.length;Q++){let ce=$;x[Q]!==""&&(ce+="="+Mn(x[Q])),c.push(ce)}}return this.i=c.join("&")};function ca(c){const y=new Fe;return y.i=c.i,c.g&&(y.g=new Map(c.g),y.h=c.h),y}function $n(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function Mi(c,y){y&&!c.j&&(zn(c),c.i=null,c.g.forEach(function(x,T){const $=T.toLowerCase();T!=$&&(oa(this,T),la(this,$,x))},c)),c.j=y}function qn(c,y){const x=new Qr;if(h.Image){const T=new Image;T.onload=_(Tt,x,"TestLoadImage: loaded",!0,y,T),T.onerror=_(Tt,x,"TestLoadImage: error",!1,y,T),T.onabort=_(Tt,x,"TestLoadImage: abort",!1,y,T),T.ontimeout=_(Tt,x,"TestLoadImage: timeout",!1,y,T),h.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=c}else y(!1)}function Hn(c,y){const x=new Qr,T=new AbortController,$=setTimeout(()=>{T.abort(),Tt(x,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:T.signal}).then(Q=>{clearTimeout($),Q.ok?Tt(x,"TestPingServer: ok",!0,y):Tt(x,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout($),Tt(x,"TestPingServer: error",!1,y)})}function Tt(c,y,x,T,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),T(x)}catch{}}function Ys(){this.g=new Us}function vr(c){this.i=c.Sb||null,this.h=c.ab||!1}E(vr,Hr),vr.prototype.g=function(){return new tn(this.i,this.h)};function tn(c,y){dt.call(this),this.H=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(tn,dt),r=tn.prototype,r.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=y,this.readyState=1,Tn(this)},r.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(y.body=c),(this.H||h).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Zr(this)),this.readyState=0},r.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Tn(this)),this.g&&(this.readyState=3,Tn(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Dl(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function Dl(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}r.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?Zr(this):Tn(this),this.readyState==3&&Dl(this)}},r.Oa=function(c){this.g&&(this.response=this.responseText=c,Zr(this))},r.Na=function(c){this.g&&(this.response=c,Zr(this))},r.ga=function(){this.g&&Zr(this)};function Zr(c){c.readyState=4,c.l=null,c.j=null,c.B=null,Tn(c)}r.setRequestHeader=function(c,y){this.A.append(c,y)},r.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var x=y.next();!x.done;)x=x.value,c.push(x[0]+": "+x[1]),x=y.next();return c.join(`\r
`)};function Tn(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(tn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Ol(c){let y="";return B(c,function(x,T){y+=T,y+=":",y+=x,y+=`\r
`}),y}function Ui(c,y,x){e:{for(T in x){var T=!1;break e}T=!0}T||(x=Ol(x),typeof c=="string"?x!=null&&Mn(x):qe(c,y,x))}function Ke(c){dt.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(Ke,dt);var Vl=/^https?$/i,qu=["POST","PUT"];r=Ke.prototype,r.Fa=function(c){this.H=c},r.ea=function(c,y,x,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Sl.g(),this.g.onreadystatechange=N(v(this.Ca,this));try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch(Q){es(this,Q);return}if(c=x||"",x=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var $ in T)x.set($,T[$]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const Q of T.keys())x.set(Q,T.get(Q));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(x.keys()).find(Q=>Q.toLowerCase()=="content-type"),$=h.FormData&&c instanceof h.FormData,!(Array.prototype.indexOf.call(qu,y,void 0)>=0)||T||$||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,ce]of x)this.g.setRequestHeader(Q,ce);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(Q){es(this,Q)}};function es(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.o=5,ts(c),_r(c)}function ts(c){c.A||(c.A=!0,at(c,"complete"),at(c,"error"))}r.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,at(this,"complete"),at(this,"abort"),_r(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_r(this,!0)),Ke.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?xr(this):this.Xa())},r.Xa=function(){xr(this)};function xr(c){if(c.h&&typeof l<"u"){if(c.v&&Wn(c)==4)setTimeout(c.Ca.bind(c),0);else if(at(c,"readystatechange"),Wn(c)==4){c.h=!1;try{const Q=c.ca();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var x;if(!(x=y)){var T;if(T=Q===0){let ce=String(c.D).match(jl)[1]||null;!ce&&h.self&&h.self.location&&(ce=h.self.location.protocol.slice(0,-1)),T=!Vl.test(ce?ce.toLowerCase():"")}x=T}if(x)at(c,"complete"),at(c,"success");else{c.o=6;try{var $=Wn(c)>2?c.g.statusText:""}catch{$=""}c.l=$+" ["+c.ca()+"]",ts(c)}}finally{_r(c)}}}}function _r(c,y){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const x=c.g;c.g=null,y||at(c,"ready");try{x.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Wn(c){return c.g?c.g.readyState:0}r.ca=function(){try{return Wn(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),El(y)}};function Ll(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function ua(c){const y={};c=(c.g&&Wn(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<c.length;T++){if(b(c[T]))continue;var x=Di(c[T]);const $=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const Q=y[$]||[];y[$]=Q,Q.push(x)}X(y,function(T){return T.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Gn(c,y,x){return x&&x.internalChannelParams&&x.internalChannelParams[c]||y}function Bi(c){this.za=0,this.i=[],this.j=new Qr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Gn("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Gn("baseRetryDelayMs",5e3,c),this.Za=Gn("retryDelaySeedMs",1e4,c),this.Ta=Gn("forwardChannelMaxRetries",2,c),this.va=Gn("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new Vi(c&&c.concurrentRequestLimit),this.Ba=new Ys,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Bi.prototype,r.ka=8,r.I=1,r.connect=function(c,y,x,T){it(0),this.W=c,this.H=y||{},x&&T!==void 0&&(this.H.OSID=x,this.H.OAID=T),this.F=this.X,this.J=ha(this,null,this.W),wr(this)};function zi(c){if($i(c),c.I==3){var y=c.V++,x=fn(c.J);if(qe(x,"SID",c.M),qe(x,"RID",y),qe(x,"TYPE","terminate"),Kn(c,x),y=new hn(c,c.j,y),y.M=2,y.A=yr(fn(x)),x=!1,h.navigator&&h.navigator.sendBeacon)try{x=h.navigator.sendBeacon(y.A.toString(),"")}catch{}!x&&h.Image&&(new Image().src=y.A,x=!0),x||(y.g=Ml(y.j,null),y.g.ea(y.A)),y.F=Date.now(),zs(y)}Zs(c)}function nn(c){c.g&&(Xs(c),c.g.cancel(),c.g=null)}function $i(c){nn(c),c.v&&(h.clearTimeout(c.v),c.v=null),qi(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&h.clearTimeout(c.m),c.m=null)}function wr(c){if(!ea(c.h)&&!c.m){c.m=!0;var y=c.Ea;G||I(),ae||(G(),ae=!0),k.add(y,c),c.D=0}}function Fl(c,y){return qs(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=y.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Kr(v(c.Ea,c,y),Wi(c,c.D)),c.D++,!0)}r.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const $=new hn(this,this.j,c);let Q=this.o;if(this.U&&(Q?(Q=R(Q),le(Q,this.U)):Q=this.U),this.u!==null||this.R||($.J=Q,Q=null),this.S)e:{for(var y=0,x=0;x<this.i.length;x++){t:{var T=this.i[x];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(y+=T,y>4096){y=x;break e}if(y===4096||x===this.i.length-1){y=x+1;break e}}y=1e3}else y=1e3;y=da(this,$,y),x=fn(this.J),qe(x,"RID",c),qe(x,"CVER",22),this.G&&qe(x,"X-HTTP-Session-Id",this.G),Kn(this,x),Q&&(this.R?y="headers="+Mn(Ol(Q))+"&"+y:this.u&&Ui(x,this.u,Q)),Li(this.h,$),this.Ra&&qe(x,"TYPE","init"),this.S?(qe(x,"$req",y),qe(x,"SID","null"),$.U=!0,In($,x,null)):In($,x,y),this.I=2}}else this.I==3&&(c?Js(this,c):this.i.length==0||ea(this.h)||Js(this))};function Js(c,y){var x;y?x=y.l:x=c.V++;const T=fn(c.J);qe(T,"SID",c.M),qe(T,"RID",x),qe(T,"AID",c.K),Kn(c,T),c.u&&c.o&&Ui(T,c.u,c.o),x=new hn(c,c.j,x,c.D+1),c.u===null&&(x.J=c.o),y&&(c.i=y.G.concat(c.i)),y=da(c,x,1e3),x.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Li(c.h,x),In(x,T,y)}function Kn(c,y){c.H&&B(c.H,function(x,T){qe(y,T,x)}),c.l&&B({},function(x,T){qe(y,T,x)})}function da(c,y,x){x=Math.min(c.i.length,x);const T=c.l?v(c.l.Ka,c.l,c):null;e:{var $=c.i;let Ae=-1;for(;;){const lt=["count="+x];Ae==-1?x>0?(Ae=$[0].g,lt.push("ofs="+Ae)):Ae=0:lt.push("ofs="+Ae);let We=!0;for(let ht=0;ht<x;ht++){var Q=$[ht].g;const sn=$[ht].map;if(Q-=Ae,Q<0)Ae=Math.max(0,$[ht].g-100),We=!1;else try{Q="req"+Q+"_"||"";try{var ce=sn instanceof Map?sn:Object.entries(sn);for(const[Er,Yn]of ce){let Jn=Yn;p(Yn)&&(Jn=qr(Yn)),lt.push(Q+Er+"="+encodeURIComponent(Jn))}}catch(Er){throw lt.push(Q+"type="+encodeURIComponent("_badmap")),Er}}catch{T&&T(sn)}}if(We){ce=lt.join("&");break e}}ce=void 0}return c=c.i.splice(0,x),y.G=c,ce}function Rt(c){if(!c.g&&!c.v){c.Y=1;var y=c.Da;G||I(),ae||(G(),ae=!0),k.add(y,c),c.A=0}}function Qn(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Kr(v(c.Da,c),Wi(c,c.A)),c.A++,!0)}r.Da=function(){if(this.v=null,ns(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Kr(v(this.Wa,this),c)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,it(10),nn(this),ns(this))};function Xs(c){c.B!=null&&(h.clearTimeout(c.B),c.B=null)}function ns(c){c.g=new hn(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var y=fn(c.na);qe(y,"RID","rpc"),qe(y,"SID",c.M),qe(y,"AID",c.K),qe(y,"CI",c.F?"0":"1"),!c.F&&c.ia&&qe(y,"TO",c.ia),qe(y,"TYPE","xmlhttp"),Kn(c,y),c.u&&c.o&&Ui(y,c.u,c.o),c.O&&(c.g.H=c.O);var x=c.g;c=c.ba,x.M=1,x.A=yr(fn(y)),x.u=null,x.R=!0,Xo(x,c)}r.Va=function(){this.C!=null&&(this.C=null,nn(this),Qn(this),it(19))};function qi(c){c.C!=null&&(h.clearTimeout(c.C),c.C=null)}function Hi(c,y){var x=null;if(c.g==y){qi(c),Xs(c),c.g=null;var T=2}else if(ta(c.h,y))x=y.G,Hs(c.h,y),T=1;else return;if(c.I!=0){if(y.o)if(T==1){x=y.u?y.u.length:0,y=Date.now()-y.F;var $=c.D;T=Gr(),at(T,new Yo(T,x)),wr(c)}else Rt(c);else if($=y.m,$==3||$==0&&y.X>0||!(T==1&&Fl(c,y)||T==2&&Qn(c)))switch(x&&x.length>0&&(y=c.h,y.i=y.i.concat(x)),$){case 1:rn(c,5);break;case 4:rn(c,10);break;case 3:rn(c,6);break;default:rn(c,2)}}}function Wi(c,y){let x=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(x*=2),x*y}function rn(c,y){if(c.j.info("Error code "+y),y==2){var x=v(c.bb,c),T=c.Ua;const $=!T;T=new Un(T||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Ws(T,"https"),yr(T),$?qn(T.toString(),x):Hn(T.toString(),x)}else it(2);c.I=0,c.l&&c.l.pa(y),Zs(c),$i(c)}r.bb=function(c){c?(this.j.info("Successfully pinged google.com"),it(2)):(this.j.info("Failed to ping google.com"),it(1))};function Zs(c){if(c.I=0,c.ja=[],c.l){const y=Zt(c.h);(y.length!=0||c.i.length!=0)&&(L(c.ja,y),L(c.ja,c.i),c.h.i.length=0,O(c.i),c.i.length=0),c.l.oa()}}function ha(c,y,x){var T=x instanceof Un?fn(x):new Un(x);if(T.g!="")y&&(T.g=y+"."+T.g),Bn(T,T.u);else{var $=h.location;T=$.protocol,y=y?y+"."+$.hostname:$.hostname,$=+$.port;const Q=new Un(null);T&&Ws(Q,T),y&&(Q.g=y),$&&Bn(Q,$),x&&(Q.h=x),T=Q}return x=c.G,y=c.wa,x&&y&&qe(T,x,y),qe(T,"VER",c.ka),Kn(c,T),T}function Ml(c,y,x){if(y&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Aa&&!c.ma?new Ke(new vr({ab:x})):new Ke(c.ma),y.Fa(c.L),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ul(){}r=Ul.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Gi(){}Gi.prototype.g=function(c,y){return new Nt(c,y)};function Nt(c,y){dt.call(this),this.g=new Bi(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(c?c["X-WebChannel-Client-Profile"]=y.sa:c={"X-WebChannel-Client-Profile":y.sa}),this.g.U=c,(c=y&&y.Qb)&&!b(c)&&(this.g.u=c),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!b(y)&&(this.g.G=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new rs(this)}E(Nt,dt),Nt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Nt.prototype.close=function(){zi(this.g)},Nt.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var x={};x.__data__=c,c=x}else this.v&&(x={},x.__data__=qr(c),c=x);y.i.push(new zu(y.Ya++,c)),y.I==3&&wr(y)},Nt.prototype.N=function(){this.g.l=null,delete this.j,zi(this.g),delete this.g,Nt.Z.N.call(this)};function Bl(c){Pi.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const x in y){c=x;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}E(Bl,Pi);function zl(){Qo.call(this),this.status=1}E(zl,Qo);function rs(c){this.g=c}E(rs,Ul),rs.prototype.ra=function(){at(this.g,"a")},rs.prototype.qa=function(c){at(this.g,new Bl(c))},rs.prototype.pa=function(c){at(this.g,new zl)},rs.prototype.oa=function(){at(this.g,"b")},Gi.prototype.createWebChannel=Gi.prototype.g,Nt.prototype.send=Nt.prototype.o,Nt.prototype.open=Nt.prototype.m,Nt.prototype.close=Nt.prototype.close,y0=function(){return new Gi},g0=function(){return Gr()},p0=bn,Lh={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Yr.NO_ERROR=0,Yr.TIMEOUT=8,Yr.HTTP_ERROR=6,qc=Yr,Jr.COMPLETE="complete",m0=Jr,bl.EventType=Wr,Wr.OPEN="a",Wr.CLOSE="b",Wr.ERROR="c",Wr.MESSAGE="d",dt.prototype.listen=dt.prototype.J,Ba=bl,Ke.prototype.listenOnce=Ke.prototype.K,Ke.prototype.getLastError=Ke.prototype.Ha,Ke.prototype.getLastErrorCode=Ke.prototype.ya,Ke.prototype.getStatus=Ke.prototype.ca,Ke.prototype.getResponseJson=Ke.prototype.La,Ke.prototype.getResponseText=Ke.prototype.la,Ke.prototype.send=Ke.prototype.ea,Ke.prototype.setWithCredentials=Ke.prototype.Fa,f0=Ke}).apply(typeof Vc<"u"?Vc:typeof self<"u"?self:typeof window<"u"?window:{});class Ft{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ft.UNAUTHENTICATED=new Ft(null),Ft.GOOGLE_CREDENTIALS=new Ft("google-credentials-uid"),Ft.FIRST_PARTY=new Ft("first-party-uid"),Ft.MOCK_USER=new Ft("mock-user");let Lo="12.8.0";function qE(r){Lo=r}const xi=new of("@firebase/firestore");function vo(){return xi.logLevel}function me(r,...e){if(xi.logLevel<=Oe.DEBUG){const t=e.map(cf);xi.debug(`Firestore (${Lo}): ${r}`,...t)}}function Lr(r,...e){if(xi.logLevel<=Oe.ERROR){const t=e.map(cf);xi.error(`Firestore (${Lo}): ${r}`,...t)}}function Ao(r,...e){if(xi.logLevel<=Oe.WARN){const t=e.map(cf);xi.warn(`Firestore (${Lo}): ${r}`,...t)}}function cf(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}function Te(r,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,v0(r,i,t)}function v0(r,e,t){let i=`FIRESTORE (${Lo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Lr(i),new Error(i)}function He(r,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,r||v0(e,o,i)}function Pe(r,e){return r}const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends dr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Or{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class x0{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class HE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ft.UNAUTHENTICATED)))}shutdown(){}}class WE{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class GE{constructor(e){this.t=e,this.currentUser=Ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){He(this.o===void 0,42304);let i=this.i;const o=m=>this.i!==i?(i=this.i,t(m)):Promise.resolve();let l=new Or;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Or,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await o(this.currentUser)}))},p=m=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((m=>p(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?p(m):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Or)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(He(typeof i.accessToken=="string",31837,{l:i}),new x0(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return He(e===null||typeof e=="string",2055,{h:e}),new Ft(e)}}class KE{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Ft.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class QE{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new KE(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Ft.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class jg{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class YE{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Rn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){He(this.o===void 0,3512);const i=l=>{l.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,me("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const o=l=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new jg(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(He(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new jg(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function JE(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}class uf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=JE(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%62))}return i}}function Ve(r,e){return r<e?-1:r>e?1:0}function Fh(r,e){const t=Math.min(r.length,e.length);for(let i=0;i<t;i++){const o=r.charAt(i),l=e.charAt(i);if(o!==l)return Eh(o)===Eh(l)?Ve(o,l):Eh(o)?1:-1}return Ve(r.length,e.length)}const XE=55296,ZE=57343;function Eh(r){const e=r.charCodeAt(0);return e>=XE&&e<=ZE}function Po(r,e,t){return r.length===e.length&&r.every(((i,o)=>t(i,e[o])))}const Dg="__name__";class nr{constructor(e,t,i){t===void 0?t=0:t>e.length&&Te(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Te(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return nr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof nr?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=nr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Ve(e.length,t.length)}static compareSegments(e,t){const i=nr.isNumericId(e),o=nr.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?nr.extractNumericId(e).compare(nr.extractNumericId(t)):Fh(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ss.fromString(e.substring(4,e.length-2))}}class Ye extends nr{construct(e,t,i){return new Ye(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new de(Z.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new Ye(t)}static emptyPath(){return new Ye([])}}const eb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class At extends nr{construct(e,t,i){return new At(e,t,i)}static isValidIdentifier(e){return eb.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),At.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Dg}static keyField(){return new At([Dg])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new de(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let h=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new de(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[o+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new de(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=m,o+=2}else p==="`"?(h=!h,o++):p!=="."||h?(i+=p,o++):(l(),o++)}if(l(),h)throw new de(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new At(t)}static emptyPath(){return new At([])}}class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(Ye.fromString(e))}static fromName(e){return new Ee(Ye.fromString(e).popFirst(5))}static empty(){return new Ee(Ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ye.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new Ye(e.slice()))}}function _0(r,e,t){if(!t)throw new de(Z.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function tb(r,e,t,i){if(e===!0&&i===!0)throw new de(Z.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Og(r){if(!Ee.isDocumentKey(r))throw new de(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Vg(r){if(Ee.isDocumentKey(r))throw new de(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function w0(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Iu(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Te(12329,{type:typeof r})}function Fr(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new de(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Iu(r);throw new de(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function nb(r,e){if(e<=0)throw new de(Z.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}function gt(r,e){const t={typeString:r};return e&&(t.value=e),t}function dl(r,e){if(!w0(r))throw new de(Z.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){t=`JSON missing required field: '${i}'`;break}const h=r[i];if(o&&typeof h!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(l!==void 0&&h!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new de(Z.INVALID_ARGUMENT,t);return!0}const Lg=-62135596800,Fg=1e6;class et{static now(){return et.fromMillis(Date.now())}static fromDate(e){return et.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*Fg);return new et(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new de(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new de(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Lg)throw new de(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Fg}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:et._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(dl(e,et._jsonSchema))return new et(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Lg;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}et._jsonSchemaVersion="firestore/timestamp/1.0",et._jsonSchema={type:gt("string",et._jsonSchemaVersion),seconds:gt("number"),nanoseconds:gt("number")};class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new et(0,0))}static max(){return new Ce(new et(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const el=-1;function rb(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=Ce.fromTimestamp(i===1e9?new et(t+1,0):new et(t,i));return new As(o,Ee.empty(),e)}function sb(r){return new As(r.readTime,r.key,el)}class As{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new As(Ce.min(),Ee.empty(),el)}static max(){return new As(Ce.max(),Ee.empty(),el)}}function ib(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Ee.comparator(r.documentKey,e.documentKey),t!==0?t:Ve(r.largestBatchId,e.largestBatchId))}const ob="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ab{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Fo(r){if(r.code!==Z.FAILED_PRECONDITION||r.message!==ob)throw r;me("LocalStore","Unexpectedly lost primary lease")}class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ee(((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ee?t:ee.resolve(t)}catch(t){return ee.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ee.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ee.reject(t)}static resolve(e){return new ee(((t,i)=>{t(e)}))}static reject(e){return new ee(((t,i)=>{i(e)}))}static waitFor(e){return new ee(((t,i)=>{let o=0,l=0,h=!1;e.forEach((p=>{++o,p.next((()=>{++l,h&&l===o&&t()}),(m=>i(m)))})),h=!0,l===o&&t()}))}static or(e){let t=ee.resolve(!1);for(const i of e)t=t.next((o=>o?ee.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,l)=>{i.push(t.call(this,o,l))})),this.waitFor(i)}static mapArray(e,t){return new ee(((i,o)=>{const l=e.length,h=new Array(l);let p=0;for(let m=0;m<l;m++){const v=m;t(e[v]).next((_=>{h[v]=_,++p,p===l&&i(h)}),(_=>o(_)))}}))}static doWhile(e,t){return new ee(((i,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):i()};l()}))}}function lb(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Mo(r){return r.name==="IndexedDbTransactionError"}class Tu{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Tu.ce=-1;const df=-1;function Nu(r){return r==null}function ru(r){return r===0&&1/r==-1/0}function cb(r){return typeof r=="number"&&Number.isInteger(r)&&!ru(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const E0="";function ub(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Mg(e)),e=db(r.get(t),e);return Mg(e)}function db(r,e){let t=e;const i=r.length;for(let o=0;o<i;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case E0:t+="";break;default:t+=l}}return t}function Mg(r){return r+E0+""}function Ug(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Vs(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function b0(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class st{constructor(e,t){this.comparator=e,this.root=t||kt.EMPTY}insert(e,t){return new st(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,kt.BLACK,null,null))}remove(e){return new st(this.comparator,this.root.remove(e,this.comparator).copy(null,null,kt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Lc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Lc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Lc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Lc(this.root,e,this.comparator,!0)}}class Lc{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class kt{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??kt.RED,this.left=o??kt.EMPTY,this.right=l??kt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new kt(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return kt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return kt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Te(27949);return e+(this.isRed()?0:1)}}kt.EMPTY=null,kt.RED=!0,kt.BLACK=!1;kt.EMPTY=new class{constructor(){this.size=0}get key(){throw Te(57766)}get value(){throw Te(16141)}get color(){throw Te(16727)}get left(){throw Te(29726)}get right(){throw Te(36894)}copy(e,t,i,o,l){return this}insert(e,t,i){return new kt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class _t{constructor(e){this.comparator=e,this.data=new st(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Bg(this.data.getIterator())}getIteratorFrom(e){return new Bg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof _t)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new _t(this.comparator);return t.data=e,t}}class Bg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class dn{constructor(e){this.fields=e,e.sort(At.comparator)}static empty(){return new dn([])}unionWith(e){let t=new _t(At.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new dn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Po(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}class I0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Pt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new I0("Invalid base64 string: "+l):l}})(e);return new Pt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l})(e);return new Pt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pt.EMPTY_BYTE_STRING=new Pt("");const hb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ps(r){if(He(!!r,39018),typeof r=="string"){let e=0;const t=hb.exec(r);if(He(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ut(r.seconds),nanos:ut(r.nanos)}}function ut(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Rs(r){return typeof r=="string"?Pt.fromBase64String(r):Pt.fromUint8Array(r)}const T0="server_timestamp",N0="__type__",S0="__previous_value__",C0="__local_write_time__";function hf(r){return(r?.mapValue?.fields||{})[N0]?.stringValue===T0}function Su(r){const e=r.mapValue.fields[S0];return hf(e)?Su(e):e}function tl(r){const e=Ps(r.mapValue.fields[C0].timestampValue);return new et(e.seconds,e.nanos)}class fb{constructor(e,t,i,o,l,h,p,m,v,_,E){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=p,this.longPollingOptions=m,this.useFetchStreams=v,this.isUsingEmulator=_,this.apiKey=E}}const su="(default)";class nl{constructor(e,t){this.projectId=e,this.database=t||su}static empty(){return new nl("","")}get isDefaultDatabase(){return this.database===su}isEqual(e){return e instanceof nl&&e.projectId===this.projectId&&e.database===this.database}}function mb(r,e){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new de(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nl(r.options.projectId,e)}const k0="__type__",pb="__max__",Fc={mapValue:{}},A0="__vector__",iu="value";function js(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?hf(r)?4:yb(r)?9007199254740991:gb(r)?10:11:Te(28295,{value:r})}function cr(r,e){if(r===e)return!0;const t=js(r);if(t!==js(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return tl(r).isEqual(tl(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=Ps(o.timestampValue),p=Ps(l.timestampValue);return h.seconds===p.seconds&&h.nanos===p.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,l){return Rs(o.bytesValue).isEqual(Rs(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,l){return ut(o.geoPointValue.latitude)===ut(l.geoPointValue.latitude)&&ut(o.geoPointValue.longitude)===ut(l.geoPointValue.longitude)})(r,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return ut(o.integerValue)===ut(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=ut(o.doubleValue),p=ut(l.doubleValue);return h===p?ru(h)===ru(p):isNaN(h)&&isNaN(p)}return!1})(r,e);case 9:return Po(r.arrayValue.values||[],e.arrayValue.values||[],cr);case 10:case 11:return(function(o,l){const h=o.mapValue.fields||{},p=l.mapValue.fields||{};if(Ug(h)!==Ug(p))return!1;for(const m in h)if(h.hasOwnProperty(m)&&(p[m]===void 0||!cr(h[m],p[m])))return!1;return!0})(r,e);default:return Te(52216,{left:r})}}function rl(r,e){return(r.values||[]).find((t=>cr(t,e)))!==void 0}function Ro(r,e){if(r===e)return 0;const t=js(r),i=js(e);if(t!==i)return Ve(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ve(r.booleanValue,e.booleanValue);case 2:return(function(l,h){const p=ut(l.integerValue||l.doubleValue),m=ut(h.integerValue||h.doubleValue);return p<m?-1:p>m?1:p===m?0:isNaN(p)?isNaN(m)?0:-1:1})(r,e);case 3:return zg(r.timestampValue,e.timestampValue);case 4:return zg(tl(r),tl(e));case 5:return Fh(r.stringValue,e.stringValue);case 6:return(function(l,h){const p=Rs(l),m=Rs(h);return p.compareTo(m)})(r.bytesValue,e.bytesValue);case 7:return(function(l,h){const p=l.split("/"),m=h.split("/");for(let v=0;v<p.length&&v<m.length;v++){const _=Ve(p[v],m[v]);if(_!==0)return _}return Ve(p.length,m.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,h){const p=Ve(ut(l.latitude),ut(h.latitude));return p!==0?p:Ve(ut(l.longitude),ut(h.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return $g(r.arrayValue,e.arrayValue);case 10:return(function(l,h){const p=l.fields||{},m=h.fields||{},v=p[iu]?.arrayValue,_=m[iu]?.arrayValue,E=Ve(v?.values?.length||0,_?.values?.length||0);return E!==0?E:$g(v,_)})(r.mapValue,e.mapValue);case 11:return(function(l,h){if(l===Fc.mapValue&&h===Fc.mapValue)return 0;if(l===Fc.mapValue)return 1;if(h===Fc.mapValue)return-1;const p=l.fields||{},m=Object.keys(p),v=h.fields||{},_=Object.keys(v);m.sort(),_.sort();for(let E=0;E<m.length&&E<_.length;++E){const N=Fh(m[E],_[E]);if(N!==0)return N;const O=Ro(p[m[E]],v[_[E]]);if(O!==0)return O}return Ve(m.length,_.length)})(r.mapValue,e.mapValue);default:throw Te(23264,{he:t})}}function zg(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Ve(r,e);const t=Ps(r),i=Ps(e),o=Ve(t.seconds,i.seconds);return o!==0?o:Ve(t.nanos,i.nanos)}function $g(r,e){const t=r.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=Ro(t[o],i[o]);if(l)return l}return Ve(t.length,i.length)}function jo(r){return Mh(r)}function Mh(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const i=Ps(t);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Rs(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return Ee.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=Mh(l);return i+"]"})(r.arrayValue):"mapValue"in r?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of i)l?l=!1:o+=",",o+=`${h}:${Mh(t.fields[h])}`;return o+"}"})(r.mapValue):Te(61005,{value:r})}function Hc(r){switch(js(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Su(r);return e?16+Hc(e):16;case 5:return 2*r.stringValue.length;case 6:return Rs(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,l)=>o+Hc(l)),0)})(r.arrayValue);case 10:case 11:return(function(i){let o=0;return Vs(i.fields,((l,h)=>{o+=l.length+Hc(h)})),o})(r.mapValue);default:throw Te(13486,{value:r})}}function qg(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Uh(r){return!!r&&"integerValue"in r}function ff(r){return!!r&&"arrayValue"in r}function Hg(r){return!!r&&"nullValue"in r}function Wg(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Wc(r){return!!r&&"mapValue"in r}function gb(r){return(r?.mapValue?.fields||{})[k0]?.stringValue===A0}function Ga(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Vs(r.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Ga(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ga(r.arrayValue.values[t]);return e}return{...r}}function yb(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===pb}class Xt{constructor(e){this.value=e}static empty(){return new Xt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Wc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ga(t)}setAll(e){let t=At.emptyPath(),i={},o=[];e.forEach(((h,p)=>{if(!t.isImmediateParentOf(p)){const m=this.getFieldsMap(t);this.applyChanges(m,i,o),i={},o=[],t=p.popLast()}h?i[p.lastSegment()]=Ga(h):o.push(p.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());Wc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return cr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Wc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Vs(t,((o,l)=>e[o]=l));for(const o of i)delete e[o]}clone(){return new Xt(Ga(this.value))}}function P0(r){const e=[];return Vs(r.fields,((t,i)=>{const o=new At([t]);if(Wc(i)){const l=P0(i.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)})),new dn(e)}class Mt{constructor(e,t,i,o,l,h,p){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=h,this.documentState=p}static newInvalidDocument(e){return new Mt(e,0,Ce.min(),Ce.min(),Ce.min(),Xt.empty(),0)}static newFoundDocument(e,t,i,o){return new Mt(e,1,t,Ce.min(),i,o,0)}static newNoDocument(e,t){return new Mt(e,2,t,Ce.min(),Ce.min(),Xt.empty(),0)}static newUnknownDocument(e,t){return new Mt(e,3,t,Ce.min(),Ce.min(),Xt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Mt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Mt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ou{constructor(e,t){this.position=e,this.inclusive=t}}function Gg(r,e,t){let i=0;for(let o=0;o<r.position.length;o++){const l=e[o],h=r.position[o];if(l.field.isKeyField()?i=Ee.comparator(Ee.fromName(h.referenceValue),t.key):i=Ro(h,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function Kg(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!cr(r.position[t],e.position[t]))return!1;return!0}class sl{constructor(e,t="asc"){this.field=e,this.dir=t}}function vb(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class R0{}class pt extends R0{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new _b(e,t,i):t==="array-contains"?new bb(e,i):t==="in"?new Ib(e,i):t==="not-in"?new Tb(e,i):t==="array-contains-any"?new Nb(e,i):new pt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new wb(e,i):new Eb(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ro(t,this.value)):t!==null&&js(this.value)===js(t)&&this.matchesComparison(Ro(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ln extends R0{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ln(e,t)}matches(e){return j0(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function j0(r){return r.op==="and"}function D0(r){return xb(r)&&j0(r)}function xb(r){for(const e of r.filters)if(e instanceof Ln)return!1;return!0}function Bh(r){if(r instanceof pt)return r.field.canonicalString()+r.op.toString()+jo(r.value);if(D0(r))return r.filters.map((e=>Bh(e))).join(",");{const e=r.filters.map((t=>Bh(t))).join(",");return`${r.op}(${e})`}}function O0(r,e){return r instanceof pt?(function(i,o){return o instanceof pt&&i.op===o.op&&i.field.isEqual(o.field)&&cr(i.value,o.value)})(r,e):r instanceof Ln?(function(i,o){return o instanceof Ln&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((l,h,p)=>l&&O0(h,o.filters[p])),!0):!1})(r,e):void Te(19439)}function V0(r){return r instanceof pt?(function(t){return`${t.field.canonicalString()} ${t.op} ${jo(t.value)}`})(r):r instanceof Ln?(function(t){return t.op.toString()+" {"+t.getFilters().map(V0).join(" ,")+"}"})(r):"Filter"}class _b extends pt{constructor(e,t,i){super(e,t,i),this.key=Ee.fromName(i.referenceValue)}matches(e){const t=Ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class wb extends pt{constructor(e,t){super(e,"in",t),this.keys=L0("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Eb extends pt{constructor(e,t){super(e,"not-in",t),this.keys=L0("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function L0(r,e){return(e.arrayValue?.values||[]).map((t=>Ee.fromName(t.referenceValue)))}class bb extends pt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ff(t)&&rl(t.arrayValue,this.value)}}class Ib extends pt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&rl(this.value.arrayValue,t)}}class Tb extends pt{constructor(e,t){super(e,"not-in",t)}matches(e){if(rl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!rl(this.value.arrayValue,t)}}class Nb extends pt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ff(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>rl(this.value.arrayValue,i)))}}class Sb{constructor(e,t=null,i=[],o=[],l=null,h=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=h,this.endAt=p,this.Te=null}}function Qg(r,e=null,t=[],i=[],o=null,l=null,h=null){return new Sb(r,e,t,i,o,l,h)}function mf(r){const e=Pe(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Bh(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),Nu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>jo(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>jo(i))).join(",")),e.Te=t}return e.Te}function pf(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!vb(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!O0(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Kg(r.startAt,e.startAt)&&Kg(r.endAt,e.endAt)}function zh(r){return Ee.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}class Uo{constructor(e,t=null,i=[],o=[],l=null,h="F",p=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=h,this.startAt=p,this.endAt=m,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function Cb(r,e,t,i,o,l,h,p){return new Uo(r,e,t,i,o,l,h,p)}function gf(r){return new Uo(r)}function Yg(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function kb(r){return Ee.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function F0(r){return r.collectionGroup!==null}function Ka(r){const e=Pe(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let p=new _t(At.comparator);return h.filters.forEach((m=>{m.getFlattenedFilters().forEach((v=>{v.isInequality()&&(p=p.add(v.field))}))})),p})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new sl(l,i))})),t.has(At.keyField().canonicalString())||e.Ie.push(new sl(At.keyField(),i))}return e.Ie}function sr(r){const e=Pe(r);return e.Ee||(e.Ee=Ab(e,Ka(r))),e.Ee}function Ab(r,e){if(r.limitType==="F")return Qg(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new sl(o.field,l)}));const t=r.endAt?new ou(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new ou(r.startAt.position,r.startAt.inclusive):null;return Qg(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function $h(r,e){const t=r.filters.concat([e]);return new Uo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Pb(r,e){const t=r.explicitOrderBy.concat([e]);return new Uo(r.path,r.collectionGroup,t,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}function au(r,e,t){return new Uo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Cu(r,e){return pf(sr(r),sr(e))&&r.limitType===e.limitType}function M0(r){return`${mf(sr(r))}|lt:${r.limitType}`}function xo(r){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>V0(o))).join(", ")}]`),Nu(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>jo(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>jo(o))).join(",")),`Target(${i})`})(sr(r))}; limitType=${r.limitType})`}function ku(r,e){return e.isFoundDocument()&&(function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Ee.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(r,e)&&(function(i,o){for(const l of Ka(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0})(r,e)&&(function(i,o){return!(i.startAt&&!(function(h,p,m){const v=Gg(h,p,m);return h.inclusive?v<=0:v<0})(i.startAt,Ka(i),o)||i.endAt&&!(function(h,p,m){const v=Gg(h,p,m);return h.inclusive?v>=0:v>0})(i.endAt,Ka(i),o))})(r,e)}function Rb(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function U0(r){return(e,t)=>{let i=!1;for(const o of Ka(r)){const l=jb(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function jb(r,e,t){const i=r.field.isKeyField()?Ee.comparator(e.key,t.key):(function(l,h,p){const m=h.data.field(l),v=p.data.field(l);return m!==null&&v!==null?Ro(m,v):Te(42886)})(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return Te(19790,{direction:r.dir})}}class Ti{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Vs(this.inner,((t,i)=>{for(const[o,l]of i)e(o,l)}))}isEmpty(){return b0(this.inner)}size(){return this.innerSize}}const Db=new st(Ee.comparator);function Mr(){return Db}const B0=new st(Ee.comparator);function za(...r){let e=B0;for(const t of r)e=e.insert(t.key,t);return e}function z0(r){let e=B0;return r.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function mi(){return Qa()}function $0(){return Qa()}function Qa(){return new Ti((r=>r.toString()),((r,e)=>r.isEqual(e)))}const Ob=new st(Ee.comparator),Vb=new _t(Ee.comparator);function Le(...r){let e=Vb;for(const t of r)e=e.add(t);return e}const Lb=new _t(Ve);function Fb(){return Lb}function yf(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ru(e)?"-0":e}}function q0(r){return{integerValue:""+r}}function Mb(r,e){return cb(e)?q0(e):yf(r,e)}class Au{constructor(){this._=void 0}}function Ub(r,e,t){return r instanceof il?(function(o,l){const h={fields:{[N0]:{stringValue:T0},[C0]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&hf(l)&&(l=Su(l)),l&&(h.fields[S0]=l),{mapValue:h}})(t,e):r instanceof ol?W0(r,e):r instanceof al?G0(r,e):(function(o,l){const h=H0(o,l),p=Jg(h)+Jg(o.Ae);return Uh(h)&&Uh(o.Ae)?q0(p):yf(o.serializer,p)})(r,e)}function Bb(r,e,t){return r instanceof ol?W0(r,e):r instanceof al?G0(r,e):t}function H0(r,e){return r instanceof lu?(function(i){return Uh(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class il extends Au{}class ol extends Au{constructor(e){super(),this.elements=e}}function W0(r,e){const t=K0(e);for(const i of r.elements)t.some((o=>cr(o,i)))||t.push(i);return{arrayValue:{values:t}}}class al extends Au{constructor(e){super(),this.elements=e}}function G0(r,e){let t=K0(e);for(const i of r.elements)t=t.filter((o=>!cr(o,i)));return{arrayValue:{values:t}}}class lu extends Au{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Jg(r){return ut(r.integerValue||r.doubleValue)}function K0(r){return ff(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class zb{constructor(e,t){this.field=e,this.transform=t}}function $b(r,e){return r.field.isEqual(e.field)&&(function(i,o){return i instanceof ol&&o instanceof ol||i instanceof al&&o instanceof al?Po(i.elements,o.elements,cr):i instanceof lu&&o instanceof lu?cr(i.Ae,o.Ae):i instanceof il&&o instanceof il})(r.transform,e.transform)}class qb{constructor(e,t){this.version=e,this.transformResults=t}}class On{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new On}static exists(e){return new On(void 0,e)}static updateTime(e){return new On(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Pu{}function Q0(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new vf(r.key,On.none()):new hl(r.key,r.data,On.none());{const t=r.data,i=Xt.empty();let o=new _t(At.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?i.delete(l):i.set(l,h),o=o.add(l)}return new Ls(r.key,i,new dn(o.toArray()),On.none())}}function Hb(r,e,t){r instanceof hl?(function(o,l,h){const p=o.value.clone(),m=Zg(o.fieldTransforms,l,h.transformResults);p.setAll(m),l.convertToFoundDocument(h.version,p).setHasCommittedMutations()})(r,e,t):r instanceof Ls?(function(o,l,h){if(!Gc(o.precondition,l))return void l.convertToUnknownDocument(h.version);const p=Zg(o.fieldTransforms,l,h.transformResults),m=l.data;m.setAll(Y0(o)),m.setAll(p),l.convertToFoundDocument(h.version,m).setHasCommittedMutations()})(r,e,t):(function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function Ya(r,e,t,i){return r instanceof hl?(function(l,h,p,m){if(!Gc(l.precondition,h))return p;const v=l.value.clone(),_=ey(l.fieldTransforms,m,h);return v.setAll(_),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),null})(r,e,t,i):r instanceof Ls?(function(l,h,p,m){if(!Gc(l.precondition,h))return p;const v=ey(l.fieldTransforms,m,h),_=h.data;return _.setAll(Y0(l)),_.setAll(v),h.convertToFoundDocument(h.version,_).setHasLocalMutations(),p===null?null:p.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(r,e,t,i):(function(l,h,p){return Gc(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):p})(r,e,t)}function Wb(r,e){let t=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),l=H0(i.transform,o||null);l!=null&&(t===null&&(t=Xt.empty()),t.set(i.field,l))}return t||null}function Xg(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Po(i,o,((l,h)=>$b(l,h)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class hl extends Pu{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ls extends Pu{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Y0(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}})),e}function Zg(r,e,t){const i=new Map;He(r.length===t.length,32656,{Ve:t.length,de:r.length});for(let o=0;o<t.length;o++){const l=r[o],h=l.transform,p=e.data.field(l.field);i.set(l.field,Bb(h,p,t[o]))}return i}function ey(r,e,t){const i=new Map;for(const o of r){const l=o.transform,h=t.data.field(o.field);i.set(o.field,Ub(l,h,e))}return i}class vf extends Pu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Gb extends Pu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Kb{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&Hb(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Ya(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Ya(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=$0();return this.mutations.forEach((o=>{const l=e.get(o.key),h=l.overlayedDocument;let p=this.applyToLocalView(h,l.mutatedFields);p=t.has(o.key)?null:p;const m=Q0(h,p);m!==null&&i.set(o.key,m),h.isValidDocument()||h.convertToNoDocument(Ce.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Le())}isEqual(e){return this.batchId===e.batchId&&Po(this.mutations,e.mutations,((t,i)=>Xg(t,i)))&&Po(this.baseMutations,e.baseMutations,((t,i)=>Xg(t,i)))}}class xf{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){He(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return Ob})();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,i[h].version);return new xf(e,t,i,o)}}class Qb{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class Yb{constructor(e,t){this.count=e,this.unchangedNames=t}}var mt,Ue;function Jb(r){switch(r){case Z.OK:return Te(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return Te(15467,{code:r})}}function J0(r){if(r===void 0)return Lr("GRPC error has no .code"),Z.UNKNOWN;switch(r){case mt.OK:return Z.OK;case mt.CANCELLED:return Z.CANCELLED;case mt.UNKNOWN:return Z.UNKNOWN;case mt.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case mt.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case mt.INTERNAL:return Z.INTERNAL;case mt.UNAVAILABLE:return Z.UNAVAILABLE;case mt.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case mt.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case mt.NOT_FOUND:return Z.NOT_FOUND;case mt.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case mt.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case mt.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case mt.ABORTED:return Z.ABORTED;case mt.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case mt.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case mt.DATA_LOSS:return Z.DATA_LOSS;default:return Te(39323,{code:r})}}(Ue=mt||(mt={}))[Ue.OK=0]="OK",Ue[Ue.CANCELLED=1]="CANCELLED",Ue[Ue.UNKNOWN=2]="UNKNOWN",Ue[Ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ue[Ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ue[Ue.NOT_FOUND=5]="NOT_FOUND",Ue[Ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ue[Ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ue[Ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ue[Ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ue[Ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ue[Ue.ABORTED=10]="ABORTED",Ue[Ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ue[Ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ue[Ue.INTERNAL=13]="INTERNAL",Ue[Ue.UNAVAILABLE=14]="UNAVAILABLE",Ue[Ue.DATA_LOSS=15]="DATA_LOSS";function Xb(){return new TextEncoder}const Zb=new Ss([4294967295,4294967295],0);function ty(r){const e=Xb().encode(r),t=new h0;return t.update(e),new Uint8Array(t.digest())}function ny(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ss([t,i],0),new Ss([o,l],0)]}class _f{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new $a(`Invalid padding: ${t}`);if(i<0)throw new $a(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new $a(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new $a(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ss.fromNumber(this.ge)}ye(e,t,i){let o=e.add(t.multiply(Ss.fromNumber(i)));return o.compare(Zb)===1&&(o=new Ss([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=ty(e),[i,o]=ny(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(i,o,l);if(!this.we(h))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new _f(l,o,t);return i.forEach((p=>h.insert(p))),h}insert(e){if(this.ge===0)return;const t=ty(e),[i,o]=ny(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(i,o,l);this.be(h)}}be(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class $a extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ru{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,fl.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Ru(Ce.min(),o,new st(Ve),Mr(),Le())}}class fl{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new fl(i,t,Le(),Le(),Le())}}class Kc{constructor(e,t,i,o){this.Se=e,this.removedTargetIds=t,this.key=i,this.De=o}}class X0{constructor(e,t){this.targetId=e,this.Ce=t}}class Z0{constructor(e,t,i=Pt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class ry{constructor(){this.ve=0,this.Fe=sy(),this.Me=Pt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Le(),t=Le(),i=Le();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Te(38017,{changeType:l})}})),new fl(this.Me,this.xe,e,t,i)}Ke(){this.Oe=!1,this.Fe=sy()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,He(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class e1{constructor(e){this.Ge=e,this.ze=new Map,this.je=Mr(),this.He=Mc(),this.Je=Mc(),this.Ze=new st(Ve)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Te(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,i=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(zh(l))if(i===0){const h=new Ee(l.path);this.et(t,h,Mt.newNoDocument(h,Ce.min()))}else He(i===1,20013,{expectedCount:i});else{const h=this._t(t);if(h!==i){const p=this.ut(e),m=p?this.ct(p,e,h):1;if(m!==0){this.it(t);const v=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,v)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let h,p;try{h=Rs(i).toUint8Array()}catch(m){if(m instanceof I0)return Ao("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{p=new _f(h,o,l)}catch(m){return Ao(m instanceof $a?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return p.ge===0?null:p}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let o=0;return i.forEach((l=>{const h=this.Ge.ht(),p=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(p)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,h)=>{const p=this.ot(h);if(p){if(l.current&&zh(p.target)){const m=new Ee(p.target.path);this.It(m).has(h)||this.Et(h,m)||this.et(h,m,Mt.newNoDocument(m,e))}l.Be&&(t.set(h,l.ke()),l.Ke())}}));let i=Le();this.Je.forEach(((l,h)=>{let p=!0;h.forEachWhile((m=>{const v=this.ot(m);return!v||v.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(i=i.add(l))})),this.je.forEach(((l,h)=>h.setReadTime(e)));const o=new Ru(e,t,this.Ze,this.je,i);return this.je=Mr(),this.He=Mc(),this.Je=Mc(),this.Ze=new st(Ve),o}Ye(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,i),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.qe(t,1):o.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new ry,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new _t(Ve),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new _t(Ve),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||me("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ry),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Mc(){return new st(Ee.comparator)}function sy(){return new st(Ee.comparator)}const t1={asc:"ASCENDING",desc:"DESCENDING"},n1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},r1={and:"AND",or:"OR"};class s1{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function qh(r,e){return r.useProto3Json||Nu(e)?e:{value:e}}function cu(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ev(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function i1(r,e){return cu(r,e.toTimestamp())}function ir(r){return He(!!r,49232),Ce.fromTimestamp((function(t){const i=Ps(t);return new et(i.seconds,i.nanos)})(r))}function wf(r,e){return Hh(r,e).canonicalString()}function Hh(r,e){const t=(function(o){return new Ye(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function tv(r){const e=Ye.fromString(r);return He(ov(e),10190,{key:e.toString()}),e}function Wh(r,e){return wf(r.databaseId,e.path)}function bh(r,e){const t=tv(e);if(t.get(1)!==r.databaseId.projectId)throw new de(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new de(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Ee(rv(t))}function nv(r,e){return wf(r.databaseId,e)}function o1(r){const e=tv(r);return e.length===4?Ye.emptyPath():rv(e)}function Gh(r){return new Ye(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function rv(r){return He(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function iy(r,e,t){return{name:Wh(r,e),fields:t.value.mapValue.fields}}function a1(r,e){let t;if("targetChange"in e){e.targetChange;const i=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:Te(39313,{state:v})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(v,_){return v.useProto3Json?(He(_===void 0||typeof _=="string",58123),Pt.fromBase64String(_||"")):(He(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),Pt.fromUint8Array(_||new Uint8Array))})(r,e.targetChange.resumeToken),h=e.targetChange.cause,p=h&&(function(v){const _=v.code===void 0?Z.UNKNOWN:J0(v.code);return new de(_,v.message||"")})(h);t=new Z0(i,o,l,p||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=bh(r,i.document.name),l=ir(i.document.updateTime),h=i.document.createTime?ir(i.document.createTime):Ce.min(),p=new Xt({mapValue:{fields:i.document.fields}}),m=Mt.newFoundDocument(o,l,h,p),v=i.targetIds||[],_=i.removedTargetIds||[];t=new Kc(v,_,m.key,m)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=bh(r,i.document),l=i.readTime?ir(i.readTime):Ce.min(),h=Mt.newNoDocument(o,l),p=i.removedTargetIds||[];t=new Kc([],p,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=bh(r,i.document),l=i.removedTargetIds||[];t=new Kc([],l,o,null)}else{if(!("filter"in e))return Te(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,h=new Yb(o,l),p=i.targetId;t=new X0(p,h)}}return t}function l1(r,e){let t;if(e instanceof hl)t={update:iy(r,e.key,e.value)};else if(e instanceof vf)t={delete:Wh(r,e.key)};else if(e instanceof Ls)t={update:iy(r,e.key,e.data),updateMask:y1(e.fieldMask)};else{if(!(e instanceof Gb))return Te(16599,{dt:e.type});t={verify:Wh(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,h){const p=h.transform;if(p instanceof il)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof ol)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof al)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof lu)return{fieldPath:h.field.canonicalString(),increment:p.Ae};throw Te(20930,{transform:h.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:i1(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Te(27497)})(r,e.precondition)),t}function c1(r,e){return r&&r.length>0?(He(e!==void 0,14353),r.map((t=>(function(o,l){let h=o.updateTime?ir(o.updateTime):ir(l);return h.isEqual(Ce.min())&&(h=ir(l)),new qb(h,o.transformResults||[])})(t,e)))):[]}function u1(r,e){return{documents:[nv(r,e.path)]}}function d1(r,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=nv(r,o);const l=(function(v){if(v.length!==0)return iv(Ln.create(v,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const h=(function(v){if(v.length!==0)return v.map((_=>(function(N){return{field:_o(N.field),direction:m1(N.dir)}})(_)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const p=qh(r,e.limit);return p!==null&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(e.endAt)),{ft:t,parent:o}}function h1(r){let e=o1(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){He(i===1,65062);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=(function(E){const N=sv(E);return N instanceof Ln&&D0(N)?N.getFilters():[N]})(t.where));let h=[];t.orderBy&&(h=(function(E){return E.map((N=>(function(L){return new sl(wo(L.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(L.direction))})(N)))})(t.orderBy));let p=null;t.limit&&(p=(function(E){let N;return N=typeof E=="object"?E.value:E,Nu(N)?null:N})(t.limit));let m=null;t.startAt&&(m=(function(E){const N=!!E.before,O=E.values||[];return new ou(O,N)})(t.startAt));let v=null;return t.endAt&&(v=(function(E){const N=!E.before,O=E.values||[];return new ou(O,N)})(t.endAt)),Cb(e,o,h,l,p,"F",m,v)}function f1(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function sv(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=wo(t.unaryFilter.field);return pt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=wo(t.unaryFilter.field);return pt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=wo(t.unaryFilter.field);return pt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=wo(t.unaryFilter.field);return pt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Te(61313);default:return Te(60726)}})(r):r.fieldFilter!==void 0?(function(t){return pt.create(wo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Te(58110);default:return Te(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return Ln.create(t.compositeFilter.filters.map((i=>sv(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Te(1026)}})(t.compositeFilter.op))})(r):Te(30097,{filter:r})}function m1(r){return t1[r]}function p1(r){return n1[r]}function g1(r){return r1[r]}function _o(r){return{fieldPath:r.canonicalString()}}function wo(r){return At.fromServerFormat(r.fieldPath)}function iv(r){return r instanceof pt?(function(t){if(t.op==="=="){if(Wg(t.value))return{unaryFilter:{field:_o(t.field),op:"IS_NAN"}};if(Hg(t.value))return{unaryFilter:{field:_o(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Wg(t.value))return{unaryFilter:{field:_o(t.field),op:"IS_NOT_NAN"}};if(Hg(t.value))return{unaryFilter:{field:_o(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_o(t.field),op:p1(t.op),value:t.value}}})(r):r instanceof Ln?(function(t){const i=t.getFilters().map((o=>iv(o)));return i.length===1?i[0]:{compositeFilter:{op:g1(t.op),filters:i}}})(r):Te(54877,{filter:r})}function y1(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function ov(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}function av(r){return!!r&&typeof r._toProto=="function"&&r._protoValueType==="ProtoValue"}class Is{constructor(e,t,i,o,l=Ce.min(),h=Ce.min(),p=Pt.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=p,this.expectedCount=m}withSequenceNumber(e){return new Is(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Is(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Is(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Is(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class v1{constructor(e){this.yt=e}}function x1(r){const e=h1({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?au(e,e.limit,"L"):e}class _1{constructor(){this.Sn=new w1}addToCollectionParentIndex(e,t){return this.Sn.add(t),ee.resolve()}getCollectionParents(e,t){return ee.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return ee.resolve()}deleteFieldIndex(e,t){return ee.resolve()}deleteAllFieldIndexes(e){return ee.resolve()}createTargetIndexes(e,t){return ee.resolve()}getDocumentsMatchingTarget(e,t){return ee.resolve(null)}getIndexType(e,t){return ee.resolve(0)}getFieldIndexes(e,t){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,t){return ee.resolve(As.min())}getMinOffsetFromCollectionGroup(e,t){return ee.resolve(As.min())}updateCollectionGroup(e,t,i){return ee.resolve()}updateIndexEntries(e,t){return ee.resolve()}}class w1{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new _t(Ye.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new _t(Ye.comparator)).toArray()}}const oy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},lv=41943040;class Jt{static withCacheSize(e){return new Jt(e,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}Jt.DEFAULT_COLLECTION_PERCENTILE=10,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jt.DEFAULT=new Jt(lv,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jt.DISABLED=new Jt(-1,0,0);class Do{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Do(0)}static ar(){return new Do(-1)}}const ay="LruGarbageCollector",E1=1048576;function ly([r,e],[t,i]){const o=Ve(r,t);return o===0?Ve(e,i):o}class b1{constructor(e){this.Pr=e,this.buffer=new _t(ly),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();ly(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class I1{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){me(ay,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Mo(t)?me(ay,"Ignoring IndexedDB error during garbage collection: ",t):await Fo(t)}await this.Ar(3e5)}))}}class T1{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return ee.resolve(Tu.ce);const i=new b1(t);return this.Vr.forEachTarget(e,(o=>i.Er(o.sequenceNumber))).next((()=>this.Vr.mr(e,(o=>i.Er(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(oy)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),oy):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let i,o,l,h,p,m,v;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,h=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(i=E,p=Date.now(),this.removeTargets(e,i,t)))).next((E=>(l=E,m=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(v=Date.now(),vo()<=Oe.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-_}ms
	Determined least recently used ${o} in `+(p-h)+`ms
	Removed ${l} targets in `+(m-p)+`ms
	Removed ${E} documents in `+(v-m)+`ms
Total Duration: ${v-_}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:E}))))}}function N1(r,e){return new T1(r,e)}class S1{constructor(){this.changes=new Ti((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Mt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?ee.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class C1{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class k1{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&Ya(i.mutation,o,dn.empty(),et.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Le()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Le()){const o=mi();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((l=>{let h=za();return l.forEach(((p,m)=>{h=h.insert(p,m.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const i=mi();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Le())))}populateOverlays(e,t,i){const o=[];return i.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((h,p)=>{t.set(h,p)}))}))}computeViews(e,t,i,o){let l=Mr();const h=Qa(),p=(function(){return Qa()})();return t.forEach(((m,v)=>{const _=i.get(v.key);o.has(v.key)&&(_===void 0||_.mutation instanceof Ls)?l=l.insert(v.key,v):_!==void 0?(h.set(v.key,_.mutation.getFieldMask()),Ya(_.mutation,v,_.mutation.getFieldMask(),et.now())):h.set(v.key,dn.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((v,_)=>h.set(v,_))),t.forEach(((v,_)=>p.set(v,new C1(_,h.get(v)??null)))),p)))}recalculateAndSaveOverlays(e,t){const i=Qa();let o=new st(((h,p)=>h-p)),l=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const p of h)p.keys().forEach((m=>{const v=t.get(m);if(v===null)return;let _=i.get(m)||dn.empty();_=p.applyToLocalView(v,_),i.set(m,_);const E=(o.get(p.batchId)||Le()).add(m);o=o.insert(p.batchId,E)}))})).next((()=>{const h=[],p=o.getReverseIterator();for(;p.hasNext();){const m=p.getNext(),v=m.key,_=m.value,E=$0();_.forEach((N=>{if(!l.has(N)){const O=Q0(t.get(N),i.get(N));O!==null&&E.set(N,O),l=l.add(N)}})),h.push(this.documentOverlayCache.saveOverlays(e,v,E))}return ee.waitFor(h)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return kb(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):F0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):ee.resolve(mi());let p=el,m=l;return h.next((v=>ee.forEach(v,((_,E)=>(p<E.largestBatchId&&(p=E.largestBatchId),l.get(_)?ee.resolve():this.remoteDocumentCache.getEntry(e,_).next((N=>{m=m.insert(_,N)}))))).next((()=>this.populateOverlays(e,v,l))).next((()=>this.computeViews(e,m,v,Le()))).next((_=>({batchId:p,changes:z0(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ee(t)).next((i=>{let o=za();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let h=za();return this.indexManager.getCollectionParents(e,l).next((p=>ee.forEach(p,(m=>{const v=(function(E,N){return new Uo(N,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,v,i,o).next((_=>{_.forEach(((E,N)=>{h=h.insert(E,N)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o)))).next((h=>{l.forEach(((m,v)=>{const _=v.getKey();h.get(_)===null&&(h=h.insert(_,Mt.newInvalidDocument(_)))}));let p=za();return h.forEach(((m,v)=>{const _=l.get(m);_!==void 0&&Ya(_.mutation,v,dn.empty(),et.now()),ku(t,v)&&(p=p.insert(m,v))})),p}))}}class A1{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return ee.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:ir(o.createTime)}})(t)),ee.resolve()}getNamedQuery(e,t){return ee.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(o){return{name:o.name,query:x1(o.bundledQuery),readTime:ir(o.readTime)}})(t)),ee.resolve()}}class P1{constructor(){this.overlays=new st(Ee.comparator),this.Lr=new Map}getOverlay(e,t){return ee.resolve(this.overlays.get(t))}getOverlays(e,t){const i=mi();return ee.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&i.set(o,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,l)=>{this.bt(e,t,l)})),ee.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.Lr.get(i);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(i)),ee.resolve()}getOverlaysForCollection(e,t,i){const o=mi(),l=t.length+1,h=new Ee(t.child("")),p=this.overlays.getIteratorFrom(h);for(;p.hasNext();){const m=p.getNext().value,v=m.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===l&&m.largestBatchId>i&&o.set(m.getKey(),m)}return ee.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new st(((v,_)=>v-_));const h=this.overlays.getIterator();for(;h.hasNext();){const v=h.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>i){let _=l.get(v.largestBatchId);_===null&&(_=mi(),l=l.insert(v.largestBatchId,_)),_.set(v.getKey(),v)}}const p=mi(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((v,_)=>p.set(v,_))),!(p.size()>=o)););return ee.resolve(p)}bt(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const h=this.Lr.get(o.largestBatchId).delete(i.key);this.Lr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new Qb(t,i));let l=this.Lr.get(t);l===void 0&&(l=Le(),this.Lr.set(t,l)),this.Lr.set(t,l.add(i.key))}}class R1{constructor(){this.sessionToken=Pt.EMPTY_BYTE_STRING}getSessionToken(e){return ee.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ee.resolve()}}class Ef{constructor(){this.kr=new _t(It.Kr),this.qr=new _t(It.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const i=new It(e,t);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new It(e,t))}Qr(e,t){e.forEach((i=>this.removeReference(i,t)))}Gr(e){const t=new Ee(new Ye([])),i=new It(t,e),o=new It(t,e+1),l=[];return this.qr.forEachInRange([i,o],(h=>{this.Wr(h),l.push(h.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Ee(new Ye([])),i=new It(t,e),o=new It(t,e+1);let l=Le();return this.qr.forEachInRange([i,o],(h=>{l=l.add(h.key)})),l}containsKey(e){const t=new It(e,0),i=this.kr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class It{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Ee.comparator(e.key,t.key)||Ve(e.Hr,t.Hr)}static Ur(e,t){return Ve(e.Hr,t.Hr)||Ee.comparator(e.key,t.key)}}class j1{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new _t(It.Kr)}checkEmpty(e){return ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new Kb(l,t,i,o);this.mutationQueue.push(h);for(const p of o)this.Jr=this.Jr.add(new It(p.key,l)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return ee.resolve(h)}lookupMutationBatch(e,t){return ee.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Xr(i),l=o<0?0:o;return ee.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(this.mutationQueue.length===0?df:this.Yn-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new It(t,0),o=new It(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([i,o],(h=>{const p=this.Zr(h.Hr);l.push(p)})),ee.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new _t(Ve);return t.forEach((o=>{const l=new It(o,0),h=new It(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,h],(p=>{i=i.add(p.Hr)}))})),ee.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;Ee.isDocumentKey(l)||(l=l.child(""));const h=new It(new Ee(l),0);let p=new _t(Ve);return this.Jr.forEachWhile((m=>{const v=m.key.path;return!!i.isPrefixOf(v)&&(v.length===o&&(p=p.add(m.Hr)),!0)}),h),ee.resolve(this.Yr(p))}Yr(e){const t=[];return e.forEach((i=>{const o=this.Zr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){He(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return ee.forEach(t.mutations,(o=>{const l=new It(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,t){const i=new It(t,0),o=this.Jr.firstAfterOrEqual(i);return ee.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ee.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class D1{constructor(e){this.ti=e,this.docs=(function(){return new st(Ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,h=this.ti(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ee.resolve(i?i.document.mutableCopy():Mt.newInvalidDocument(t))}getEntries(e,t){let i=Mr();return t.forEach((o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():Mt.newInvalidDocument(o))})),ee.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=Mr();const h=t.path,p=new Ee(h.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(p);for(;m.hasNext();){const{key:v,value:{document:_}}=m.getNext();if(!h.isPrefixOf(v.path))break;v.path.length>h.length+1||ib(sb(_),i)<=0||(o.has(_.key)||ku(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return ee.resolve(l)}getAllFromCollectionGroup(e,t,i,o){Te(9500)}ni(e,t){return ee.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new O1(this)}getSize(e){return ee.resolve(this.size)}}class O1 extends S1{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(i)})),ee.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class V1{constructor(e){this.persistence=e,this.ri=new Ti((t=>mf(t)),pf),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.ii=0,this.si=new Ef,this.targetCount=0,this.oi=Do._r()}forEachTarget(e,t){return this.ri.forEach(((i,o)=>t(o))),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.ii&&(this.ii=t),ee.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Do(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,ee.resolve()}updateTargetData(e,t){return this.lr(t),ee.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.ri.forEach(((h,p)=>{p.sequenceNumber<=t&&i.get(p.targetId)===null&&(this.ri.delete(h),l.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),ee.waitFor(l).next((()=>o))}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,t){const i=this.ri.get(t)||null;return ee.resolve(i)}addMatchingKeys(e,t,i){return this.si.$r(t,i),ee.resolve()}removeMatchingKeys(e,t,i){this.si.Qr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((h=>{l.push(o.markPotentiallyOrphaned(e,h))})),ee.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),ee.resolve()}getMatchingKeysForTargetId(e,t){const i=this.si.jr(t);return ee.resolve(i)}containsKey(e,t){return ee.resolve(this.si.containsKey(t))}}class cv{constructor(e,t){this._i={},this.overlays={},this.ai=new Tu(0),this.ui=!1,this.ui=!0,this.ci=new R1,this.referenceDelegate=e(this),this.li=new V1(this),this.indexManager=new _1,this.remoteDocumentCache=(function(o){return new D1(o)})((i=>this.referenceDelegate.hi(i))),this.serializer=new v1(t),this.Pi=new A1(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new P1,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this._i[e.toKey()];return i||(i=new j1(t,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,i){me("MemoryPersistence","Starting transaction:",e);const o=new L1(this.ai.next());return this.referenceDelegate.Ti(),i(o).next((l=>this.referenceDelegate.Ii(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ei(e,t){return ee.or(Object.values(this._i).map((i=>()=>i.containsKey(e,t))))}}class L1 extends ab{constructor(e){super(),this.currentSequenceNumber=e}}class bf{constructor(e){this.persistence=e,this.Ri=new Ef,this.Ai=null}static Vi(e){return new bf(e)}get di(){if(this.Ai)return this.Ai;throw Te(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.di.delete(i.toString()),ee.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.di.add(i.toString()),ee.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),ee.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((o=>this.di.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.di.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.di,(i=>{const o=Ee.fromPath(i);return this.mi(e,o).next((l=>{l||t.removeEntry(o,Ce.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((i=>{i?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return ee.or([()=>ee.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class uu{constructor(e,t){this.persistence=e,this.fi=new Ti((i=>ub(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=N1(this,t)}static Vi(e,t){return new uu(e,t)}Ti(){}Ii(e){return ee.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}mr(e,t){return ee.forEach(this.fi,((i,o)=>this.wr(e,i,o).next((l=>l?ee.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ni(e,(h=>this.wr(e,h,t).next((p=>{p||(i++,l.removeEntry(h,Ce.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),ee.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),ee.resolve()}removeReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),ee.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),ee.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Hc(e.data.value)),t}wr(e,t,i){return ee.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.fi.get(t);return ee.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class If{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Ts=i,this.Is=o}static Es(e,t){let i=Le(),o=Le();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new If(e,t.fromCache,i,o)}}class F1{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class M1{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return Nw()?8:lb(Ut())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.gs(e,t).next((h=>{l.result=h})).next((()=>{if(!l.result)return this.ps(e,t,o,i).next((h=>{l.result=h}))})).next((()=>{if(l.result)return;const h=new F1;return this.ys(e,t,h).next((p=>{if(l.result=p,this.As)return this.ws(e,t,h,p.size)}))})).next((()=>l.result))}ws(e,t,i,o){return i.documentReadCount<this.Vs?(vo()<=Oe.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",xo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ee.resolve()):(vo()<=Oe.DEBUG&&me("QueryEngine","Query:",xo(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.ds*o?(vo()<=Oe.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",xo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,sr(t))):ee.resolve())}gs(e,t){if(Yg(t))return ee.resolve(null);let i=sr(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=au(t,null,"F"),i=sr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const h=Le(...l);return this.fs.getDocuments(e,h).next((p=>this.indexManager.getMinOffset(e,i).next((m=>{const v=this.bs(t,p);return this.Ss(t,v,h,m.readTime)?this.gs(e,au(t,null,"F")):this.Ds(e,v,t,m)}))))})))))}ps(e,t,i,o){return Yg(t)||o.isEqual(Ce.min())?ee.resolve(null):this.fs.getDocuments(e,i).next((l=>{const h=this.bs(t,l);return this.Ss(t,h,i,o)?ee.resolve(null):(vo()<=Oe.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),xo(t)),this.Ds(e,h,t,rb(o,el)).next((p=>p)))}))}bs(e,t){let i=new _t(U0(e));return t.forEach(((o,l)=>{ku(e,l)&&(i=i.add(l))})),i}Ss(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ys(e,t,i){return vo()<=Oe.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",xo(t)),this.fs.getDocumentsMatchingQuery(e,t,As.min(),i)}Ds(e,t,i,o){return this.fs.getDocumentsMatchingQuery(e,i,o).next((l=>(t.forEach((h=>{l=l.insert(h.key,h)})),l)))}}const Tf="LocalStore",U1=3e8;class B1{constructor(e,t,i,o){this.persistence=e,this.Cs=t,this.serializer=o,this.vs=new st(Ve),this.Fs=new Ti((l=>mf(l)),pf),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new k1(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function z1(r,e,t,i){return new B1(r,e,t,i)}async function uv(r,e){const t=Pe(r);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((l=>(o=l,t.Os(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const h=[],p=[];let m=Le();for(const v of o){h.push(v.batchId);for(const _ of v.mutations)m=m.add(_.key)}for(const v of l){p.push(v.batchId);for(const _ of v.mutations)m=m.add(_.key)}return t.localDocuments.getDocuments(i,m).next((v=>({Ns:v,removedBatchIds:h,addedBatchIds:p})))}))}))}function $1(r,e){const t=Pe(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(p,m,v,_){const E=v.batch,N=E.keys();let O=ee.resolve();return N.forEach((L=>{O=O.next((()=>_.getEntry(m,L))).next((F=>{const M=v.docVersions.get(L);He(M!==null,48541),F.version.compareTo(M)<0&&(E.applyToRemoteDocument(F,v),F.isValidDocument()&&(F.setReadTime(v.commitVersion),_.addEntry(F)))}))})),O.next((()=>p.mutationQueue.removeMutationBatch(m,E)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(p){let m=Le();for(let v=0;v<p.mutationResults.length;++v)p.mutationResults[v].transformResults.length>0&&(m=m.add(p.batch.mutations[v].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function dv(r){const e=Pe(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function q1(r,e){const t=Pe(r),i=e.snapshotVersion;let o=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const h=t.xs.newChangeBuffer({trackRemovals:!0});o=t.vs;const p=[];e.targetChanges.forEach(((_,E)=>{const N=o.get(E);if(!N)return;p.push(t.li.removeMatchingKeys(l,_.removedDocuments,E).next((()=>t.li.addMatchingKeys(l,_.addedDocuments,E))));let O=N.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?O=O.withResumeToken(Pt.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):_.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(_.resumeToken,i)),o=o.insert(E,O),(function(F,M,K){return F.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=U1?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0})(N,O,_)&&p.push(t.li.updateTargetData(l,O))}));let m=Mr(),v=Le();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))})),p.push(H1(l,h,e.documentUpdates).next((_=>{m=_.Bs,v=_.Ls}))),!i.isEqual(Ce.min())){const _=t.li.getLastRemoteSnapshotVersion(l).next((E=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,i)));p.push(_)}return ee.waitFor(p).next((()=>h.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,v))).next((()=>m))})).then((l=>(t.vs=o,l)))}function H1(r,e,t){let i=Le(),o=Le();return t.forEach((l=>i=i.add(l))),e.getEntries(r,i).next((l=>{let h=Mr();return t.forEach(((p,m)=>{const v=l.get(p);m.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(p)),m.isNoDocument()&&m.version.isEqual(Ce.min())?(e.removeEntry(p,m.readTime),h=h.insert(p,m)):!v.isValidDocument()||m.version.compareTo(v.version)>0||m.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(m),h=h.insert(p,m)):me(Tf,"Ignoring outdated watch update for ",p,". Current version:",v.version," Watch version:",m.version)})),{Bs:h,Ls:o}}))}function W1(r,e){const t=Pe(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=df),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function G1(r,e){const t=Pe(r);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.li.getTargetData(i,e).next((l=>l?(o=l,ee.resolve(o)):t.li.allocateTargetId(i).next((h=>(o=new Is(e,h,"TargetPurposeListen",i.currentSequenceNumber),t.li.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.vs.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.vs=t.vs.insert(i.targetId,i),t.Fs.set(e,i.targetId)),i}))}async function Kh(r,e,t){const i=Pe(r),o=i.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(h=>i.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!Mo(h))throw h;me(Tf,`Failed to update sequence numbers for target ${e}: ${h}`)}i.vs=i.vs.remove(e),i.Fs.delete(o.target)}function cy(r,e,t){const i=Pe(r);let o=Ce.min(),l=Le();return i.persistence.runTransaction("Execute query","readwrite",(h=>(function(m,v,_){const E=Pe(m),N=E.Fs.get(_);return N!==void 0?ee.resolve(E.vs.get(N)):E.li.getTargetData(v,_)})(i,h,sr(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(h,p.targetId).next((m=>{l=m}))})).next((()=>i.Cs.getDocumentsMatchingQuery(h,e,t?o:Ce.min(),t?l:Le()))).next((p=>(K1(i,Rb(e),p),{documents:p,ks:l})))))}function K1(r,e,t){let i=r.Ms.get(e)||Ce.min();t.forEach(((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),r.Ms.set(e,i)}class uy{constructor(){this.activeTargetIds=Fb()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Q1{constructor(){this.vo=new uy,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,i){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new uy,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Y1{Mo(e){}shutdown(){}}const dy="ConnectivityMonitor";class hy{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){me(dy,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){me(dy,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Uc=null;function Qh(){return Uc===null?Uc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Uc++,"0x"+Uc.toString(16)}const Ih="RestConnection",J1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class X1{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${i}/databases/${o}`,this.$o=this.databaseId.database===su?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Wo(e,t,i,o,l){const h=Qh(),p=this.Qo(e,t.toUriEncodedString());me(Ih,`Sending RPC '${e}' ${h}:`,p,i);const m={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(m,o,l);const{host:v}=new URL(p),_=bi(v);return this.zo(e,p,m,i,_).then((E=>(me(Ih,`Received RPC '${e}' ${h}: `,E),E)),(E=>{throw Ao(Ih,`RPC '${e}' ${h} failed with error: `,E,"url: ",p,"request:",i),E}))}jo(e,t,i,o,l,h){return this.Wo(e,t,i,o,l)}Go(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Lo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),i&&i.headers.forEach(((o,l)=>e[l]=o))}Qo(e,t){const i=J1[e];let o=`${this.qo}/v1/${t}:${i}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}class Z1{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const Lt="WebChannelConnection",Ma=(r,e,t)=>{r.listen(e,(i=>{try{t(i)}catch(o){setTimeout((()=>{throw o}),0)}}))};class Io extends X1{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Io.c_){const e=g0();Ma(e,p0.STAT_EVENT,(t=>{t.stat===Lh.PROXY?me(Lt,"STAT_EVENT: detected buffering proxy"):t.stat===Lh.NOPROXY&&me(Lt,"STAT_EVENT: detected no buffering proxy")})),Io.c_=!0}}zo(e,t,i,o,l){const h=Qh();return new Promise(((p,m)=>{const v=new f0;v.setWithCredentials(!0),v.listenOnce(m0.COMPLETE,(()=>{try{switch(v.getLastErrorCode()){case qc.NO_ERROR:const E=v.getResponseJson();me(Lt,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(E)),p(E);break;case qc.TIMEOUT:me(Lt,`RPC '${e}' ${h} timed out`),m(new de(Z.DEADLINE_EXCEEDED,"Request time out"));break;case qc.HTTP_ERROR:const N=v.getStatus();if(me(Lt,`RPC '${e}' ${h} failed with status:`,N,"response text:",v.getResponseText()),N>0){let O=v.getResponseJson();Array.isArray(O)&&(O=O[0]);const L=O?.error;if(L&&L.status&&L.message){const F=(function(K){const q=K.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(q)>=0?q:Z.UNKNOWN})(L.status);m(new de(F,L.message))}else m(new de(Z.UNKNOWN,"Server responded with status "+v.getStatus()))}else m(new de(Z.UNAVAILABLE,"Connection failed."));break;default:Te(9055,{l_:e,streamId:h,h_:v.getLastErrorCode(),P_:v.getLastError()})}}finally{me(Lt,`RPC '${e}' ${h} completed.`)}}));const _=JSON.stringify(o);me(Lt,`RPC '${e}' ${h} sending request:`,o),v.send(t,"POST",_,i,15)}))}T_(e,t,i){const o=Qh(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=this.createWebChannelTransport(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(p.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Go(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const v=l.join("");me(Lt,`Creating RPC '${e}' stream ${o}: ${v}`,p);const _=h.createWebChannel(v,p);this.I_(_);let E=!1,N=!1;const O=new Z1({Ho:L=>{N?me(Lt,`Not sending because RPC '${e}' stream ${o} is closed:`,L):(E||(me(Lt,`Opening RPC '${e}' stream ${o} transport.`),_.open(),E=!0),me(Lt,`RPC '${e}' stream ${o} sending:`,L),_.send(L))},Jo:()=>_.close()});return Ma(_,Ba.EventType.OPEN,(()=>{N||(me(Lt,`RPC '${e}' stream ${o} transport opened.`),O.i_())})),Ma(_,Ba.EventType.CLOSE,(()=>{N||(N=!0,me(Lt,`RPC '${e}' stream ${o} transport closed`),O.o_(),this.E_(_))})),Ma(_,Ba.EventType.ERROR,(L=>{N||(N=!0,Ao(Lt,`RPC '${e}' stream ${o} transport errored. Name:`,L.name,"Message:",L.message),O.o_(new de(Z.UNAVAILABLE,"The operation could not be completed")))})),Ma(_,Ba.EventType.MESSAGE,(L=>{if(!N){const F=L.data[0];He(!!F,16349);const M=F,K=M?.error||M[0]?.error;if(K){me(Lt,`RPC '${e}' stream ${o} received error:`,K);const q=K.status;let Y=(function(ae){const k=mt[ae];if(k!==void 0)return J0(k)})(q),ne=K.message;Y===void 0&&(Y=Z.INTERNAL,ne="Unknown error status: "+q+" with message "+K.message),N=!0,O.o_(new de(Y,ne)),_.close()}else me(Lt,`RPC '${e}' stream ${o} received:`,F),O.__(F)}})),Io.u_(),setTimeout((()=>{O.s_()}),0),O}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,i){super.Go(e,t,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return y0()}}function eI(r){return new Io(r)}function Th(){return typeof document<"u"?document:null}function ju(r){return new s1(r,!0)}Io.c_=!1;class hv{constructor(e,t,i=1e3,o=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=i,this.A_=o,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-i);o>0&&me("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const fy="PersistentStream";class fv{constructor(e,t,i,o,l,h,p,m){this.Ci=e,this.b_=i,this.S_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=p,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new hv(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Z.RESOURCE_EXHAUSTED?(Lr(t.toString()),Lr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===t&&this.G_(i,o)}),(i=>{e((()=>{const o=new de(Z.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,t){const i=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return me(fy,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(me(fy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class tI extends fv{constructor(e,t,i,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=a1(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Ce.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Ce.min():h.readTime?ir(h.readTime):Ce.min()})(e);return this.listener.J_(t,i)}Z_(e){const t={};t.database=Gh(this.serializer),t.addTarget=(function(l,h){let p;const m=h.target;if(p=zh(m)?{documents:u1(l,m)}:{query:d1(l,m).ft},p.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){p.resumeToken=ev(l,h.resumeToken);const v=qh(l,h.expectedCount);v!==null&&(p.expectedCount=v)}else if(h.snapshotVersion.compareTo(Ce.min())>0){p.readTime=cu(l,h.snapshotVersion.toTimestamp());const v=qh(l,h.expectedCount);v!==null&&(p.expectedCount=v)}return p})(this.serializer,e);const i=f1(this.serializer,e);i&&(t.labels=i),this.K_(t)}X_(e){const t={};t.database=Gh(this.serializer),t.removeTarget=e,this.K_(t)}}class nI extends fv{constructor(e,t,i,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return He(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,He(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){He(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=c1(e.writeResults,e.commitTime),i=ir(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Gh(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>l1(this.serializer,i)))};this.K_(t)}}class rI{}class sI extends rI{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new de(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Wo(e,Hh(t,i),o,l,h))).catch((l=>{throw l.name==="FirebaseError"?(l.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new de(Z.UNKNOWN,l.toString())}))}jo(e,t,i,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,p])=>this.connection.jo(e,Hh(t,i),o,h,p,l))).catch((h=>{throw h.name==="FirebaseError"?(h.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new de(Z.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function iI(r,e,t,i){return new sI(r,e,t,i)}class oI{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Lr(t),this.aa=!1):me("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const _i="RemoteStore";class aI{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((h=>{i.enqueueAndForget((async()=>{Ni(this)&&(me(_i,"Restarting streams for network reachability change."),await(async function(m){const v=Pe(m);v.Ea.add(4),await ml(v),v.Va.set("Unknown"),v.Ea.delete(4),await Du(v)})(this))}))})),this.Va=new oI(i,o)}}async function Du(r){if(Ni(r))for(const e of r.Ra)await e(!0)}async function ml(r){for(const e of r.Ra)await e(!1)}function mv(r,e){const t=Pe(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),kf(t)?Cf(t):Bo(t).O_()&&Sf(t,e))}function Nf(r,e){const t=Pe(r),i=Bo(t);t.Ia.delete(e),i.O_()&&pv(t,e),t.Ia.size===0&&(i.O_()?i.L_():Ni(t)&&t.Va.set("Unknown"))}function Sf(r,e){if(r.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Bo(r).Z_(e)}function pv(r,e){r.da.$e(e),Bo(r).X_(e)}function Cf(r){r.da=new e1({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Bo(r).start(),r.Va.ua()}function kf(r){return Ni(r)&&!Bo(r).x_()&&r.Ia.size>0}function Ni(r){return Pe(r).Ea.size===0}function gv(r){r.da=void 0}async function lI(r){r.Va.set("Online")}async function cI(r){r.Ia.forEach(((e,t)=>{Sf(r,e)}))}async function uI(r,e){gv(r),kf(r)?(r.Va.ha(e),Cf(r)):r.Va.set("Unknown")}async function dI(r,e,t){if(r.Va.set("Online"),e instanceof Z0&&e.state===2&&e.cause)try{await(async function(o,l){const h=l.cause;for(const p of l.targetIds)o.Ia.has(p)&&(await o.remoteSyncer.rejectListen(p,h),o.Ia.delete(p),o.da.removeTarget(p))})(r,e)}catch(i){me(_i,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await du(r,i)}else if(e instanceof Kc?r.da.Xe(e):e instanceof X0?r.da.st(e):r.da.tt(e),!t.isEqual(Ce.min()))try{const i=await dv(r.localStore);t.compareTo(i)>=0&&await(function(l,h){const p=l.da.Tt(h);return p.targetChanges.forEach(((m,v)=>{if(m.resumeToken.approximateByteSize()>0){const _=l.Ia.get(v);_&&l.Ia.set(v,_.withResumeToken(m.resumeToken,h))}})),p.targetMismatches.forEach(((m,v)=>{const _=l.Ia.get(m);if(!_)return;l.Ia.set(m,_.withResumeToken(Pt.EMPTY_BYTE_STRING,_.snapshotVersion)),pv(l,m);const E=new Is(_.target,m,v,_.sequenceNumber);Sf(l,E)})),l.remoteSyncer.applyRemoteEvent(p)})(r,t)}catch(i){me(_i,"Failed to raise snapshot:",i),await du(r,i)}}async function du(r,e,t){if(!Mo(e))throw e;r.Ea.add(1),await ml(r),r.Va.set("Offline"),t||(t=()=>dv(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{me(_i,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Du(r)}))}function yv(r,e){return e().catch((t=>du(r,t,e)))}async function Ou(r){const e=Pe(r),t=Ds(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:df;for(;hI(e);)try{const o=await W1(e.localStore,i);if(o===null){e.Ta.length===0&&t.L_();break}i=o.batchId,fI(e,o)}catch(o){await du(e,o)}vv(e)&&xv(e)}function hI(r){return Ni(r)&&r.Ta.length<10}function fI(r,e){r.Ta.push(e);const t=Ds(r);t.O_()&&t.Y_&&t.ea(e.mutations)}function vv(r){return Ni(r)&&!Ds(r).x_()&&r.Ta.length>0}function xv(r){Ds(r).start()}async function mI(r){Ds(r).ra()}async function pI(r){const e=Ds(r);for(const t of r.Ta)e.ea(t.mutations)}async function gI(r,e,t){const i=r.Ta.shift(),o=xf.from(i,e,t);await yv(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Ou(r)}async function yI(r,e){e&&Ds(r).Y_&&await(async function(i,o){if((function(h){return Jb(h)&&h!==Z.ABORTED})(o.code)){const l=i.Ta.shift();Ds(i).B_(),await yv(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o))),await Ou(i)}})(r,e),vv(r)&&xv(r)}async function my(r,e){const t=Pe(r);t.asyncQueue.verifyOperationInProgress(),me(_i,"RemoteStore received new credentials");const i=Ni(t);t.Ea.add(3),await ml(t),i&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Du(t)}async function vI(r,e){const t=Pe(r);e?(t.Ea.delete(2),await Du(t)):e||(t.Ea.add(2),await ml(t),t.Va.set("Unknown"))}function Bo(r){return r.ma||(r.ma=(function(t,i,o){const l=Pe(t);return l.sa(),new tI(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Zo:lI.bind(null,r),Yo:cI.bind(null,r),t_:uI.bind(null,r),J_:dI.bind(null,r)}),r.Ra.push((async e=>{e?(r.ma.B_(),kf(r)?Cf(r):r.Va.set("Unknown")):(await r.ma.stop(),gv(r))}))),r.ma}function Ds(r){return r.fa||(r.fa=(function(t,i,o){const l=Pe(t);return l.sa(),new nI(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),Yo:mI.bind(null,r),t_:yI.bind(null,r),ta:pI.bind(null,r),na:gI.bind(null,r)}),r.Ra.push((async e=>{e?(r.fa.B_(),await Ou(r)):(await r.fa.stop(),r.Ta.length>0&&(me(_i,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class Af{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new Or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const h=Date.now()+i,p=new Af(e,t,h,o,l);return p.start(i),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pf(r,e){if(Lr("AsyncQueue",`${e}: ${r}`),Mo(r))return new de(Z.UNAVAILABLE,`${e}: ${r}`);throw r}class To{static emptySet(e){return new To(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ee.comparator(t.key,i.key):(t,i)=>Ee.comparator(t.key,i.key),this.keyedMap=za(),this.sortedSet=new st(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof To)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new To;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class py{constructor(){this.ga=new st(Ee.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Te(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Oo{constructor(e,t,i,o,l,h,p,m,v){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=p,this.excludesMetadataChanges=m,this.hasCachedResults=v}static fromInitialDocuments(e,t,i,o,l){const h=[];return t.forEach((p=>{h.push({type:0,doc:p})})),new Oo(e,t,To.emptySet(t),h,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}class xI{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class _I{constructor(){this.queries=gy(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const o=Pe(t),l=o.queries;o.queries=gy(),l.forEach(((h,p)=>{for(const m of p.ba)m.onError(i)}))})(this,new de(Z.ABORTED,"Firestore shutting down"))}}function gy(){return new Ti((r=>M0(r)),Cu)}async function _v(r,e){const t=Pe(r);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.Sa()&&e.Da()&&(i=2):(l=new xI,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const p=Pf(h,`Initialization of query '${xo(e.query)}' failed`);return void e.onError(p)}t.queries.set(o,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Rf(t)}async function wv(r,e){const t=Pe(r),i=e.query;let o=3;const l=t.queries.get(i);if(l){const h=l.ba.indexOf(e);h>=0&&(l.ba.splice(h,1),l.ba.length===0?o=e.Da()?0:1:!l.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function wI(r,e){const t=Pe(r);let i=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const p of h.ba)p.Fa(o)&&(i=!0);h.wa=o}}i&&Rf(t)}function EI(r,e,t){const i=Pe(r),o=i.queries.get(e);if(o)for(const l of o.ba)l.onError(t);i.queries.delete(e)}function Rf(r){r.Ca.forEach((e=>{e.next()}))}var Yh,yy;(yy=Yh||(Yh={})).Ma="default",yy.Cache="cache";class Ev{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Oo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Oo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Yh.Cache}}class bv{constructor(e){this.key=e}}class Iv{constructor(e){this.key=e}}class bI{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Le(),this.mutatedKeys=Le(),this.eu=U0(e),this.tu=new To(this.eu)}get nu(){return this.Za}ru(e,t){const i=t?t.iu:new py,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,p=!1;const m=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,E)=>{const N=o.get(_),O=ku(this.query,E)?E:null,L=!!N&&this.mutatedKeys.has(N.key),F=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let M=!1;N&&O?N.data.isEqual(O.data)?L!==F&&(i.track({type:3,doc:O}),M=!0):this.su(N,O)||(i.track({type:2,doc:O}),M=!0,(m&&this.eu(O,m)>0||v&&this.eu(O,v)<0)&&(p=!0)):!N&&O?(i.track({type:0,doc:O}),M=!0):N&&!O&&(i.track({type:1,doc:N}),M=!0,(m||v)&&(p=!0)),M&&(O?(h=h.add(O),l=F?l.add(_):l.delete(_)):(h=h.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const _=this.query.limitType==="F"?h.last():h.first();h=h.delete(_.key),l=l.delete(_.key),i.track({type:1,doc:_})}return{tu:h,iu:i,Ss:p,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((_,E)=>(function(O,L){const F=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te(20277,{Vt:M})}};return F(O)-F(L)})(_.type,E.type)||this.eu(_.doc,E.doc))),this.ou(i),o=o??!1;const p=t&&!o?this._u():[],m=this.Ya.size===0&&this.current&&!o?1:0,v=m!==this.Xa;return this.Xa=m,h.length!==0||v?{snapshot:new Oo(this.query,e.tu,l,h,e.mutatedKeys,m===0,v,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new py,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Le(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const t=[];return e.forEach((i=>{this.Ya.has(i)||t.push(new Iv(i))})),this.Ya.forEach((i=>{e.has(i)||t.push(new bv(i))})),t}cu(e){this.Za=e.ks,this.Ya=Le();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Oo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const jf="SyncEngine";class II{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class TI{constructor(e){this.key=e,this.hu=!1}}class NI{constructor(e,t,i,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new Ti((p=>M0(p)),Cu),this.Iu=new Map,this.Eu=new Set,this.Ru=new st(Ee.comparator),this.Au=new Map,this.Vu=new Ef,this.du={},this.mu=new Map,this.fu=Do.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function SI(r,e,t=!0){const i=Av(r);let o;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await Tv(i,e,t,!0),o}async function CI(r,e){const t=Av(r);await Tv(t,e,!0,!1)}async function Tv(r,e,t,i){const o=await G1(r.localStore,sr(e)),l=o.targetId,h=r.sharedClientState.addLocalQueryTarget(l,t);let p;return i&&(p=await kI(r,e,l,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&mv(r.remoteStore,o),p}async function kI(r,e,t,i,o){r.pu=(E,N,O)=>(async function(F,M,K,q){let Y=M.view.ru(K);Y.Ss&&(Y=await cy(F.localStore,M.query,!1).then((({documents:k})=>M.view.ru(k,Y))));const ne=q&&q.targetChanges.get(M.targetId),G=q&&q.targetMismatches.get(M.targetId)!=null,ae=M.view.applyChanges(Y,F.isPrimaryClient,ne,G);return xy(F,M.targetId,ae.au),ae.snapshot})(r,E,N,O);const l=await cy(r.localStore,e,!0),h=new bI(e,l.ks),p=h.ru(l.documents),m=fl.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",o),v=h.applyChanges(p,r.isPrimaryClient,m);xy(r,t,v.au);const _=new II(e,t,h);return r.Tu.set(e,_),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),v.snapshot}async function AI(r,e,t){const i=Pe(r),o=i.Tu.get(e),l=i.Iu.get(o.targetId);if(l.length>1)return i.Iu.set(o.targetId,l.filter((h=>!Cu(h,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Kh(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&Nf(i.remoteStore,o.targetId),Jh(i,o.targetId)})).catch(Fo)):(Jh(i,o.targetId),await Kh(i.localStore,o.targetId,!0))}async function PI(r,e){const t=Pe(r),i=t.Tu.get(e),o=t.Iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Nf(t.remoteStore,i.targetId))}async function RI(r,e,t){const i=MI(r);try{const o=await(function(h,p){const m=Pe(h),v=et.now(),_=p.reduce(((O,L)=>O.add(L.key)),Le());let E,N;return m.persistence.runTransaction("Locally write mutations","readwrite",(O=>{let L=Mr(),F=Le();return m.xs.getEntries(O,_).next((M=>{L=M,L.forEach(((K,q)=>{q.isValidDocument()||(F=F.add(K))}))})).next((()=>m.localDocuments.getOverlayedDocuments(O,L))).next((M=>{E=M;const K=[];for(const q of p){const Y=Wb(q,E.get(q.key).overlayedDocument);Y!=null&&K.push(new Ls(q.key,Y,P0(Y.value.mapValue),On.exists(!0)))}return m.mutationQueue.addMutationBatch(O,v,K,p)})).next((M=>{N=M;const K=M.applyToLocalDocumentSet(E,F);return m.documentOverlayCache.saveOverlays(O,M.batchId,K)}))})).then((()=>({batchId:N.batchId,changes:z0(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(h,p,m){let v=h.du[h.currentUser.toKey()];v||(v=new st(Ve)),v=v.insert(p,m),h.du[h.currentUser.toKey()]=v})(i,o.batchId,t),await pl(i,o.changes),await Ou(i.remoteStore)}catch(o){const l=Pf(o,"Failed to persist write");t.reject(l)}}async function Nv(r,e){const t=Pe(r);try{const i=await q1(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const h=t.Au.get(l);h&&(He(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?He(h.hu,14607):o.removedDocuments.size>0&&(He(h.hu,42227),h.hu=!1))})),await pl(t,i,e)}catch(i){await Fo(i)}}function vy(r,e,t){const i=Pe(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Tu.forEach(((l,h)=>{const p=h.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(h,p){const m=Pe(h);m.onlineState=p;let v=!1;m.queries.forEach(((_,E)=>{for(const N of E.ba)N.va(p)&&(v=!0)})),v&&Rf(m)})(i.eventManager,e),o.length&&i.Pu.J_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function jI(r,e,t){const i=Pe(r);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Au.get(e),l=o&&o.key;if(l){let h=new st(Ee.comparator);h=h.insert(l,Mt.newNoDocument(l,Ce.min()));const p=Le().add(l),m=new Ru(Ce.min(),new Map,new st(Ve),h,p);await Nv(i,m),i.Ru=i.Ru.remove(l),i.Au.delete(e),Df(i)}else await Kh(i.localStore,e,!1).then((()=>Jh(i,e,t))).catch(Fo)}async function DI(r,e){const t=Pe(r),i=e.batch.batchId;try{const o=await $1(t.localStore,e);Cv(t,i,null),Sv(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await pl(t,o)}catch(o){await Fo(o)}}async function OI(r,e,t){const i=Pe(r);try{const o=await(function(h,p){const m=Pe(h);return m.persistence.runTransaction("Reject batch","readwrite-primary",(v=>{let _;return m.mutationQueue.lookupMutationBatch(v,p).next((E=>(He(E!==null,37113),_=E.keys(),m.mutationQueue.removeMutationBatch(v,E)))).next((()=>m.mutationQueue.performConsistencyCheck(v))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(v,_,p))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,_))).next((()=>m.localDocuments.getDocuments(v,_)))}))})(i.localStore,e);Cv(i,e,t),Sv(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await pl(i,o)}catch(o){await Fo(o)}}function Sv(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function Cv(r,e,t){const i=Pe(r);let o=i.du[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.du[i.currentUser.toKey()]=o}}function Jh(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Iu.get(e))r.Tu.delete(i),t&&r.Pu.yu(i,t);r.Iu.delete(e),r.isPrimaryClient&&r.Vu.Gr(e).forEach((i=>{r.Vu.containsKey(i)||kv(r,i)}))}function kv(r,e){r.Eu.delete(e.path.canonicalString());const t=r.Ru.get(e);t!==null&&(Nf(r.remoteStore,t),r.Ru=r.Ru.remove(e),r.Au.delete(t),Df(r))}function xy(r,e,t){for(const i of t)i instanceof bv?(r.Vu.addReference(i.key,e),VI(r,i)):i instanceof Iv?(me(jf,"Document no longer in limbo: "+i.key),r.Vu.removeReference(i.key,e),r.Vu.containsKey(i.key)||kv(r,i.key)):Te(19791,{wu:i})}function VI(r,e){const t=e.key,i=t.path.canonicalString();r.Ru.get(t)||r.Eu.has(i)||(me(jf,"New document in limbo: "+t),r.Eu.add(i),Df(r))}function Df(r){for(;r.Eu.size>0&&r.Ru.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new Ee(Ye.fromString(e)),i=r.fu.next();r.Au.set(i,new TI(t)),r.Ru=r.Ru.insert(t,i),mv(r.remoteStore,new Is(sr(gf(t.path)),i,"TargetPurposeLimboResolution",Tu.ce))}}async function pl(r,e,t){const i=Pe(r),o=[],l=[],h=[];i.Tu.isEmpty()||(i.Tu.forEach(((p,m)=>{h.push(i.pu(m,e,t).then((v=>{if((v||t)&&i.isPrimaryClient){const _=v?!v.fromCache:t?.targetChanges.get(m.targetId)?.current;i.sharedClientState.updateQueryState(m.targetId,_?"current":"not-current")}if(v){o.push(v);const _=If.Es(m.targetId,v);l.push(_)}})))})),await Promise.all(h),i.Pu.J_(o),await(async function(m,v){const _=Pe(m);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>ee.forEach(v,(N=>ee.forEach(N.Ts,(O=>_.persistence.referenceDelegate.addReference(E,N.targetId,O))).next((()=>ee.forEach(N.Is,(O=>_.persistence.referenceDelegate.removeReference(E,N.targetId,O)))))))))}catch(E){if(!Mo(E))throw E;me(Tf,"Failed to update sequence numbers: "+E)}for(const E of v){const N=E.targetId;if(!E.fromCache){const O=_.vs.get(N),L=O.snapshotVersion,F=O.withLastLimboFreeSnapshotVersion(L);_.vs=_.vs.insert(N,F)}}})(i.localStore,l))}async function LI(r,e){const t=Pe(r);if(!t.currentUser.isEqual(e)){me(jf,"User change. New user:",e.toKey());const i=await uv(t.localStore,e);t.currentUser=e,(function(l,h){l.mu.forEach((p=>{p.forEach((m=>{m.reject(new de(Z.CANCELLED,h))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await pl(t,i.Ns)}}function FI(r,e){const t=Pe(r),i=t.Au.get(e);if(i&&i.hu)return Le().add(i.key);{let o=Le();const l=t.Iu.get(e);if(!l)return o;for(const h of l){const p=t.Tu.get(h);o=o.unionWith(p.view.nu)}return o}}function Av(r){const e=Pe(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=Nv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=FI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=jI.bind(null,e),e.Pu.J_=wI.bind(null,e.eventManager),e.Pu.yu=EI.bind(null,e.eventManager),e}function MI(r){const e=Pe(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=DI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=OI.bind(null,e),e}class hu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ju(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return z1(this.persistence,new M1,e.initialUser,this.serializer)}Cu(e){return new cv(bf.Vi,this.serializer)}Du(e){return new Q1}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}hu.provider={build:()=>new hu};class UI extends hu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){He(this.persistence.referenceDelegate instanceof uu,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new I1(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Jt.withCacheSize(this.cacheSizeBytes):Jt.DEFAULT;return new cv((i=>uu.Vi(i,t)),this.serializer)}}class Xh{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>vy(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=LI.bind(null,this.syncEngine),await vI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new _I})()}createDatastore(e){const t=ju(e.databaseInfo.databaseId),i=eI(e.databaseInfo);return iI(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,l,h,p){return new aI(i,o,l,h,p)})(this.localStore,this.datastore,e.asyncQueue,(t=>vy(this.syncEngine,t,0)),(function(){return hy.v()?new hy:new Y1})())}createSyncEngine(e,t){return(function(o,l,h,p,m,v,_){const E=new NI(o,l,h,p,m,v);return _&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=Pe(t);me(_i,"RemoteStore shutting down."),i.Ea.add(5),await ml(i),i.Aa.shutdown(),i.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Xh.provider={build:()=>new Xh};class Pv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Lr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Os="FirestoreClient";class BI{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this._databaseInfo=o,this.user=Ft.UNAUTHENTICATED,this.clientId=uf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async h=>{me(Os,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(i,(h=>(me(Os,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Pf(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Nh(r,e){r.asyncQueue.verifyOperationInProgress(),me(Os,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener((async o=>{i.isEqual(o)||(await uv(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function _y(r,e){r.asyncQueue.verifyOperationInProgress();const t=await zI(r);me(Os,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((i=>my(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,o)=>my(e.remoteStore,o))),r._onlineComponents=e}async function zI(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){me(Os,"Using user provided OfflineComponentProvider");try{await Nh(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===Z.FAILED_PRECONDITION||o.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Ao("Error using user provided cache. Falling back to memory cache: "+t),await Nh(r,new hu)}}else me(Os,"Using default OfflineComponentProvider"),await Nh(r,new UI(void 0));return r._offlineComponents}async function Rv(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(me(Os,"Using user provided OnlineComponentProvider"),await _y(r,r._uninitializedComponentsProvider._online)):(me(Os,"Using default OnlineComponentProvider"),await _y(r,new Xh))),r._onlineComponents}function $I(r){return Rv(r).then((e=>e.syncEngine))}async function jv(r){const e=await Rv(r),t=e.eventManager;return t.onListen=SI.bind(null,e.syncEngine),t.onUnlisten=AI.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=CI.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=PI.bind(null,e.syncEngine),t}function qI(r,e,t={}){const i=new Or;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,p,m,v){const _=new Pv({next:N=>{_.Nu(),h.enqueueAndForget((()=>wv(l,E)));const O=N.docs.has(p);!O&&N.fromCache?v.reject(new de(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&N.fromCache&&m&&m.source==="server"?v.reject(new de(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(N)},error:N=>v.reject(N)}),E=new Ev(gf(p.path),_,{includeMetadataChanges:!0,Ka:!0});return _v(l,E)})(await jv(r),r.asyncQueue,e,t,i))),i.promise}function HI(r,e,t={}){const i=new Or;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,p,m,v){const _=new Pv({next:N=>{_.Nu(),h.enqueueAndForget((()=>wv(l,E))),N.fromCache&&m.source==="server"?v.reject(new de(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(N)},error:N=>v.reject(N)}),E=new Ev(p,_,{includeMetadataChanges:!0,Ka:!0});return _v(l,E)})(await jv(r),r.asyncQueue,e,t,i))),i.promise}function WI(r,e){const t=new Or;return r.asyncQueue.enqueueAndForget((async()=>RI(await $I(r),e,t))),t.promise}function Dv(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const GI="ComponentProvider",wy=new Map;function KI(r,e,t,i,o){return new fb(r,e,t,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,Dv(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,i)}const Ov="firestore.googleapis.com",Ey=!0;class by{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new de(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ov,this.ssl=Ey}else this.host=e.host,this.ssl=e.ssl??Ey;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=lv;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<E1)throw new de(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}tb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Dv(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new de(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new de(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new de(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Vu{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new by({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new by(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new HE;switch(i.type){case"firstParty":return new QE(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new de(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=wy.get(t);i&&(me(GI,"Removing Datastore"),wy.delete(t),i.terminate())})(this),Promise.resolve()}}function QI(r,e,t,i={}){r=Fr(r,Vu);const o=bi(e),l=r._getSettings(),h={...l,emulatorOptions:r._getEmulatorOptions()},p=`${e}:${t}`;o&&(rf(`https://${p}`),sf("Firestore",!0)),l.host!==Ov&&l.host!==p&&Ao("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...l,host:p,ssl:o,emulatorOptions:i};if(!yi(m,h)&&(r._setSettings(m),i.mockUserToken)){let v,_;if(typeof i.mockUserToken=="string")v=i.mockUserToken,_=Ft.MOCK_USER;else{v=o0(i.mockUserToken,r._app?.options.projectId);const E=i.mockUserToken.sub||i.mockUserToken.user_id;if(!E)throw new de(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new Ft(E)}r._authCredentials=new WE(new x0(v,_))}}class Fs{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Fs(this.firestore,e,this._query)}}class yt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new yt(this.firestore,e,this._key)}toJSON(){return{type:yt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(dl(t,yt._jsonSchema))return new yt(e,i||null,new Ee(Ye.fromString(t.referencePath)))}}yt._jsonSchemaVersion="firestore/documentReference/1.0",yt._jsonSchema={type:gt("string",yt._jsonSchemaVersion),referencePath:gt("string")};class Cs extends Fs{constructor(e,t,i){super(e,t,gf(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new yt(this.firestore,null,new Ee(e))}withConverter(e){return new Cs(this.firestore,e,this._path)}}function yo(r,e,...t){if(r=Bt(r),_0("collection","path",e),r instanceof Vu){const i=Ye.fromString(e,...t);return Vg(i),new Cs(r,null,i)}{if(!(r instanceof yt||r instanceof Cs))throw new de(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Ye.fromString(e,...t));return Vg(i),new Cs(r.firestore,null,i)}}function Qc(r,e,...t){if(r=Bt(r),arguments.length===1&&(e=uf.newId()),_0("doc","path",e),r instanceof Vu){const i=Ye.fromString(e,...t);return Og(i),new yt(r,null,new Ee(i))}{if(!(r instanceof yt||r instanceof Cs))throw new de(Z.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Ye.fromString(e,...t));return Og(i),new yt(r.firestore,r instanceof Cs?r.converter:null,new Ee(i))}}const Iy="AsyncQueue";class Ty{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new hv(this,"async_queue_retry"),this._c=()=>{const i=Th();i&&me(Iy,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Th();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Th();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Or;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Mo(e))throw e;me(Iy,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Lr("INTERNAL UNHANDLED ERROR: ",Ny(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Af.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&Te(47125,{Pc:Ny(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Ny(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class zo extends Vu{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new Ty,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ty(e),this._firestoreClient=void 0,await e}}}function YI(r,e){const t=typeof r=="object"?r:lf(),i=typeof r=="string"?r:su,o=bu(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=r0("firestore");l&&QI(o,...l)}return o}function Of(r){if(r._terminated)throw new de(Z.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||JI(r),r._firestoreClient}function JI(r){const e=r._freezeSettings(),t=KI(r._databaseId,r._app?.options.appId||"",r._persistenceKey,r._app?.options.apiKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new BI(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(o){const l=o?._online.build();return{_offline:o?._offline.build(l),_online:l}})(r._componentsProvider))}class _n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _n(Pt.fromBase64String(e))}catch(t){throw new de(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new _n(Pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:_n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(dl(e,_n._jsonSchema))return _n.fromBase64String(e.bytes)}}_n._jsonSchemaVersion="firestore/bytes/1.0",_n._jsonSchema={type:gt("string",_n._jsonSchemaVersion),bytes:gt("string")};class Vf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new de(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new At(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Lu{constructor(e){this._methodName=e}}class or{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new de(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new de(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:or._jsonSchemaVersion}}static fromJSON(e){if(dl(e,or._jsonSchema))return new or(e.latitude,e.longitude)}}or._jsonSchemaVersion="firestore/geoPoint/1.0",or._jsonSchema={type:gt("string",or._jsonSchemaVersion),latitude:gt("number"),longitude:gt("number")};class Vn{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Vn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(dl(e,Vn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Vn(e.vectorValues);throw new de(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Vn._jsonSchemaVersion="firestore/vectorValue/1.0",Vn._jsonSchema={type:gt("string",Vn._jsonSchemaVersion),vectorValues:gt("object")};const XI=/^__.*__$/;class ZI{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Ls(e,this.data,this.fieldMask,t,this.fieldTransforms):new hl(e,this.data,t,this.fieldTransforms)}}class Vv{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Ls(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Lv(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te(40011,{dataSource:r})}}class Lf{constructor(e,t,i,o,l,h){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Lf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const t=this.path?.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){const t=this.path?.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return fu(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(Lv(this.dataSource)&&XI.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class eT{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||ju(e)}createContext(e,t,i,o=!1){return new Lf({dataSource:e,methodName:t,targetDoc:i,path:At.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ff(r){const e=r._freezeSettings(),t=ju(r._databaseId);return new eT(r._databaseId,!!e.ignoreUndefinedProperties,t)}function tT(r,e,t,i,o,l={}){const h=r.createContext(l.merge||l.mergeFields?2:0,e,t,o);Uf("Data must be an object, but it was:",h,i);const p=Fv(i,h);let m,v;if(l.merge)m=new dn(h.fieldMask),v=h.fieldTransforms;else if(l.mergeFields){const _=[];for(const E of l.mergeFields){const N=wi(e,E,t);if(!h.contains(N))throw new de(Z.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);Bv(_,N)||_.push(N)}m=new dn(_),v=h.fieldTransforms.filter((E=>m.covers(E.field)))}else m=null,v=h.fieldTransforms;return new ZI(new Xt(p),m,v)}class Fu extends Lu{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Fu}}class Mf extends Lu{_toFieldTransform(e){return new zb(e.path,new il)}isEqual(e){return e instanceof Mf}}function nT(r,e,t,i){const o=r.createContext(1,e,t);Uf("Data must be an object, but it was:",o,i);const l=[],h=Xt.empty();Vs(i,((m,v)=>{const _=Uv(e,m,t);v=Bt(v);const E=o.childContextForFieldPath(_);if(v instanceof Fu)l.push(_);else{const N=gl(v,E);N!=null&&(l.push(_),h.set(_,N))}}));const p=new dn(l);return new Vv(h,p,o.fieldTransforms)}function rT(r,e,t,i,o,l){const h=r.createContext(1,e,t),p=[wi(e,i,t)],m=[o];if(l.length%2!=0)throw new de(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<l.length;N+=2)p.push(wi(e,l[N])),m.push(l[N+1]);const v=[],_=Xt.empty();for(let N=p.length-1;N>=0;--N)if(!Bv(v,p[N])){const O=p[N];let L=m[N];L=Bt(L);const F=h.childContextForFieldPath(O);if(L instanceof Fu)v.push(O);else{const M=gl(L,F);M!=null&&(v.push(O),_.set(O,M))}}const E=new dn(v);return new Vv(_,E,h.fieldTransforms)}function sT(r,e,t,i=!1){return gl(t,r.createContext(i?4:3,e))}function gl(r,e){if(Mv(r=Bt(r)))return Uf("Unsupported field value:",e,r),Fv(r,e);if(r instanceof Lu)return(function(i,o){if(!Lv(o.dataSource))throw o.createError(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,o){const l=[];let h=0;for(const p of i){let m=gl(p,o.childContextForArray(h));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),h++}return{arrayValue:{values:l}}})(r,e)}return(function(i,o){if((i=Bt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Mb(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=et.fromDate(i);return{timestampValue:cu(o.serializer,l)}}if(i instanceof et){const l=new et(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:cu(o.serializer,l)}}if(i instanceof or)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof _n)return{bytesValue:ev(o.serializer,i._byteString)};if(i instanceof yt){const l=o.databaseId,h=i.firestore._databaseId;if(!h.isEqual(l))throw o.createError(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:wf(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Vn)return(function(h,p){const m=h instanceof Vn?h.toArray():h;return{mapValue:{fields:{[k0]:{stringValue:A0},[iu]:{arrayValue:{values:m.map((_=>{if(typeof _!="number")throw p.createError("VectorValues must only contain numeric values.");return yf(p.serializer,_)}))}}}}}})(i,o);if(av(i))return i._toProto(o.serializer);throw o.createError(`Unsupported field value: ${Iu(i)}`)})(r,e)}function Fv(r,e){const t={};return b0(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Vs(r,((i,o)=>{const l=gl(o,e.childContextForField(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function Mv(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof et||r instanceof or||r instanceof _n||r instanceof yt||r instanceof Lu||r instanceof Vn||av(r))}function Uf(r,e,t){if(!Mv(t)||!w0(t)){const i=Iu(t);throw i==="an object"?e.createError(r+" a custom object"):e.createError(r+" "+i)}}function wi(r,e,t){if((e=Bt(e))instanceof Vf)return e._internalPath;if(typeof e=="string")return Uv(r,e);throw fu("Field path arguments must be of type string or ",r,!1,void 0,t)}const iT=new RegExp("[~\\*/\\[\\]]");function Uv(r,e,t){if(e.search(iT)>=0)throw fu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Vf(...e.split("."))._internalPath}catch{throw fu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function fu(r,e,t,i,o){const l=i&&!i.isEmpty(),h=o!==void 0;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let m="";return(l||h)&&(m+=" (found",l&&(m+=` in field ${i}`),h&&(m+=` in document ${o}`),m+=")"),new de(Z.INVALID_ARGUMENT,p+r+m)}function Bv(r,e){return r.some((t=>t.isEqual(e)))}class oT{convertValue(e,t="none"){switch(js(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Rs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Te(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Vs(e,((o,l)=>{i[o]=this.convertValue(l,t)})),i}convertVectorValue(e){const t=e.fields?.[iu].arrayValue?.values?.map((i=>ut(i.doubleValue)));return new Vn(t)}convertGeoPoint(e){return new or(ut(e.latitude),ut(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Su(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(tl(e));default:return null}}convertTimestamp(e){const t=Ps(e);return new et(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Ye.fromString(e);He(ov(i),9688,{name:e});const o=new nl(i.get(1),i.get(3)),l=new Ee(i.popFirst(5));return o.isEqual(t)||Lr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}class zv extends oT{constructor(e){super(),this.firestore=e}convertBytes(e){return new _n(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new yt(this.firestore,null,t)}}function Sh(){return new Mf("serverTimestamp")}const Sy="@firebase/firestore",Cy="4.10.0";class $v{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new yt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new aT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const t=this._document.data.field(wi("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class aT extends $v{data(){return super.data()}}function lT(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new de(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Bf{}class zf extends Bf{}function Bc(r,e,...t){let i=[];e instanceof Bf&&i.push(e),i=i.concat(t),(function(l){const h=l.filter((m=>m instanceof $f)).length,p=l.filter((m=>m instanceof Mu)).length;if(h>1||h>0&&p>0)throw new de(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)r=o._apply(r);return r}class Mu extends zf{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Mu(e,t,i)}_apply(e){const t=this._parse(e);return qv(e._query,t),new Fs(e.firestore,e.converter,$h(e._query,t))}_parse(e){const t=Ff(e.firestore);return(function(l,h,p,m,v,_,E){let N;if(v.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new de(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){Ay(E,_);const L=[];for(const F of E)L.push(ky(m,l,F));N={arrayValue:{values:L}}}else N=ky(m,l,E)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||Ay(E,_),N=sT(p,h,E,_==="in"||_==="not-in");return pt.create(v,_,N)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Ch(r,e,t){const i=e,o=wi("where",r);return Mu._create(o,i,t)}class $f extends Bf{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new $f(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Ln.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let h=o;const p=l.getFlattenedFilters();for(const m of p)qv(h,m),h=$h(h,m)})(e._query,t),new Fs(e.firestore,e.converter,$h(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class qf extends zf{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new qf(e,t)}_apply(e){const t=(function(o,l,h){if(o.startAt!==null)throw new de(Z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new de(Z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new sl(l,h)})(e._query,this._field,this._direction);return new Fs(e.firestore,e.converter,Pb(e._query,t))}}function cT(r,e="asc"){const t=e,i=wi("orderBy",r);return qf._create(i,t)}class Hf extends zf{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new Hf(e,t,i)}_apply(e){return new Fs(e.firestore,e.converter,au(e._query,this._limit,this._limitType))}}function uT(r){return nb("limit",r),Hf._create("limit",r,"F")}function ky(r,e,t){if(typeof(t=Bt(t))=="string"){if(t==="")throw new de(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!F0(e)&&t.indexOf("/")!==-1)throw new de(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Ye.fromString(t));if(!Ee.isDocumentKey(i))throw new de(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return qg(r,new Ee(i))}if(t instanceof yt)return qg(r,t._key);throw new de(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Iu(t)}.`)}function Ay(r,e){if(!Array.isArray(r)||r.length===0)throw new de(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function qv(r,e){const t=(function(o,l){for(const h of o)for(const p of h.getFlattenedFilters())if(l.indexOf(p.op)>=0)return p.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new de(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function dT(r,e,t){let i;return i=r?r.toFirestore(e):e,i}class qa{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class pi extends $v{constructor(e,t,i,o,l,h){super(e,t,i,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Yc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(wi("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new de(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=pi._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}pi._jsonSchemaVersion="firestore/documentSnapshot/1.0",pi._jsonSchema={type:gt("string",pi._jsonSchemaVersion),bundleSource:gt("string","DocumentSnapshot"),bundleName:gt("string"),bundle:gt("string")};class Yc extends pi{data(e={}){return super.data(e)}}class No{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new qa(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Yc(this._firestore,this._userDataWriter,i.key,i,new qa(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new de(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((p=>{const m=new Yc(o._firestore,o._userDataWriter,p.doc.key,p.doc,new qa(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:m,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>l||p.type!==3)).map((p=>{const m=new Yc(o._firestore,o._userDataWriter,p.doc.key,p.doc,new qa(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,_=-1;return p.type!==0&&(v=h.indexOf(p.doc.key),h=h.delete(p.doc.key)),p.type!==1&&(h=h.add(p.doc),_=h.indexOf(p.doc.key)),{type:hT(p.type),doc:m,oldIndex:v,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new de(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=No._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=uf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function hT(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te(61501,{type:r})}}No._jsonSchemaVersion="firestore/querySnapshot/1.0",No._jsonSchema={type:gt("string",No._jsonSchemaVersion),bundleSource:gt("string","QuerySnapshot"),bundleName:gt("string"),bundle:gt("string")};function fT(r){r=Fr(r,yt);const e=Fr(r.firestore,zo),t=Of(e);return qI(t,r._key).then((i=>yT(e,r,i)))}function Ua(r){r=Fr(r,Fs);const e=Fr(r.firestore,zo),t=Of(e),i=new zv(e);return lT(r._query),HI(t,r._query).then((o=>new No(e,i,r,o)))}function mT(r,e,t,...i){r=Fr(r,yt);const o=Fr(r.firestore,zo),l=Ff(o);let h;return h=typeof(e=Bt(e))=="string"||e instanceof Vf?rT(l,"updateDoc",r._key,e,t,i):nT(l,"updateDoc",r._key,e),Wf(o,[h.toMutation(r._key,On.exists(!0))])}function pT(r){return Wf(Fr(r.firestore,zo),[new vf(r._key,On.none())])}function gT(r,e){const t=Fr(r.firestore,zo),i=Qc(r),o=dT(r.converter,e),l=Ff(r.firestore);return Wf(t,[tT(l,"addDoc",i._key,o,r.converter!==null,{}).toMutation(i._key,On.exists(!1))]).then((()=>i))}function Wf(r,e){const t=Of(r);return WI(t,e)}function yT(r,e,t){const i=t.docs.get(e._key),o=new zv(r);return new pi(r,o,e._key,i,new qa(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){qE(Ii),vi(new ks("firestore",((i,{instanceIdentifier:o,options:l})=>{const h=i.getProvider("app").getImmediate(),p=new zo(new GE(i.getProvider("auth-internal")),new YE(h,i.getProvider("app-check-internal")),mb(h,o),h);return l={useFetchStreams:t,...l},p._setSettings(l),p}),"PUBLIC").setMultipleInstances(!0)),rr(Sy,Cy,e),rr(Sy,Cy,"esm2020")})();var vT="firebase",xT="12.8.0";rr(vT,xT,"app");function Hv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const _T=Hv,Wv=new cl("auth","Firebase",Hv());const mu=new of("@firebase/auth");function wT(r,...e){mu.logLevel<=Oe.WARN&&mu.warn(`Auth (${Ii}): ${r}`,...e)}function Jc(r,...e){mu.logLevel<=Oe.ERROR&&mu.error(`Auth (${Ii}): ${r}`,...e)}function Ur(r,...e){throw Gf(r,...e)}function ar(r,...e){return Gf(r,...e)}function Gv(r,e,t){const i={..._T(),[e]:t};return new cl("auth","Firebase",i).create(e,{appName:r.name})}function gi(r){return Gv(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Gf(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return Wv.create(r,...e)}function Se(r,e,...t){if(!r)throw Gf(e,...t)}function jr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Jc(e),new Error(e)}function Br(r,e){r||jr(e)}function Zh(){return typeof self<"u"&&self.location?.href||""}function ET(){return Py()==="http:"||Py()==="https:"}function Py(){return typeof self<"u"&&self.location?.protocol||null}function bT(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ET()||bw()||"connection"in navigator)?navigator.onLine:!0}function IT(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class yl{constructor(e,t){this.shortDelay=e,this.longDelay=t,Br(t>e,"Short delay should be less than long delay!"),this.isMobile=_w()||Iw()}get(){return bT()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Kf(r,e){Br(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class Kv{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;jr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;jr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;jr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const TT={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const NT=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ST=new yl(3e4,6e4);function Qf(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function $o(r,e,t,i,o={}){return Qv(r,o,async()=>{let l={},h={};i&&(e==="GET"?h=i:l={body:JSON.stringify(i)});const p=ul({key:r.config.apiKey,...h}).slice(1),m=await r._getAdditionalHeaders();m["Content-Type"]="application/json",r.languageCode&&(m["X-Firebase-Locale"]=r.languageCode);const v={method:e,headers:m,...l};return Ew()||(v.referrerPolicy="no-referrer"),r.emulatorConfig&&bi(r.emulatorConfig.host)&&(v.credentials="include"),Kv.fetch()(await Yv(r,r.config.apiHost,t,p),v)})}async function Qv(r,e,t){r._canInitEmulator=!1;const i={...TT,...e};try{const o=new kT(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw zc(r,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const p=l.ok?h.errorMessage:h.error.message,[m,v]=p.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw zc(r,"credential-already-in-use",h);if(m==="EMAIL_EXISTS")throw zc(r,"email-already-in-use",h);if(m==="USER_DISABLED")throw zc(r,"user-disabled",h);const _=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw Gv(r,_,v);Ur(r,_)}}catch(o){if(o instanceof dr)throw o;Ur(r,"network-request-failed",{message:String(o)})}}async function CT(r,e,t,i,o={}){const l=await $o(r,e,t,i,o);return"mfaPendingCredential"in l&&Ur(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function Yv(r,e,t,i){const o=`${e}${t}?${i}`,l=r,h=l.config.emulator?Kf(r.config,o):`${r.config.apiScheme}://${o}`;return NT.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}class kT{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(ar(this.auth,"network-request-failed")),ST.get())})}}function zc(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=ar(r,e,i);return o.customData._tokenResponse=t,o}async function AT(r,e){return $o(r,"POST","/v1/accounts:delete",e)}async function pu(r,e){return $o(r,"POST","/v1/accounts:lookup",e)}function Ja(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function PT(r,e=!1){const t=Bt(r),i=await t.getIdToken(e),o=Yf(i);Se(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l?.sign_in_provider;return{claims:o,token:i,authTime:Ja(kh(o.auth_time)),issuedAtTime:Ja(kh(o.iat)),expirationTime:Ja(kh(o.exp)),signInProvider:h||null,signInSecondFactor:l?.sign_in_second_factor||null}}function kh(r){return Number(r)*1e3}function Yf(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return Jc("JWT malformed, contained fewer than 3 sections"),null;try{const o=t0(t);return o?JSON.parse(o):(Jc("Failed to decode base64 JWT payload"),null)}catch(o){return Jc("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Ry(r){const e=Yf(r);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function ll(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof dr&&RT(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function RT({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class jT{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class ef{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ja(this.lastLoginAt),this.creationTime=Ja(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function gu(r){const e=r.auth,t=await r.getIdToken(),i=await ll(r,pu(e,{idToken:t}));Se(i?.users.length,e,"internal-error");const o=i.users[0];r._notifyReloadListener(o);const l=o.providerUserInfo?.length?Jv(o.providerUserInfo):[],h=OT(r.providerData,l),p=r.isAnonymous,m=!(r.email&&o.passwordHash)&&!h?.length,v=p?m:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new ef(o.createdAt,o.lastLoginAt),isAnonymous:v};Object.assign(r,_)}async function DT(r){const e=Bt(r);await gu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function OT(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function Jv(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function VT(r,e){const t=await Qv(r,{},async()=>{const i=ul({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,h=await Yv(r,o,"/v1/token",`key=${l}`),p=await r._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:p,body:i};return r.emulatorConfig&&bi(r.emulatorConfig.host)&&(m.credentials="include"),Kv.fetch()(h,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function LT(r,e){return $o(r,"POST","/v2/accounts:revokeToken",Qf(r,e))}class So{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ry(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const t=Ry(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await VT(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,h=new So;return i&&(Se(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),o&&(Se(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(Se(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new So,this.toJSON())}_performRefresh(){return jr("not implemented")}}function vs(r,e){Se(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class jn{constructor({uid:e,auth:t,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new jT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new ef(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await ll(this,this.stsTokenManager.getToken(this.auth,e));return Se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return PT(this,e)}reload(){return DT(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new jn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await gu(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Rn(this.auth.app))return Promise.reject(gi(this.auth));const e=await this.getIdToken();return await ll(this,AT(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,h=t.photoURL??void 0,p=t.tenantId??void 0,m=t._redirectEventId??void 0,v=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:E,emailVerified:N,isAnonymous:O,providerData:L,stsTokenManager:F}=t;Se(E&&F,e,"internal-error");const M=So.fromJSON(this.name,F);Se(typeof E=="string",e,"internal-error"),vs(i,e.name),vs(o,e.name),Se(typeof N=="boolean",e,"internal-error"),Se(typeof O=="boolean",e,"internal-error"),vs(l,e.name),vs(h,e.name),vs(p,e.name),vs(m,e.name),vs(v,e.name),vs(_,e.name);const K=new jn({uid:E,auth:e,email:o,emailVerified:N,displayName:i,isAnonymous:O,photoURL:h,phoneNumber:l,tenantId:p,stsTokenManager:M,createdAt:v,lastLoginAt:_});return L&&Array.isArray(L)&&(K.providerData=L.map(q=>({...q}))),m&&(K._redirectEventId=m),K}static async _fromIdTokenResponse(e,t,i=!1){const o=new So;o.updateFromServerResponse(t);const l=new jn({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await gu(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Se(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?Jv(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!l?.length,p=new So;p.updateFromIdToken(i);const m=new jn({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:h}),v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new ef(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!l?.length};return Object.assign(m,v),m}}const jy=new Map;function Dr(r){Br(r instanceof Function,"Expected a class definition");let e=jy.get(r);return e?(Br(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,jy.set(r,e),e)}class Xv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Xv.type="NONE";const Dy=Xv;function Xc(r,e,t){return`firebase:${r}:${e}:${t}`}class Co{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=Xc(this.userKey,o.apiKey,l),this.fullPersistenceKey=Xc("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await pu(this.auth,{idToken:e}).catch(()=>{});return t?jn._fromGetAccountInfoResponse(this.auth,t,e):null}return jn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Co(Dr(Dy),e,i);const o=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let l=o[0]||Dr(Dy);const h=Xc(i,e.config.apiKey,e.name);let p=null;for(const v of t)try{const _=await v._get(h);if(_){let E;if(typeof _=="string"){const N=await pu(e,{idToken:_}).catch(()=>{});if(!N)break;E=await jn._fromGetAccountInfoResponse(e,N,_)}else E=jn._fromJSON(e,_);v!==l&&(p=E),l=v;break}}catch{}const m=o.filter(v=>v._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new Co(l,e,i):(l=m[0],p&&await l._set(h,p.toJSON()),await Promise.all(t.map(async v=>{if(v!==l)try{await v._remove(h)}catch{}})),new Co(l,e,i))}}function Oy(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(nx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Zv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(sx(e))return"Blackberry";if(ix(e))return"Webos";if(ex(e))return"Safari";if((e.includes("chrome/")||tx(e))&&!e.includes("edge/"))return"Chrome";if(rx(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if(i?.length===2)return i[1]}return"Other"}function Zv(r=Ut()){return/firefox\//i.test(r)}function ex(r=Ut()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function tx(r=Ut()){return/crios\//i.test(r)}function nx(r=Ut()){return/iemobile/i.test(r)}function rx(r=Ut()){return/android/i.test(r)}function sx(r=Ut()){return/blackberry/i.test(r)}function ix(r=Ut()){return/webos/i.test(r)}function Jf(r=Ut()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function FT(r=Ut()){return Jf(r)&&!!window.navigator?.standalone}function MT(){return Tw()&&document.documentMode===10}function ox(r=Ut()){return Jf(r)||rx(r)||ix(r)||sx(r)||/windows phone/i.test(r)||nx(r)}function ax(r,e=[]){let t;switch(r){case"Browser":t=Oy(Ut());break;case"Worker":t=`${Oy(Ut())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ii}/${i}`}class UT{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((h,p)=>{try{const m=e(l);h(m)}catch(m){p(m)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function BT(r,e={}){return $o(r,"GET","/v2/passwordPolicy",Qf(r,e))}const zT=6;class $T{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??zT,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class qT{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Vy(this),this.idTokenSubscription=new Vy(this),this.beforeStateQueue=new UT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Wv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Dr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Co.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await pu(this,{idToken:e}),i=await jn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Rn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,h=i?._redirectEventId,p=await this.tryRedirectSignIn(e);(!l||l===h)&&p?.user&&(i=p.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await gu(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=IT()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Rn(this.app))return Promise.reject(gi(this));const t=e?Bt(e):null;return t&&Se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Rn(this.app)?Promise.reject(gi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Rn(this.app)?Promise.reject(gi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Dr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await BT(this),t=new $T(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new cl("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await LT(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Dr(e)||this._popupRedirectResolver;Se(t,this,"argument-error"),this.redirectPersistenceManager=await Co.create(this,[Dr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(p,this,"internal-error"),p.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,i,o);return()=>{h=!0,m()}}else{const m=e.addObserver(t);return()=>{h=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ax(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(Rn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&wT(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Xf(r){return Bt(r)}class Vy{constructor(e){this.auth=e,this.observer=null,this.addObserver=jw(t=>this.observer=t)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Zf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function HT(r){Zf=r}function WT(r){return Zf.loadJS(r)}function GT(){return Zf.gapiScript}function KT(r){return`__${r}${Math.floor(Math.random()*1e6)}`}function QT(r,e){const t=bu(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(yi(l,e??{}))return o;Ur(o,"already-initialized")}return t.initialize({options:e})}function YT(r,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Dr);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e?.popupRedirectResolver)}function JT(r,e,t){const i=Xf(r);Se(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=lx(e),{host:h,port:p}=XT(e),m=p===null?"":`:${p}`,v={url:`${l}//${h}${m}/`},_=Object.freeze({host:h,port:p,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Se(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Se(yi(v,i.config.emulator)&&yi(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=v,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,bi(h)?(rf(`${l}//${h}${m}`),sf("Auth",!0)):ZT()}function lx(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function XT(r){const e=lx(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:Ly(i.substr(l.length+1))}}else{const[l,h]=i.split(":");return{host:l,port:Ly(h)}}}function Ly(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function ZT(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class cx{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return jr("not implemented")}_getIdTokenResponse(e){return jr("not implemented")}_linkToIdToken(e,t){return jr("not implemented")}_getReauthenticationResolver(e){return jr("not implemented")}}async function ko(r,e){return CT(r,"POST","/v1/accounts:signInWithIdp",Qf(r,e))}const eN="http://localhost";class Ei extends cx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ei(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ur("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...l}=t;if(!i||!o)return null;const h=new Ei(i,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return ko(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,ko(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ko(e,t)}buildRequest(){const e={requestUri:eN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ul(t)}return e}}class ux{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class vl extends ux{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class xs extends vl{constructor(){super("facebook.com")}static credential(e){return Ei._fromParams({providerId:xs.PROVIDER_ID,signInMethod:xs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xs.credentialFromTaggedObject(e)}static credentialFromError(e){return xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xs.credential(e.oauthAccessToken)}catch{return null}}}xs.FACEBOOK_SIGN_IN_METHOD="facebook.com";xs.PROVIDER_ID="facebook.com";class _s extends vl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ei._fromParams({providerId:_s.PROVIDER_ID,signInMethod:_s.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return _s.credentialFromTaggedObject(e)}static credentialFromError(e){return _s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return _s.credential(t,i)}catch{return null}}}_s.GOOGLE_SIGN_IN_METHOD="google.com";_s.PROVIDER_ID="google.com";class ws extends vl{constructor(){super("github.com")}static credential(e){return Ei._fromParams({providerId:ws.PROVIDER_ID,signInMethod:ws.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ws.credentialFromTaggedObject(e)}static credentialFromError(e){return ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ws.credential(e.oauthAccessToken)}catch{return null}}}ws.GITHUB_SIGN_IN_METHOD="github.com";ws.PROVIDER_ID="github.com";class Es extends vl{constructor(){super("twitter.com")}static credential(e,t){return Ei._fromParams({providerId:Es.PROVIDER_ID,signInMethod:Es.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Es.credentialFromTaggedObject(e)}static credentialFromError(e){return Es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Es.credential(t,i)}catch{return null}}}Es.TWITTER_SIGN_IN_METHOD="twitter.com";Es.PROVIDER_ID="twitter.com";class Vo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await jn._fromIdTokenResponse(e,i,o),h=Fy(i);return new Vo({user:l,providerId:h,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=Fy(i);return new Vo({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function Fy(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}class yu extends dr{constructor(e,t,i,o){super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,yu.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new yu(e,t,i,o)}}function dx(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?yu._fromErrorAndOperation(r,l,e,i):l})}async function tN(r,e,t=!1){const i=await ll(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Vo._forOperation(r,"link",i)}async function nN(r,e,t=!1){const{auth:i}=r;if(Rn(i.app))return Promise.reject(gi(i));const o="reauthenticate";try{const l=await ll(r,dx(i,o,e,r),t);Se(l.idToken,i,"internal-error");const h=Yf(l.idToken);Se(h,i,"internal-error");const{sub:p}=h;return Se(r.uid===p,i,"user-mismatch"),Vo._forOperation(r,o,l)}catch(l){throw l?.code==="auth/user-not-found"&&Ur(i,"user-mismatch"),l}}async function rN(r,e,t=!1){if(Rn(r.app))return Promise.reject(gi(r));const i="signIn",o=await dx(r,i,e),l=await Vo._fromIdTokenResponse(r,i,o);return t||await r._updateCurrentUser(l.user),l}function sN(r,e,t,i){return Bt(r).onIdTokenChanged(e,t,i)}function iN(r,e,t){return Bt(r).beforeAuthStateChanged(e,t)}const vu="__sak";class hx{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(vu,"1"),this.storage.removeItem(vu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const oN=1e3,aN=10;class fx extends hx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ox(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,p,m)=>{this.notifyListeners(h,m)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(i);!t&&this.localCache[i]===h||this.notifyListeners(i,h)},l=this.storage.getItem(i);MT()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,aN):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},oN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}fx.type="LOCAL";const lN=fx;class mx extends hx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}mx.type="SESSION";const px=mx;function cN(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Uu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Uu(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!h?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const p=Array.from(h).map(async v=>v(t.origin,l)),m=await cN(p);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Uu.receivers=[];function em(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}class uN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((p,m)=>{const v=em("",20);o.port1.start();const _=setTimeout(()=>{m(new Error("unsupported_event"))},i);h={messageChannel:o,onMessage(E){const N=E;if(N.data.eventId===v)switch(N.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),p(N.data.response);break;default:clearTimeout(_),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}function lr(){return window}function dN(r){lr().location.href=r}function gx(){return typeof lr().WorkerGlobalScope<"u"&&typeof lr().importScripts=="function"}async function hN(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function fN(){return navigator?.serviceWorker?.controller||null}function mN(){return gx()?self:null}const yx="firebaseLocalStorageDb",pN=1,xu="firebaseLocalStorage",vx="fbase_key";class xl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Bu(r,e){return r.transaction([xu],e?"readwrite":"readonly").objectStore(xu)}function gN(){const r=indexedDB.deleteDatabase(yx);return new xl(r).toPromise()}function tf(){const r=indexedDB.open(yx,pN);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(xu,{keyPath:vx})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(xu)?e(i):(i.close(),await gN(),e(await tf()))})})}async function My(r,e,t){const i=Bu(r,!0).put({[vx]:e,value:t});return new xl(i).toPromise()}async function yN(r,e){const t=Bu(r,!1).get(e),i=await new xl(t).toPromise();return i===void 0?null:i.value}function Uy(r,e){const t=Bu(r,!0).delete(e);return new xl(t).toPromise()}const vN=800,xN=3;class xx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await tf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>xN)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return gx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Uu._getInstance(mN()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await hN(),!this.activeServiceWorker)return;this.sender=new uN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||fN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await tf();return await My(e,vu,"1"),await Uy(e,vu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>My(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>yN(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Uy(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Bu(o,!1).getAll();return new xl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),vN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}xx.type="LOCAL";const _N=xx;new yl(3e4,6e4);function wN(r,e){return e?Dr(e):(Se(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class tm extends cx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ko(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ko(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ko(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function EN(r){return rN(r.auth,new tm(r),r.bypassAuthState)}function bN(r){const{auth:e,user:t}=r;return Se(t,e,"internal-error"),nN(t,new tm(r),r.bypassAuthState)}async function IN(r){const{auth:e,user:t}=r;return Se(t,e,"internal-error"),tN(t,new tm(r),r.bypassAuthState)}class _x{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:h,type:p}=e;if(h){this.reject(h);return}const m={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(m))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return EN;case"linkViaPopup":case"linkViaRedirect":return IN;case"reauthViaPopup":case"reauthViaRedirect":return bN;default:Ur(this.auth,"internal-error")}}resolve(e){Br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const TN=new yl(2e3,1e4);class bo extends _x{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,bo.currentPopupAction&&bo.currentPopupAction.cancel(),bo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){Br(this.filter.length===1,"Popup operations only handle one event");const e=em();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ar(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ar(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,bo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ar(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,TN.get())};e()}}bo.currentPopupAction=null;const NN="pendingRedirect",Zc=new Map;class SN extends _x{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Zc.get(this.auth._key());if(!e){try{const i=await CN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Zc.set(this.auth._key(),e)}return this.bypassAuthState||Zc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function CN(r,e){const t=PN(e),i=AN(r);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function kN(r,e){Zc.set(r._key(),e)}function AN(r){return Dr(r._redirectPersistence)}function PN(r){return Xc(NN,r.config.apiKey,r.name)}async function RN(r,e,t=!1){if(Rn(r.app))return Promise.reject(gi(r));const i=Xf(r),o=wN(i,e),h=await new SN(i,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}const jN=600*1e3;class DN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ON(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!wx(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(ar(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=jN&&this.cachedEventUids.clear(),this.cachedEventUids.has(By(e))}saveEventToCache(e){this.cachedEventUids.add(By(e)),this.lastProcessedEventTime=Date.now()}}function By(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function wx({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function ON(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wx(r);default:return!1}}async function VN(r,e={}){return $o(r,"GET","/v1/projects",e)}const LN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,FN=/^https?/;async function MN(r){if(r.config.emulator)return;const{authorizedDomains:e}=await VN(r);for(const t of e)try{if(UN(t))return}catch{}Ur(r,"unauthorized-domain")}function UN(r){const e=Zh(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===i}if(!FN.test(t))return!1;if(LN.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}const BN=new yl(3e4,6e4);function zy(){const r=lr().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function zN(r){return new Promise((e,t)=>{function i(){zy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{zy(),t(ar(r,"network-request-failed"))},timeout:BN.get()})}if(lr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(lr().gapi?.load)i();else{const o=KT("iframefcb");return lr()[o]=()=>{gapi.load?i():t(ar(r,"network-request-failed"))},WT(`${GT()}?onload=${o}`).catch(l=>t(l))}}).catch(e=>{throw eu=null,e})}let eu=null;function $N(r){return eu=eu||zN(r),eu}const qN=new yl(5e3,15e3),HN="__/auth/iframe",WN="emulator/auth/iframe",GN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},KN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function QN(r){const e=r.config;Se(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Kf(e,WN):`https://${r.config.authDomain}/${HN}`,i={apiKey:e.apiKey,appName:r.name,v:Ii},o=KN.get(r.config.apiHost);o&&(i.eid=o);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${ul(i).slice(1)}`}async function YN(r){const e=await $N(r),t=lr().gapi;return Se(t,r,"internal-error"),e.open({where:document.body,url:QN(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:GN,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const h=ar(r,"network-request-failed"),p=lr().setTimeout(()=>{l(h)},qN.get());function m(){lr().clearTimeout(p),o(i)}i.ping(m).then(m,()=>{l(h)})}))}const JN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},XN=500,ZN=600,eS="_blank",tS="http://localhost";class $y{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function nS(r,e,t,i=XN,o=ZN){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let p="";const m={...JN,width:i.toString(),height:o.toString(),top:l,left:h},v=Ut().toLowerCase();t&&(p=tx(v)?eS:t),Zv(v)&&(e=e||tS,m.scrollbars="yes");const _=Object.entries(m).reduce((N,[O,L])=>`${N}${O}=${L},`,"");if(FT(v)&&p!=="_self")return rS(e||"",p),new $y(null);const E=window.open(e||"",p,_);Se(E,r,"popup-blocked");try{E.focus()}catch{}return new $y(E)}function rS(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}const sS="__/auth/handler",iS="emulator/auth/handler",oS=encodeURIComponent("fac");async function qy(r,e,t,i,o,l){Se(r.config.authDomain,r,"auth-domain-config-required"),Se(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:Ii,eventId:o};if(e instanceof ux){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",Rw(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))h[_]=E}if(e instanceof vl){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(h.scopes=_.join(","))}r.tenantId&&(h.tid=r.tenantId);const p=h;for(const _ of Object.keys(p))p[_]===void 0&&delete p[_];const m=await r._getAppCheckToken(),v=m?`#${oS}=${encodeURIComponent(m)}`:"";return`${aS(r)}?${ul(p).slice(1)}${v}`}function aS({config:r}){return r.emulator?Kf(r,iS):`https://${r.authDomain}/${sS}`}const Ah="webStorageSupport";class lS{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=px,this._completeRedirectFn=RN,this._overrideRedirectResult=kN}async _openPopup(e,t,i,o){Br(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await qy(e,t,i,Zh(),o);return nS(e,l,em())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await qy(e,t,i,Zh(),o);return dN(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Br(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await YN(e),i=new DN(e);return t.register("authEvent",o=>(Se(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ah,{type:Ah},o=>{const l=o?.[0]?.[Ah];l!==void 0&&t(!!l),Ur(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=MN(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ox()||ex()||Jf()}}const cS=lS;var Hy="@firebase/auth",Wy="1.12.0";class uS{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function dS(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function hS(r){vi(new ks("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:p}=i.options;Se(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:h,authDomain:p,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ax(r)},v=new qT(i,o,l,m);return YT(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),vi(new ks("auth-internal",e=>{const t=Xf(e.getProvider("auth").getImmediate());return(i=>new uS(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),rr(Hy,Wy,dS(r)),rr(Hy,Wy,"esm2020")}const fS=300,mS=i0("authIdTokenMaxAge")||fS;let Gy=null;const pS=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>mS)return;const o=t?.token;Gy!==o&&(Gy=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function gS(r=lf()){const e=bu(r,"auth");if(e.isInitialized())return e.getImmediate();const t=QT(r,{popupRedirectResolver:cS,persistence:[_N,lN,px]}),i=i0("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const h=pS(l.toString());iN(t,h,()=>h(t.currentUser)),sN(t,p=>h(p))}}const o=n0("auth");return o&&JT(t,`http://${o}`),t}function yS(){return document.getElementsByTagName("head")?.[0]??document}HT({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const l=ar("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",yS().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});hS("Browser");const Ex="firebasestorage.googleapis.com",vS="storageBucket",xS=120*1e3,_S=600*1e3;class hr extends dr{constructor(e,t,i=0){super(Ph(e),`Firebase Storage: ${t} (${Ph(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,hr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ph(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ur;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ur||(ur={}));function Ph(r){return"storage/"+r}function wS(){const r="An unknown error occurred, please check the error payload for server response.";return new hr(ur.UNKNOWN,r)}function ES(){return new hr(ur.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function bS(){return new hr(ur.CANCELED,"User canceled the upload/download.")}function IS(r){return new hr(ur.INVALID_URL,"Invalid URL '"+r+"'.")}function TS(r){return new hr(ur.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function Ky(r){return new hr(ur.INVALID_ARGUMENT,r)}function bx(){return new hr(ur.APP_DELETED,"The Firebase app was deleted.")}function NS(r){return new hr(ur.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class Dn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=Dn.makeFromUrl(e,t)}catch{return new Dn(e,"")}if(i.path==="")return i;throw TS(e)}static makeFromUrl(e,t){let i=null;const o="([A-Za-z0-9.\\-_]+)";function l(ne){ne.path.charAt(ne.path.length-1)==="/"&&(ne.path_=ne.path_.slice(0,-1))}const h="(/(.*))?$",p=new RegExp("^gs://"+o+h,"i"),m={bucket:1,path:3};function v(ne){ne.path_=decodeURIComponent(ne.path)}const _="v[A-Za-z0-9_]+",E=t.replace(/[.]/g,"\\."),N="(/([^?#]*).*)?$",O=new RegExp(`^https?://${E}/${_}/b/${o}/o${N}`,"i"),L={bucket:1,path:3},F=t===Ex?"(?:storage.googleapis.com|storage.cloud.google.com)":t,M="([^?#]*)",K=new RegExp(`^https?://${F}/${o}/${M}`,"i"),Y=[{regex:p,indices:m,postModify:l},{regex:O,indices:L,postModify:v},{regex:K,indices:{bucket:1,path:2},postModify:v}];for(let ne=0;ne<Y.length;ne++){const G=Y[ne],ae=G.regex.exec(e);if(ae){const k=ae[G.indices.bucket];let I=ae[G.indices.path];I||(I=""),i=new Dn(k,I),G.postModify(i);break}}if(i==null)throw IS(e);return i}}class SS{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function CS(r,e,t){let i=1,o=null,l=null,h=!1,p=0;function m(){return p===2}let v=!1;function _(...M){v||(v=!0,e.apply(null,M))}function E(M){o=setTimeout(()=>{o=null,r(O,m())},M)}function N(){l&&clearTimeout(l)}function O(M,...K){if(v){N();return}if(M){N(),_.call(null,M,...K);return}if(m()||h){N(),_.call(null,M,...K);return}i<64&&(i*=2);let Y;p===1?(p=2,Y=0):Y=(i+Math.random())*1e3,E(Y)}let L=!1;function F(M){L||(L=!0,N(),!v&&(o!==null?(M||(p=2),clearTimeout(o),E(0)):M||(p=1)))}return E(0),l=setTimeout(()=>{h=!0,F(!0)},t),F}function kS(r){r(!1)}function AS(r){return r!==void 0}function Qy(r,e,t,i){if(i<e)throw Ky(`Invalid value for '${r}'. Expected ${e} or greater.`);if(i>t)throw Ky(`Invalid value for '${r}'. Expected ${t} or less.`)}function PS(r){const e=encodeURIComponent;let t="?";for(const i in r)if(r.hasOwnProperty(i)){const o=e(i)+"="+e(r[i]);t=t+o+"&"}return t=t.slice(0,-1),t}var _u;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(_u||(_u={}));function RS(r,e){const t=r>=500&&r<600,o=[408,429].indexOf(r)!==-1,l=e.indexOf(r)!==-1;return t||o||l}class jS{constructor(e,t,i,o,l,h,p,m,v,_,E,N=!0,O=!1){this.url_=e,this.method_=t,this.headers_=i,this.body_=o,this.successCodes_=l,this.additionalRetryCodes_=h,this.callback_=p,this.errorCallback_=m,this.timeout_=v,this.progressCallback_=_,this.connectionFactory_=E,this.retry=N,this.isUsingEmulator=O,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((L,F)=>{this.resolve_=L,this.reject_=F,this.start_()})}start_(){const e=(i,o)=>{if(o){i(!1,new $c(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const h=p=>{const m=p.loaded,v=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(m,v)};this.progressCallback_!==null&&l.addUploadProgressListener(h),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(h),this.pendingConnection_=null;const p=l.getErrorCode()===_u.NO_ERROR,m=l.getStatus();if(!p||RS(m,this.additionalRetryCodes_)&&this.retry){const _=l.getErrorCode()===_u.ABORT;i(!1,new $c(!1,null,_));return}const v=this.successCodes_.indexOf(m)!==-1;i(!0,new $c(v,l))})},t=(i,o)=>{const l=this.resolve_,h=this.reject_,p=o.connection;if(o.wasSuccessCode)try{const m=this.callback_(p,p.getResponse());AS(m)?l(m):l()}catch(m){h(m)}else if(p!==null){const m=wS();m.serverResponse=p.getErrorText(),this.errorCallback_?h(this.errorCallback_(p,m)):h(m)}else if(o.canceled){const m=this.appDelete_?bx():bS();h(m)}else{const m=ES();h(m)}};this.canceled_?t(!1,new $c(!1,null,!0)):this.backoffId_=CS(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&kS(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class $c{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function DS(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function OS(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function VS(r,e){e&&(r["X-Firebase-GMPID"]=e)}function LS(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function FS(r,e,t,i,o,l,h=!0,p=!1){const m=PS(r.urlParams),v=r.url+m,_=Object.assign({},r.headers);return VS(_,e),DS(_,t),OS(_,l),LS(_,i),new jS(v,r.method,_,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,o,h,p)}function MS(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function US(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}class wu{constructor(e,t){this._service=e,t instanceof Dn?this._location=t:this._location=Dn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new wu(e,t)}get root(){const e=new Dn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return US(this._location.path)}get storage(){return this._service}get parent(){const e=MS(this._location.path);if(e===null)return null;const t=new Dn(this._location.bucket,e);return new wu(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw NS(e)}}function Yy(r,e){const t=e?.[vS];return t==null?null:Dn.makeFromBucketSpec(t,r)}function BS(r,e,t,i={}){r.host=`${e}:${t}`;const o=bi(e);o&&(rf(`https://${r.host}/b`),sf("Storage",!0)),r._isUsingEmulator=!0,r._protocol=o?"https":"http";const{mockUserToken:l}=i;l&&(r._overrideAuthToken=typeof l=="string"?l:o0(l,r.app.options.projectId))}class zS{constructor(e,t,i,o,l,h=!1){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=o,this._firebaseVersion=l,this._isUsingEmulator=h,this._bucket=null,this._host=Ex,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=xS,this._maxUploadRetryTime=_S,this._requests=new Set,o!=null?this._bucket=Dn.makeFromBucketSpec(o,this._host):this._bucket=Yy(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Dn.makeFromBucketSpec(this._url,e):this._bucket=Yy(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Qy("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Qy("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Rn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new wu(this,e)}_makeRequest(e,t,i,o,l=!0){if(this._deleted)return new SS(bx());{const h=FS(e,this._appId,i,o,t,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(h),h.getPromise().then(()=>this._requests.delete(h),()=>this._requests.delete(h)),h}}async makeRequestWithTokens(e,t){const[i,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,o).getPromise()}}const Jy="@firebase/storage",Xy="0.14.0";const Ix="storage";function $S(r=lf(),e){r=Bt(r);const i=bu(r,Ix).getImmediate({identifier:e}),o=r0("storage");return o&&qS(i,...o),i}function qS(r,e,t,i={}){BS(r,e,t,i)}function HS(r,{instanceIdentifier:e}){const t=r.getProvider("app").getImmediate(),i=r.getProvider("auth-internal"),o=r.getProvider("app-check-internal");return new zS(t,i,o,e,Ii)}function WS(){vi(new ks(Ix,HS,"PUBLIC").setMultipleInstances(!0)),rr(Jy,Xy,""),rr(Jy,Xy,"esm2020")}WS();const GS={apiKey:"AIzaSyDisIltlN9rR-tltlJaClGBld9usTYLmxM",authDomain:"luxemarket-7c4c0.firebaseapp.com",projectId:"luxemarket-7c4c0",storageBucket:"luxemarket-7c4c0.firebasestorage.app",messagingSenderId:"81635666948",appId:"1:81635666948:web:867963294814113a645951",measurementId:"G-0QQKRWXKDC"},nm=c0(GS),Pr=YI(nm);gS(nm);$S(nm);const Rr="products";class KS{async create(e){return{id:(await gT(yo(Pr,Rr),{...e,createdAt:Sh(),updatedAt:Sh()})).id,...e}}async getAll(){return(await Ua(yo(Pr,Rr))).docs.map(t=>({id:t.id,...t.data()}))}async getById(e){const t=Qc(Pr,Rr,e),i=await fT(t);return i.exists()?{id:i.id,...i.data()}:null}async getByCategory(e){const t=Bc(yo(Pr,Rr),Ch("category","==",e));return(await Ua(t)).docs.map(o=>({id:o.id,...o.data()}))}async getFeatured(){const e=Bc(yo(Pr,Rr),Ch("featured","==",!0));return(await Ua(e)).docs.map(i=>({id:i.id,...i.data()}))}async getDailyDeals(){const e=Bc(yo(Pr,Rr),Ch("dailyDeal","==",!0));return(await Ua(e)).docs.map(i=>({id:i.id,...i.data()}))}async search(e){const t=await this.getAll(),i=e.toLowerCase();return t.filter(o=>o.name.toLowerCase().includes(i)||o.description?.toLowerCase().includes(i)||o.category.toLowerCase().includes(i))}async update(e,t){const i=Qc(Pr,Rr,e);return await mT(i,{...t,updatedAt:Sh()}),this.getById(e)}async delete(e){const t=Qc(Pr,Rr,e);await pT(t)}async bulkCreate(e){const t=e.map(i=>this.create(i));return await Promise.all(t)}async getPaginated(e=20){const t=Bc(yo(Pr,Rr),cT("createdAt","desc"),uT(e));return(await Ua(t)).docs.map(o=>({id:o.id,...o.data()}))}}const bs=new KS;async function Tx(){try{console.log(" Starting Firebase migration...");const r=localStorage.getItem("luxemarket_products");if(!r){console.log(" No products found in localStorage");return}const e=JSON.parse(r);console.log(` Found ${e.length} products to migrate`);const t=await bs.getAll();if(t.length>0&&(console.log(` Firebase already has ${t.length} products`),!confirm(`Firebase already has ${t.length} products.
Do you want to add ${e.length} more products from localStorage?`))){console.log(" Migration cancelled");return}console.log(" Uploading products to Firebase...");let i=0,o=0;for(const l of e)try{const{id:h,...p}=l;await bs.create(p),i++,console.log(` Uploaded: ${l.name}`)}catch(h){o++,console.error(` Failed to upload ${l.name}:`,h)}console.log(`
 Migration complete!`),console.log(` Success: ${i} products`),o>0&&console.log(` Failed: ${o} products`),alert(`Migration complete!

 Uploaded: ${i} products
${o>0?` Failed: ${o} products`:""}`)}catch(r){console.error(" Migration failed:",r),alert(`Migration failed: ${r.message}`)}}typeof window<"u"&&(window.migrateToFirebase=Tx);function QS(){const[r,e]=Ha.useState("idle"),[t,i]=Ha.useState(""),[o,l]=Ha.useState(null),h=async()=>{e("checking"),i("Checking Firebase connection...");try{const v=await bs.getAll();l(v.length),e("success"),i(` Connected! Found ${v.length} products in Firebase.`)}catch(v){e("error"),v.message.includes("apiKey")?i(" Firebase not configured. Please update src/firebase/config.js with your Firebase credentials."):i(` Connection failed: ${v.message}`)}},p=async()=>{e("migrating"),i("Migrating products to Firebase...");try{await Tx(),await h()}catch(v){e("error"),i(` Migration failed: ${v.message}`)}},m=()=>{const v=localStorage.getItem("luxemarket_products");return v?JSON.parse(v).length:0};return u.jsx("div",{className:"min-h-screen bg-gray-100 py-8",children:u.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[u.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[u.jsx("h1",{className:"text-3xl font-bold mb-2",children:" Firebase Setup"}),u.jsx("p",{className:"text-gray-600",children:"Set up Firebase to share products with all users"})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[u.jsx("h2",{className:"text-xl font-bold mb-4",children:"Setup Steps"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("div",{className:"w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center flex-shrink-0 font-bold",children:"1"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold",children:"Create Firebase Project"}),u.jsxs("p",{className:"text-sm text-gray-600",children:["Go to ",u.jsx("a",{href:"https://console.firebase.google.com/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:"Firebase Console"})," and create a new project"]})]})]}),u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("div",{className:"w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center flex-shrink-0 font-bold",children:"2"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold",children:"Enable Firestore Database"}),u.jsx("p",{className:"text-sm text-gray-600",children:'In Firebase Console, enable Firestore Database in "test mode"'})]})]}),u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("div",{className:"w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center flex-shrink-0 font-bold",children:"3"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold",children:"Configure Your App"}),u.jsxs("p",{className:"text-sm text-gray-600",children:["Update ",u.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded",children:"src/firebase/config.js"})," with your Firebase credentials"]})]})]}),u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("div",{className:"w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center flex-shrink-0 font-bold",children:"4"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold",children:"Test Connection & Migrate"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Use the buttons below to test and migrate your data"})]})]})]})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[u.jsx("h2",{className:"text-xl font-bold mb-4",children:"Status"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex justify-between items-center p-4 bg-gray-50 rounded",children:[u.jsx("span",{className:"font-semibold",children:"Local Products:"}),u.jsx("span",{className:"text-2xl font-bold text-blue-600",children:m()})]}),o!==null&&u.jsxs("div",{className:"flex justify-between items-center p-4 bg-gray-50 rounded",children:[u.jsx("span",{className:"font-semibold",children:"Firebase Products:"}),u.jsx("span",{className:"text-2xl font-bold text-green-600",children:o})]}),t&&u.jsx("div",{className:`p-4 rounded ${r==="success"?"bg-green-50 text-green-800":r==="error"?"bg-red-50 text-red-800":"bg-blue-50 text-blue-800"}`,children:t})]})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[u.jsx("h2",{className:"text-xl font-bold mb-4",children:"Actions"}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("button",{onClick:h,disabled:r==="checking"||r==="migrating",className:"w-full bg-blue-500 text-white py-3 px-4 rounded-lg hover:bg-blue-600 disabled:opacity-50 font-semibold",children:r==="checking"?" Checking...":" Test Firebase Connection"}),u.jsx("button",{onClick:p,disabled:r==="checking"||r==="migrating"||m()===0,className:"w-full bg-green-500 text-white py-3 px-4 rounded-lg hover:bg-green-600 disabled:opacity-50 font-semibold",children:r==="migrating"?" Migrating...":" Migrate Products to Firebase"}),u.jsx("a",{href:"https://console.firebase.google.com/",target:"_blank",rel:"noopener noreferrer",className:"block w-full bg-orange-500 text-white py-3 px-4 rounded-lg hover:bg-orange-600 text-center font-semibold",children:" Open Firebase Console"})]})]}),u.jsx("div",{className:"mt-6 text-center",children:u.jsxs("p",{className:"text-gray-600",children:["Need help? Check the ",u.jsx("a",{href:"/FIREBASE_SETUP.md",className:"text-blue-500 hover:underline",children:"complete setup guide"})]})})]})})}function YS({isOpen:r,onClose:e,onCartUpdate:t,onCheckout:i}){const[o,l]=J.useState([]),[h,p]=J.useState(!0);J.useEffect(()=>{r&&m()},[r]);const m=()=>{try{if(window.CartManager&&window.ProductManager){const F=window.CartManager.getCart().map(M=>{const K=window.ProductManager.getById(M.id);return{...M,product:K}}).filter(M=>M.product);l(F)}}catch(L){console.error("Error loading cart items:",L),we("Error loading cart","error")}finally{p(!1)}},v=(L,F)=>{try{if(F<=0){_(L);return}window.CartManager.update(L,F),m(),t(),we("Cart updated","success")}catch(M){console.error("Error updating quantity:",M),we(M.message,"error")}},_=L=>{try{window.CartManager.remove(L),m(),t(),we("Item removed from cart","success")}catch(F){console.error("Error removing item:",F),we("Error removing item","error")}},E=()=>{try{window.CartManager.clear(),m(),t(),we("Cart cleared","success")}catch(L){console.error("Error clearing cart:",L),we("Error clearing cart","error")}},N=()=>o.reduce((L,F)=>L+F.product.price*F.quantity,0),O=()=>o.reduce((L,F)=>L+F.quantity,0);return J.useEffect(()=>{const L=F=>{F.key==="Escape"&&r&&e()};return r&&(document.addEventListener("keydown",L),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",L),document.body.style.overflow="unset"}},[r,e]),r?u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4 cart-modal",children:u.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-hidden shadow-2xl",children:[u.jsxs("div",{className:"bg-white border-b border-gray-200 p-6 flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Shopping Cart"}),u.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[O()," ",O()===1?"item":"items"," in your cart"]})]}),u.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 text-3xl leading-none w-8 h-8 flex items-center justify-center hover:bg-gray-100 rounded-full transition-colors",title:"Close (Esc)",children:""})]}),u.jsx("div",{className:"flex-1 overflow-y-auto max-h-[calc(90vh-200px)]",children:h?u.jsx("div",{className:"flex items-center justify-center py-12",children:u.jsx("div",{className:"text-gray-500",children:"Loading cart..."})}):o.length===0?u.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[u.jsx("div",{className:"text-6xl text-gray-300 mb-4",children:""}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Your cart is empty"}),u.jsx("p",{className:"text-gray-500 mb-6",children:"Add some products to get started!"}),u.jsx("button",{onClick:e,className:"btn btn-primary px-6 py-3",children:"Continue Shopping"})]}):u.jsxs("div",{className:"p-6",children:[u.jsx("div",{className:"space-y-4 mb-6",children:o.map(L=>u.jsxs("div",{className:"flex items-center gap-4 p-4 border border-gray-200 rounded-lg hover:shadow-sm transition-shadow cart-item",children:[u.jsx("div",{className:"w-20 h-20 flex-shrink-0 bg-gray-100 rounded-lg overflow-hidden",children:u.jsx("img",{src:L.product.image,alt:L.product.name,className:"w-full h-full object-cover",onError:F=>{F.target.src="https://via.placeholder.com/80x80?text=No+Image"}})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:L.product.name}),u.jsx("p",{className:"text-sm text-gray-500",children:L.product.category}),u.jsxs("p",{className:"text-lg font-bold text-blue-600",children:["$",L.product.price.toFixed(2)]}),L.quantity>L.product.stock&&u.jsxs("p",{className:"text-xs text-red-600 mt-1",children:[" Only ",L.product.stock," available"]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("button",{onClick:()=>v(L.id,L.quantity-1),className:"w-8 h-8 rounded-full border border-gray-300 flex items-center justify-center hover:bg-gray-50 transition-colors",disabled:L.quantity<=1,children:""}),u.jsx("span",{className:"w-8 text-center font-medium",children:L.quantity}),u.jsx("button",{onClick:()=>v(L.id,L.quantity+1),className:"w-8 h-8 rounded-full border border-gray-300 flex items-center justify-center hover:bg-gray-50 transition-colors",disabled:L.quantity>=L.product.stock,children:"+"})]}),u.jsxs("div",{className:"text-right min-w-0",children:[u.jsxs("p",{className:"font-bold text-gray-900",children:["$",(L.product.price*L.quantity).toFixed(2)]}),u.jsx("button",{onClick:()=>_(L.id),className:"text-xs text-red-600 hover:text-red-800 transition-colors mt-1",children:"Remove"})]})]},L.id))}),u.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("span",{className:"text-lg font-semibold text-gray-900",children:"Total:"}),u.jsxs("span",{className:"text-2xl font-bold text-blue-600",children:["$",N().toFixed(2)]})]}),u.jsxs("div",{className:"flex gap-4",children:[u.jsx("button",{onClick:E,className:"flex-1 btn btn-secondary py-3",children:"Clear Cart"}),u.jsx("button",{onClick:()=>{i()},className:"flex-2 btn btn-primary py-3 px-8",disabled:o.length===0,children:"Proceed to Checkout"})]})]})]})})]})}):null}function JS({isOpen:r,onClose:e,onOrderComplete:t}){const[i,o]=J.useState([]),[l,h]=J.useState(!0),[p,m]=J.useState(1),[v,_]=J.useState({shipping:{firstName:"",lastName:"",email:"",phone:"",address:"",city:"",state:"",zipCode:"",country:"United States"},payment:{cardNumber:"",expiryDate:"",cvv:"",cardName:"",billingAddress:"",billingCity:"",billingState:"",billingZip:"",sameAsShipping:!0}});J.useEffect(()=>{r&&E()},[r]);const E=()=>{try{if(window.CartManager&&window.ProductManager){const ae=window.CartManager.getCart().map(k=>{const I=window.ProductManager.getById(k.id);return{...k,product:I}}).filter(k=>k.product);o(ae)}}catch(G){console.error("Error loading cart items:",G),we("Error loading cart","error")}finally{h(!1)}},N=()=>i.reduce((G,ae)=>G+ae.product.price*ae.quantity,0),O=()=>N()*.08,L=()=>N()>50?0:9.99,F=()=>N()+O()+L(),M=(G,ae,k)=>{_(I=>({...I,[G]:{...I[G],[ae]:k}}))},K=G=>{switch(G){case 1:return i.length>0;case 2:const{shipping:ae}=v;return ae.firstName&&ae.lastName&&ae.email&&ae.address&&ae.city&&ae.state&&ae.zipCode;case 3:const{payment:k}=v;return k.cardNumber&&k.expiryDate&&k.cvv&&k.cardName;default:return!0}},q=()=>{K(p)?m(p+1):we("Please fill in all required fields","error")},Y=()=>{m(p-1)},ne=async()=>{try{h(!0),await new Promise(ae=>setTimeout(ae,2e3)),window.CartManager.clear();const G="LM"+Date.now().toString().slice(-6);m(4),t(G),we("Order placed successfully!","success")}catch(G){console.error("Error placing order:",G),we("Error placing order. Please try again.","error")}finally{h(!1)}};return J.useEffect(()=>{const G=ae=>{ae.key==="Escape"&&r&&e()};return r&&(document.addEventListener("keydown",G),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",G),document.body.style.overflow="unset"}},[r,e]),r?u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white rounded-lg max-w-6xl w-full max-h-[95vh] overflow-hidden shadow-2xl",children:[u.jsxs("div",{className:"bg-white border-b border-gray-200 p-6 flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Checkout"}),u.jsx("div",{className:"flex items-center mt-2 space-x-4",children:[1,2,3,4].map(G=>u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${p>=G?"bg-blue-600 text-white":"bg-gray-200 text-gray-600"}`,children:G}),u.jsxs("span",{className:`ml-2 text-sm ${p>=G?"text-blue-600 font-medium":"text-gray-500"}`,children:[G===1&&"Review",G===2&&"Shipping",G===3&&"Payment",G===4&&"Complete"]}),G<4&&u.jsx("div",{className:"w-8 h-0.5 bg-gray-200 mx-2"})]},G))})]}),u.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 text-3xl leading-none w-8 h-8 flex items-center justify-center hover:bg-gray-100 rounded-full transition-colors",title:"Close (Esc)",children:""})]}),u.jsx("div",{className:"flex-1 overflow-y-auto max-h-[calc(95vh-200px)]",children:l&&p!==4?u.jsx("div",{className:"flex items-center justify-center py-12",children:u.jsx("div",{className:"text-gray-500",children:"Loading..."})}):u.jsx("div",{className:"p-6",children:u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[u.jsxs("div",{className:"lg:col-span-2",children:[p===1&&u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-bold mb-4",children:"Review Your Order"}),u.jsx("div",{className:"space-y-4",children:i.map(G=>u.jsxs("div",{className:"flex items-center gap-4 p-4 border border-gray-200 rounded-lg",children:[u.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-lg overflow-hidden",children:u.jsx("img",{src:G.product.image,alt:G.product.name,className:"w-full h-full object-cover"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h4",{className:"font-semibold",children:G.product.name}),u.jsx("p",{className:"text-sm text-gray-500",children:G.product.category}),u.jsxs("p",{className:"text-sm",children:["Qty: ",G.quantity]})]}),u.jsx("div",{className:"text-right",children:u.jsxs("p",{className:"font-bold",children:["$",(G.product.price*G.quantity).toFixed(2)]})})]},G.id))})]}),p===2&&u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-bold mb-4",children:"Shipping Information"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"}),u.jsx("input",{type:"text",value:v.shipping.firstName,onChange:G=>M("shipping","firstName",G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"}),u.jsx("input",{type:"text",value:v.shipping.lastName,onChange:G=>M("shipping","lastName",G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),u.jsx("input",{type:"email",value:v.shipping.email,onChange:G=>M("shipping","email",G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),u.jsx("input",{type:"tel",value:v.shipping.phone,onChange:G=>M("shipping","phone",G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address *"}),u.jsx("input",{type:"text",value:v.shipping.address,onChange:G=>M("shipping","address",G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"}),u.jsx("input",{type:"text",value:v.shipping.city,onChange:G=>M("shipping","city",G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State *"}),u.jsx("input",{type:"text",value:v.shipping.state,onChange:G=>M("shipping","state",G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ZIP Code *"}),u.jsx("input",{type:"text",value:v.shipping.zipCode,onChange:G=>M("shipping","zipCode",G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country"}),u.jsxs("select",{value:v.shipping.country,onChange:G=>M("shipping","country",G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[u.jsx("option",{value:"United States",children:"United States"}),u.jsx("option",{value:"Canada",children:"Canada"}),u.jsx("option",{value:"United Kingdom",children:"United Kingdom"}),u.jsx("option",{value:"Australia",children:"Australia"})]})]})]})]}),p===3&&u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-bold mb-4",children:"Payment Information"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Card Number *"}),u.jsx("input",{type:"text",value:v.payment.cardNumber,onChange:G=>M("payment","cardNumber",G.target.value),placeholder:"1234 5678 9012 3456",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expiry Date *"}),u.jsx("input",{type:"text",value:v.payment.expiryDate,onChange:G=>M("payment","expiryDate",G.target.value),placeholder:"MM/YY",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CVV *"}),u.jsx("input",{type:"text",value:v.payment.cvv,onChange:G=>M("payment","cvv",G.target.value),placeholder:"123",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cardholder Name *"}),u.jsx("input",{type:"text",value:v.payment.cardName,onChange:G=>M("payment","cardName",G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("input",{type:"checkbox",id:"sameAsShipping",checked:v.payment.sameAsShipping,onChange:G=>M("payment","sameAsShipping",G.target.checked),className:"mr-2"}),u.jsx("label",{htmlFor:"sameAsShipping",className:"text-sm text-gray-700",children:"Billing address same as shipping"})]})]})]}),p===4&&u.jsxs("div",{className:"text-center py-8",children:[u.jsx("div",{className:"text-6xl text-green-500 mb-4",children:""}),u.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Order Placed Successfully!"}),u.jsx("p",{className:"text-gray-600 mb-4",children:"Thank you for your purchase. You will receive a confirmation email shortly."}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 inline-block",children:[u.jsx("p",{className:"text-sm text-gray-500",children:"Order Number"}),u.jsxs("p",{className:"text-lg font-bold text-gray-900",children:["LM",Date.now().toString().slice(-6)]})]})]})]}),u.jsx("div",{className:"lg:col-span-1",children:u.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 sticky top-0",children:[u.jsx("h3",{className:"text-lg font-bold mb-4",children:"Order Summary"}),u.jsxs("div",{className:"space-y-2 mb-4",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Subtotal:"}),u.jsxs("span",{children:["$",N().toFixed(2)]})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Tax:"}),u.jsxs("span",{children:["$",O().toFixed(2)]})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Shipping:"}),u.jsx("span",{children:L()===0?"FREE":`$${L().toFixed(2)}`})]}),u.jsx("div",{className:"border-t border-gray-200 pt-2",children:u.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[u.jsx("span",{children:"Total:"}),u.jsxs("span",{children:["$",F().toFixed(2)]})]})})]}),N()<50&&p<4&&u.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:u.jsxs("p",{className:"text-sm text-blue-800",children:["Add $",(50-N()).toFixed(2)," more for free shipping!"]})})]})})]})})}),p<4&&u.jsxs("div",{className:"bg-gray-50 border-t border-gray-200 p-6 flex justify-between",children:[u.jsx("div",{children:p>1&&u.jsx("button",{onClick:Y,className:"btn btn-secondary px-6 py-3",children:"Back"})}),u.jsxs("div",{className:"flex gap-4",children:[u.jsx("button",{onClick:e,className:"btn btn-ghost px-6 py-3",children:"Cancel"}),p<3?u.jsx("button",{onClick:q,className:"btn btn-primary px-6 py-3",disabled:!K(p),children:"Continue"}):u.jsx("button",{onClick:ne,className:"btn btn-primary px-8 py-3",disabled:l||!K(p),children:l?"Processing...":"Place Order"})]})]}),p===4&&u.jsx("div",{className:"bg-gray-50 border-t border-gray-200 p-6 flex justify-center",children:u.jsx("button",{onClick:e,className:"btn btn-primary px-8 py-3",children:"Continue Shopping"})})]})}):null}function XS({isOpen:r,onClose:e}){const[t,i]=J.useState([]),[o,l]=J.useState(!0);J.useEffect(()=>{r&&h()},[r]);const h=()=>{try{const v=localStorage.getItem("luxemarket_watchlist"),_=v?JSON.parse(v):[];if(window.ProductManager){const E=_.map(N=>window.ProductManager.getById(N)).filter(Boolean);i(E)}}catch(v){console.error("Error loading watchlist:",v),we("Error loading watchlist","error")}finally{l(!1)}},p=v=>{try{const _=localStorage.getItem("luxemarket_watchlist"),N=(_?JSON.parse(_):[]).filter(O=>O!==v);localStorage.setItem("luxemarket_watchlist",JSON.stringify(N)),h(),we("Removed from watchlist","success")}catch(_){console.error("Error removing from watchlist:",_),we("Error removing from watchlist","error")}},m=v=>{try{window.CartManager&&(window.CartManager.add(v.id,1),window.dispatchEvent(new Event("cartUpdated")),we(`Added ${v.name} to cart!`,"success"))}catch(_){console.error("Error adding to cart:",_),we(_.message,"error")}};return J.useEffect(()=>{const v=_=>{_.key==="Escape"&&r&&e()};return r&&(document.addEventListener("keydown",v),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",v),document.body.style.overflow="unset"}},[r,e]),r?u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-hidden shadow-2xl",children:[u.jsxs("div",{className:"bg-white border-b border-gray-200 p-6 flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"My Watchlist"}),u.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[t.length," ",t.length===1?"item":"items"," saved"]})]}),u.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 text-3xl leading-none w-8 h-8 flex items-center justify-center hover:bg-gray-100 rounded-full transition-colors",title:"Close (Esc)",children:""})]}),u.jsx("div",{className:"flex-1 overflow-y-auto max-h-[calc(90vh-200px)]",children:o?u.jsx("div",{className:"flex items-center justify-center py-12",children:u.jsx("div",{className:"text-gray-500",children:"Loading watchlist..."})}):t.length===0?u.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[u.jsx("div",{className:"text-6xl text-gray-300 mb-4",children:""}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Your watchlist is empty"}),u.jsx("p",{className:"text-gray-500 mb-6",children:"Save items you're interested in to view them later!"}),u.jsx("button",{onClick:e,className:"btn btn-primary px-6 py-3",children:"Continue Shopping"})]}):u.jsx("div",{className:"p-6",children:u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(v=>u.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden hover:shadow-lg transition-shadow",children:[u.jsx("div",{className:"aspect-square bg-gray-100",children:u.jsx("img",{src:v.image,alt:v.name,className:"w-full h-full object-cover"})}),u.jsxs("div",{className:"p-4",children:[u.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:v.name}),u.jsx("p",{className:"text-sm text-gray-500 mb-2",children:v.category}),u.jsxs("p",{className:"text-lg font-bold text-blue-600 mb-3",children:["$",v.price.toFixed(2)]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>m(v),disabled:v.stock===0,className:`flex-1 text-sm py-2 px-3 rounded transition-colors ${v.stock===0?"bg-gray-300 text-gray-500 cursor-not-allowed":"btn btn-primary"}`,children:v.stock===0?"Out of Stock":"Add to Cart"}),u.jsx("button",{onClick:()=>p(v.id),className:"text-red-600 hover:text-red-800 p-2 hover:bg-red-50 rounded transition-colors",title:"Remove from watchlist",children:u.jsx("div",{className:"icon-trash text-sm"})})]})]})]},v.id))})})})]})}):null}function ZS({isOpen:r,onClose:e,currentUser:t}){const[i,o]=J.useState([]),[l,h]=J.useState({totalOrders:0,totalSpent:0,savedItems:0,recentActivity:[]});J.useEffect(()=>{r&&p()},[r]);const p=()=>{try{const m=[{id:"LM123456",date:"2024-01-15",total:299.99,status:"Delivered",items:3},{id:"LM123457",date:"2024-01-10",total:149.5,status:"Shipped",items:2},{id:"LM123458",date:"2024-01-05",total:89.99,status:"Processing",items:1}];o(m);const v=m.reduce((E,N)=>E+N.total,0),_=JSON.parse(localStorage.getItem("luxemarket_watchlist")||"[]");h({totalOrders:m.length,totalSpent:v,savedItems:_.length,recentActivity:["Added Premium Headphones to cart","Saved Luxury Watch to watchlist","Completed order LM123456","Updated shipping address"]})}catch(m){console.error("Error loading account data:",m),we("Error loading account data","error")}};return J.useEffect(()=>{const m=v=>{v.key==="Escape"&&r&&e()};return r&&(document.addEventListener("keydown",m),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",m),document.body.style.overflow="unset"}},[r,e]),r?u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white rounded-lg max-w-6xl w-full max-h-[95vh] overflow-hidden shadow-2xl",children:[u.jsxs("div",{className:"bg-white border-b border-gray-200 p-6 flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Account Summary"}),u.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Welcome back, ",t?.name||"User","!"]})]}),u.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 text-3xl leading-none w-8 h-8 flex items-center justify-center hover:bg-gray-100 rounded-full transition-colors",title:"Close (Esc)",children:""})]}),u.jsx("div",{className:"flex-1 overflow-y-auto max-h-[calc(95vh-200px)]",children:u.jsx("div",{className:"p-6",children:u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[u.jsx("div",{className:"lg:col-span-3",children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[u.jsx("div",{className:"bg-blue-50 rounded-lg p-6",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"icon-shopping-bag text-2xl text-blue-600 mr-3"}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Total Orders"}),u.jsx("p",{className:"text-2xl font-bold text-blue-900",children:l.totalOrders})]})]})}),u.jsx("div",{className:"bg-green-50 rounded-lg p-6",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"icon-dollar-sign text-2xl text-green-600 mr-3"}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Total Spent"}),u.jsxs("p",{className:"text-2xl font-bold text-green-900",children:["$",l.totalSpent.toFixed(2)]})]})]})}),u.jsx("div",{className:"bg-purple-50 rounded-lg p-6",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"icon-heart text-2xl text-purple-600 mr-3"}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-purple-600 font-medium",children:"Saved Items"}),u.jsx("p",{className:"text-2xl font-bold text-purple-900",children:l.savedItems})]})]})})]})}),u.jsxs("div",{className:"lg:col-span-2",children:[u.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Recent Orders"}),u.jsx("div",{className:"space-y-4",children:i.map(m=>u.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-sm transition-shadow",children:[u.jsxs("div",{className:"flex justify-between items-start mb-2",children:[u.jsxs("div",{children:[u.jsxs("p",{className:"font-semibold text-gray-900",children:["Order #",m.id]}),u.jsx("p",{className:"text-sm text-gray-500",children:m.date})]}),u.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${m.status==="Delivered"?"bg-green-100 text-green-800":m.status==="Shipped"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:m.status})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("p",{className:"text-sm text-gray-600",children:[m.items," items"]}),u.jsxs("p",{className:"font-bold text-gray-900",children:["$",m.total.toFixed(2)]})]})]},m.id))})]}),u.jsxs("div",{className:"lg:col-span-1",children:[u.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Recent Activity"}),u.jsx("div",{className:"space-y-3",children:l.recentActivity.map((m,v)=>u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full mt-2 flex-shrink-0"}),u.jsx("p",{className:"text-sm text-gray-600",children:m})]},v))})]})]})})}),u.jsx("div",{className:"bg-gray-50 border-t border-gray-200 p-6 flex justify-center",children:u.jsx("button",{onClick:e,className:"btn btn-primary px-8 py-3",children:"Continue Shopping"})})]})}):null}class cn extends J.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t)}render(){return this.state.hasError?u.jsxs("div",{style:{padding:"2rem",textAlign:"center",backgroundColor:"#fee2e2",border:"1px solid #fecaca",borderRadius:"8px",margin:"1rem"},children:[u.jsx("h2",{style:{color:"#dc2626",marginBottom:"1rem"},children:"Something went wrong"}),u.jsx("p",{style:{color:"#7f1d1d",marginBottom:"1rem"},children:this.state.error?.message||"An unexpected error occurred"}),u.jsx("button",{onClick:()=>this.setState({hasError:!1,error:null}),style:{padding:"0.5rem 1rem",backgroundColor:"#dc2626",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",marginRight:"0.5rem"},children:"Try Again"}),u.jsx("button",{onClick:()=>window.location.reload(),style:{padding:"0.5rem 1rem",backgroundColor:"#6b7280",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Reload Page"})]}):this.props.children}}console.log(" FullApp component loading...");function eC(){const[r,e]=J.useState("home"),[t,i]=J.useState(0),[o,l]=J.useState(!1),[h,p]=J.useState(null),[m,v]=J.useState({isOpen:!1,isRegister:!1}),[_,E]=J.useState(null),[N,O]=J.useState(!1),[L,F]=J.useState(!1),[M,K]=J.useState(!1),[q,Y]=J.useState(!1);J.useEffect(()=>{const B=()=>{try{const X=Xa.getItemCount();i(X)}catch(X){console.error("Cart count error:",X)}};return B(),window.addEventListener("cartUpdated",B),()=>{window.removeEventListener("cartUpdated",B)}},[]),J.useEffect(()=>{const B=()=>{const X=window.location.hash.slice(1);e(X==="admin"?"admin":X==="firebase"?"firebase":"home")};return B(),window.addEventListener("hashchange",B),()=>{window.removeEventListener("hashchange",B)}},[]),J.useEffect(()=>{const B=X=>{try{const R=wn.getById(X.detail.productId);R&&E(R)}catch(R){console.error("Product open error:",R)}};return window.addEventListener("openProduct",B),()=>{window.removeEventListener("openProduct",B)}},[]),J.useEffect(()=>{const B=()=>{F(!0)};return window.addEventListener("openCheckout",B),()=>{window.removeEventListener("openCheckout",B)}},[]);const ne=(B=!1)=>{v({isOpen:!0,isRegister:B})},G=()=>{v({isOpen:!1,isRegister:!1})},ae=B=>{p(B),G(),we(`Welcome back, ${B.name}!`,"success")},k=B=>{p(B),G(),we(`Welcome to LuxeMarket, ${B.name}!`,"success")},I=()=>{p(null),we("You have been logged out","info")},S=()=>{const B=Xa.getItemCount();i(B)},D=()=>{O(!0)},P=()=>{O(!1)},U=()=>{O(!1),F(!0)},b=()=>{F(!1)},ge=B=>{S(),we(`Order ${B} completed successfully!`,"success")},Re=()=>{K(!0)},je=()=>{K(!1)},Me=()=>{Y(!0)},ie=()=>{Y(!1)};return r==="admin"?u.jsx(cn,{children:u.jsx(lw,{})}):r==="firebase"?u.jsx(cn,{children:u.jsx(QS,{})}):u.jsx(cn,{children:u.jsxs("div",{className:"min-h-screen bg-gray-50",children:[u.jsx(cn,{children:u.jsx($_,{cartCount:t,isMenuOpen:o,setIsMenuOpen:l,currentUser:h,onOpenAuth:ne,onLogout:I,onOpenCart:D,onOpenWatchlist:Re,onOpenAccountSummary:Me})}),u.jsxs("main",{children:[u.jsx(cn,{children:u.jsx(q_,{})}),u.jsx(cn,{children:u.jsx(G_,{})})]}),u.jsx(cn,{children:u.jsx(K_,{})}),m.isOpen&&u.jsx(cn,{children:u.jsx(Q_,{isOpen:m.isOpen,isRegister:m.isRegister,onClose:G,onLogin:ae,onRegister:k})}),_&&u.jsx(cn,{children:u.jsx(J_,{product:_,onClose:()=>E(null),currentUser:h,onOpenAuth:ne,onCartUpdate:S})}),N&&u.jsx(cn,{children:u.jsx(YS,{isOpen:N,onClose:P,onCartUpdate:S,onCheckout:U})}),L&&u.jsx(cn,{children:u.jsx(JS,{isOpen:L,onClose:b,onOrderComplete:ge})}),M&&u.jsx(cn,{children:u.jsx(XS,{isOpen:M,onClose:je})}),q&&u.jsx(cn,{children:u.jsx(ZS,{isOpen:q,onClose:ie,currentUser:h})})]})})}console.log(" LuxeMarket App loading...");function tC(){return u.jsx(J.Suspense,{fallback:u.jsx("div",{style:{minHeight:"100vh",backgroundColor:"#f3f4f6",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"Inter, sans-serif"},children:u.jsxs("div",{style:{textAlign:"center"},children:[u.jsx("h1",{style:{fontSize:"3rem",color:"#111827",marginBottom:"1rem",fontWeight:"bold"},children:"LuxeMarket"}),u.jsx("p",{style:{color:"#6b7280",fontSize:"1.2rem"},children:"Loading your premium shopping experience..."}),u.jsx("div",{style:{marginTop:"2rem",width:"200px",height:"4px",backgroundColor:"#e5e7eb",borderRadius:"2px",overflow:"hidden",margin:"2rem auto"},children:u.jsx("div",{style:{width:"100%",height:"100%",backgroundColor:"#2563eb",borderRadius:"2px",animation:"loading 2s ease-in-out infinite"}})}),u.jsx("style",{children:`
            @keyframes loading {
              0% { transform: translateX(-100%); }
              50% { transform: translateX(0%); }
              100% { transform: translateX(100%); }
            }
          `})]})}),children:u.jsx(eC,{})})}const un=(()=>{let r=[],e=!1;const t=async()=>{if(!e)try{console.log(" Initializing Firebase ProductManager..."),r=await bs.getAll(),e=!0,console.log(` Loaded ${r.length} products from Firebase`)}catch(q){console.error(" Failed to initialize Firebase ProductManager:",q),r=[]}};return{init:t,getAll:async()=>(e||await t(),r),getById:async q=>(e||await t(),r.find(Y=>Y.id===q)),getByCategory:async q=>(e||await t(),r.filter(Y=>Y.category===q)),getFeatured:async()=>(e||await t(),r.filter(q=>q.featured===!0)),getDailyDeals:async()=>(e||await t(),r.filter(q=>q.dailyDeal===!0)),search:async q=>{e||await t();const Y=q.toLowerCase();return r.filter(ne=>ne.name.toLowerCase().includes(Y)||ne.description?.toLowerCase().includes(Y)||ne.category.toLowerCase().includes(Y))},add:async q=>{try{const Y=await bs.create(q);return r.push(Y),console.log(" Product added to Firebase:",Y.name),Y}catch(Y){throw console.error(" Failed to add product:",Y),Y}},update:async(q,Y)=>{try{const ne=await bs.update(q,Y),G=r.findIndex(ae=>ae.id===q);return G!==-1&&(r[G]=ne),console.log(" Product updated in Firebase:",q),ne}catch(ne){throw console.error(" Failed to update product:",ne),ne}},remove:async q=>{try{return await bs.delete(q),r=r.filter(Y=>Y.id!==q),console.log(" Product deleted from Firebase:",q),!0}catch(Y){throw console.error(" Failed to delete product:",Y),Y}},refresh:async()=>{try{return r=await bs.getAll(),console.log(" Products refreshed from Firebase"),r}catch(q){throw console.error(" Failed to refresh products:",q),q}},getAllSync:()=>r,getByIdSync:q=>r.find(Y=>Y.id===q),getByCategorySync:q=>r.filter(Y=>Y.category===q),getFeaturedSync:()=>r.filter(q=>q.featured===!0),getDailyDealsSync:()=>r.filter(q=>q.dailyDeal===!0)}})();un.init().catch(console.error);typeof window<"u"&&(window.FirebaseProductManager=un);const nC={STORAGE_KEY:"luxemarket_watchlist",getWatchlist(){try{const r=localStorage.getItem(this.STORAGE_KEY);return r?JSON.parse(r):[]}catch(r){return console.error("Error loading watchlist:",r),[]}},isInWatchlist(r){return this.getWatchlist().includes(r)},addToWatchlist(r){try{const e=this.getWatchlist();return e.includes(r)?!1:(e.push(r),localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e)),!0)}catch(e){return console.error("Error adding to watchlist:",e),!1}},removeFromWatchlist(r){try{const t=this.getWatchlist().filter(i=>i!==r);return localStorage.setItem(this.STORAGE_KEY,JSON.stringify(t)),!0}catch(e){return console.error("Error removing from watchlist:",e),!1}},toggleWatchlist(r){return this.isInWatchlist(r)?(this.removeFromWatchlist(r),!1):(this.addToWatchlist(r),!0)},getCount(){return this.getWatchlist().length}};window.WatchlistManager=nC;window.ProductManager={getAll:()=>un.getAllSync(),getById:r=>un.getByIdSync(r),getByCategory:r=>un.getByCategorySync(r),getFeatured:()=>un.getFeaturedSync(),getDailyDeals:()=>un.getDailyDealsSync(),getAllAsync:()=>un.getAll(),getByIdAsync:r=>un.getById(r),add:r=>un.add(r),update:(r,e)=>un.update(r,e),delete:r=>un.remove(r),refresh:()=>un.refresh()};console.log(" Firebase ProductManager initialized");B_.createRoot(document.getElementById("root")).render(u.jsx(Ha.StrictMode,{children:u.jsx(tC,{})}));
