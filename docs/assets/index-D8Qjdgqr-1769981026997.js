(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function $_(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var gh={exports:{}},$a={},yh={exports:{}},je={};var gg;function H_(){if(gg)return je;gg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),b=Symbol.iterator;function N(R){return R===null||typeof R!="object"?null:(R=b&&R[b]||R["@@iterator"],typeof R=="function"?R:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Q=Object.assign,B={};function O(R,S,le){this.props=R,this.context=S,this.refs=B,this.updater=le||L}O.prototype.isReactComponent={},O.prototype.setState=function(R,S){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,S,"setState")},O.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function U(){}U.prototype=O.prototype;function z(R,S,le){this.props=R,this.context=S,this.refs=B,this.updater=le||L}var Y=z.prototype=new U;Y.constructor=z,Q(Y,O.prototype),Y.isPureReactComponent=!0;var ne=Array.isArray,W=Object.prototype.hasOwnProperty,ce={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function I(R,S,le){var de,fe={},_e=null,ke=null;if(S!=null)for(de in S.ref!==void 0&&(ke=S.ref),S.key!==void 0&&(_e=""+S.key),S)W.call(S,de)&&!C.hasOwnProperty(de)&&(fe[de]=S[de]);var Ue=arguments.length-2;if(Ue===1)fe.children=le;else if(1<Ue){for(var Ge=Array(Ue),$t=0;$t<Ue;$t++)Ge[$t]=arguments[$t+2];fe.children=Ge}if(R&&R.defaultProps)for(de in Ue=R.defaultProps,Ue)fe[de]===void 0&&(fe[de]=Ue[de]);return{$$typeof:r,type:R,key:_e,ref:ke,props:fe,_owner:ce.current}}function A(R,S){return{$$typeof:r,type:R.type,key:S,ref:R.ref,props:R.props,_owner:R._owner}}function D(R){return typeof R=="object"&&R!==null&&R.$$typeof===r}function P(R){var S={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(le){return S[le]})}var M=/\/+/g;function w(R,S){return typeof R=="object"&&R!==null&&R.key!=null?P(""+R.key):S.toString(36)}function ie(R,S,le,de,fe){var _e=typeof R;(_e==="undefined"||_e==="boolean")&&(R=null);var ke=!1;if(R===null)ke=!0;else switch(_e){case"string":case"number":ke=!0;break;case"object":switch(R.$$typeof){case r:case e:ke=!0}}if(ke)return ke=R,fe=fe(ke),R=de===""?"."+w(ke,0):de,ne(fe)?(le="",R!=null&&(le=R.replace(M,"$&/")+"/"),ie(fe,S,le,"",function($t){return $t})):fe!=null&&(D(fe)&&(fe=A(fe,le+(!fe.key||ke&&ke.key===fe.key?"":(""+fe.key).replace(M,"$&/")+"/")+R)),S.push(fe)),1;if(ke=0,de=de===""?".":de+":",ne(R))for(var Ue=0;Ue<R.length;Ue++){_e=R[Ue];var Ge=de+w(_e,Ue);ke+=ie(_e,S,le,Ge,fe)}else if(Ge=N(R),typeof Ge=="function")for(R=Ge.call(R),Ue=0;!(_e=R.next()).done;)_e=_e.value,Ge=de+w(_e,Ue++),ke+=ie(_e,S,le,Ge,fe);else if(_e==="object")throw S=String(R),Error("Objects are not valid as a React child (found: "+(S==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":S)+"). If you meant to render a collection of children, use an array instead.");return ke}function Se(R,S,le){if(R==null)return R;var de=[],fe=0;return ie(R,de,"","",function(_e){return S.call(le,_e,fe++)}),de}function Re(R){if(R._status===-1){var S=R._result;S=S(),S.then(function(le){(R._status===0||R._status===-1)&&(R._status=1,R._result=le)},function(le){(R._status===0||R._status===-1)&&(R._status=2,R._result=le)}),R._status===-1&&(R._status=0,R._result=S)}if(R._status===1)return R._result.default;throw R._result}var Le={current:null},oe={transition:null},F={ReactCurrentDispatcher:Le,ReactCurrentBatchConfig:oe,ReactCurrentOwner:ce};function X(){throw Error("act(...) is not supported in production builds of React.")}return je.Children={map:Se,forEach:function(R,S,le){Se(R,function(){S.apply(this,arguments)},le)},count:function(R){var S=0;return Se(R,function(){S++}),S},toArray:function(R){return Se(R,function(S){return S})||[]},only:function(R){if(!D(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},je.Component=O,je.Fragment=t,je.Profiler=o,je.PureComponent=z,je.StrictMode=s,je.Suspense=p,je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F,je.act=X,je.cloneElement=function(R,S,le){if(R==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+R+".");var de=Q({},R.props),fe=R.key,_e=R.ref,ke=R._owner;if(S!=null){if(S.ref!==void 0&&(_e=S.ref,ke=ce.current),S.key!==void 0&&(fe=""+S.key),R.type&&R.type.defaultProps)var Ue=R.type.defaultProps;for(Ge in S)W.call(S,Ge)&&!C.hasOwnProperty(Ge)&&(de[Ge]=S[Ge]===void 0&&Ue!==void 0?Ue[Ge]:S[Ge])}var Ge=arguments.length-2;if(Ge===1)de.children=le;else if(1<Ge){Ue=Array(Ge);for(var $t=0;$t<Ge;$t++)Ue[$t]=arguments[$t+2];de.children=Ue}return{$$typeof:r,type:R.type,key:fe,ref:_e,props:de,_owner:ke}},je.createContext=function(R){return R={$$typeof:h,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},R.Provider={$$typeof:l,_context:R},R.Consumer=R},je.createElement=I,je.createFactory=function(R){var S=I.bind(null,R);return S.type=R,S},je.createRef=function(){return{current:null}},je.forwardRef=function(R){return{$$typeof:m,render:R}},je.isValidElement=D,je.lazy=function(R){return{$$typeof:E,_payload:{_status:-1,_result:R},_init:Re}},je.memo=function(R,S){return{$$typeof:v,type:R,compare:S===void 0?null:S}},je.startTransition=function(R){var S=oe.transition;oe.transition={};try{R()}finally{oe.transition=S}},je.unstable_act=X,je.useCallback=function(R,S){return Le.current.useCallback(R,S)},je.useContext=function(R){return Le.current.useContext(R)},je.useDebugValue=function(){},je.useDeferredValue=function(R){return Le.current.useDeferredValue(R)},je.useEffect=function(R,S){return Le.current.useEffect(R,S)},je.useId=function(){return Le.current.useId()},je.useImperativeHandle=function(R,S,le){return Le.current.useImperativeHandle(R,S,le)},je.useInsertionEffect=function(R,S){return Le.current.useInsertionEffect(R,S)},je.useLayoutEffect=function(R,S){return Le.current.useLayoutEffect(R,S)},je.useMemo=function(R,S){return Le.current.useMemo(R,S)},je.useReducer=function(R,S,le){return Le.current.useReducer(R,S,le)},je.useRef=function(R){return Le.current.useRef(R)},je.useState=function(R){return Le.current.useState(R)},je.useSyncExternalStore=function(R,S,le){return Le.current.useSyncExternalStore(R,S,le)},je.useTransition=function(){return Le.current.useTransition()},je.version="18.3.1",je}var yg;function uf(){return yg||(yg=1,yh.exports=H_()),yh.exports}var vg;function q_(){if(vg)return $a;vg=1;var r=uf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(m,p,v){var E,b={},N=null,L=null;v!==void 0&&(N=""+v),p.key!==void 0&&(N=""+p.key),p.ref!==void 0&&(L=p.ref);for(E in p)s.call(p,E)&&!l.hasOwnProperty(E)&&(b[E]=p[E]);if(m&&m.defaultProps)for(E in p=m.defaultProps,p)b[E]===void 0&&(b[E]=p[E]);return{$$typeof:e,type:m,key:N,ref:L,props:b,_owner:o.current}}return $a.Fragment=t,$a.jsx=h,$a.jsxs=h,$a}var xg;function W_(){return xg||(xg=1,gh.exports=q_()),gh.exports}var u=W_(),Ja=uf();const J=$_(Ja);var Fc={},vh={exports:{}},Xt={},xh={exports:{}},_h={};var _g;function G_(){return _g||(_g=1,(function(r){function e(oe,F){var X=oe.length;oe.push(F);e:for(;0<X;){var R=X-1>>>1,S=oe[R];if(0<o(S,F))oe[R]=F,oe[X]=S,X=R;else break e}}function t(oe){return oe.length===0?null:oe[0]}function s(oe){if(oe.length===0)return null;var F=oe[0],X=oe.pop();if(X!==F){oe[0]=X;e:for(var R=0,S=oe.length,le=S>>>1;R<le;){var de=2*(R+1)-1,fe=oe[de],_e=de+1,ke=oe[_e];if(0>o(fe,X))_e<S&&0>o(ke,fe)?(oe[R]=ke,oe[_e]=X,R=_e):(oe[R]=fe,oe[de]=X,R=de);else if(_e<S&&0>o(ke,X))oe[R]=ke,oe[_e]=X,R=_e;else break e}}return F}function o(oe,F){var X=oe.sortIndex-F.sortIndex;return X!==0?X:oe.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,m=h.now();r.unstable_now=function(){return h.now()-m}}var p=[],v=[],E=1,b=null,N=3,L=!1,Q=!1,B=!1,O=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Y(oe){for(var F=t(v);F!==null;){if(F.callback===null)s(v);else if(F.startTime<=oe)s(v),F.sortIndex=F.expirationTime,e(p,F);else break;F=t(v)}}function ne(oe){if(B=!1,Y(oe),!Q)if(t(p)!==null)Q=!0,Re(W);else{var F=t(v);F!==null&&Le(ne,F.startTime-oe)}}function W(oe,F){Q=!1,B&&(B=!1,U(I),I=-1),L=!0;var X=N;try{for(Y(F),b=t(p);b!==null&&(!(b.expirationTime>F)||oe&&!P());){var R=b.callback;if(typeof R=="function"){b.callback=null,N=b.priorityLevel;var S=R(b.expirationTime<=F);F=r.unstable_now(),typeof S=="function"?b.callback=S:b===t(p)&&s(p),Y(F)}else s(p);b=t(p)}if(b!==null)var le=!0;else{var de=t(v);de!==null&&Le(ne,de.startTime-F),le=!1}return le}finally{b=null,N=X,L=!1}}var ce=!1,C=null,I=-1,A=5,D=-1;function P(){return!(r.unstable_now()-D<A)}function M(){if(C!==null){var oe=r.unstable_now();D=oe;var F=!0;try{F=C(!0,oe)}finally{F?w():(ce=!1,C=null)}}else ce=!1}var w;if(typeof z=="function")w=function(){z(M)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,Se=ie.port2;ie.port1.onmessage=M,w=function(){Se.postMessage(null)}}else w=function(){O(M,0)};function Re(oe){C=oe,ce||(ce=!0,w())}function Le(oe,F){I=O(function(){oe(r.unstable_now())},F)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(oe){oe.callback=null},r.unstable_continueExecution=function(){Q||L||(Q=!0,Re(W))},r.unstable_forceFrameRate=function(oe){0>oe||125<oe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<oe?Math.floor(1e3/oe):5},r.unstable_getCurrentPriorityLevel=function(){return N},r.unstable_getFirstCallbackNode=function(){return t(p)},r.unstable_next=function(oe){switch(N){case 1:case 2:case 3:var F=3;break;default:F=N}var X=N;N=F;try{return oe()}finally{N=X}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(oe,F){switch(oe){case 1:case 2:case 3:case 4:case 5:break;default:oe=3}var X=N;N=oe;try{return F()}finally{N=X}},r.unstable_scheduleCallback=function(oe,F,X){var R=r.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?R+X:R):X=R,oe){case 1:var S=-1;break;case 2:S=250;break;case 5:S=1073741823;break;case 4:S=1e4;break;default:S=5e3}return S=X+S,oe={id:E++,callback:F,priorityLevel:oe,startTime:X,expirationTime:S,sortIndex:-1},X>R?(oe.sortIndex=X,e(v,oe),t(p)===null&&oe===t(v)&&(B?(U(I),I=-1):B=!0,Le(ne,X-R))):(oe.sortIndex=S,e(p,oe),Q||L||(Q=!0,Re(W))),oe},r.unstable_shouldYield=P,r.unstable_wrapCallback=function(oe){var F=N;return function(){var X=N;N=F;try{return oe.apply(this,arguments)}finally{N=X}}}})(_h)),_h}var wg;function K_(){return wg||(wg=1,xh.exports=G_()),xh.exports}var Eg;function Q_(){if(Eg)return Xt;Eg=1;var r=uf(),e=K_();function t(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(n,i){h(n,i),h(n+"Capture",i)}function h(n,i){for(o[n]=i,n=0;n<i.length;n++)s.add(i[n])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E={},b={};function N(n){return p.call(b,n)?!0:p.call(E,n)?!1:v.test(n)?b[n]=!0:(E[n]=!0,!1)}function L(n,i,a,d){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return d?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function Q(n,i,a,d){if(i===null||typeof i>"u"||L(n,i,a,d))return!0;if(d)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function B(n,i,a,d,f,g,_){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=d,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=n,this.type=i,this.sanitizeURL=g,this.removeEmptyString=_}var O={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){O[n]=new B(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];O[i]=new B(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){O[n]=new B(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){O[n]=new B(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){O[n]=new B(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){O[n]=new B(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){O[n]=new B(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){O[n]=new B(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){O[n]=new B(n,5,!1,n.toLowerCase(),null,!1,!1)});var U=/[\-:]([a-z])/g;function z(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(U,z);O[i]=new B(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(U,z);O[i]=new B(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(U,z);O[i]=new B(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){O[n]=new B(n,1,!1,n.toLowerCase(),null,!1,!1)}),O.xlinkHref=new B("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){O[n]=new B(n,1,!1,n.toLowerCase(),null,!0,!0)});function Y(n,i,a,d){var f=O.hasOwnProperty(i)?O[i]:null;(f!==null?f.type!==0:d||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(Q(i,a,f,d)&&(a=null),d||f===null?N(i)&&(a===null?n.removeAttribute(i):n.setAttribute(i,""+a)):f.mustUseProperty?n[f.propertyName]=a===null?f.type===3?!1:"":a:(i=f.attributeName,d=f.attributeNamespace,a===null?n.removeAttribute(i):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,d?n.setAttributeNS(d,i,a):n.setAttribute(i,a))))}var ne=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,W=Symbol.for("react.element"),ce=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),P=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),ie=Symbol.for("react.suspense_list"),Se=Symbol.for("react.memo"),Re=Symbol.for("react.lazy"),Le=Symbol.for("react.offscreen"),oe=Symbol.iterator;function F(n){return n===null||typeof n!="object"?null:(n=oe&&n[oe]||n["@@iterator"],typeof n=="function"?n:null)}var X=Object.assign,R;function S(n){if(R===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);R=i&&i[1]||""}return`
`+R+n}var le=!1;function de(n,i){if(!n||le)return"";le=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(G){var d=G}Reflect.construct(n,[],i)}else{try{i.call()}catch(G){d=G}n.call(i.prototype)}else{try{throw Error()}catch(G){d=G}n()}}catch(G){if(G&&d&&typeof G.stack=="string"){for(var f=G.stack.split(`
`),g=d.stack.split(`
`),_=f.length-1,k=g.length-1;1<=_&&0<=k&&f[_]!==g[k];)k--;for(;1<=_&&0<=k;_--,k--)if(f[_]!==g[k]){if(_!==1||k!==1)do if(_--,k--,0>k||f[_]!==g[k]){var j=`
`+f[_].replace(" at new "," at ");return n.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",n.displayName)),j}while(1<=_&&0<=k);break}}}finally{le=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?S(n):""}function fe(n){switch(n.tag){case 5:return S(n.type);case 16:return S("Lazy");case 13:return S("Suspense");case 19:return S("SuspenseList");case 0:case 2:case 15:return n=de(n.type,!1),n;case 11:return n=de(n.type.render,!1),n;case 1:return n=de(n.type,!0),n;default:return""}}function _e(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case C:return"Fragment";case ce:return"Portal";case A:return"Profiler";case I:return"StrictMode";case w:return"Suspense";case ie:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case P:return(n.displayName||"Context")+".Consumer";case D:return(n._context.displayName||"Context")+".Provider";case M:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Se:return i=n.displayName||null,i!==null?i:_e(n.type)||"Memo";case Re:i=n._payload,n=n._init;try{return _e(n(i))}catch{}}return null}function ke(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _e(i);case 8:return i===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Ue(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ge(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function $t(n){var i=Ge(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),d=""+n[i];if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,g=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(_){d=""+_,g.call(this,_)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return d},setValue:function(_){d=""+_},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Ai(n){n._valueTracker||(n._valueTracker=$t(n))}function Qo(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),d="";return n&&(d=Ge(n)?n.checked?"true":"false":n.value),n=d,n!==a?(i.setValue(n),!0):!1}function zr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Pi(n,i){var a=i.checked;return X({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function Tl(n,i){var a=i.defaultValue==null?"":i.defaultValue,d=i.checked!=null?i.checked:i.defaultChecked;a=Ue(i.value!=null?i.value:a),n._wrapperState={initialChecked:d,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Ri(n,i){i=i.checked,i!=null&&Y(n,"checked",i,!1)}function Us(n,i){Ri(n,i);var a=Ue(i.value),d=i.type;if(a!=null)d==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(d==="submit"||d==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?ht(n,i.type,a):i.hasOwnProperty("defaultValue")&&ht(n,i.type,Ue(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function Yo(n,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var d=i.type;if(!(d!=="submit"&&d!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,a||i===n.value||(n.value=i),n.defaultValue=i}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function ht(n,i,a){(i!=="number"||zr(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var at=Array.isArray;function bn(n,i,a,d){if(n=n.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=i.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&d&&(n[a].defaultSelected=!0)}else{for(a=""+Ue(a),i=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,d&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function Jo(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return X({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Xo(n,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(t(92));if(at(a)){if(1<a.length)throw Error(t(93));a=a[0]}i=a}i==null&&(i=""),a=i}n._wrapperState={initialValue:Ue(a)}}function Il(n,i){var a=Ue(i.value),d=Ue(i.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),i.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),d!=null&&(n.defaultValue=""+d)}function $r(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function Zo(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ji(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?Zo(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Hr,Nl=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,d,f){MSApp.execUnsafeLocalFunction(function(){return n(i,a,d,f)})}:n})(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(Hr=Hr||document.createElement("div"),Hr.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Hr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function Bs(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var qr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Sl=["Webkit","ms","Moz","O"];Object.keys(qr).forEach(function(n){Sl.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),qr[i]=qr[n]})});function Wr(n,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||qr.hasOwnProperty(n)&&qr[n]?(""+i).trim():i+"px"}function Di(n,i){n=n.style;for(var a in i)if(i.hasOwnProperty(a)){var d=a.indexOf("--")===0,f=Wr(a,i[a],d);a==="float"&&(a="cssFloat"),d?n.setProperty(a,f):n[a]=f}}var ea=X({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Tn(n,i){if(i){if(ea[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function Vi(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gr=null;function Oi(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var pr=null,gr=null,it=null;function ta(n){if(n=Ca(n)){if(typeof pr!="function")throw Error(t(280));var i=n.stateNode;i&&(i=ec(i),pr(n.stateNode,n.type,i))}}function Kr(n){gr?it?it.push(n):it=[n]:gr=n}function Qr(){if(gr){var n=gr,i=it;if(it=gr=null,ta(n),i)for(n=0;n<i.length;n++)ta(i[n])}}function Cl(n,i){return n(i)}function kl(){}var Fn=!1;function Al(n,i,a){if(Fn)return n(i,a);Fn=!0;try{return Cl(n,i,a)}finally{Fn=!1,(gr!==null||it!==null)&&(kl(),Qr())}}function zs(n,i){var a=n.stateNode;if(a===null)return null;var d=ec(a);if(d===null)return null;a=d[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(n=n.type,d=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!d;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,i,typeof a));return a}var Yr=!1;if(m)try{var Jr={};Object.defineProperty(Jr,"passive",{get:function(){Yr=!0}}),window.addEventListener("test",Jr,Jr),window.removeEventListener("test",Jr,Jr)}catch{Yr=!1}function Pl(n,i,a,d,f,g,_,k,j){var G=Array.prototype.slice.call(arguments,3);try{i.apply(a,G)}catch(re){this.onError(re)}}var yr=!1,Un=null,Mi=!1,fn=null,Rl={onError:function(n){yr=!0,Un=n}};function jl(n,i,a,d,f,g,_,k,j){yr=!1,Un=null,Pl.apply(Rl,arguments)}function na(n,i,a,d,f,g,_,k,j){if(jl.apply(this,arguments),yr){if(yr){var G=Un;yr=!1,Un=null}else throw Error(t(198));Mi||(Mi=!0,fn=G)}}function In(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function ra(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function Dl(n){if(In(n)!==n)throw Error(t(188))}function Vl(n){var i=n.alternate;if(!i){if(i=In(n),i===null)throw Error(t(188));return i!==n?null:n}for(var a=n,d=i;;){var f=a.return;if(f===null)break;var g=f.alternate;if(g===null){if(d=f.return,d!==null){a=d;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===a)return Dl(f),n;if(g===d)return Dl(f),i;g=g.sibling}throw Error(t(188))}if(a.return!==d.return)a=f,d=g;else{for(var _=!1,k=f.child;k;){if(k===a){_=!0,a=f,d=g;break}if(k===d){_=!0,d=f,a=g;break}k=k.sibling}if(!_){for(k=g.child;k;){if(k===a){_=!0,a=g,d=f;break}if(k===d){_=!0,d=g,a=f;break}k=k.sibling}if(!_)throw Error(t(189))}}if(a.alternate!==d)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:i}function Ol(n){return n=Vl(n),n!==null?$s(n):null}function $s(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=$s(n);if(i!==null)return i;n=n.sibling}return null}var sa=e.unstable_scheduleCallback,Li=e.unstable_cancelCallback,Hs=e.unstable_shouldYield,vr=e.unstable_requestPaint,Je=e.unstable_now,Gu=e.unstable_getCurrentPriorityLevel,Fi=e.unstable_ImmediatePriority,ia=e.unstable_UserBlockingPriority,qs=e.unstable_NormalPriority,oa=e.unstable_LowPriority,Ui=e.unstable_IdlePriority,Ws=null,tn=null;function Ml(n){if(tn&&typeof tn.onCommitFiberRoot=="function")try{tn.onCommitFiberRoot(Ws,n,void 0,(n.current.flags&128)===128)}catch{}}var nn=Math.clz32?Math.clz32:Gs,Bn=Math.log,mn=Math.LN2;function Gs(n){return n>>>=0,n===0?32:31-(Bn(n)/mn|0)|0}var zn=64,Xr=4194304;function $e(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function xr(n,i){var a=n.pendingLanes;if(a===0)return 0;var d=0,f=n.suspendedLanes,g=n.pingedLanes,_=a&268435455;if(_!==0){var k=_&~f;k!==0?d=$e(k):(g&=_,g!==0&&(d=$e(g)))}else _=a&~f,_!==0?d=$e(_):g!==0&&(d=$e(g));if(d===0)return 0;if(i!==0&&i!==d&&(i&f)===0&&(f=d&-d,g=i&-i,f>=g||f===16&&(g&4194240)!==0))return i;if((d&4)!==0&&(d|=a&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=d;0<i;)a=31-nn(i),f=1<<a,d|=n[a],i&=~f;return d}function Ks(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qs(n,i){for(var a=n.suspendedLanes,d=n.pingedLanes,f=n.expirationTimes,g=n.pendingLanes;0<g;){var _=31-nn(g),k=1<<_,j=f[_];j===-1?((k&a)===0||(k&d)!==0)&&(f[_]=Ks(k,i)):j<=i&&(n.expiredLanes|=k),g&=~k}}function aa(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function la(){var n=zn;return zn<<=1,(zn&4194240)===0&&(zn=64),n}function ca(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function Ys(n,i,a){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-nn(i),n[i]=a}function Ku(n,i){var a=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var d=n.eventTimes;for(n=n.expirationTimes;0<a;){var f=31-nn(a),g=1<<f;i[f]=0,d[f]=-1,n[f]=-1,a&=~g}}function ua(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var d=31-nn(a),f=1<<d;f&i|n[d]&i&&(n[d]|=i),a&=~f}}var Me=0;function $n(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var da,Bi,ha,fa,ma,Hn=!1,zi=[],qn=null,Wn=null,It=null,Js=new Map,_r=new Map,rn=[],Ll="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zr(n,i){switch(n){case"focusin":case"focusout":qn=null;break;case"dragenter":case"dragleave":Wn=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":Js.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":_r.delete(i.pointerId)}}function Nn(n,i,a,d,f,g){return n===null||n.nativeEvent!==g?(n={blockedOn:i,domEventName:a,eventSystemFlags:d,nativeEvent:g,targetContainers:[f]},i!==null&&(i=Ca(i),i!==null&&Bi(i)),n):(n.eventSystemFlags|=d,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function Fl(n,i,a,d,f){switch(i){case"focusin":return qn=Nn(qn,n,i,a,d,f),!0;case"dragenter":return Wn=Nn(Wn,n,i,a,d,f),!0;case"mouseover":return It=Nn(It,n,i,a,d,f),!0;case"pointerover":var g=f.pointerId;return Js.set(g,Nn(Js.get(g)||null,n,i,a,d,f)),!0;case"gotpointercapture":return g=f.pointerId,_r.set(g,Nn(_r.get(g)||null,n,i,a,d,f)),!0}return!1}function $i(n){var i=ti(n.target);if(i!==null){var a=In(i);if(a!==null){if(i=a.tag,i===13){if(i=ra(a),i!==null){n.blockedOn=i,ma(n.priority,function(){ha(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ke(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=Hi(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var d=new a.constructor(a.type,a);Gr=d,a.target.dispatchEvent(d),Gr=null}else return i=Ca(a),i!==null&&Bi(i),n.blockedOn=a,!1;i.shift()}return!0}function Ul(n,i,a){Ke(n)&&a.delete(i)}function Qu(){Hn=!1,qn!==null&&Ke(qn)&&(qn=null),Wn!==null&&Ke(Wn)&&(Wn=null),It!==null&&Ke(It)&&(It=null),Js.forEach(Ul),_r.forEach(Ul)}function es(n,i){n.blockedOn===i&&(n.blockedOn=null,Hn||(Hn=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Qu)))}function ts(n){function i(f){return es(f,n)}if(0<zi.length){es(zi[0],n);for(var a=1;a<zi.length;a++){var d=zi[a];d.blockedOn===n&&(d.blockedOn=null)}}for(qn!==null&&es(qn,n),Wn!==null&&es(Wn,n),It!==null&&es(It,n),Js.forEach(i),_r.forEach(i),a=0;a<rn.length;a++)d=rn[a],d.blockedOn===n&&(d.blockedOn=null);for(;0<rn.length&&(a=rn[0],a.blockedOn===null);)$i(a),a.blockedOn===null&&rn.shift()}var wr=ne.ReactCurrentBatchConfig,Er=!0;function Gn(n,i,a,d){var f=Me,g=wr.transition;wr.transition=null;try{Me=1,pa(n,i,a,d)}finally{Me=f,wr.transition=g}}function Bl(n,i,a,d){var f=Me,g=wr.transition;wr.transition=null;try{Me=4,pa(n,i,a,d)}finally{Me=f,wr.transition=g}}function pa(n,i,a,d){if(Er){var f=Hi(n,i,a,d);if(f===null)od(n,i,d,Kn,a),Zr(n,d);else if(Fl(f,n,i,a,d))d.stopPropagation();else if(Zr(n,d),i&4&&-1<Ll.indexOf(n)){for(;f!==null;){var g=Ca(f);if(g!==null&&da(g),g=Hi(n,i,a,d),g===null&&od(n,i,d,Kn,a),g===f)break;f=g}f!==null&&d.stopPropagation()}else od(n,i,d,null,a)}}var Kn=null;function Hi(n,i,a,d){if(Kn=null,n=Oi(d),n=ti(n),n!==null)if(i=In(n),i===null)n=null;else if(a=i.tag,a===13){if(n=ra(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return Kn=n,null}function qi(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Gu()){case Fi:return 1;case ia:return 4;case qs:case oa:return 16;case Ui:return 536870912;default:return 16}default:return 16}}var sn=null,Wi=null,br=null;function zl(){if(br)return br;var n,i=Wi,a=i.length,d,f="value"in sn?sn.value:sn.textContent,g=f.length;for(n=0;n<a&&i[n]===f[n];n++);var _=a-n;for(d=1;d<=_&&i[a-d]===f[g-d];d++);return br=f.slice(n,1<d?1-d:void 0)}function Xs(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Qn(){return!0}function ga(){return!1}function Rt(n){function i(a,d,f,g,_){this._reactName=a,this._targetInst=f,this.type=d,this.nativeEvent=g,this.target=_,this.currentTarget=null;for(var k in n)n.hasOwnProperty(k)&&(a=n[k],this[k]=a?a(g):g[k]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Qn:ga,this.isPropagationStopped=ga,this}return X(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Qn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Qn)},persist:function(){},isPersistent:Qn}),i}var Yn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zs=Rt(Yn),ns=X({},Yn,{view:0,detail:0}),Gi=Rt(ns),Ki,Qi,on,ei=X({},ns,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ae,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==on&&(on&&n.type==="mousemove"?(Ki=n.screenX-on.screenX,Qi=n.screenY-on.screenY):Qi=Ki=0,on=n),Ki)},movementY:function(n){return"movementY"in n?n.movementY:Qi}}),ya=Rt(ei),$l=X({},ei,{dataTransfer:0}),Hl=Rt($l),Yi=X({},ns,{relatedTarget:0}),Nt=Rt(Yi),ql=X({},Yn,{animationName:0,elapsedTime:0,pseudoElement:0}),Wl=Rt(ql),rs=X({},Yn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),c=Rt(rs),y=X({},Yn,{data:0}),x=Rt(y),T={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},H={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},K={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ue(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=K[n])?!!i[n]:!1}function Ae(){return ue}var lt=X({},ns,{key:function(n){if(n.key){var i=T[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Xs(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?H[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ae,charCode:function(n){return n.type==="keypress"?Xs(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Xs(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),We=Rt(lt),ft=X({},ei,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),an=Rt(ft),Tr=X({},ns,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ae}),Jn=Rt(Tr),Xn=X({},Yn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ji=Rt(Xn),va=X({},ei,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Mx=Rt(va),Lx=[9,13,27,32],Yu=m&&"CompositionEvent"in window,xa=null;m&&"documentMode"in document&&(xa=document.documentMode);var Fx=m&&"TextEvent"in window&&!xa,lm=m&&(!Yu||xa&&8<xa&&11>=xa),cm=" ",um=!1;function dm(n,i){switch(n){case"keyup":return Lx.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hm(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Xi=!1;function Ux(n,i){switch(n){case"compositionend":return hm(i);case"keypress":return i.which!==32?null:(um=!0,cm);case"textInput":return n=i.data,n===cm&&um?null:n;default:return null}}function Bx(n,i){if(Xi)return n==="compositionend"||!Yu&&dm(n,i)?(n=zl(),br=Wi=sn=null,Xi=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return lm&&i.locale!=="ko"?null:i.data;default:return null}}var zx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fm(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!zx[n.type]:i==="textarea"}function mm(n,i,a,d){Kr(d),i=Jl(i,"onChange"),0<i.length&&(a=new Zs("onChange","change",null,a,d),n.push({event:a,listeners:i}))}var _a=null,wa=null;function $x(n){Rm(n,0)}function Gl(n){var i=ro(n);if(Qo(i))return n}function Hx(n,i){if(n==="change")return i}var pm=!1;if(m){var Ju;if(m){var Xu="oninput"in document;if(!Xu){var gm=document.createElement("div");gm.setAttribute("oninput","return;"),Xu=typeof gm.oninput=="function"}Ju=Xu}else Ju=!1;pm=Ju&&(!document.documentMode||9<document.documentMode)}function ym(){_a&&(_a.detachEvent("onpropertychange",vm),wa=_a=null)}function vm(n){if(n.propertyName==="value"&&Gl(wa)){var i=[];mm(i,wa,n,Oi(n)),Al($x,i)}}function qx(n,i,a){n==="focusin"?(ym(),_a=i,wa=a,_a.attachEvent("onpropertychange",vm)):n==="focusout"&&ym()}function Wx(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Gl(wa)}function Gx(n,i){if(n==="click")return Gl(i)}function Kx(n,i){if(n==="input"||n==="change")return Gl(i)}function Qx(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Sn=typeof Object.is=="function"?Object.is:Qx;function Ea(n,i){if(Sn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),d=Object.keys(i);if(a.length!==d.length)return!1;for(d=0;d<a.length;d++){var f=a[d];if(!p.call(i,f)||!Sn(n[f],i[f]))return!1}return!0}function xm(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function _m(n,i){var a=xm(n);n=0;for(var d;a;){if(a.nodeType===3){if(d=n+a.textContent.length,n<=i&&d>=i)return{node:a,offset:i-n};n=d}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=xm(a)}}function wm(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?wm(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Em(){for(var n=window,i=zr();i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=zr(n.document)}return i}function Zu(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function Yx(n){var i=Em(),a=n.focusedElem,d=n.selectionRange;if(i!==a&&a&&a.ownerDocument&&wm(a.ownerDocument.documentElement,a)){if(d!==null&&Zu(a)){if(i=d.start,n=d.end,n===void 0&&(n=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(n,a.value.length);else if(n=(i=a.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var f=a.textContent.length,g=Math.min(d.start,f);d=d.end===void 0?g:Math.min(d.end,f),!n.extend&&g>d&&(f=d,d=g,g=f),f=_m(a,g);var _=_m(a,d);f&&_&&(n.rangeCount!==1||n.anchorNode!==f.node||n.anchorOffset!==f.offset||n.focusNode!==_.node||n.focusOffset!==_.offset)&&(i=i.createRange(),i.setStart(f.node,f.offset),n.removeAllRanges(),g>d?(n.addRange(i),n.extend(_.node,_.offset)):(i.setEnd(_.node,_.offset),n.addRange(i)))}}for(i=[],n=a;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)n=i[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Jx=m&&"documentMode"in document&&11>=document.documentMode,Zi=null,ed=null,ba=null,td=!1;function bm(n,i,a){var d=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;td||Zi==null||Zi!==zr(d)||(d=Zi,"selectionStart"in d&&Zu(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),ba&&Ea(ba,d)||(ba=d,d=Jl(ed,"onSelect"),0<d.length&&(i=new Zs("onSelect","select",null,i,a),n.push({event:i,listeners:d}),i.target=Zi)))}function Kl(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var eo={animationend:Kl("Animation","AnimationEnd"),animationiteration:Kl("Animation","AnimationIteration"),animationstart:Kl("Animation","AnimationStart"),transitionend:Kl("Transition","TransitionEnd")},nd={},Tm={};m&&(Tm=document.createElement("div").style,"AnimationEvent"in window||(delete eo.animationend.animation,delete eo.animationiteration.animation,delete eo.animationstart.animation),"TransitionEvent"in window||delete eo.transitionend.transition);function Ql(n){if(nd[n])return nd[n];if(!eo[n])return n;var i=eo[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in Tm)return nd[n]=i[a];return n}var Im=Ql("animationend"),Nm=Ql("animationiteration"),Sm=Ql("animationstart"),Cm=Ql("transitionend"),km=new Map,Am="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ss(n,i){km.set(n,i),l(i,[n])}for(var rd=0;rd<Am.length;rd++){var sd=Am[rd],Xx=sd.toLowerCase(),Zx=sd[0].toUpperCase()+sd.slice(1);ss(Xx,"on"+Zx)}ss(Im,"onAnimationEnd"),ss(Nm,"onAnimationIteration"),ss(Sm,"onAnimationStart"),ss("dblclick","onDoubleClick"),ss("focusin","onFocus"),ss("focusout","onBlur"),ss(Cm,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ta="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),e_=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ta));function Pm(n,i,a){var d=n.type||"unknown-event";n.currentTarget=a,na(d,i,void 0,n),n.currentTarget=null}function Rm(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var d=n[a],f=d.event;d=d.listeners;e:{var g=void 0;if(i)for(var _=d.length-1;0<=_;_--){var k=d[_],j=k.instance,G=k.currentTarget;if(k=k.listener,j!==g&&f.isPropagationStopped())break e;Pm(f,k,G),g=j}else for(_=0;_<d.length;_++){if(k=d[_],j=k.instance,G=k.currentTarget,k=k.listener,j!==g&&f.isPropagationStopped())break e;Pm(f,k,G),g=j}}}if(Mi)throw n=fn,Mi=!1,fn=null,n}function Xe(n,i){var a=i[hd];a===void 0&&(a=i[hd]=new Set);var d=n+"__bubble";a.has(d)||(jm(i,n,2,!1),a.add(d))}function id(n,i,a){var d=0;i&&(d|=4),jm(a,n,d,i)}var Yl="_reactListening"+Math.random().toString(36).slice(2);function Ia(n){if(!n[Yl]){n[Yl]=!0,s.forEach(function(a){a!=="selectionchange"&&(e_.has(a)||id(a,!1,n),id(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Yl]||(i[Yl]=!0,id("selectionchange",!1,i))}}function jm(n,i,a,d){switch(qi(i)){case 1:var f=Gn;break;case 4:f=Bl;break;default:f=pa}a=f.bind(null,i,a,n),f=void 0,!Yr||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),d?f!==void 0?n.addEventListener(i,a,{capture:!0,passive:f}):n.addEventListener(i,a,!0):f!==void 0?n.addEventListener(i,a,{passive:f}):n.addEventListener(i,a,!1)}function od(n,i,a,d,f){var g=d;if((i&1)===0&&(i&2)===0&&d!==null)e:for(;;){if(d===null)return;var _=d.tag;if(_===3||_===4){var k=d.stateNode.containerInfo;if(k===f||k.nodeType===8&&k.parentNode===f)break;if(_===4)for(_=d.return;_!==null;){var j=_.tag;if((j===3||j===4)&&(j=_.stateNode.containerInfo,j===f||j.nodeType===8&&j.parentNode===f))return;_=_.return}for(;k!==null;){if(_=ti(k),_===null)return;if(j=_.tag,j===5||j===6){d=g=_;continue e}k=k.parentNode}}d=d.return}Al(function(){var G=g,re=Oi(a),se=[];e:{var te=km.get(n);if(te!==void 0){var me=Zs,ye=n;switch(n){case"keypress":if(Xs(a)===0)break e;case"keydown":case"keyup":me=We;break;case"focusin":ye="focus",me=Nt;break;case"focusout":ye="blur",me=Nt;break;case"beforeblur":case"afterblur":me=Nt;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":me=ya;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":me=Hl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":me=Jn;break;case Im:case Nm:case Sm:me=Wl;break;case Cm:me=Ji;break;case"scroll":me=Gi;break;case"wheel":me=Mx;break;case"copy":case"cut":case"paste":me=c;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":me=an}var ve=(i&4)!==0,ct=!ve&&n==="scroll",$=ve?te!==null?te+"Capture":null:te;ve=[];for(var V=G,q;V!==null;){q=V;var ae=q.stateNode;if(q.tag===5&&ae!==null&&(q=ae,$!==null&&(ae=zs(V,$),ae!=null&&ve.push(Na(V,ae,q)))),ct)break;V=V.return}0<ve.length&&(te=new me(te,ye,null,a,re),se.push({event:te,listeners:ve}))}}if((i&7)===0){e:{if(te=n==="mouseover"||n==="pointerover",me=n==="mouseout"||n==="pointerout",te&&a!==Gr&&(ye=a.relatedTarget||a.fromElement)&&(ti(ye)||ye[Ir]))break e;if((me||te)&&(te=re.window===re?re:(te=re.ownerDocument)?te.defaultView||te.parentWindow:window,me?(ye=a.relatedTarget||a.toElement,me=G,ye=ye?ti(ye):null,ye!==null&&(ct=In(ye),ye!==ct||ye.tag!==5&&ye.tag!==6)&&(ye=null)):(me=null,ye=G),me!==ye)){if(ve=ya,ae="onMouseLeave",$="onMouseEnter",V="mouse",(n==="pointerout"||n==="pointerover")&&(ve=an,ae="onPointerLeave",$="onPointerEnter",V="pointer"),ct=me==null?te:ro(me),q=ye==null?te:ro(ye),te=new ve(ae,V+"leave",me,a,re),te.target=ct,te.relatedTarget=q,ae=null,ti(re)===G&&(ve=new ve($,V+"enter",ye,a,re),ve.target=q,ve.relatedTarget=ct,ae=ve),ct=ae,me&&ye)t:{for(ve=me,$=ye,V=0,q=ve;q;q=to(q))V++;for(q=0,ae=$;ae;ae=to(ae))q++;for(;0<V-q;)ve=to(ve),V--;for(;0<q-V;)$=to($),q--;for(;V--;){if(ve===$||$!==null&&ve===$.alternate)break t;ve=to(ve),$=to($)}ve=null}else ve=null;me!==null&&Dm(se,te,me,ve,!1),ye!==null&&ct!==null&&Dm(se,ct,ye,ve,!0)}}e:{if(te=G?ro(G):window,me=te.nodeName&&te.nodeName.toLowerCase(),me==="select"||me==="input"&&te.type==="file")var xe=Hx;else if(fm(te))if(pm)xe=Kx;else{xe=Wx;var Ee=qx}else(me=te.nodeName)&&me.toLowerCase()==="input"&&(te.type==="checkbox"||te.type==="radio")&&(xe=Gx);if(xe&&(xe=xe(n,G))){mm(se,xe,a,re);break e}Ee&&Ee(n,te,G),n==="focusout"&&(Ee=te._wrapperState)&&Ee.controlled&&te.type==="number"&&ht(te,"number",te.value)}switch(Ee=G?ro(G):window,n){case"focusin":(fm(Ee)||Ee.contentEditable==="true")&&(Zi=Ee,ed=G,ba=null);break;case"focusout":ba=ed=Zi=null;break;case"mousedown":td=!0;break;case"contextmenu":case"mouseup":case"dragend":td=!1,bm(se,a,re);break;case"selectionchange":if(Jx)break;case"keydown":case"keyup":bm(se,a,re)}var be;if(Yu)e:{switch(n){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else Xi?dm(n,a)&&(Ie="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Ie="onCompositionStart");Ie&&(lm&&a.locale!=="ko"&&(Xi||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&Xi&&(be=zl()):(sn=re,Wi="value"in sn?sn.value:sn.textContent,Xi=!0)),Ee=Jl(G,Ie),0<Ee.length&&(Ie=new x(Ie,n,null,a,re),se.push({event:Ie,listeners:Ee}),be?Ie.data=be:(be=hm(a),be!==null&&(Ie.data=be)))),(be=Fx?Ux(n,a):Bx(n,a))&&(G=Jl(G,"onBeforeInput"),0<G.length&&(re=new x("onBeforeInput","beforeinput",null,a,re),se.push({event:re,listeners:G}),re.data=be))}Rm(se,i)})}function Na(n,i,a){return{instance:n,listener:i,currentTarget:a}}function Jl(n,i){for(var a=i+"Capture",d=[];n!==null;){var f=n,g=f.stateNode;f.tag===5&&g!==null&&(f=g,g=zs(n,a),g!=null&&d.unshift(Na(n,g,f)),g=zs(n,i),g!=null&&d.push(Na(n,g,f))),n=n.return}return d}function to(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Dm(n,i,a,d,f){for(var g=i._reactName,_=[];a!==null&&a!==d;){var k=a,j=k.alternate,G=k.stateNode;if(j!==null&&j===d)break;k.tag===5&&G!==null&&(k=G,f?(j=zs(a,g),j!=null&&_.unshift(Na(a,j,k))):f||(j=zs(a,g),j!=null&&_.push(Na(a,j,k)))),a=a.return}_.length!==0&&n.push({event:i,listeners:_})}var t_=/\r\n?/g,n_=/\u0000|\uFFFD/g;function Vm(n){return(typeof n=="string"?n:""+n).replace(t_,`
`).replace(n_,"")}function Xl(n,i,a){if(i=Vm(i),Vm(n)!==i&&a)throw Error(t(425))}function Zl(){}var ad=null,ld=null;function cd(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var ud=typeof setTimeout=="function"?setTimeout:void 0,r_=typeof clearTimeout=="function"?clearTimeout:void 0,Om=typeof Promise=="function"?Promise:void 0,s_=typeof queueMicrotask=="function"?queueMicrotask:typeof Om<"u"?function(n){return Om.resolve(null).then(n).catch(i_)}:ud;function i_(n){setTimeout(function(){throw n})}function dd(n,i){var a=i,d=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(d===0){n.removeChild(f),ts(i);return}d--}else a!=="$"&&a!=="$?"&&a!=="$!"||d++;a=f}while(a);ts(i)}function is(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function Mm(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}var no=Math.random().toString(36).slice(2),Zn="__reactFiber$"+no,Sa="__reactProps$"+no,Ir="__reactContainer$"+no,hd="__reactEvents$"+no,o_="__reactListeners$"+no,a_="__reactHandles$"+no;function ti(n){var i=n[Zn];if(i)return i;for(var a=n.parentNode;a;){if(i=a[Ir]||a[Zn]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=Mm(n);n!==null;){if(a=n[Zn])return a;n=Mm(n)}return i}n=a,a=n.parentNode}return null}function Ca(n){return n=n[Zn]||n[Ir],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function ro(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function ec(n){return n[Sa]||null}var fd=[],so=-1;function os(n){return{current:n}}function Ze(n){0>so||(n.current=fd[so],fd[so]=null,so--)}function Qe(n,i){so++,fd[so]=n.current,n.current=i}var as={},jt=os(as),Gt=os(!1),ni=as;function io(n,i){var a=n.type.contextTypes;if(!a)return as;var d=n.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===i)return d.__reactInternalMemoizedMaskedChildContext;var f={},g;for(g in a)f[g]=i[g];return d&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=f),f}function Kt(n){return n=n.childContextTypes,n!=null}function tc(){Ze(Gt),Ze(jt)}function Lm(n,i,a){if(jt.current!==as)throw Error(t(168));Qe(jt,i),Qe(Gt,a)}function Fm(n,i,a){var d=n.stateNode;if(i=i.childContextTypes,typeof d.getChildContext!="function")return a;d=d.getChildContext();for(var f in d)if(!(f in i))throw Error(t(108,ke(n)||"Unknown",f));return X({},a,d)}function nc(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||as,ni=jt.current,Qe(jt,n),Qe(Gt,Gt.current),!0}function Um(n,i,a){var d=n.stateNode;if(!d)throw Error(t(169));a?(n=Fm(n,i,ni),d.__reactInternalMemoizedMergedChildContext=n,Ze(Gt),Ze(jt),Qe(jt,n)):Ze(Gt),Qe(Gt,a)}var Nr=null,rc=!1,md=!1;function Bm(n){Nr===null?Nr=[n]:Nr.push(n)}function l_(n){rc=!0,Bm(n)}function ls(){if(!md&&Nr!==null){md=!0;var n=0,i=Me;try{var a=Nr;for(Me=1;n<a.length;n++){var d=a[n];do d=d(!0);while(d!==null)}Nr=null,rc=!1}catch(f){throw Nr!==null&&(Nr=Nr.slice(n+1)),sa(Fi,ls),f}finally{Me=i,md=!1}}return null}var oo=[],ao=0,sc=null,ic=0,pn=[],gn=0,ri=null,Sr=1,Cr="";function si(n,i){oo[ao++]=ic,oo[ao++]=sc,sc=n,ic=i}function zm(n,i,a){pn[gn++]=Sr,pn[gn++]=Cr,pn[gn++]=ri,ri=n;var d=Sr;n=Cr;var f=32-nn(d)-1;d&=~(1<<f),a+=1;var g=32-nn(i)+f;if(30<g){var _=f-f%5;g=(d&(1<<_)-1).toString(32),d>>=_,f-=_,Sr=1<<32-nn(i)+f|a<<f|d,Cr=g+n}else Sr=1<<g|a<<f|d,Cr=n}function pd(n){n.return!==null&&(si(n,1),zm(n,1,0))}function gd(n){for(;n===sc;)sc=oo[--ao],oo[ao]=null,ic=oo[--ao],oo[ao]=null;for(;n===ri;)ri=pn[--gn],pn[gn]=null,Cr=pn[--gn],pn[gn]=null,Sr=pn[--gn],pn[gn]=null}var ln=null,cn=null,tt=!1,Cn=null;function $m(n,i){var a=_n(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=n,i=n.deletions,i===null?(n.deletions=[a],n.flags|=16):i.push(a)}function Hm(n,i){switch(n.tag){case 5:var a=n.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,ln=n,cn=is(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,ln=n,cn=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=ri!==null?{id:Sr,overflow:Cr}:null,n.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=_n(18,null,null,0),a.stateNode=i,a.return=n,n.child=a,ln=n,cn=null,!0):!1;default:return!1}}function yd(n){return(n.mode&1)!==0&&(n.flags&128)===0}function vd(n){if(tt){var i=cn;if(i){var a=i;if(!Hm(n,i)){if(yd(n))throw Error(t(418));i=is(a.nextSibling);var d=ln;i&&Hm(n,i)?$m(d,a):(n.flags=n.flags&-4097|2,tt=!1,ln=n)}}else{if(yd(n))throw Error(t(418));n.flags=n.flags&-4097|2,tt=!1,ln=n}}}function qm(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;ln=n}function oc(n){if(n!==ln)return!1;if(!tt)return qm(n),tt=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!cd(n.type,n.memoizedProps)),i&&(i=cn)){if(yd(n))throw Wm(),Error(t(418));for(;i;)$m(n,i),i=is(i.nextSibling)}if(qm(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(i===0){cn=is(n.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}n=n.nextSibling}cn=null}}else cn=ln?is(n.stateNode.nextSibling):null;return!0}function Wm(){for(var n=cn;n;)n=is(n.nextSibling)}function lo(){cn=ln=null,tt=!1}function xd(n){Cn===null?Cn=[n]:Cn.push(n)}var c_=ne.ReactCurrentBatchConfig;function ka(n,i,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var d=a.stateNode}if(!d)throw Error(t(147,n));var f=d,g=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===g?i.ref:(i=function(_){var k=f.refs;_===null?delete k[g]:k[g]=_},i._stringRef=g,i)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function ac(n,i){throw n=Object.prototype.toString.call(i),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function Gm(n){var i=n._init;return i(n._payload)}function Km(n){function i($,V){if(n){var q=$.deletions;q===null?($.deletions=[V],$.flags|=16):q.push(V)}}function a($,V){if(!n)return null;for(;V!==null;)i($,V),V=V.sibling;return null}function d($,V){for($=new Map;V!==null;)V.key!==null?$.set(V.key,V):$.set(V.index,V),V=V.sibling;return $}function f($,V){return $=gs($,V),$.index=0,$.sibling=null,$}function g($,V,q){return $.index=q,n?(q=$.alternate,q!==null?(q=q.index,q<V?($.flags|=2,V):q):($.flags|=2,V)):($.flags|=1048576,V)}function _($){return n&&$.alternate===null&&($.flags|=2),$}function k($,V,q,ae){return V===null||V.tag!==6?(V=uh(q,$.mode,ae),V.return=$,V):(V=f(V,q),V.return=$,V)}function j($,V,q,ae){var xe=q.type;return xe===C?re($,V,q.props.children,ae,q.key):V!==null&&(V.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===Re&&Gm(xe)===V.type)?(ae=f(V,q.props),ae.ref=ka($,V,q),ae.return=$,ae):(ae=Pc(q.type,q.key,q.props,null,$.mode,ae),ae.ref=ka($,V,q),ae.return=$,ae)}function G($,V,q,ae){return V===null||V.tag!==4||V.stateNode.containerInfo!==q.containerInfo||V.stateNode.implementation!==q.implementation?(V=dh(q,$.mode,ae),V.return=$,V):(V=f(V,q.children||[]),V.return=$,V)}function re($,V,q,ae,xe){return V===null||V.tag!==7?(V=hi(q,$.mode,ae,xe),V.return=$,V):(V=f(V,q),V.return=$,V)}function se($,V,q){if(typeof V=="string"&&V!==""||typeof V=="number")return V=uh(""+V,$.mode,q),V.return=$,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case W:return q=Pc(V.type,V.key,V.props,null,$.mode,q),q.ref=ka($,null,V),q.return=$,q;case ce:return V=dh(V,$.mode,q),V.return=$,V;case Re:var ae=V._init;return se($,ae(V._payload),q)}if(at(V)||F(V))return V=hi(V,$.mode,q,null),V.return=$,V;ac($,V)}return null}function te($,V,q,ae){var xe=V!==null?V.key:null;if(typeof q=="string"&&q!==""||typeof q=="number")return xe!==null?null:k($,V,""+q,ae);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case W:return q.key===xe?j($,V,q,ae):null;case ce:return q.key===xe?G($,V,q,ae):null;case Re:return xe=q._init,te($,V,xe(q._payload),ae)}if(at(q)||F(q))return xe!==null?null:re($,V,q,ae,null);ac($,q)}return null}function me($,V,q,ae,xe){if(typeof ae=="string"&&ae!==""||typeof ae=="number")return $=$.get(q)||null,k(V,$,""+ae,xe);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case W:return $=$.get(ae.key===null?q:ae.key)||null,j(V,$,ae,xe);case ce:return $=$.get(ae.key===null?q:ae.key)||null,G(V,$,ae,xe);case Re:var Ee=ae._init;return me($,V,q,Ee(ae._payload),xe)}if(at(ae)||F(ae))return $=$.get(q)||null,re(V,$,ae,xe,null);ac(V,ae)}return null}function ye($,V,q,ae){for(var xe=null,Ee=null,be=V,Ie=V=0,bt=null;be!==null&&Ie<q.length;Ie++){be.index>Ie?(bt=be,be=null):bt=be.sibling;var ze=te($,be,q[Ie],ae);if(ze===null){be===null&&(be=bt);break}n&&be&&ze.alternate===null&&i($,be),V=g(ze,V,Ie),Ee===null?xe=ze:Ee.sibling=ze,Ee=ze,be=bt}if(Ie===q.length)return a($,be),tt&&si($,Ie),xe;if(be===null){for(;Ie<q.length;Ie++)be=se($,q[Ie],ae),be!==null&&(V=g(be,V,Ie),Ee===null?xe=be:Ee.sibling=be,Ee=be);return tt&&si($,Ie),xe}for(be=d($,be);Ie<q.length;Ie++)bt=me(be,$,Ie,q[Ie],ae),bt!==null&&(n&&bt.alternate!==null&&be.delete(bt.key===null?Ie:bt.key),V=g(bt,V,Ie),Ee===null?xe=bt:Ee.sibling=bt,Ee=bt);return n&&be.forEach(function(ys){return i($,ys)}),tt&&si($,Ie),xe}function ve($,V,q,ae){var xe=F(q);if(typeof xe!="function")throw Error(t(150));if(q=xe.call(q),q==null)throw Error(t(151));for(var Ee=xe=null,be=V,Ie=V=0,bt=null,ze=q.next();be!==null&&!ze.done;Ie++,ze=q.next()){be.index>Ie?(bt=be,be=null):bt=be.sibling;var ys=te($,be,ze.value,ae);if(ys===null){be===null&&(be=bt);break}n&&be&&ys.alternate===null&&i($,be),V=g(ys,V,Ie),Ee===null?xe=ys:Ee.sibling=ys,Ee=ys,be=bt}if(ze.done)return a($,be),tt&&si($,Ie),xe;if(be===null){for(;!ze.done;Ie++,ze=q.next())ze=se($,ze.value,ae),ze!==null&&(V=g(ze,V,Ie),Ee===null?xe=ze:Ee.sibling=ze,Ee=ze);return tt&&si($,Ie),xe}for(be=d($,be);!ze.done;Ie++,ze=q.next())ze=me(be,$,Ie,ze.value,ae),ze!==null&&(n&&ze.alternate!==null&&be.delete(ze.key===null?Ie:ze.key),V=g(ze,V,Ie),Ee===null?xe=ze:Ee.sibling=ze,Ee=ze);return n&&be.forEach(function(z_){return i($,z_)}),tt&&si($,Ie),xe}function ct($,V,q,ae){if(typeof q=="object"&&q!==null&&q.type===C&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case W:e:{for(var xe=q.key,Ee=V;Ee!==null;){if(Ee.key===xe){if(xe=q.type,xe===C){if(Ee.tag===7){a($,Ee.sibling),V=f(Ee,q.props.children),V.return=$,$=V;break e}}else if(Ee.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===Re&&Gm(xe)===Ee.type){a($,Ee.sibling),V=f(Ee,q.props),V.ref=ka($,Ee,q),V.return=$,$=V;break e}a($,Ee);break}else i($,Ee);Ee=Ee.sibling}q.type===C?(V=hi(q.props.children,$.mode,ae,q.key),V.return=$,$=V):(ae=Pc(q.type,q.key,q.props,null,$.mode,ae),ae.ref=ka($,V,q),ae.return=$,$=ae)}return _($);case ce:e:{for(Ee=q.key;V!==null;){if(V.key===Ee)if(V.tag===4&&V.stateNode.containerInfo===q.containerInfo&&V.stateNode.implementation===q.implementation){a($,V.sibling),V=f(V,q.children||[]),V.return=$,$=V;break e}else{a($,V);break}else i($,V);V=V.sibling}V=dh(q,$.mode,ae),V.return=$,$=V}return _($);case Re:return Ee=q._init,ct($,V,Ee(q._payload),ae)}if(at(q))return ye($,V,q,ae);if(F(q))return ve($,V,q,ae);ac($,q)}return typeof q=="string"&&q!==""||typeof q=="number"?(q=""+q,V!==null&&V.tag===6?(a($,V.sibling),V=f(V,q),V.return=$,$=V):(a($,V),V=uh(q,$.mode,ae),V.return=$,$=V),_($)):a($,V)}return ct}var co=Km(!0),Qm=Km(!1),lc=os(null),cc=null,uo=null,_d=null;function wd(){_d=uo=cc=null}function Ed(n){var i=lc.current;Ze(lc),n._currentValue=i}function bd(n,i,a){for(;n!==null;){var d=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,d!==null&&(d.childLanes|=i)):d!==null&&(d.childLanes&i)!==i&&(d.childLanes|=i),n===a)break;n=n.return}}function ho(n,i){cc=n,_d=uo=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&i)!==0&&(Qt=!0),n.firstContext=null)}function yn(n){var i=n._currentValue;if(_d!==n)if(n={context:n,memoizedValue:i,next:null},uo===null){if(cc===null)throw Error(t(308));uo=n,cc.dependencies={lanes:0,firstContext:n}}else uo=uo.next=n;return i}var ii=null;function Td(n){ii===null?ii=[n]:ii.push(n)}function Ym(n,i,a,d){var f=i.interleaved;return f===null?(a.next=a,Td(i)):(a.next=f.next,f.next=a),i.interleaved=a,kr(n,d)}function kr(n,i){n.lanes|=i;var a=n.alternate;for(a!==null&&(a.lanes|=i),a=n,n=n.return;n!==null;)n.childLanes|=i,a=n.alternate,a!==null&&(a.childLanes|=i),a=n,n=n.return;return a.tag===3?a.stateNode:null}var cs=!1;function Id(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Jm(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Ar(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function us(n,i,a){var d=n.updateQueue;if(d===null)return null;if(d=d.shared,(Be&2)!==0){var f=d.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),d.pending=i,kr(n,a)}return f=d.interleaved,f===null?(i.next=i,Td(d)):(i.next=f.next,f.next=i),d.interleaved=i,kr(n,a)}function uc(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var d=i.lanes;d&=n.pendingLanes,a|=d,i.lanes=a,ua(n,a)}}function Xm(n,i){var a=n.updateQueue,d=n.alternate;if(d!==null&&(d=d.updateQueue,a===d)){var f=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var _={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?f=g=_:g=g.next=_,a=a.next}while(a!==null);g===null?f=g=i:g=g.next=i}else f=g=i;a={baseState:d.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:d.shared,effects:d.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}function dc(n,i,a,d){var f=n.updateQueue;cs=!1;var g=f.firstBaseUpdate,_=f.lastBaseUpdate,k=f.shared.pending;if(k!==null){f.shared.pending=null;var j=k,G=j.next;j.next=null,_===null?g=G:_.next=G,_=j;var re=n.alternate;re!==null&&(re=re.updateQueue,k=re.lastBaseUpdate,k!==_&&(k===null?re.firstBaseUpdate=G:k.next=G,re.lastBaseUpdate=j))}if(g!==null){var se=f.baseState;_=0,re=G=j=null,k=g;do{var te=k.lane,me=k.eventTime;if((d&te)===te){re!==null&&(re=re.next={eventTime:me,lane:0,tag:k.tag,payload:k.payload,callback:k.callback,next:null});e:{var ye=n,ve=k;switch(te=i,me=a,ve.tag){case 1:if(ye=ve.payload,typeof ye=="function"){se=ye.call(me,se,te);break e}se=ye;break e;case 3:ye.flags=ye.flags&-65537|128;case 0:if(ye=ve.payload,te=typeof ye=="function"?ye.call(me,se,te):ye,te==null)break e;se=X({},se,te);break e;case 2:cs=!0}}k.callback!==null&&k.lane!==0&&(n.flags|=64,te=f.effects,te===null?f.effects=[k]:te.push(k))}else me={eventTime:me,lane:te,tag:k.tag,payload:k.payload,callback:k.callback,next:null},re===null?(G=re=me,j=se):re=re.next=me,_|=te;if(k=k.next,k===null){if(k=f.shared.pending,k===null)break;te=k,k=te.next,te.next=null,f.lastBaseUpdate=te,f.shared.pending=null}}while(!0);if(re===null&&(j=se),f.baseState=j,f.firstBaseUpdate=G,f.lastBaseUpdate=re,i=f.shared.interleaved,i!==null){f=i;do _|=f.lane,f=f.next;while(f!==i)}else g===null&&(f.shared.lanes=0);li|=_,n.lanes=_,n.memoizedState=se}}function Zm(n,i,a){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var d=n[i],f=d.callback;if(f!==null){if(d.callback=null,d=a,typeof f!="function")throw Error(t(191,f));f.call(d)}}}var Aa={},er=os(Aa),Pa=os(Aa),Ra=os(Aa);function oi(n){if(n===Aa)throw Error(t(174));return n}function Nd(n,i){switch(Qe(Ra,i),Qe(Pa,n),Qe(er,Aa),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:ji(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=ji(i,n)}Ze(er),Qe(er,i)}function fo(){Ze(er),Ze(Pa),Ze(Ra)}function ep(n){oi(Ra.current);var i=oi(er.current),a=ji(i,n.type);i!==a&&(Qe(Pa,n),Qe(er,a))}function Sd(n){Pa.current===n&&(Ze(er),Ze(Pa))}var nt=os(0);function hc(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Cd=[];function kd(){for(var n=0;n<Cd.length;n++)Cd[n]._workInProgressVersionPrimary=null;Cd.length=0}var fc=ne.ReactCurrentDispatcher,Ad=ne.ReactCurrentBatchConfig,ai=0,rt=null,vt=null,wt=null,mc=!1,ja=!1,Da=0,u_=0;function Dt(){throw Error(t(321))}function Pd(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!Sn(n[a],i[a]))return!1;return!0}function Rd(n,i,a,d,f,g){if(ai=g,rt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,fc.current=n===null||n.memoizedState===null?m_:p_,n=a(d,f),ja){g=0;do{if(ja=!1,Da=0,25<=g)throw Error(t(301));g+=1,wt=vt=null,i.updateQueue=null,fc.current=g_,n=a(d,f)}while(ja)}if(fc.current=yc,i=vt!==null&&vt.next!==null,ai=0,wt=vt=rt=null,mc=!1,i)throw Error(t(300));return n}function jd(){var n=Da!==0;return Da=0,n}function tr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?rt.memoizedState=wt=n:wt=wt.next=n,wt}function vn(){if(vt===null){var n=rt.alternate;n=n!==null?n.memoizedState:null}else n=vt.next;var i=wt===null?rt.memoizedState:wt.next;if(i!==null)wt=i,vt=n;else{if(n===null)throw Error(t(310));vt=n,n={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},wt===null?rt.memoizedState=wt=n:wt=wt.next=n}return wt}function Va(n,i){return typeof i=="function"?i(n):i}function Dd(n){var i=vn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var d=vt,f=d.baseQueue,g=a.pending;if(g!==null){if(f!==null){var _=f.next;f.next=g.next,g.next=_}d.baseQueue=f=g,a.pending=null}if(f!==null){g=f.next,d=d.baseState;var k=_=null,j=null,G=g;do{var re=G.lane;if((ai&re)===re)j!==null&&(j=j.next={lane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),d=G.hasEagerState?G.eagerState:n(d,G.action);else{var se={lane:re,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null};j===null?(k=j=se,_=d):j=j.next=se,rt.lanes|=re,li|=re}G=G.next}while(G!==null&&G!==g);j===null?_=d:j.next=k,Sn(d,i.memoizedState)||(Qt=!0),i.memoizedState=d,i.baseState=_,i.baseQueue=j,a.lastRenderedState=d}if(n=a.interleaved,n!==null){f=n;do g=f.lane,rt.lanes|=g,li|=g,f=f.next;while(f!==n)}else f===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function Vd(n){var i=vn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var d=a.dispatch,f=a.pending,g=i.memoizedState;if(f!==null){a.pending=null;var _=f=f.next;do g=n(g,_.action),_=_.next;while(_!==f);Sn(g,i.memoizedState)||(Qt=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),a.lastRenderedState=g}return[g,d]}function tp(){}function np(n,i){var a=rt,d=vn(),f=i(),g=!Sn(d.memoizedState,f);if(g&&(d.memoizedState=f,Qt=!0),d=d.queue,Od(ip.bind(null,a,d,n),[n]),d.getSnapshot!==i||g||wt!==null&&wt.memoizedState.tag&1){if(a.flags|=2048,Oa(9,sp.bind(null,a,d,f,i),void 0,null),Et===null)throw Error(t(349));(ai&30)!==0||rp(a,i,f)}return f}function rp(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=rt.updateQueue,i===null?(i={lastEffect:null,stores:null},rt.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function sp(n,i,a,d){i.value=a,i.getSnapshot=d,op(i)&&ap(n)}function ip(n,i,a){return a(function(){op(i)&&ap(n)})}function op(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!Sn(n,a)}catch{return!0}}function ap(n){var i=kr(n,1);i!==null&&Rn(i,n,1,-1)}function lp(n){var i=tr();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Va,lastRenderedState:n},i.queue=n,n=n.dispatch=f_.bind(null,rt,n),[i.memoizedState,n]}function Oa(n,i,a,d){return n={tag:n,create:i,destroy:a,deps:d,next:null},i=rt.updateQueue,i===null?(i={lastEffect:null,stores:null},rt.updateQueue=i,i.lastEffect=n.next=n):(a=i.lastEffect,a===null?i.lastEffect=n.next=n:(d=a.next,a.next=n,n.next=d,i.lastEffect=n)),n}function cp(){return vn().memoizedState}function pc(n,i,a,d){var f=tr();rt.flags|=n,f.memoizedState=Oa(1|i,a,void 0,d===void 0?null:d)}function gc(n,i,a,d){var f=vn();d=d===void 0?null:d;var g=void 0;if(vt!==null){var _=vt.memoizedState;if(g=_.destroy,d!==null&&Pd(d,_.deps)){f.memoizedState=Oa(i,a,g,d);return}}rt.flags|=n,f.memoizedState=Oa(1|i,a,g,d)}function up(n,i){return pc(8390656,8,n,i)}function Od(n,i){return gc(2048,8,n,i)}function dp(n,i){return gc(4,2,n,i)}function hp(n,i){return gc(4,4,n,i)}function fp(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function mp(n,i,a){return a=a!=null?a.concat([n]):null,gc(4,4,fp.bind(null,i,n),a)}function Md(){}function pp(n,i){var a=vn();i=i===void 0?null:i;var d=a.memoizedState;return d!==null&&i!==null&&Pd(i,d[1])?d[0]:(a.memoizedState=[n,i],n)}function gp(n,i){var a=vn();i=i===void 0?null:i;var d=a.memoizedState;return d!==null&&i!==null&&Pd(i,d[1])?d[0]:(n=n(),a.memoizedState=[n,i],n)}function yp(n,i,a){return(ai&21)===0?(n.baseState&&(n.baseState=!1,Qt=!0),n.memoizedState=a):(Sn(a,i)||(a=la(),rt.lanes|=a,li|=a,n.baseState=!0),i)}function d_(n,i){var a=Me;Me=a!==0&&4>a?a:4,n(!0);var d=Ad.transition;Ad.transition={};try{n(!1),i()}finally{Me=a,Ad.transition=d}}function vp(){return vn().memoizedState}function h_(n,i,a){var d=ms(n);if(a={lane:d,action:a,hasEagerState:!1,eagerState:null,next:null},xp(n))_p(i,a);else if(a=Ym(n,i,a,d),a!==null){var f=qt();Rn(a,n,d,f),wp(a,i,d)}}function f_(n,i,a){var d=ms(n),f={lane:d,action:a,hasEagerState:!1,eagerState:null,next:null};if(xp(n))_p(i,f);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var _=i.lastRenderedState,k=g(_,a);if(f.hasEagerState=!0,f.eagerState=k,Sn(k,_)){var j=i.interleaved;j===null?(f.next=f,Td(i)):(f.next=j.next,j.next=f),i.interleaved=f;return}}catch{}a=Ym(n,i,f,d),a!==null&&(f=qt(),Rn(a,n,d,f),wp(a,i,d))}}function xp(n){var i=n.alternate;return n===rt||i!==null&&i===rt}function _p(n,i){ja=mc=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function wp(n,i,a){if((a&4194240)!==0){var d=i.lanes;d&=n.pendingLanes,a|=d,i.lanes=a,ua(n,a)}}var yc={readContext:yn,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useInsertionEffect:Dt,useLayoutEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useMutableSource:Dt,useSyncExternalStore:Dt,useId:Dt,unstable_isNewReconciler:!1},m_={readContext:yn,useCallback:function(n,i){return tr().memoizedState=[n,i===void 0?null:i],n},useContext:yn,useEffect:up,useImperativeHandle:function(n,i,a){return a=a!=null?a.concat([n]):null,pc(4194308,4,fp.bind(null,i,n),a)},useLayoutEffect:function(n,i){return pc(4194308,4,n,i)},useInsertionEffect:function(n,i){return pc(4,2,n,i)},useMemo:function(n,i){var a=tr();return i=i===void 0?null:i,n=n(),a.memoizedState=[n,i],n},useReducer:function(n,i,a){var d=tr();return i=a!==void 0?a(i):i,d.memoizedState=d.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},d.queue=n,n=n.dispatch=h_.bind(null,rt,n),[d.memoizedState,n]},useRef:function(n){var i=tr();return n={current:n},i.memoizedState=n},useState:lp,useDebugValue:Md,useDeferredValue:function(n){return tr().memoizedState=n},useTransition:function(){var n=lp(!1),i=n[0];return n=d_.bind(null,n[1]),tr().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,a){var d=rt,f=tr();if(tt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=i(),Et===null)throw Error(t(349));(ai&30)!==0||rp(d,i,a)}f.memoizedState=a;var g={value:a,getSnapshot:i};return f.queue=g,up(ip.bind(null,d,g,n),[n]),d.flags|=2048,Oa(9,sp.bind(null,d,g,a,i),void 0,null),a},useId:function(){var n=tr(),i=Et.identifierPrefix;if(tt){var a=Cr,d=Sr;a=(d&~(1<<32-nn(d)-1)).toString(32)+a,i=":"+i+"R"+a,a=Da++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=u_++,i=":"+i+"r"+a.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},p_={readContext:yn,useCallback:pp,useContext:yn,useEffect:Od,useImperativeHandle:mp,useInsertionEffect:dp,useLayoutEffect:hp,useMemo:gp,useReducer:Dd,useRef:cp,useState:function(){return Dd(Va)},useDebugValue:Md,useDeferredValue:function(n){var i=vn();return yp(i,vt.memoizedState,n)},useTransition:function(){var n=Dd(Va)[0],i=vn().memoizedState;return[n,i]},useMutableSource:tp,useSyncExternalStore:np,useId:vp,unstable_isNewReconciler:!1},g_={readContext:yn,useCallback:pp,useContext:yn,useEffect:Od,useImperativeHandle:mp,useInsertionEffect:dp,useLayoutEffect:hp,useMemo:gp,useReducer:Vd,useRef:cp,useState:function(){return Vd(Va)},useDebugValue:Md,useDeferredValue:function(n){var i=vn();return vt===null?i.memoizedState=n:yp(i,vt.memoizedState,n)},useTransition:function(){var n=Vd(Va)[0],i=vn().memoizedState;return[n,i]},useMutableSource:tp,useSyncExternalStore:np,useId:vp,unstable_isNewReconciler:!1};function kn(n,i){if(n&&n.defaultProps){i=X({},i),n=n.defaultProps;for(var a in n)i[a]===void 0&&(i[a]=n[a]);return i}return i}function Ld(n,i,a,d){i=n.memoizedState,a=a(d,i),a=a==null?i:X({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var vc={isMounted:function(n){return(n=n._reactInternals)?In(n)===n:!1},enqueueSetState:function(n,i,a){n=n._reactInternals;var d=qt(),f=ms(n),g=Ar(d,f);g.payload=i,a!=null&&(g.callback=a),i=us(n,g,f),i!==null&&(Rn(i,n,f,d),uc(i,n,f))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var d=qt(),f=ms(n),g=Ar(d,f);g.tag=1,g.payload=i,a!=null&&(g.callback=a),i=us(n,g,f),i!==null&&(Rn(i,n,f,d),uc(i,n,f))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=qt(),d=ms(n),f=Ar(a,d);f.tag=2,i!=null&&(f.callback=i),i=us(n,f,d),i!==null&&(Rn(i,n,d,a),uc(i,n,d))}};function Ep(n,i,a,d,f,g,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(d,g,_):i.prototype&&i.prototype.isPureReactComponent?!Ea(a,d)||!Ea(f,g):!0}function bp(n,i,a){var d=!1,f=as,g=i.contextType;return typeof g=="object"&&g!==null?g=yn(g):(f=Kt(i)?ni:jt.current,d=i.contextTypes,g=(d=d!=null)?io(n,f):as),i=new i(a,g),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=vc,n.stateNode=i,i._reactInternals=n,d&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=f,n.__reactInternalMemoizedMaskedChildContext=g),i}function Tp(n,i,a,d){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,d),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,d),i.state!==n&&vc.enqueueReplaceState(i,i.state,null)}function Fd(n,i,a,d){var f=n.stateNode;f.props=a,f.state=n.memoizedState,f.refs={},Id(n);var g=i.contextType;typeof g=="object"&&g!==null?f.context=yn(g):(g=Kt(i)?ni:jt.current,f.context=io(n,g)),f.state=n.memoizedState,g=i.getDerivedStateFromProps,typeof g=="function"&&(Ld(n,i,g,a),f.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(i=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),i!==f.state&&vc.enqueueReplaceState(f,f.state,null),dc(n,a,f,d),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308)}function mo(n,i){try{var a="",d=i;do a+=fe(d),d=d.return;while(d);var f=a}catch(g){f=`
Error generating stack: `+g.message+`
`+g.stack}return{value:n,source:i,stack:f,digest:null}}function Ud(n,i,a){return{value:n,source:null,stack:a??null,digest:i??null}}function Bd(n,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var y_=typeof WeakMap=="function"?WeakMap:Map;function Ip(n,i,a){a=Ar(-1,a),a.tag=3,a.payload={element:null};var d=i.value;return a.callback=function(){Ic||(Ic=!0,nh=d),Bd(n,i)},a}function Np(n,i,a){a=Ar(-1,a),a.tag=3;var d=n.type.getDerivedStateFromError;if(typeof d=="function"){var f=i.value;a.payload=function(){return d(f)},a.callback=function(){Bd(n,i)}}var g=n.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){Bd(n,i),typeof d!="function"&&(hs===null?hs=new Set([this]):hs.add(this));var _=i.stack;this.componentDidCatch(i.value,{componentStack:_!==null?_:""})}),a}function Sp(n,i,a){var d=n.pingCache;if(d===null){d=n.pingCache=new y_;var f=new Set;d.set(i,f)}else f=d.get(i),f===void 0&&(f=new Set,d.set(i,f));f.has(a)||(f.add(a),n=P_.bind(null,n,i,a),i.then(n,n))}function Cp(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function kp(n,i,a,d,f){return(n.mode&1)===0?(n===i?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=Ar(-1,1),i.tag=2,us(a,i,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=f,n)}var v_=ne.ReactCurrentOwner,Qt=!1;function Ht(n,i,a,d){i.child=n===null?Qm(i,null,a,d):co(i,n.child,a,d)}function Ap(n,i,a,d,f){a=a.render;var g=i.ref;return ho(i,f),d=Rd(n,i,a,d,g,f),a=jd(),n!==null&&!Qt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~f,Pr(n,i,f)):(tt&&a&&pd(i),i.flags|=1,Ht(n,i,d,f),i.child)}function Pp(n,i,a,d,f){if(n===null){var g=a.type;return typeof g=="function"&&!ch(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=g,Rp(n,i,g,d,f)):(n=Pc(a.type,null,d,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(g=n.child,(n.lanes&f)===0){var _=g.memoizedProps;if(a=a.compare,a=a!==null?a:Ea,a(_,d)&&n.ref===i.ref)return Pr(n,i,f)}return i.flags|=1,n=gs(g,d),n.ref=i.ref,n.return=i,i.child=n}function Rp(n,i,a,d,f){if(n!==null){var g=n.memoizedProps;if(Ea(g,d)&&n.ref===i.ref)if(Qt=!1,i.pendingProps=d=g,(n.lanes&f)!==0)(n.flags&131072)!==0&&(Qt=!0);else return i.lanes=n.lanes,Pr(n,i,f)}return zd(n,i,a,d,f)}function jp(n,i,a){var d=i.pendingProps,f=d.children,g=n!==null?n.memoizedState:null;if(d.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qe(go,un),un|=a;else{if((a&1073741824)===0)return n=g!==null?g.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,Qe(go,un),un|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=g!==null?g.baseLanes:a,Qe(go,un),un|=d}else g!==null?(d=g.baseLanes|a,i.memoizedState=null):d=a,Qe(go,un),un|=d;return Ht(n,i,f,a),i.child}function Dp(n,i){var a=i.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function zd(n,i,a,d,f){var g=Kt(a)?ni:jt.current;return g=io(i,g),ho(i,f),a=Rd(n,i,a,d,g,f),d=jd(),n!==null&&!Qt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~f,Pr(n,i,f)):(tt&&d&&pd(i),i.flags|=1,Ht(n,i,a,f),i.child)}function Vp(n,i,a,d,f){if(Kt(a)){var g=!0;nc(i)}else g=!1;if(ho(i,f),i.stateNode===null)_c(n,i),bp(i,a,d),Fd(i,a,d,f),d=!0;else if(n===null){var _=i.stateNode,k=i.memoizedProps;_.props=k;var j=_.context,G=a.contextType;typeof G=="object"&&G!==null?G=yn(G):(G=Kt(a)?ni:jt.current,G=io(i,G));var re=a.getDerivedStateFromProps,se=typeof re=="function"||typeof _.getSnapshotBeforeUpdate=="function";se||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(k!==d||j!==G)&&Tp(i,_,d,G),cs=!1;var te=i.memoizedState;_.state=te,dc(i,d,_,f),j=i.memoizedState,k!==d||te!==j||Gt.current||cs?(typeof re=="function"&&(Ld(i,a,re,d),j=i.memoizedState),(k=cs||Ep(i,a,k,d,te,j,G))?(se||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(i.flags|=4194308)):(typeof _.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=d,i.memoizedState=j),_.props=d,_.state=j,_.context=G,d=k):(typeof _.componentDidMount=="function"&&(i.flags|=4194308),d=!1)}else{_=i.stateNode,Jm(n,i),k=i.memoizedProps,G=i.type===i.elementType?k:kn(i.type,k),_.props=G,se=i.pendingProps,te=_.context,j=a.contextType,typeof j=="object"&&j!==null?j=yn(j):(j=Kt(a)?ni:jt.current,j=io(i,j));var me=a.getDerivedStateFromProps;(re=typeof me=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(k!==se||te!==j)&&Tp(i,_,d,j),cs=!1,te=i.memoizedState,_.state=te,dc(i,d,_,f);var ye=i.memoizedState;k!==se||te!==ye||Gt.current||cs?(typeof me=="function"&&(Ld(i,a,me,d),ye=i.memoizedState),(G=cs||Ep(i,a,G,d,te,ye,j)||!1)?(re||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(d,ye,j),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(d,ye,j)),typeof _.componentDidUpdate=="function"&&(i.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof _.componentDidUpdate!="function"||k===n.memoizedProps&&te===n.memoizedState||(i.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||k===n.memoizedProps&&te===n.memoizedState||(i.flags|=1024),i.memoizedProps=d,i.memoizedState=ye),_.props=d,_.state=ye,_.context=j,d=G):(typeof _.componentDidUpdate!="function"||k===n.memoizedProps&&te===n.memoizedState||(i.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||k===n.memoizedProps&&te===n.memoizedState||(i.flags|=1024),d=!1)}return $d(n,i,a,d,g,f)}function $d(n,i,a,d,f,g){Dp(n,i);var _=(i.flags&128)!==0;if(!d&&!_)return f&&Um(i,a,!1),Pr(n,i,g);d=i.stateNode,v_.current=i;var k=_&&typeof a.getDerivedStateFromError!="function"?null:d.render();return i.flags|=1,n!==null&&_?(i.child=co(i,n.child,null,g),i.child=co(i,null,k,g)):Ht(n,i,k,g),i.memoizedState=d.state,f&&Um(i,a,!0),i.child}function Op(n){var i=n.stateNode;i.pendingContext?Lm(n,i.pendingContext,i.pendingContext!==i.context):i.context&&Lm(n,i.context,!1),Nd(n,i.containerInfo)}function Mp(n,i,a,d,f){return lo(),xd(f),i.flags|=256,Ht(n,i,a,d),i.child}var Hd={dehydrated:null,treeContext:null,retryLane:0};function qd(n){return{baseLanes:n,cachePool:null,transitions:null}}function Lp(n,i,a){var d=i.pendingProps,f=nt.current,g=!1,_=(i.flags&128)!==0,k;if((k=_)||(k=n!==null&&n.memoizedState===null?!1:(f&2)!==0),k?(g=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(f|=1),Qe(nt,f&1),n===null)return vd(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((i.mode&1)===0?i.lanes=1:n.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(_=d.children,n=d.fallback,g?(d=i.mode,g=i.child,_={mode:"hidden",children:_},(d&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=_):g=Rc(_,d,0,null),n=hi(n,d,a,null),g.return=i,n.return=i,g.sibling=n,i.child=g,i.child.memoizedState=qd(a),i.memoizedState=Hd,n):Wd(i,_));if(f=n.memoizedState,f!==null&&(k=f.dehydrated,k!==null))return x_(n,i,_,d,k,f,a);if(g){g=d.fallback,_=i.mode,f=n.child,k=f.sibling;var j={mode:"hidden",children:d.children};return(_&1)===0&&i.child!==f?(d=i.child,d.childLanes=0,d.pendingProps=j,i.deletions=null):(d=gs(f,j),d.subtreeFlags=f.subtreeFlags&14680064),k!==null?g=gs(k,g):(g=hi(g,_,a,null),g.flags|=2),g.return=i,d.return=i,d.sibling=g,i.child=d,d=g,g=i.child,_=n.child.memoizedState,_=_===null?qd(a):{baseLanes:_.baseLanes|a,cachePool:null,transitions:_.transitions},g.memoizedState=_,g.childLanes=n.childLanes&~a,i.memoizedState=Hd,d}return g=n.child,n=g.sibling,d=gs(g,{mode:"visible",children:d.children}),(i.mode&1)===0&&(d.lanes=a),d.return=i,d.sibling=null,n!==null&&(a=i.deletions,a===null?(i.deletions=[n],i.flags|=16):a.push(n)),i.child=d,i.memoizedState=null,d}function Wd(n,i){return i=Rc({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function xc(n,i,a,d){return d!==null&&xd(d),co(i,n.child,null,a),n=Wd(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function x_(n,i,a,d,f,g,_){if(a)return i.flags&256?(i.flags&=-257,d=Ud(Error(t(422))),xc(n,i,_,d)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(g=d.fallback,f=i.mode,d=Rc({mode:"visible",children:d.children},f,0,null),g=hi(g,f,_,null),g.flags|=2,d.return=i,g.return=i,d.sibling=g,i.child=d,(i.mode&1)!==0&&co(i,n.child,null,_),i.child.memoizedState=qd(_),i.memoizedState=Hd,g);if((i.mode&1)===0)return xc(n,i,_,null);if(f.data==="$!"){if(d=f.nextSibling&&f.nextSibling.dataset,d)var k=d.dgst;return d=k,g=Error(t(419)),d=Ud(g,d,void 0),xc(n,i,_,d)}if(k=(_&n.childLanes)!==0,Qt||k){if(d=Et,d!==null){switch(_&-_){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(d.suspendedLanes|_))!==0?0:f,f!==0&&f!==g.retryLane&&(g.retryLane=f,kr(n,f),Rn(d,n,f,-1))}return lh(),d=Ud(Error(t(421))),xc(n,i,_,d)}return f.data==="$?"?(i.flags|=128,i.child=n.child,i=R_.bind(null,n),f._reactRetry=i,null):(n=g.treeContext,cn=is(f.nextSibling),ln=i,tt=!0,Cn=null,n!==null&&(pn[gn++]=Sr,pn[gn++]=Cr,pn[gn++]=ri,Sr=n.id,Cr=n.overflow,ri=i),i=Wd(i,d.children),i.flags|=4096,i)}function Fp(n,i,a){n.lanes|=i;var d=n.alternate;d!==null&&(d.lanes|=i),bd(n.return,i,a)}function Gd(n,i,a,d,f){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:d,tail:a,tailMode:f}:(g.isBackwards=i,g.rendering=null,g.renderingStartTime=0,g.last=d,g.tail=a,g.tailMode=f)}function Up(n,i,a){var d=i.pendingProps,f=d.revealOrder,g=d.tail;if(Ht(n,i,d.children,a),d=nt.current,(d&2)!==0)d=d&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Fp(n,a,i);else if(n.tag===19)Fp(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}d&=1}if(Qe(nt,d),(i.mode&1)===0)i.memoizedState=null;else switch(f){case"forwards":for(a=i.child,f=null;a!==null;)n=a.alternate,n!==null&&hc(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),Gd(i,!1,f,a,g);break;case"backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&hc(n)===null){i.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}Gd(i,!0,a,null,g);break;case"together":Gd(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function _c(n,i){(i.mode&1)===0&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function Pr(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),li|=i.lanes,(a&i.childLanes)===0)return null;if(n!==null&&i.child!==n.child)throw Error(t(153));if(i.child!==null){for(n=i.child,a=gs(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=gs(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function __(n,i,a){switch(i.tag){case 3:Op(i),lo();break;case 5:ep(i);break;case 1:Kt(i.type)&&nc(i);break;case 4:Nd(i,i.stateNode.containerInfo);break;case 10:var d=i.type._context,f=i.memoizedProps.value;Qe(lc,d._currentValue),d._currentValue=f;break;case 13:if(d=i.memoizedState,d!==null)return d.dehydrated!==null?(Qe(nt,nt.current&1),i.flags|=128,null):(a&i.child.childLanes)!==0?Lp(n,i,a):(Qe(nt,nt.current&1),n=Pr(n,i,a),n!==null?n.sibling:null);Qe(nt,nt.current&1);break;case 19:if(d=(a&i.childLanes)!==0,(n.flags&128)!==0){if(d)return Up(n,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Qe(nt,nt.current),d)break;return null;case 22:case 23:return i.lanes=0,jp(n,i,a)}return Pr(n,i,a)}var Bp,Kd,zp,$p;Bp=function(n,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Kd=function(){},zp=function(n,i,a,d){var f=n.memoizedProps;if(f!==d){n=i.stateNode,oi(er.current);var g=null;switch(a){case"input":f=Pi(n,f),d=Pi(n,d),g=[];break;case"select":f=X({},f,{value:void 0}),d=X({},d,{value:void 0}),g=[];break;case"textarea":f=Jo(n,f),d=Jo(n,d),g=[];break;default:typeof f.onClick!="function"&&typeof d.onClick=="function"&&(n.onclick=Zl)}Tn(a,d);var _;a=null;for(G in f)if(!d.hasOwnProperty(G)&&f.hasOwnProperty(G)&&f[G]!=null)if(G==="style"){var k=f[G];for(_ in k)k.hasOwnProperty(_)&&(a||(a={}),a[_]="")}else G!=="dangerouslySetInnerHTML"&&G!=="children"&&G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&G!=="autoFocus"&&(o.hasOwnProperty(G)?g||(g=[]):(g=g||[]).push(G,null));for(G in d){var j=d[G];if(k=f?.[G],d.hasOwnProperty(G)&&j!==k&&(j!=null||k!=null))if(G==="style")if(k){for(_ in k)!k.hasOwnProperty(_)||j&&j.hasOwnProperty(_)||(a||(a={}),a[_]="");for(_ in j)j.hasOwnProperty(_)&&k[_]!==j[_]&&(a||(a={}),a[_]=j[_])}else a||(g||(g=[]),g.push(G,a)),a=j;else G==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,k=k?k.__html:void 0,j!=null&&k!==j&&(g=g||[]).push(G,j)):G==="children"?typeof j!="string"&&typeof j!="number"||(g=g||[]).push(G,""+j):G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&(o.hasOwnProperty(G)?(j!=null&&G==="onScroll"&&Xe("scroll",n),g||k===j||(g=[])):(g=g||[]).push(G,j))}a&&(g=g||[]).push("style",a);var G=g;(i.updateQueue=G)&&(i.flags|=4)}},$p=function(n,i,a,d){a!==d&&(i.flags|=4)};function Ma(n,i){if(!tt)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:d.sibling=null}}function Vt(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,d=0;if(i)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,d|=f.subtreeFlags&14680064,d|=f.flags&14680064,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,d|=f.subtreeFlags,d|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=d,n.childLanes=a,i}function w_(n,i,a){var d=i.pendingProps;switch(gd(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vt(i),null;case 1:return Kt(i.type)&&tc(),Vt(i),null;case 3:return d=i.stateNode,fo(),Ze(Gt),Ze(jt),kd(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(n===null||n.child===null)&&(oc(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Cn!==null&&(ih(Cn),Cn=null))),Kd(n,i),Vt(i),null;case 5:Sd(i);var f=oi(Ra.current);if(a=i.type,n!==null&&i.stateNode!=null)zp(n,i,a,d,f),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!d){if(i.stateNode===null)throw Error(t(166));return Vt(i),null}if(n=oi(er.current),oc(i)){d=i.stateNode,a=i.type;var g=i.memoizedProps;switch(d[Zn]=i,d[Sa]=g,n=(i.mode&1)!==0,a){case"dialog":Xe("cancel",d),Xe("close",d);break;case"iframe":case"object":case"embed":Xe("load",d);break;case"video":case"audio":for(f=0;f<Ta.length;f++)Xe(Ta[f],d);break;case"source":Xe("error",d);break;case"img":case"image":case"link":Xe("error",d),Xe("load",d);break;case"details":Xe("toggle",d);break;case"input":Tl(d,g),Xe("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!g.multiple},Xe("invalid",d);break;case"textarea":Xo(d,g),Xe("invalid",d)}Tn(a,g),f=null;for(var _ in g)if(g.hasOwnProperty(_)){var k=g[_];_==="children"?typeof k=="string"?d.textContent!==k&&(g.suppressHydrationWarning!==!0&&Xl(d.textContent,k,n),f=["children",k]):typeof k=="number"&&d.textContent!==""+k&&(g.suppressHydrationWarning!==!0&&Xl(d.textContent,k,n),f=["children",""+k]):o.hasOwnProperty(_)&&k!=null&&_==="onScroll"&&Xe("scroll",d)}switch(a){case"input":Ai(d),Yo(d,g,!0);break;case"textarea":Ai(d),$r(d);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(d.onclick=Zl)}d=f,i.updateQueue=d,d!==null&&(i.flags|=4)}else{_=f.nodeType===9?f:f.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Zo(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=_.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof d.is=="string"?n=_.createElement(a,{is:d.is}):(n=_.createElement(a),a==="select"&&(_=n,d.multiple?_.multiple=!0:d.size&&(_.size=d.size))):n=_.createElementNS(n,a),n[Zn]=i,n[Sa]=d,Bp(n,i,!1,!1),i.stateNode=n;e:{switch(_=Vi(a,d),a){case"dialog":Xe("cancel",n),Xe("close",n),f=d;break;case"iframe":case"object":case"embed":Xe("load",n),f=d;break;case"video":case"audio":for(f=0;f<Ta.length;f++)Xe(Ta[f],n);f=d;break;case"source":Xe("error",n),f=d;break;case"img":case"image":case"link":Xe("error",n),Xe("load",n),f=d;break;case"details":Xe("toggle",n),f=d;break;case"input":Tl(n,d),f=Pi(n,d),Xe("invalid",n);break;case"option":f=d;break;case"select":n._wrapperState={wasMultiple:!!d.multiple},f=X({},d,{value:void 0}),Xe("invalid",n);break;case"textarea":Xo(n,d),f=Jo(n,d),Xe("invalid",n);break;default:f=d}Tn(a,f),k=f;for(g in k)if(k.hasOwnProperty(g)){var j=k[g];g==="style"?Di(n,j):g==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,j!=null&&Nl(n,j)):g==="children"?typeof j=="string"?(a!=="textarea"||j!=="")&&Bs(n,j):typeof j=="number"&&Bs(n,""+j):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?j!=null&&g==="onScroll"&&Xe("scroll",n):j!=null&&Y(n,g,j,_))}switch(a){case"input":Ai(n),Yo(n,d,!1);break;case"textarea":Ai(n),$r(n);break;case"option":d.value!=null&&n.setAttribute("value",""+Ue(d.value));break;case"select":n.multiple=!!d.multiple,g=d.value,g!=null?bn(n,!!d.multiple,g,!1):d.defaultValue!=null&&bn(n,!!d.multiple,d.defaultValue,!0);break;default:typeof f.onClick=="function"&&(n.onclick=Zl)}switch(a){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Vt(i),null;case 6:if(n&&i.stateNode!=null)$p(n,i,n.memoizedProps,d);else{if(typeof d!="string"&&i.stateNode===null)throw Error(t(166));if(a=oi(Ra.current),oi(er.current),oc(i)){if(d=i.stateNode,a=i.memoizedProps,d[Zn]=i,(g=d.nodeValue!==a)&&(n=ln,n!==null))switch(n.tag){case 3:Xl(d.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Xl(d.nodeValue,a,(n.mode&1)!==0)}g&&(i.flags|=4)}else d=(a.nodeType===9?a:a.ownerDocument).createTextNode(d),d[Zn]=i,i.stateNode=d}return Vt(i),null;case 13:if(Ze(nt),d=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(tt&&cn!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Wm(),lo(),i.flags|=98560,g=!1;else if(g=oc(i),d!==null&&d.dehydrated!==null){if(n===null){if(!g)throw Error(t(318));if(g=i.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[Zn]=i}else lo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Vt(i),g=!1}else Cn!==null&&(ih(Cn),Cn=null),g=!0;if(!g)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=a,i):(d=d!==null,d!==(n!==null&&n.memoizedState!==null)&&d&&(i.child.flags|=8192,(i.mode&1)!==0&&(n===null||(nt.current&1)!==0?xt===0&&(xt=3):lh())),i.updateQueue!==null&&(i.flags|=4),Vt(i),null);case 4:return fo(),Kd(n,i),n===null&&Ia(i.stateNode.containerInfo),Vt(i),null;case 10:return Ed(i.type._context),Vt(i),null;case 17:return Kt(i.type)&&tc(),Vt(i),null;case 19:if(Ze(nt),g=i.memoizedState,g===null)return Vt(i),null;if(d=(i.flags&128)!==0,_=g.rendering,_===null)if(d)Ma(g,!1);else{if(xt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(_=hc(n),_!==null){for(i.flags|=128,Ma(g,!1),d=_.updateQueue,d!==null&&(i.updateQueue=d,i.flags|=4),i.subtreeFlags=0,d=a,a=i.child;a!==null;)g=a,n=d,g.flags&=14680066,_=g.alternate,_===null?(g.childLanes=0,g.lanes=n,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=_.childLanes,g.lanes=_.lanes,g.child=_.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=_.memoizedProps,g.memoizedState=_.memoizedState,g.updateQueue=_.updateQueue,g.type=_.type,n=_.dependencies,g.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Qe(nt,nt.current&1|2),i.child}n=n.sibling}g.tail!==null&&Je()>yo&&(i.flags|=128,d=!0,Ma(g,!1),i.lanes=4194304)}else{if(!d)if(n=hc(_),n!==null){if(i.flags|=128,d=!0,a=n.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),Ma(g,!0),g.tail===null&&g.tailMode==="hidden"&&!_.alternate&&!tt)return Vt(i),null}else 2*Je()-g.renderingStartTime>yo&&a!==1073741824&&(i.flags|=128,d=!0,Ma(g,!1),i.lanes=4194304);g.isBackwards?(_.sibling=i.child,i.child=_):(a=g.last,a!==null?a.sibling=_:i.child=_,g.last=_)}return g.tail!==null?(i=g.tail,g.rendering=i,g.tail=i.sibling,g.renderingStartTime=Je(),i.sibling=null,a=nt.current,Qe(nt,d?a&1|2:a&1),i):(Vt(i),null);case 22:case 23:return ah(),d=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==d&&(i.flags|=8192),d&&(i.mode&1)!==0?(un&1073741824)!==0&&(Vt(i),i.subtreeFlags&6&&(i.flags|=8192)):Vt(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function E_(n,i){switch(gd(i),i.tag){case 1:return Kt(i.type)&&tc(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return fo(),Ze(Gt),Ze(jt),kd(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 5:return Sd(i),null;case 13:if(Ze(nt),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(t(340));lo()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return Ze(nt),null;case 4:return fo(),null;case 10:return Ed(i.type._context),null;case 22:case 23:return ah(),null;case 24:return null;default:return null}}var wc=!1,Ot=!1,b_=typeof WeakSet=="function"?WeakSet:Set,ge=null;function po(n,i){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(d){ot(n,i,d)}else a.current=null}function Qd(n,i,a){try{a()}catch(d){ot(n,i,d)}}var Hp=!1;function T_(n,i){if(ad=Er,n=Em(),Zu(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var d=a.getSelection&&a.getSelection();if(d&&d.rangeCount!==0){a=d.anchorNode;var f=d.anchorOffset,g=d.focusNode;d=d.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var _=0,k=-1,j=-1,G=0,re=0,se=n,te=null;t:for(;;){for(var me;se!==a||f!==0&&se.nodeType!==3||(k=_+f),se!==g||d!==0&&se.nodeType!==3||(j=_+d),se.nodeType===3&&(_+=se.nodeValue.length),(me=se.firstChild)!==null;)te=se,se=me;for(;;){if(se===n)break t;if(te===a&&++G===f&&(k=_),te===g&&++re===d&&(j=_),(me=se.nextSibling)!==null)break;se=te,te=se.parentNode}se=me}a=k===-1||j===-1?null:{start:k,end:j}}else a=null}a=a||{start:0,end:0}}else a=null;for(ld={focusedElem:n,selectionRange:a},Er=!1,ge=i;ge!==null;)if(i=ge,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,ge=n;else for(;ge!==null;){i=ge;try{var ye=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(ye!==null){var ve=ye.memoizedProps,ct=ye.memoizedState,$=i.stateNode,V=$.getSnapshotBeforeUpdate(i.elementType===i.type?ve:kn(i.type,ve),ct);$.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var q=i.stateNode.containerInfo;q.nodeType===1?q.textContent="":q.nodeType===9&&q.documentElement&&q.removeChild(q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ae){ot(i,i.return,ae)}if(n=i.sibling,n!==null){n.return=i.return,ge=n;break}ge=i.return}return ye=Hp,Hp=!1,ye}function La(n,i,a){var d=i.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var f=d=d.next;do{if((f.tag&n)===n){var g=f.destroy;f.destroy=void 0,g!==void 0&&Qd(i,a,g)}f=f.next}while(f!==d)}}function Ec(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&n)===n){var d=a.create;a.destroy=d()}a=a.next}while(a!==i)}}function Yd(n){var i=n.ref;if(i!==null){var a=n.stateNode;n.tag,n=a,typeof i=="function"?i(n):i.current=n}}function qp(n){var i=n.alternate;i!==null&&(n.alternate=null,qp(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[Zn],delete i[Sa],delete i[hd],delete i[o_],delete i[a_])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Wp(n){return n.tag===5||n.tag===3||n.tag===4}function Gp(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Wp(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Jd(n,i,a){var d=n.tag;if(d===5||d===6)n=n.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(n,i):a.insertBefore(n,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(n,a)):(i=a,i.appendChild(n)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Zl));else if(d!==4&&(n=n.child,n!==null))for(Jd(n,i,a),n=n.sibling;n!==null;)Jd(n,i,a),n=n.sibling}function Xd(n,i,a){var d=n.tag;if(d===5||d===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(d!==4&&(n=n.child,n!==null))for(Xd(n,i,a),n=n.sibling;n!==null;)Xd(n,i,a),n=n.sibling}var St=null,An=!1;function ds(n,i,a){for(a=a.child;a!==null;)Kp(n,i,a),a=a.sibling}function Kp(n,i,a){if(tn&&typeof tn.onCommitFiberUnmount=="function")try{tn.onCommitFiberUnmount(Ws,a)}catch{}switch(a.tag){case 5:Ot||po(a,i);case 6:var d=St,f=An;St=null,ds(n,i,a),St=d,An=f,St!==null&&(An?(n=St,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):St.removeChild(a.stateNode));break;case 18:St!==null&&(An?(n=St,a=a.stateNode,n.nodeType===8?dd(n.parentNode,a):n.nodeType===1&&dd(n,a),ts(n)):dd(St,a.stateNode));break;case 4:d=St,f=An,St=a.stateNode.containerInfo,An=!0,ds(n,i,a),St=d,An=f;break;case 0:case 11:case 14:case 15:if(!Ot&&(d=a.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){f=d=d.next;do{var g=f,_=g.destroy;g=g.tag,_!==void 0&&((g&2)!==0||(g&4)!==0)&&Qd(a,i,_),f=f.next}while(f!==d)}ds(n,i,a);break;case 1:if(!Ot&&(po(a,i),d=a.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=a.memoizedProps,d.state=a.memoizedState,d.componentWillUnmount()}catch(k){ot(a,i,k)}ds(n,i,a);break;case 21:ds(n,i,a);break;case 22:a.mode&1?(Ot=(d=Ot)||a.memoizedState!==null,ds(n,i,a),Ot=d):ds(n,i,a);break;default:ds(n,i,a)}}function Qp(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new b_),i.forEach(function(d){var f=j_.bind(null,n,d);a.has(d)||(a.add(d),d.then(f,f))})}}function Pn(n,i){var a=i.deletions;if(a!==null)for(var d=0;d<a.length;d++){var f=a[d];try{var g=n,_=i,k=_;e:for(;k!==null;){switch(k.tag){case 5:St=k.stateNode,An=!1;break e;case 3:St=k.stateNode.containerInfo,An=!0;break e;case 4:St=k.stateNode.containerInfo,An=!0;break e}k=k.return}if(St===null)throw Error(t(160));Kp(g,_,f),St=null,An=!1;var j=f.alternate;j!==null&&(j.return=null),f.return=null}catch(G){ot(f,i,G)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)Yp(i,n),i=i.sibling}function Yp(n,i){var a=n.alternate,d=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Pn(i,n),nr(n),d&4){try{La(3,n,n.return),Ec(3,n)}catch(ve){ot(n,n.return,ve)}try{La(5,n,n.return)}catch(ve){ot(n,n.return,ve)}}break;case 1:Pn(i,n),nr(n),d&512&&a!==null&&po(a,a.return);break;case 5:if(Pn(i,n),nr(n),d&512&&a!==null&&po(a,a.return),n.flags&32){var f=n.stateNode;try{Bs(f,"")}catch(ve){ot(n,n.return,ve)}}if(d&4&&(f=n.stateNode,f!=null)){var g=n.memoizedProps,_=a!==null?a.memoizedProps:g,k=n.type,j=n.updateQueue;if(n.updateQueue=null,j!==null)try{k==="input"&&g.type==="radio"&&g.name!=null&&Ri(f,g),Vi(k,_);var G=Vi(k,g);for(_=0;_<j.length;_+=2){var re=j[_],se=j[_+1];re==="style"?Di(f,se):re==="dangerouslySetInnerHTML"?Nl(f,se):re==="children"?Bs(f,se):Y(f,re,se,G)}switch(k){case"input":Us(f,g);break;case"textarea":Il(f,g);break;case"select":var te=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!g.multiple;var me=g.value;me!=null?bn(f,!!g.multiple,me,!1):te!==!!g.multiple&&(g.defaultValue!=null?bn(f,!!g.multiple,g.defaultValue,!0):bn(f,!!g.multiple,g.multiple?[]:"",!1))}f[Sa]=g}catch(ve){ot(n,n.return,ve)}}break;case 6:if(Pn(i,n),nr(n),d&4){if(n.stateNode===null)throw Error(t(162));f=n.stateNode,g=n.memoizedProps;try{f.nodeValue=g}catch(ve){ot(n,n.return,ve)}}break;case 3:if(Pn(i,n),nr(n),d&4&&a!==null&&a.memoizedState.isDehydrated)try{ts(i.containerInfo)}catch(ve){ot(n,n.return,ve)}break;case 4:Pn(i,n),nr(n);break;case 13:Pn(i,n),nr(n),f=n.child,f.flags&8192&&(g=f.memoizedState!==null,f.stateNode.isHidden=g,!g||f.alternate!==null&&f.alternate.memoizedState!==null||(th=Je())),d&4&&Qp(n);break;case 22:if(re=a!==null&&a.memoizedState!==null,n.mode&1?(Ot=(G=Ot)||re,Pn(i,n),Ot=G):Pn(i,n),nr(n),d&8192){if(G=n.memoizedState!==null,(n.stateNode.isHidden=G)&&!re&&(n.mode&1)!==0)for(ge=n,re=n.child;re!==null;){for(se=ge=re;ge!==null;){switch(te=ge,me=te.child,te.tag){case 0:case 11:case 14:case 15:La(4,te,te.return);break;case 1:po(te,te.return);var ye=te.stateNode;if(typeof ye.componentWillUnmount=="function"){d=te,a=te.return;try{i=d,ye.props=i.memoizedProps,ye.state=i.memoizedState,ye.componentWillUnmount()}catch(ve){ot(d,a,ve)}}break;case 5:po(te,te.return);break;case 22:if(te.memoizedState!==null){Zp(se);continue}}me!==null?(me.return=te,ge=me):Zp(se)}re=re.sibling}e:for(re=null,se=n;;){if(se.tag===5){if(re===null){re=se;try{f=se.stateNode,G?(g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(k=se.stateNode,j=se.memoizedProps.style,_=j!=null&&j.hasOwnProperty("display")?j.display:null,k.style.display=Wr("display",_))}catch(ve){ot(n,n.return,ve)}}}else if(se.tag===6){if(re===null)try{se.stateNode.nodeValue=G?"":se.memoizedProps}catch(ve){ot(n,n.return,ve)}}else if((se.tag!==22&&se.tag!==23||se.memoizedState===null||se===n)&&se.child!==null){se.child.return=se,se=se.child;continue}if(se===n)break e;for(;se.sibling===null;){if(se.return===null||se.return===n)break e;re===se&&(re=null),se=se.return}re===se&&(re=null),se.sibling.return=se.return,se=se.sibling}}break;case 19:Pn(i,n),nr(n),d&4&&Qp(n);break;case 21:break;default:Pn(i,n),nr(n)}}function nr(n){var i=n.flags;if(i&2){try{e:{for(var a=n.return;a!==null;){if(Wp(a)){var d=a;break e}a=a.return}throw Error(t(160))}switch(d.tag){case 5:var f=d.stateNode;d.flags&32&&(Bs(f,""),d.flags&=-33);var g=Gp(n);Xd(n,g,f);break;case 3:case 4:var _=d.stateNode.containerInfo,k=Gp(n);Jd(n,k,_);break;default:throw Error(t(161))}}catch(j){ot(n,n.return,j)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function I_(n,i,a){ge=n,Jp(n)}function Jp(n,i,a){for(var d=(n.mode&1)!==0;ge!==null;){var f=ge,g=f.child;if(f.tag===22&&d){var _=f.memoizedState!==null||wc;if(!_){var k=f.alternate,j=k!==null&&k.memoizedState!==null||Ot;k=wc;var G=Ot;if(wc=_,(Ot=j)&&!G)for(ge=f;ge!==null;)_=ge,j=_.child,_.tag===22&&_.memoizedState!==null?eg(f):j!==null?(j.return=_,ge=j):eg(f);for(;g!==null;)ge=g,Jp(g),g=g.sibling;ge=f,wc=k,Ot=G}Xp(n)}else(f.subtreeFlags&8772)!==0&&g!==null?(g.return=f,ge=g):Xp(n)}}function Xp(n){for(;ge!==null;){var i=ge;if((i.flags&8772)!==0){var a=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:Ot||Ec(5,i);break;case 1:var d=i.stateNode;if(i.flags&4&&!Ot)if(a===null)d.componentDidMount();else{var f=i.elementType===i.type?a.memoizedProps:kn(i.type,a.memoizedProps);d.componentDidUpdate(f,a.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var g=i.updateQueue;g!==null&&Zm(i,g,d);break;case 3:var _=i.updateQueue;if(_!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}Zm(i,_,a)}break;case 5:var k=i.stateNode;if(a===null&&i.flags&4){a=k;var j=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":j.autoFocus&&a.focus();break;case"img":j.src&&(a.src=j.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var G=i.alternate;if(G!==null){var re=G.memoizedState;if(re!==null){var se=re.dehydrated;se!==null&&ts(se)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ot||i.flags&512&&Yd(i)}catch(te){ot(i,i.return,te)}}if(i===n){ge=null;break}if(a=i.sibling,a!==null){a.return=i.return,ge=a;break}ge=i.return}}function Zp(n){for(;ge!==null;){var i=ge;if(i===n){ge=null;break}var a=i.sibling;if(a!==null){a.return=i.return,ge=a;break}ge=i.return}}function eg(n){for(;ge!==null;){var i=ge;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{Ec(4,i)}catch(j){ot(i,a,j)}break;case 1:var d=i.stateNode;if(typeof d.componentDidMount=="function"){var f=i.return;try{d.componentDidMount()}catch(j){ot(i,f,j)}}var g=i.return;try{Yd(i)}catch(j){ot(i,g,j)}break;case 5:var _=i.return;try{Yd(i)}catch(j){ot(i,_,j)}}}catch(j){ot(i,i.return,j)}if(i===n){ge=null;break}var k=i.sibling;if(k!==null){k.return=i.return,ge=k;break}ge=i.return}}var N_=Math.ceil,bc=ne.ReactCurrentDispatcher,Zd=ne.ReactCurrentOwner,xn=ne.ReactCurrentBatchConfig,Be=0,Et=null,mt=null,Ct=0,un=0,go=os(0),xt=0,Fa=null,li=0,Tc=0,eh=0,Ua=null,Yt=null,th=0,yo=1/0,Rr=null,Ic=!1,nh=null,hs=null,Nc=!1,fs=null,Sc=0,Ba=0,rh=null,Cc=-1,kc=0;function qt(){return(Be&6)!==0?Je():Cc!==-1?Cc:Cc=Je()}function ms(n){return(n.mode&1)===0?1:(Be&2)!==0&&Ct!==0?Ct&-Ct:c_.transition!==null?(kc===0&&(kc=la()),kc):(n=Me,n!==0||(n=window.event,n=n===void 0?16:qi(n.type)),n)}function Rn(n,i,a,d){if(50<Ba)throw Ba=0,rh=null,Error(t(185));Ys(n,a,d),((Be&2)===0||n!==Et)&&(n===Et&&((Be&2)===0&&(Tc|=a),xt===4&&ps(n,Ct)),Jt(n,d),a===1&&Be===0&&(i.mode&1)===0&&(yo=Je()+500,rc&&ls()))}function Jt(n,i){var a=n.callbackNode;Qs(n,i);var d=xr(n,n===Et?Ct:0);if(d===0)a!==null&&Li(a),n.callbackNode=null,n.callbackPriority=0;else if(i=d&-d,n.callbackPriority!==i){if(a!=null&&Li(a),i===1)n.tag===0?l_(ng.bind(null,n)):Bm(ng.bind(null,n)),s_(function(){(Be&6)===0&&ls()}),a=null;else{switch($n(d)){case 1:a=Fi;break;case 4:a=ia;break;case 16:a=qs;break;case 536870912:a=Ui;break;default:a=qs}a=ug(a,tg.bind(null,n))}n.callbackPriority=i,n.callbackNode=a}}function tg(n,i){if(Cc=-1,kc=0,(Be&6)!==0)throw Error(t(327));var a=n.callbackNode;if(vo()&&n.callbackNode!==a)return null;var d=xr(n,n===Et?Ct:0);if(d===0)return null;if((d&30)!==0||(d&n.expiredLanes)!==0||i)i=Ac(n,d);else{i=d;var f=Be;Be|=2;var g=sg();(Et!==n||Ct!==i)&&(Rr=null,yo=Je()+500,ui(n,i));do try{k_();break}catch(k){rg(n,k)}while(!0);wd(),bc.current=g,Be=f,mt!==null?i=0:(Et=null,Ct=0,i=xt)}if(i!==0){if(i===2&&(f=aa(n),f!==0&&(d=f,i=sh(n,f))),i===1)throw a=Fa,ui(n,0),ps(n,d),Jt(n,Je()),a;if(i===6)ps(n,d);else{if(f=n.current.alternate,(d&30)===0&&!S_(f)&&(i=Ac(n,d),i===2&&(g=aa(n),g!==0&&(d=g,i=sh(n,g))),i===1))throw a=Fa,ui(n,0),ps(n,d),Jt(n,Je()),a;switch(n.finishedWork=f,n.finishedLanes=d,i){case 0:case 1:throw Error(t(345));case 2:di(n,Yt,Rr);break;case 3:if(ps(n,d),(d&130023424)===d&&(i=th+500-Je(),10<i)){if(xr(n,0)!==0)break;if(f=n.suspendedLanes,(f&d)!==d){qt(),n.pingedLanes|=n.suspendedLanes&f;break}n.timeoutHandle=ud(di.bind(null,n,Yt,Rr),i);break}di(n,Yt,Rr);break;case 4:if(ps(n,d),(d&4194240)===d)break;for(i=n.eventTimes,f=-1;0<d;){var _=31-nn(d);g=1<<_,_=i[_],_>f&&(f=_),d&=~g}if(d=f,d=Je()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*N_(d/1960))-d,10<d){n.timeoutHandle=ud(di.bind(null,n,Yt,Rr),d);break}di(n,Yt,Rr);break;case 5:di(n,Yt,Rr);break;default:throw Error(t(329))}}}return Jt(n,Je()),n.callbackNode===a?tg.bind(null,n):null}function sh(n,i){var a=Ua;return n.current.memoizedState.isDehydrated&&(ui(n,i).flags|=256),n=Ac(n,i),n!==2&&(i=Yt,Yt=a,i!==null&&ih(i)),n}function ih(n){Yt===null?Yt=n:Yt.push.apply(Yt,n)}function S_(n){for(var i=n;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var d=0;d<a.length;d++){var f=a[d],g=f.getSnapshot;f=f.value;try{if(!Sn(g(),f))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ps(n,i){for(i&=~eh,i&=~Tc,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var a=31-nn(i),d=1<<a;n[a]=-1,i&=~d}}function ng(n){if((Be&6)!==0)throw Error(t(327));vo();var i=xr(n,0);if((i&1)===0)return Jt(n,Je()),null;var a=Ac(n,i);if(n.tag!==0&&a===2){var d=aa(n);d!==0&&(i=d,a=sh(n,d))}if(a===1)throw a=Fa,ui(n,0),ps(n,i),Jt(n,Je()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,di(n,Yt,Rr),Jt(n,Je()),null}function oh(n,i){var a=Be;Be|=1;try{return n(i)}finally{Be=a,Be===0&&(yo=Je()+500,rc&&ls())}}function ci(n){fs!==null&&fs.tag===0&&(Be&6)===0&&vo();var i=Be;Be|=1;var a=xn.transition,d=Me;try{if(xn.transition=null,Me=1,n)return n()}finally{Me=d,xn.transition=a,Be=i,(Be&6)===0&&ls()}}function ah(){un=go.current,Ze(go)}function ui(n,i){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,r_(a)),mt!==null)for(a=mt.return;a!==null;){var d=a;switch(gd(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&tc();break;case 3:fo(),Ze(Gt),Ze(jt),kd();break;case 5:Sd(d);break;case 4:fo();break;case 13:Ze(nt);break;case 19:Ze(nt);break;case 10:Ed(d.type._context);break;case 22:case 23:ah()}a=a.return}if(Et=n,mt=n=gs(n.current,null),Ct=un=i,xt=0,Fa=null,eh=Tc=li=0,Yt=Ua=null,ii!==null){for(i=0;i<ii.length;i++)if(a=ii[i],d=a.interleaved,d!==null){a.interleaved=null;var f=d.next,g=a.pending;if(g!==null){var _=g.next;g.next=f,d.next=_}a.pending=d}ii=null}return n}function rg(n,i){do{var a=mt;try{if(wd(),fc.current=yc,mc){for(var d=rt.memoizedState;d!==null;){var f=d.queue;f!==null&&(f.pending=null),d=d.next}mc=!1}if(ai=0,wt=vt=rt=null,ja=!1,Da=0,Zd.current=null,a===null||a.return===null){xt=1,Fa=i,mt=null;break}e:{var g=n,_=a.return,k=a,j=i;if(i=Ct,k.flags|=32768,j!==null&&typeof j=="object"&&typeof j.then=="function"){var G=j,re=k,se=re.tag;if((re.mode&1)===0&&(se===0||se===11||se===15)){var te=re.alternate;te?(re.updateQueue=te.updateQueue,re.memoizedState=te.memoizedState,re.lanes=te.lanes):(re.updateQueue=null,re.memoizedState=null)}var me=Cp(_);if(me!==null){me.flags&=-257,kp(me,_,k,g,i),me.mode&1&&Sp(g,G,i),i=me,j=G;var ye=i.updateQueue;if(ye===null){var ve=new Set;ve.add(j),i.updateQueue=ve}else ye.add(j);break e}else{if((i&1)===0){Sp(g,G,i),lh();break e}j=Error(t(426))}}else if(tt&&k.mode&1){var ct=Cp(_);if(ct!==null){(ct.flags&65536)===0&&(ct.flags|=256),kp(ct,_,k,g,i),xd(mo(j,k));break e}}g=j=mo(j,k),xt!==4&&(xt=2),Ua===null?Ua=[g]:Ua.push(g),g=_;do{switch(g.tag){case 3:g.flags|=65536,i&=-i,g.lanes|=i;var $=Ip(g,j,i);Xm(g,$);break e;case 1:k=j;var V=g.type,q=g.stateNode;if((g.flags&128)===0&&(typeof V.getDerivedStateFromError=="function"||q!==null&&typeof q.componentDidCatch=="function"&&(hs===null||!hs.has(q)))){g.flags|=65536,i&=-i,g.lanes|=i;var ae=Np(g,k,i);Xm(g,ae);break e}}g=g.return}while(g!==null)}og(a)}catch(xe){i=xe,mt===a&&a!==null&&(mt=a=a.return);continue}break}while(!0)}function sg(){var n=bc.current;return bc.current=yc,n===null?yc:n}function lh(){(xt===0||xt===3||xt===2)&&(xt=4),Et===null||(li&268435455)===0&&(Tc&268435455)===0||ps(Et,Ct)}function Ac(n,i){var a=Be;Be|=2;var d=sg();(Et!==n||Ct!==i)&&(Rr=null,ui(n,i));do try{C_();break}catch(f){rg(n,f)}while(!0);if(wd(),Be=a,bc.current=d,mt!==null)throw Error(t(261));return Et=null,Ct=0,xt}function C_(){for(;mt!==null;)ig(mt)}function k_(){for(;mt!==null&&!Hs();)ig(mt)}function ig(n){var i=cg(n.alternate,n,un);n.memoizedProps=n.pendingProps,i===null?og(n):mt=i,Zd.current=null}function og(n){var i=n;do{var a=i.alternate;if(n=i.return,(i.flags&32768)===0){if(a=w_(a,i,un),a!==null){mt=a;return}}else{if(a=E_(a,i),a!==null){a.flags&=32767,mt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{xt=6,mt=null;return}}if(i=i.sibling,i!==null){mt=i;return}mt=i=n}while(i!==null);xt===0&&(xt=5)}function di(n,i,a){var d=Me,f=xn.transition;try{xn.transition=null,Me=1,A_(n,i,a,d)}finally{xn.transition=f,Me=d}return null}function A_(n,i,a,d){do vo();while(fs!==null);if((Be&6)!==0)throw Error(t(327));a=n.finishedWork;var f=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var g=a.lanes|a.childLanes;if(Ku(n,g),n===Et&&(mt=Et=null,Ct=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Nc||(Nc=!0,ug(qs,function(){return vo(),null})),g=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||g){g=xn.transition,xn.transition=null;var _=Me;Me=1;var k=Be;Be|=4,Zd.current=null,T_(n,a),Yp(a,n),Yx(ld),Er=!!ad,ld=ad=null,n.current=a,I_(a),vr(),Be=k,Me=_,xn.transition=g}else n.current=a;if(Nc&&(Nc=!1,fs=n,Sc=f),g=n.pendingLanes,g===0&&(hs=null),Ml(a.stateNode),Jt(n,Je()),i!==null)for(d=n.onRecoverableError,a=0;a<i.length;a++)f=i[a],d(f.value,{componentStack:f.stack,digest:f.digest});if(Ic)throw Ic=!1,n=nh,nh=null,n;return(Sc&1)!==0&&n.tag!==0&&vo(),g=n.pendingLanes,(g&1)!==0?n===rh?Ba++:(Ba=0,rh=n):Ba=0,ls(),null}function vo(){if(fs!==null){var n=$n(Sc),i=xn.transition,a=Me;try{if(xn.transition=null,Me=16>n?16:n,fs===null)var d=!1;else{if(n=fs,fs=null,Sc=0,(Be&6)!==0)throw Error(t(331));var f=Be;for(Be|=4,ge=n.current;ge!==null;){var g=ge,_=g.child;if((ge.flags&16)!==0){var k=g.deletions;if(k!==null){for(var j=0;j<k.length;j++){var G=k[j];for(ge=G;ge!==null;){var re=ge;switch(re.tag){case 0:case 11:case 15:La(8,re,g)}var se=re.child;if(se!==null)se.return=re,ge=se;else for(;ge!==null;){re=ge;var te=re.sibling,me=re.return;if(qp(re),re===G){ge=null;break}if(te!==null){te.return=me,ge=te;break}ge=me}}}var ye=g.alternate;if(ye!==null){var ve=ye.child;if(ve!==null){ye.child=null;do{var ct=ve.sibling;ve.sibling=null,ve=ct}while(ve!==null)}}ge=g}}if((g.subtreeFlags&2064)!==0&&_!==null)_.return=g,ge=_;else e:for(;ge!==null;){if(g=ge,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:La(9,g,g.return)}var $=g.sibling;if($!==null){$.return=g.return,ge=$;break e}ge=g.return}}var V=n.current;for(ge=V;ge!==null;){_=ge;var q=_.child;if((_.subtreeFlags&2064)!==0&&q!==null)q.return=_,ge=q;else e:for(_=V;ge!==null;){if(k=ge,(k.flags&2048)!==0)try{switch(k.tag){case 0:case 11:case 15:Ec(9,k)}}catch(xe){ot(k,k.return,xe)}if(k===_){ge=null;break e}var ae=k.sibling;if(ae!==null){ae.return=k.return,ge=ae;break e}ge=k.return}}if(Be=f,ls(),tn&&typeof tn.onPostCommitFiberRoot=="function")try{tn.onPostCommitFiberRoot(Ws,n)}catch{}d=!0}return d}finally{Me=a,xn.transition=i}}return!1}function ag(n,i,a){i=mo(a,i),i=Ip(n,i,1),n=us(n,i,1),i=qt(),n!==null&&(Ys(n,1,i),Jt(n,i))}function ot(n,i,a){if(n.tag===3)ag(n,n,a);else for(;i!==null;){if(i.tag===3){ag(i,n,a);break}else if(i.tag===1){var d=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(hs===null||!hs.has(d))){n=mo(a,n),n=Np(i,n,1),i=us(i,n,1),n=qt(),i!==null&&(Ys(i,1,n),Jt(i,n));break}}i=i.return}}function P_(n,i,a){var d=n.pingCache;d!==null&&d.delete(i),i=qt(),n.pingedLanes|=n.suspendedLanes&a,Et===n&&(Ct&a)===a&&(xt===4||xt===3&&(Ct&130023424)===Ct&&500>Je()-th?ui(n,0):eh|=a),Jt(n,i)}function lg(n,i){i===0&&((n.mode&1)===0?i=1:(i=Xr,Xr<<=1,(Xr&130023424)===0&&(Xr=4194304)));var a=qt();n=kr(n,i),n!==null&&(Ys(n,i,a),Jt(n,a))}function R_(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),lg(n,a)}function j_(n,i){var a=0;switch(n.tag){case 13:var d=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:d=n.stateNode;break;default:throw Error(t(314))}d!==null&&d.delete(i),lg(n,a)}var cg;cg=function(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps||Gt.current)Qt=!0;else{if((n.lanes&a)===0&&(i.flags&128)===0)return Qt=!1,__(n,i,a);Qt=(n.flags&131072)!==0}else Qt=!1,tt&&(i.flags&1048576)!==0&&zm(i,ic,i.index);switch(i.lanes=0,i.tag){case 2:var d=i.type;_c(n,i),n=i.pendingProps;var f=io(i,jt.current);ho(i,a),f=Rd(null,i,d,n,f,a);var g=jd();return i.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Kt(d)?(g=!0,nc(i)):g=!1,i.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,Id(i),f.updater=vc,i.stateNode=f,f._reactInternals=i,Fd(i,d,n,a),i=$d(null,i,d,!0,g,a)):(i.tag=0,tt&&g&&pd(i),Ht(null,i,f,a),i=i.child),i;case 16:d=i.elementType;e:{switch(_c(n,i),n=i.pendingProps,f=d._init,d=f(d._payload),i.type=d,f=i.tag=V_(d),n=kn(d,n),f){case 0:i=zd(null,i,d,n,a);break e;case 1:i=Vp(null,i,d,n,a);break e;case 11:i=Ap(null,i,d,n,a);break e;case 14:i=Pp(null,i,d,kn(d.type,n),a);break e}throw Error(t(306,d,""))}return i;case 0:return d=i.type,f=i.pendingProps,f=i.elementType===d?f:kn(d,f),zd(n,i,d,f,a);case 1:return d=i.type,f=i.pendingProps,f=i.elementType===d?f:kn(d,f),Vp(n,i,d,f,a);case 3:e:{if(Op(i),n===null)throw Error(t(387));d=i.pendingProps,g=i.memoizedState,f=g.element,Jm(n,i),dc(i,d,null,a);var _=i.memoizedState;if(d=_.element,g.isDehydrated)if(g={element:d,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){f=mo(Error(t(423)),i),i=Mp(n,i,d,a,f);break e}else if(d!==f){f=mo(Error(t(424)),i),i=Mp(n,i,d,a,f);break e}else for(cn=is(i.stateNode.containerInfo.firstChild),ln=i,tt=!0,Cn=null,a=Qm(i,null,d,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(lo(),d===f){i=Pr(n,i,a);break e}Ht(n,i,d,a)}i=i.child}return i;case 5:return ep(i),n===null&&vd(i),d=i.type,f=i.pendingProps,g=n!==null?n.memoizedProps:null,_=f.children,cd(d,f)?_=null:g!==null&&cd(d,g)&&(i.flags|=32),Dp(n,i),Ht(n,i,_,a),i.child;case 6:return n===null&&vd(i),null;case 13:return Lp(n,i,a);case 4:return Nd(i,i.stateNode.containerInfo),d=i.pendingProps,n===null?i.child=co(i,null,d,a):Ht(n,i,d,a),i.child;case 11:return d=i.type,f=i.pendingProps,f=i.elementType===d?f:kn(d,f),Ap(n,i,d,f,a);case 7:return Ht(n,i,i.pendingProps,a),i.child;case 8:return Ht(n,i,i.pendingProps.children,a),i.child;case 12:return Ht(n,i,i.pendingProps.children,a),i.child;case 10:e:{if(d=i.type._context,f=i.pendingProps,g=i.memoizedProps,_=f.value,Qe(lc,d._currentValue),d._currentValue=_,g!==null)if(Sn(g.value,_)){if(g.children===f.children&&!Gt.current){i=Pr(n,i,a);break e}}else for(g=i.child,g!==null&&(g.return=i);g!==null;){var k=g.dependencies;if(k!==null){_=g.child;for(var j=k.firstContext;j!==null;){if(j.context===d){if(g.tag===1){j=Ar(-1,a&-a),j.tag=2;var G=g.updateQueue;if(G!==null){G=G.shared;var re=G.pending;re===null?j.next=j:(j.next=re.next,re.next=j),G.pending=j}}g.lanes|=a,j=g.alternate,j!==null&&(j.lanes|=a),bd(g.return,a,i),k.lanes|=a;break}j=j.next}}else if(g.tag===10)_=g.type===i.type?null:g.child;else if(g.tag===18){if(_=g.return,_===null)throw Error(t(341));_.lanes|=a,k=_.alternate,k!==null&&(k.lanes|=a),bd(_,a,i),_=g.sibling}else _=g.child;if(_!==null)_.return=g;else for(_=g;_!==null;){if(_===i){_=null;break}if(g=_.sibling,g!==null){g.return=_.return,_=g;break}_=_.return}g=_}Ht(n,i,f.children,a),i=i.child}return i;case 9:return f=i.type,d=i.pendingProps.children,ho(i,a),f=yn(f),d=d(f),i.flags|=1,Ht(n,i,d,a),i.child;case 14:return d=i.type,f=kn(d,i.pendingProps),f=kn(d.type,f),Pp(n,i,d,f,a);case 15:return Rp(n,i,i.type,i.pendingProps,a);case 17:return d=i.type,f=i.pendingProps,f=i.elementType===d?f:kn(d,f),_c(n,i),i.tag=1,Kt(d)?(n=!0,nc(i)):n=!1,ho(i,a),bp(i,d,f),Fd(i,d,f,a),$d(null,i,d,!0,n,a);case 19:return Up(n,i,a);case 22:return jp(n,i,a)}throw Error(t(156,i.tag))};function ug(n,i){return sa(n,i)}function D_(n,i,a,d){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _n(n,i,a,d){return new D_(n,i,a,d)}function ch(n){return n=n.prototype,!(!n||!n.isReactComponent)}function V_(n){if(typeof n=="function")return ch(n)?1:0;if(n!=null){if(n=n.$$typeof,n===M)return 11;if(n===Se)return 14}return 2}function gs(n,i){var a=n.alternate;return a===null?(a=_n(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Pc(n,i,a,d,f,g){var _=2;if(d=n,typeof n=="function")ch(n)&&(_=1);else if(typeof n=="string")_=5;else e:switch(n){case C:return hi(a.children,f,g,i);case I:_=8,f|=8;break;case A:return n=_n(12,a,i,f|2),n.elementType=A,n.lanes=g,n;case w:return n=_n(13,a,i,f),n.elementType=w,n.lanes=g,n;case ie:return n=_n(19,a,i,f),n.elementType=ie,n.lanes=g,n;case Le:return Rc(a,f,g,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case D:_=10;break e;case P:_=9;break e;case M:_=11;break e;case Se:_=14;break e;case Re:_=16,d=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return i=_n(_,a,i,f),i.elementType=n,i.type=d,i.lanes=g,i}function hi(n,i,a,d){return n=_n(7,n,d,i),n.lanes=a,n}function Rc(n,i,a,d){return n=_n(22,n,d,i),n.elementType=Le,n.lanes=a,n.stateNode={isHidden:!1},n}function uh(n,i,a){return n=_n(6,n,null,i),n.lanes=a,n}function dh(n,i,a){return i=_n(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function O_(n,i,a,d,f){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ca(0),this.expirationTimes=ca(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ca(0),this.identifierPrefix=d,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function hh(n,i,a,d,f,g,_,k,j){return n=new O_(n,i,a,k,j),i===1?(i=1,g===!0&&(i|=8)):i=0,g=_n(3,null,null,i),n.current=g,g.stateNode=n,g.memoizedState={element:d,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Id(g),n}function M_(n,i,a){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ce,key:d==null?null:""+d,children:n,containerInfo:i,implementation:a}}function dg(n){if(!n)return as;n=n._reactInternals;e:{if(In(n)!==n||n.tag!==1)throw Error(t(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Kt(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Kt(a))return Fm(n,a,i)}return i}function hg(n,i,a,d,f,g,_,k,j){return n=hh(a,d,!0,n,f,g,_,k,j),n.context=dg(null),a=n.current,d=qt(),f=ms(a),g=Ar(d,f),g.callback=i??null,us(a,g,f),n.current.lanes=f,Ys(n,f,d),Jt(n,d),n}function jc(n,i,a,d){var f=i.current,g=qt(),_=ms(f);return a=dg(a),i.context===null?i.context=a:i.pendingContext=a,i=Ar(g,_),i.payload={element:n},d=d===void 0?null:d,d!==null&&(i.callback=d),n=us(f,i,_),n!==null&&(Rn(n,f,_,g),uc(n,f,_)),_}function Dc(n){return n=n.current,n.child?(n.child.tag===5,n.child.stateNode):null}function fg(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function fh(n,i){fg(n,i),(n=n.alternate)&&fg(n,i)}function L_(){return null}var mg=typeof reportError=="function"?reportError:function(n){console.error(n)};function mh(n){this._internalRoot=n}Vc.prototype.render=mh.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(t(409));jc(n,i,null,null)},Vc.prototype.unmount=mh.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;ci(function(){jc(null,n,null,null)}),i[Ir]=null}};function Vc(n){this._internalRoot=n}Vc.prototype.unstable_scheduleHydration=function(n){if(n){var i=fa();n={blockedOn:null,target:n,priority:i};for(var a=0;a<rn.length&&i!==0&&i<rn[a].priority;a++);rn.splice(a,0,n),a===0&&$i(n)}};function ph(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Oc(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function pg(){}function F_(n,i,a,d,f){if(f){if(typeof d=="function"){var g=d;d=function(){var G=Dc(_);g.call(G)}}var _=hg(i,d,n,0,null,!1,!1,"",pg);return n._reactRootContainer=_,n[Ir]=_.current,Ia(n.nodeType===8?n.parentNode:n),ci(),_}for(;f=n.lastChild;)n.removeChild(f);if(typeof d=="function"){var k=d;d=function(){var G=Dc(j);k.call(G)}}var j=hh(n,0,!1,null,null,!1,!1,"",pg);return n._reactRootContainer=j,n[Ir]=j.current,Ia(n.nodeType===8?n.parentNode:n),ci(function(){jc(i,j,a,d)}),j}function Mc(n,i,a,d,f){var g=a._reactRootContainer;if(g){var _=g;if(typeof f=="function"){var k=f;f=function(){var j=Dc(_);k.call(j)}}jc(i,_,n,f)}else _=F_(a,i,n,f,d);return Dc(_)}da=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var a=$e(i.pendingLanes);a!==0&&(ua(i,a|1),Jt(i,Je()),(Be&6)===0&&(yo=Je()+500,ls()))}break;case 13:ci(function(){var d=kr(n,1);if(d!==null){var f=qt();Rn(d,n,1,f)}}),fh(n,1)}},Bi=function(n){if(n.tag===13){var i=kr(n,134217728);if(i!==null){var a=qt();Rn(i,n,134217728,a)}fh(n,134217728)}},ha=function(n){if(n.tag===13){var i=ms(n),a=kr(n,i);if(a!==null){var d=qt();Rn(a,n,i,d)}fh(n,i)}},fa=function(){return Me},ma=function(n,i){var a=Me;try{return Me=n,i()}finally{Me=a}},pr=function(n,i,a){switch(i){case"input":if(Us(n,a),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var d=a[i];if(d!==n&&d.form===n.form){var f=ec(d);if(!f)throw Error(t(90));Qo(d),Us(d,f)}}}break;case"textarea":Il(n,a);break;case"select":i=a.value,i!=null&&bn(n,!!a.multiple,i,!1)}},Cl=oh,kl=ci;var U_={usingClientEntryPoint:!1,Events:[Ca,ro,ec,Kr,Qr,oh]},za={findFiberByHostInstance:ti,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},B_={bundleType:za.bundleType,version:za.version,rendererPackageName:za.rendererPackageName,rendererConfig:za.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ne.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Ol(n),n===null?null:n.stateNode},findFiberByHostInstance:za.findFiberByHostInstance||L_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lc.isDisabled&&Lc.supportsFiber)try{Ws=Lc.inject(B_),tn=Lc}catch{}}return Xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U_,Xt.createPortal=function(n,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ph(i))throw Error(t(200));return M_(n,i,null,a)},Xt.createRoot=function(n,i){if(!ph(n))throw Error(t(299));var a=!1,d="",f=mg;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onRecoverableError!==void 0&&(f=i.onRecoverableError)),i=hh(n,1,!1,null,null,a,!1,d,f),n[Ir]=i.current,Ia(n.nodeType===8?n.parentNode:n),new mh(i)},Xt.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Ol(i),n=n===null?null:n.stateNode,n},Xt.flushSync=function(n){return ci(n)},Xt.hydrate=function(n,i,a){if(!Oc(i))throw Error(t(200));return Mc(null,n,i,!0,a)},Xt.hydrateRoot=function(n,i,a){if(!ph(n))throw Error(t(405));var d=a!=null&&a.hydratedSources||null,f=!1,g="",_=mg;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(_=a.onRecoverableError)),i=hg(i,null,n,1,a??null,f,!1,g,_),n[Ir]=i.current,Ia(n),d)for(n=0;n<d.length;n++)a=d[n],f=a._getVersion,f=f(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,f]:i.mutableSourceEagerHydrationData.push(a,f);return new Vc(i)},Xt.render=function(n,i,a){if(!Oc(i))throw Error(t(200));return Mc(null,n,i,!1,a)},Xt.unmountComponentAtNode=function(n){if(!Oc(n))throw Error(t(40));return n._reactRootContainer?(ci(function(){Mc(null,null,n,!1,function(){n._reactRootContainer=null,n[Ir]=null})}),!0):!1},Xt.unstable_batchedUpdates=oh,Xt.unstable_renderSubtreeIntoContainer=function(n,i,a,d){if(!Oc(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Mc(n,i,a,!1,d)},Xt.version="18.3.1-next-f1338f8080-20240426",Xt}var bg;function sv(){if(bg)return vh.exports;bg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),vh.exports=Q_(),vh.exports}var Tg;function Y_(){if(Tg)return Fc;Tg=1;var r=sv();return Fc.createRoot=r.createRoot,Fc.hydrateRoot=r.hydrateRoot,Fc}var J_=Y_();let xo=null;function X_(){return xo||(xo=document.createElement("div"),xo.className="fixed bottom-4 right-4 space-y-2 z-[100000]",xo.style.pointerEvents="none",document.body.appendChild(xo)),xo}function He(r,e="info"){const t=X_(),s=document.createElement("div");s.className=`bg-white shadow-lg rounded-lg px-4 py-3 border-l-4 transform translate-x-full transition-transform duration-300 ${e==="success"?"border-green-500 text-green-800":e==="error"?"border-red-500 text-red-800":e==="info"?"border-blue-500 text-blue-800":"border-gray-500 text-gray-800"}`,s.style.pointerEvents="auto",s.textContent=r,t.appendChild(s),setTimeout(()=>{s.style.transform="translateX(0)"},10),setTimeout(()=>{s.style.transform="translateX(full)",setTimeout(()=>{t.contains(s)&&t.removeChild(s)},300)},3e3)}function Z_({cartCount:r,isMenuOpen:e,setIsMenuOpen:t,currentUser:s,onOpenAuth:o,onLogout:l,onOpenCart:h,onOpenWatchlist:m,onOpenAccountSummary:p}){const[v,E]=J.useState(!1),[b,N]=J.useState(["Electronics","Fashion","Furniture","Accessories"]),[L,Q]=J.useState(""),[B,O]=J.useState("All Categories"),[U,z]=J.useState([]),[Y,ne]=J.useState(!1),W=J.useRef(null),ce=J.useRef(null);J.useEffect(()=>{const w=ie=>{v&&W.current&&!W.current.contains(ie.target)&&E(!1),Y&&ce.current&&!ce.current.contains(ie.target)&&ne(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[v,Y]),J.useEffect(()=>{window.CategoryManager&&N(window.CategoryManager.getAll());const w=ie=>{ie.key==="luxemarket_categories"&&window.CategoryManager&&N(window.CategoryManager.getAll())};return window.addEventListener("storage",w),()=>window.removeEventListener("storage",w)},[]);const C=w=>`/#featured-products?category=${encodeURIComponent(w)}`,I=(w,ie)=>{w.preventDefault(),E(!1),O(ie),Q(""),window.location.hash="products-section",window.dispatchEvent(new CustomEvent("filterByCategory",{detail:{category:ie}}))};J.useEffect(()=>{const w=new URLSearchParams(window.location.search),ie=w.get("search"),Se=w.get("category");ie&&Q(ie),Se&&O(Se)},[]),J.useEffect(()=>{if(L&&L.trim().length>0){const w=window.ProductManager?window.ProductManager.getAll():[],ie=L.toLowerCase(),Se=w.filter(Re=>{const Le=Re.name.toLowerCase().includes(ie)||Re.description.toLowerCase().includes(ie)||Re.category.toLowerCase().includes(ie),oe=B==="All Categories"||Re.category.toLowerCase()===B.toLowerCase()||Re.category.toLowerCase().includes(ie);return Le&&oe}).slice(0,5);z(Se),console.log(" Search Debug:",{searchTerm:ie,searchCategory:B,totalProducts:w.length,filteredResults:Se.length,furnitureProducts:w.filter(Re=>Re.category.toLowerCase().includes("furniture")).length,allCategories:[...new Set(w.map(Re=>Re.category))]})}else z([])},[L,B]);const A=(w,ie)=>{try{let Se=L,Re=B;typeof w=="string"&&(Se=w),typeof ie=="string"&&(Re=ie),w===""&&(Se="");let Le="index.html?";const oe=[];Se&&typeof Se=="string"&&Se.trim()&&oe.push(`search=${encodeURIComponent(Se.trim())}`),Re&&typeof Re=="string"&&Re!=="All Categories"&&oe.push(`category=${encodeURIComponent(Re)}`);const F=Le+oe.join("&")+"#featured-products";window.location.href=F,ne(!1)}catch(Se){console.error("Search error:",Se),He("Search failed: "+Se.message,"error")}},D=w=>{ne(!1),Q(""),window.dispatchEvent(new CustomEvent("openProduct",{detail:{productId:w.id}}))},P=(w,ie)=>{w.preventDefault(),He(`${ie} feature coming soon!`,"info")},M=(w,ie)=>{w.preventDefault(),ie()};return u.jsxs("header",{className:"font-sans text-sm","data-name":"header","data-file":"components/Header.js",children:[u.jsx("div",{className:"bg-white border-b border-gray-200 py-1 hidden md:block",children:u.jsxs("div",{className:"container-custom flex justify-between items-center text-xs text-gray-600",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[s?u.jsxs("span",{className:"flex items-center gap-1",children:["Hi, ",u.jsx("span",{className:"font-bold text-gray-800",children:s.name}),"!",u.jsx("button",{onClick:l,className:"text-blue-600 hover:underline ml-1",children:"Sign out"})]}):u.jsxs("span",{className:"flex items-center gap-1",children:["Hi! ",u.jsx("button",{onClick:()=>o(!1),className:"text-blue-600 hover:underline",children:"Sign in"})," or ",u.jsx("button",{onClick:()=>o(!0),className:"text-blue-600 hover:underline",children:"register"})]}),u.jsx("button",{onClick:w=>{w.preventDefault(),window.dispatchEvent(new CustomEvent("filterByDeals"))},className:"hover:underline text-[var(--accent-color)] font-medium cursor-pointer bg-transparent border-none",children:"Daily Deals"}),u.jsx("a",{href:"#footer",className:"hover:underline",children:"Help & Contact"})]}),u.jsxs("div",{className:"flex items-center gap-6",children:[u.jsx("a",{href:"#",onClick:w=>P(w,"Shipping selection"),className:"hover:underline",children:"Ship to"}),u.jsxs("a",{href:"#admin",className:"hover:underline flex items-center gap-1",children:[u.jsx("div",{className:"icon-store text-xs"}),"Sell"]}),u.jsxs("a",{href:"#",onClick:w=>M(w,m),className:"hover:underline flex items-center gap-1",children:["Watchlist ",u.jsx("div",{className:"icon-chevron-down text-[10px]"})]}),u.jsxs("div",{className:"relative group cursor-pointer z-[50]",children:[u.jsxs("span",{className:"hover:underline flex items-center gap-1",children:["My LuxeMarket ",u.jsx("div",{className:"icon-chevron-down text-[10px]"})]}),u.jsxs("div",{className:"absolute right-0 top-full bg-white border border-gray-200 shadow-lg rounded-b-md p-2 hidden group-hover:block w-40",children:[u.jsx("button",{onClick:p,className:"block w-full text-left px-2 py-1 hover:bg-gray-100",children:"Summary"}),u.jsx("a",{href:"#",onClick:w=>P(w,"Recently Viewed"),className:"block px-2 py-1 hover:bg-gray-100",children:"Recently Viewed"}),u.jsx("a",{href:"#",onClick:w=>P(w,"Bids/Offers"),className:"block px-2 py-1 hover:bg-gray-100",children:"Bids/Offers"}),u.jsx("a",{href:"#",onClick:w=>P(w,"Purchase History"),className:"block px-2 py-1 hover:bg-gray-100",children:"Purchase History"})]})]}),u.jsx("a",{href:"#",onClick:w=>P(w,"Notifications"),className:"hover:text-gray-900 relative",title:"Notifications",children:u.jsx("div",{className:"icon-bell text-lg"})}),u.jsxs("button",{onClick:h,className:"hover:text-gray-900 relative cart-button",title:"Cart",children:[u.jsx("div",{className:"icon-shopping-cart text-lg"}),r>0&&u.jsx("span",{className:"absolute -top-1 -right-2 inline-flex items-center justify-center px-1.5 py-0.5 text-[10px] font-bold leading-none text-white transform bg-red-600 rounded-full cart-count-badge",children:r})]})]})]})}),u.jsx("div",{className:"bg-white py-3 border-b border-gray-200 sticky top-0 z-[10] shadow-sm",children:u.jsx("div",{className:"container-custom",children:u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("button",{onClick:()=>t(!e),className:"md:hidden text-gray-600 hover:text-gray-900",children:u.jsx("div",{className:"icon-menu text-2xl"})}),u.jsxs("a",{href:"#",onClick:w=>{w.preventDefault(),window.location.hash=""},className:"flex-shrink-0 flex items-center gap-1 group",children:[u.jsx("div",{className:"icon-shopping-bag text-3xl text-[var(--primary-color)]"}),u.jsxs("span",{className:"text-2xl font-bold tracking-tighter text-gray-900",children:["Luxe",u.jsx("span",{className:"text-[var(--primary-color)]",children:"Market"})]})]}),u.jsxs("div",{ref:W,className:"relative hidden md:block",children:[u.jsxs("button",{onClick:w=>{console.log(`[Header] Toggle button clicked. Current state: ${v}`),w.stopPropagation(),E(!v)},className:`text-gray-600 hover:text-gray-900 text-sm font-medium flex items-center gap-1 whitespace-nowrap px-2 py-2 rounded-md transition-colors ${v?"bg-gray-100":""}`,children:["Shop by category ",u.jsx("div",{className:`icon-chevron-down text-xs transition-transform ${v?"rotate-180":""}`})]}),v&&u.jsxs("div",{className:"absolute top-full left-0 mt-2 w-64 bg-white border border-gray-200 shadow-xl rounded-lg p-4 z-[20] grid grid-cols-1 gap-2 animate-[fadeIn_0.2s_ease-out] category-dropdown",children:[b.map(w=>u.jsxs("a",{href:C(w),onClick:ie=>I(ie,w),className:"hover:text-[var(--primary-color)] hover:underline flex items-center gap-2 p-1 rounded hover:bg-gray-50",children:[u.jsx("div",{className:"icon-chevron-right text-xs text-gray-400"}),w]},w)),u.jsx("div",{className:"border-t border-gray-100 mt-2 pt-2",children:u.jsx("a",{href:"#featured-products",className:"font-bold hover:underline block p-1",children:"See all categories"})})]})]}),u.jsxs("div",{ref:ce,className:"flex-grow flex items-center max-w-4xl mx-auto relative",children:[u.jsxs("div",{className:"flex-grow flex border-2 border-gray-300 rounded-full hover:border-gray-400 focus-within:border-[var(--primary-color)] transition-colors h-10 md:h-11 relative bg-gray-100",children:[u.jsx("div",{className:"pl-3 flex items-center text-gray-400",children:u.jsx("div",{className:"icon-search text-gray-500"})}),u.jsx("input",{type:"text",placeholder:"Search for anything",className:"flex-grow px-3 bg-transparent border-none focus:outline-none text-gray-900 placeholder-gray-500 w-full",value:L,onChange:w=>{Q(w.target.value),ne(!0)},onKeyDown:w=>w.key==="Enter"&&A(),onFocus:()=>ne(!0)}),u.jsx("div",{className:"hidden md:flex items-center border-l border-gray-300 px-3",children:u.jsxs("select",{value:B,onChange:w=>{const ie=w.target.value;O(ie),A(L,ie)},className:"bg-transparent text-gray-600 text-sm focus:outline-none cursor-pointer max-w-[120px] truncate",children:[u.jsx("option",{value:"All Categories",children:"All Categories"}),b.map(w=>u.jsx("option",{value:w,children:w},w))]})})]}),u.jsx("button",{onClick:()=>A(),className:"btn btn-primary rounded-full px-6 ml-2 h-10 md:h-11 text-base font-semibold min-w-[100px] hidden md:block hover:shadow-md transition-shadow",children:"Search"}),Y&&L.length>0&&u.jsxs("div",{className:"absolute top-full left-0 right-0 mt-3 bg-white border border-gray-200 shadow-2xl rounded-2xl overflow-hidden max-h-[70vh] overflow-y-auto z-[30] animate-[fadeIn_0.2s_ease-out] search-dropdown",children:[u.jsxs("div",{className:"p-4 border-b border-gray-50 bg-gray-50/50 flex justify-between items-center",children:[u.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Suggested Products"}),u.jsxs("span",{className:"text-xs text-gray-400",children:[U.length," results"]})]}),U.length>0?u.jsxs("div",{className:"divide-y divide-gray-50",children:[U.map(w=>u.jsxs("button",{onClick:()=>D(w),className:"flex items-center gap-4 p-4 hover:bg-blue-50/50 transition-all group w-full text-left",children:[u.jsx("div",{className:"w-14 h-14 rounded-xl overflow-hidden border border-gray-100 bg-gray-50 flex-shrink-0 group-hover:scale-105 transition-transform",children:u.jsx("img",{src:w.image,alt:w.name,className:"w-full h-full object-cover"})}),u.jsxs("div",{className:"flex-grow min-w-0",children:[u.jsx("div",{className:"text-sm font-bold text-gray-900 truncate mb-0.5",children:w.name}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-xs px-2 py-0.5 bg-gray-100 rounded text-gray-500",children:w.category}),u.jsxs("div",{className:"flex text-yellow-400 text-[10px]",children:[u.jsx("div",{className:"icon-star fill-current"}),u.jsx("span",{className:"text-gray-400 ml-1 font-medium",children:w.rating})]})]})]}),u.jsxs("div",{className:"text-base font-black text-[var(--primary-color)]",children:["$",w.price.toFixed(2)]})]},w.id)),u.jsxs("button",{onClick:()=>A(),className:"w-full text-center py-4 text-sm text-[var(--primary-color)] font-bold hover:bg-blue-50 transition-colors bg-white border-t border-gray-100 flex items-center justify-center gap-2",children:[u.jsxs("span",{children:['View all results for "',L,'"']}),u.jsx("div",{className:"icon-arrow-right text-sm"})]})]}):u.jsxs("div",{className:"p-12 text-center",children:[u.jsx("div",{className:"icon-search text-gray-200 text-5xl mb-4 mx-auto"}),u.jsxs("p",{className:"text-gray-500 font-medium",children:['No products found for "',L,'"']}),u.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Try different keywords or categories"})]})]})]}),u.jsx("a",{href:"#",onClick:w=>P(w,"Advanced Search"),className:"text-xs text-gray-500 hover:text-gray-700 whitespace-nowrap hidden lg:block",children:"Advanced"}),u.jsxs("button",{onClick:h,className:"md:hidden relative text-gray-600 cart-button",children:[u.jsx("div",{className:"icon-shopping-cart text-2xl"}),r>0&&u.jsx("span",{className:"absolute -top-1 -right-2 inline-flex items-center justify-center px-1.5 py-0.5 text-xs font-bold leading-none text-white transform bg-red-600 rounded-full cart-count-badge",children:r})]})]})})}),u.jsx("div",{className:"border-b border-gray-200 bg-white hidden md:block",children:u.jsx("div",{className:"container-custom",children:u.jsxs("nav",{className:"flex items-center justify-center gap-6 py-2 text-[13px] text-gray-600",children:[u.jsx("a",{href:"#",onClick:w=>{w.preventDefault(),window.location.hash=""},className:"hover:text-[var(--primary-color)] font-medium border-b-2 border-transparent hover:border-[var(--primary-color)] pb-1 transition-colors",children:"Home"}),u.jsxs("a",{href:"#",onClick:w=>M(w,m),className:"hover:text-[var(--primary-color)] hover:border-[var(--primary-color)] border-b-2 border-transparent pb-1 transition-colors flex items-center gap-1",children:[u.jsx("div",{className:"icon-heart text-xs"})," Saved"]}),b.slice(0,6).map(w=>u.jsx("a",{href:C(w),onClick:ie=>I(ie,w),className:"hover:text-[var(--primary-color)] hover:border-[var(--primary-color)] border-b-2 border-transparent pb-1 transition-colors",children:w},w)),u.jsxs("a",{href:"#admin",className:"text-[var(--primary-color)] hover:underline flex items-center gap-1 ml-4 border-l pl-4 border-gray-300",children:[u.jsx("div",{className:"icon-cog text-xs"})," Admin"]})]})})}),e&&u.jsx("div",{className:"md:hidden bg-white border-b border-gray-200 shadow-xl absolute top-full left-0 right-0 z-[20] max-h-[80vh] overflow-y-auto",children:u.jsxs("div",{className:"p-4 flex flex-col space-y-4",children:[u.jsxs("div",{className:"font-bold text-lg mb-2 flex justify-between items-center",children:["Categories",u.jsx("button",{onClick:()=>t(!1),className:"text-gray-400",children:u.jsx("div",{className:"icon-x text-xl"})})]}),b.map(w=>u.jsx("a",{href:C(w),onClick:ie=>I(ie,w),className:"text-gray-700 py-1 border-b border-gray-50 pl-2",children:w},w)),u.jsx("div",{className:"font-bold text-lg mt-4 mb-2",children:"My Account"}),s?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"text-gray-700 py-1 pl-2",children:["Hi, ",s.name]}),u.jsx("button",{onClick:l,className:"text-left text-gray-700 py-1 pl-2",children:"Sign Out"})]}):u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>{t(!1),o(!1)},className:"text-left text-gray-700 py-1 pl-2",children:"Sign In"}),u.jsx("button",{onClick:()=>{t(!1),o(!0)},className:"text-left text-gray-700 py-1 pl-2",children:"Register"})]}),u.jsxs("a",{href:"#admin",className:"text-[var(--primary-color)] font-medium py-1 mt-2 pl-2 flex items-center gap-2",children:[u.jsx("div",{className:"icon-database text-sm"}),"Admin Dashboard"]})]})})]})}function ew(){const[r,e]=J.useState(0),t=(h,m)=>{h&&h.preventDefault(),He(`${m} feature coming soon!`,"info")},s=[{id:1,image:"https://images.unsplash.com/photo-1483985988355-763728e1935b?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80",subtitle:"NEW SEASON ARRIVALS",title:"Elevate Your Style With Premium Essentials",description:"Discover our curated collection of high-quality products designed to enhance your lifestyle.",ctaPrimary:"Shop Now",ctaSecondary:"View Collections",linkPrimary:"#featured-products",linkSecondary:"#featured-products"},{id:2,image:"https://images.unsplash.com/photo-1496181133206-80ce9b88a853?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80",subtitle:"LATEST TECH",title:"Next Gen Electronics For Your Home",description:"Upgrade your space with smart home devices and premium audio equipment.",ctaPrimary:"Shop Electronics",ctaSecondary:"See All Deals",linkPrimary:"?category=Electronics#featured-products",linkSecondary:"#featured-products"},{id:3,image:"https://images.unsplash.com/photo-1555041469-a586c61ea9bc?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80",subtitle:"COMFORT & DESIGN",title:"Modern Furniture For Modern Living",description:"Transform your workspace and living area with our ergonomic furniture collection.",ctaPrimary:"Browse Furniture",ctaSecondary:"Read Blog",linkPrimary:"?category=Furniture#featured-products",linkSecondary:"#"}];J.useEffect(()=>{const h=setInterval(()=>{e(m=>(m+1)%s.length)},5e3);return()=>clearInterval(h)},[s.length]);const o=()=>{e(h=>(h+1)%s.length)},l=()=>{e(h=>(h-1+s.length)%s.length)};return u.jsxs("div",{className:"hero-section relative bg-gray-900 overflow-hidden h-[300px] md:h-[400px] lg:h-[500px] group hero-carousel","data-name":"hero-carousel","data-file":"components/Hero.js",children:[s.map((h,m)=>u.jsxs("div",{className:`hero-carousel-slide transition-opacity duration-1000 ease-in-out ${m===r?"opacity-100 active":"opacity-0"}`,children:[u.jsxs("div",{className:"absolute inset-0",children:[u.jsx("img",{className:`w-full h-full object-cover opacity-60 transition-opacity duration-1000 ${m===r?"animate-zoom":""}`,src:h.image,alt:h.title}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900 via-gray-900/40 to-transparent"})]}),u.jsx("div",{className:"relative container-custom h-full flex items-center",children:u.jsxs("div",{className:"max-w-2xl animate-[fadeIn_0.8s_ease-out]",children:[u.jsx("span",{className:"inline-block py-1 px-3 rounded bg-[var(--primary-color)] bg-opacity-20 text-[var(--accent-color)] text-sm font-semibold tracking-wider mb-4 border border-[var(--primary-color)] border-opacity-30",children:h.subtitle}),u.jsx("h1",{className:"text-4xl md:text-5xl lg:text-7xl font-bold text-white mb-6 leading-[1.1] tracking-tight drop-shadow-lg",children:h.title}),u.jsx("p",{className:"text-xl text-gray-200 mb-8 leading-relaxed max-w-xl drop-shadow-md",children:h.description}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[u.jsx("a",{href:h.linkPrimary,className:"btn bg-white text-gray-900 hover:bg-gray-100 text-lg px-10 py-4 rounded-full font-bold shadow-xl transition-all hover:scale-105 active:scale-95",children:h.ctaPrimary}),h.linkSecondary==="#"?u.jsx("button",{onClick:p=>t(p,h.ctaSecondary),className:"btn bg-white/10 text-white hover:bg-white/20 border-2 border-white/30 text-lg px-10 py-4 rounded-full backdrop-blur-md font-semibold transition-all hover:border-white/60",children:h.ctaSecondary}):u.jsx("a",{href:h.linkSecondary,className:"btn bg-white/10 text-white hover:bg-white/20 border-2 border-white/30 text-lg px-10 py-4 rounded-full backdrop-blur-md font-semibold transition-all hover:border-white/60",children:h.ctaSecondary})]})]})})]},h.id)),u.jsx("button",{onClick:l,className:"hero-carousel-controls absolute left-4 top-1/2 -translate-y-1/2 w-12 h-12 rounded-full bg-white/10 hover:bg-white/20 backdrop-blur-sm text-white flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:u.jsx("div",{className:"icon-chevron-left text-2xl"})}),u.jsx("button",{onClick:o,className:"hero-carousel-controls absolute right-4 top-1/2 -translate-y-1/2 w-12 h-12 rounded-full bg-white/10 hover:bg-white/20 backdrop-blur-sm text-white flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:u.jsx("div",{className:"icon-chevron-right text-2xl"})}),u.jsx("div",{className:"hero-carousel-indicators absolute bottom-6 left-1/2 -translate-x-1/2 flex gap-2",children:s.map((h,m)=>u.jsx("button",{onClick:()=>e(m),className:`w-3 h-3 rounded-full transition-all duration-300 ${m===r?"bg-[var(--primary-color)] w-8":"bg-white/50 hover:bg-white/80"}`},m))})]})}function tw({product:r,onProductClick:e}){const[t,s]=J.useState(0),o=r.images&&r.images.length>0?r.images:[r.image||"https://via.placeholder.com/300x300?text=No+Image"],l=o[t];return J.useEffect(()=>{if(o.length<=1)return;const h=setInterval(()=>{s(m=>(m+1)%o.length)},3e3);return()=>clearInterval(h)},[o.length]),u.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-lg transition-all duration-300 group cursor-pointer minimal-product-card",onClick:()=>e(r.id),children:[u.jsxs("div",{className:"relative aspect-square overflow-hidden bg-gray-100 product-image-container",children:[u.jsx("img",{src:l,alt:r.name,className:"w-full h-full object-cover product-image transition-opacity duration-500"},t),r.isDailyDeal&&u.jsxs("div",{className:"absolute top-2 left-2 bg-red-600 text-white px-2 py-1 rounded-full text-xs font-bold shadow-lg animate-pulse",children:[" ",r.discountPercent,"% OFF"]}),o.length>1&&u.jsx("div",{className:"absolute bottom-2 left-0 right-0 flex justify-center gap-1",children:o.map((h,m)=>u.jsx("div",{className:`w-1.5 h-1.5 rounded-full transition-all duration-300 ${m===t?"bg-white w-4":"bg-white/50"}`},m))})]}),u.jsxs("div",{className:"p-4 text-center",children:[u.jsx("h3",{className:"font-semibold text-gray-900 text-sm mb-1 product-name-hover line-clamp-2",children:r.name}),u.jsx("p",{className:"text-xs text-gray-500",children:r.category}),r.isDailyDeal&&u.jsxs("div",{className:"mt-2",children:[u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsxs("span",{className:"text-sm font-bold text-red-600",children:["$",r.price.toFixed(2)]}),u.jsxs("span",{className:"text-xs text-gray-500 line-through",children:["$",r.originalPrice.toFixed(2)]})]}),u.jsx("p",{className:"text-xs text-red-600 font-medium",children:"Daily Deal!"})]})]})]})}function nw({products:r,onProductClick:e}){return u.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-6 home-products-grid",children:r&&r.length>0?r.map(t=>u.jsx(tw,{product:t,onProductClick:e},t.id)):u.jsx("div",{className:"col-span-full text-center py-12",children:u.jsx("p",{className:"text-gray-500",children:"No products available"})})})}function rw(){const[r,e]=J.useState([]),[t,s]=J.useState(!0),[o,l]=J.useState(""),[h,m]=J.useState(!1),[p,v]=J.useState(!1),[E,b]=J.useState(1),N=12,L=J.useRef(null),Q=J.useCallback(async()=>{try{if(s(!0),e([]),window.ProductManager){console.log(" FrontPage: Loading products...");let W;window.ProductManager.getAllWithDealsAsync?(console.log(" FrontPage: Using getAllWithDealsAsync from Firebase..."),W=await window.ProductManager.getAllWithDealsAsync()):window.ProductManager.getAllAsync?(console.log(" FrontPage: Using getAllAsync from Firebase..."),W=await window.ProductManager.getAllAsync()):(console.log(" FrontPage: Using sync method"),W=window.ProductManager.getAll()),console.log(" FrontPage: Total products loaded:",W.length),console.log(" FrontPage: First product:",W[0]);const ce=W[0];ce&&typeof ce.stock>"u"&&(console.log(" Products missing stock field, resetting data..."),window.ProductManager.resetToDefaults&&(window.ProductManager.resetToDefaults(),W=window.ProductManager.getAll()));let C;h?(C=W.filter(I=>I.isDailyDeal||I.dailyDeal),console.log(` Daily deals filter: ${C.length} deals found`)):o&&o!=="All Categories"?(C=W.filter(I=>I.category&&I.category.toLowerCase()===o.toLowerCase()),console.log(` Filtered by category "${o}":`,C.length,"products found")):p?(C=W,console.log(" Showing all products:",C.length)):(window.ProductManager.getHomePageProducts?C=window.ProductManager.getHomePageProducts(12,W):C=W.slice(0,12),console.log(" Home page: Setting",C.length,"products")),console.log(" Daily deals found:",C.filter(I=>I.isDailyDeal||I.dailyDeal).length),e(C),b(1)}else console.error(" ProductManager not found on window")}catch(W){console.error(" Error loading products:",W)}finally{s(!1)}},[o,h,p]);J.useEffect(()=>{Q();const W=()=>{console.log(" Admin update detected, refreshing home page products..."),Q()},ce=A=>{const{category:D}=A.detail;console.log(" Category filter event received:",D),l(D),m(!1),v(!1),setTimeout(()=>{L.current&&L.current.scrollIntoView({behavior:"smooth",block:"start"})},100)},C=()=>{console.log(" Daily deals filter event received"),m(!0),l(""),v(!1),setTimeout(()=>{L.current&&L.current.scrollIntoView({behavior:"smooth",block:"start"})},100)},I=()=>{console.log(" Show all products event received"),v(!0),l(""),m(!1),setTimeout(()=>{L.current&&L.current.scrollIntoView({behavior:"smooth",block:"start"})},100)};return window.addEventListener("adminUpdate",W),window.addEventListener("filterByCategory",ce),window.addEventListener("filterByDeals",C),window.addEventListener("showAllProducts",I),()=>{window.removeEventListener("adminUpdate",W),window.removeEventListener("filterByCategory",ce),window.removeEventListener("filterByDeals",C),window.removeEventListener("showAllProducts",I)}},[Q]);const B=W=>{window.dispatchEvent(new CustomEvent("openProduct",{detail:{productId:W}}))},O=Math.ceil(r.length/N),U=(E-1)*N,z=U+N,Y=r.slice(U,z),ne=W=>{b(W),L.current&&L.current.scrollIntoView({behavior:"smooth",block:"start"})};return t?u.jsx("section",{className:"py-16 bg-white",ref:L,children:u.jsx("div",{className:"container-custom",children:u.jsxs("div",{className:"text-center",children:[u.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Featured Products"}),u.jsx("p",{className:"text-gray-600",children:"Loading products..."})]})})}):u.jsx("section",{className:"py-16 bg-white featured-products-section featured-products-home",ref:L,id:"products-section",children:u.jsxs("div",{className:"container-custom",children:[u.jsxs("div",{className:"text-center mb-12",children:[u.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:h?" Daily Deals":o&&o!=="All Categories"?`${o} Products`:p?"All Products":"Featured Products"}),u.jsx("p",{className:"text-gray-600 mb-6",children:h?"Special discounts available for a limited time!":o&&o!=="All Categories"?`Browse our ${o.toLowerCase()} collection`:p?"Browse our complete product catalog":"Click on any product to see details, pricing, and purchase options"}),o&&o!=="All Categories"||h||p?u.jsx("button",{onClick:()=>{l(""),m(!1),v(!1),b(1)},className:"btn btn-secondary text-sm mb-4",children:" Back to Home"}):null]}),u.jsx("div",{className:"home-products-grid",children:u.jsx(nw,{products:Y,onProductClick:B})}),O>1&&u.jsxs("div",{className:"flex justify-center items-center gap-2 mt-12",children:[u.jsx("button",{onClick:()=>ne(E-1),disabled:E===1,className:"btn btn-secondary px-4 py-2 disabled:opacity-50 disabled:cursor-not-allowed",children:" Previous"}),u.jsx("div",{className:"flex gap-2",children:Array.from({length:O},(W,ce)=>ce+1).map(W=>u.jsx("button",{onClick:()=>ne(W),className:`px-4 py-2 rounded-md font-medium transition-colors ${E===W?"bg-[var(--primary-color)] text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:W},W))}),u.jsx("button",{onClick:()=>ne(E+1),disabled:E===O,className:"btn btn-secondary px-4 py-2 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next "})]}),u.jsxs("div",{className:"text-center mt-8",children:[!p&&!o&&!h&&u.jsx("button",{onClick:()=>{v(!0),l(""),m(!1),b(1)},className:"btn btn-primary px-8 py-3 text-lg hover:shadow-lg transition-shadow view-all-btn mr-4",children:"View All Products"}),u.jsx("p",{className:"text-sm text-gray-500 mt-4",children:h?`Showing ${r.length} daily deals`:o&&o!=="All Categories"?`Showing ${U+1}-${Math.min(z,r.length)} of ${r.length} ${o.toLowerCase()} products`:p?`Showing ${U+1}-${Math.min(z,r.length)} of ${r.length} products (Page ${E} of ${O})`:`Showing ${r.length} featured products`})]})]})})}function sw(){const r=new Date().getFullYear(),e=(s,o)=>{s&&s.preventDefault(),He(`${o} feature coming soon!`,"info")},t=[{title:"Buy",links:["Registration","Money Back Guarantee","Bidding & buying help","Stores","Charity Shop","Seasonal Sales"]},{title:"Sell",links:["Start selling","Learn to sell","Affiliates","Seller Information Center"]},{title:"Stay Connected",links:["LuxeMarket Blog","Facebook","Twitter","Instagram","Pinterest"]},{title:"About LuxeMarket",links:["Company Info","News","Investors","Careers","Government Relations","Advertise with us","Policies"]},{title:"Help & Contact",links:["Seller Information Center","Contact Us","Resolution Center","Returns","Shipping"]}];return u.jsx("footer",{className:"bg-white border-t border-gray-200 pt-12 pb-6 text-[13px]","data-name":"footer","data-file":"components/Footer.js",children:u.jsxs("div",{className:"container-custom",children:[u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-8 mb-12",children:t.map((s,o)=>u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-gray-700 mb-4",children:s.title}),u.jsx("ul",{className:"space-y-2",children:s.links.map(l=>u.jsx("li",{children:u.jsx("a",{href:"#",onClick:h=>e(h,l),className:"text-gray-600 hover:text-[var(--primary-color)] hover:underline transition-colors block",children:l})},l))}),s.title==="Stay Connected"&&u.jsxs("div",{className:"flex gap-3 mt-4",children:[u.jsx("a",{href:"#",onClick:l=>e(l,"Facebook"),className:"w-8 h-8 flex items-center justify-center rounded-full bg-gray-100 hover:bg-blue-600 hover:text-white transition-colors",children:u.jsx("div",{className:"icon-facebook text-sm"})}),u.jsx("a",{href:"#",onClick:l=>e(l,"Twitter"),className:"w-8 h-8 flex items-center justify-center rounded-full bg-gray-100 hover:bg-sky-400 hover:text-white transition-colors",children:u.jsx("div",{className:"icon-twitter text-sm"})}),u.jsx("a",{href:"#",onClick:l=>e(l,"Instagram"),className:"w-8 h-8 flex items-center justify-center rounded-full bg-gray-100 hover:bg-pink-600 hover:text-white transition-colors",children:u.jsx("div",{className:"icon-instagram text-sm"})})]})]},o))}),u.jsx("div",{className:"border-t border-gray-200 pt-8",children:u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 text-xs text-gray-500",children:[u.jsxs("div",{className:"flex flex-wrap justify-center md:justify-start gap-4 mb-2 md:mb-0",children:[u.jsx("a",{href:"#",onClick:s=>e(s,"Accessibility"),className:"hover:underline",children:"Accessibility"}),u.jsx("span",{className:"hidden md:inline",children:"|"}),u.jsx("a",{href:"#",onClick:s=>e(s,"User Agreement"),className:"hover:underline",children:"User Agreement"}),u.jsx("span",{className:"hidden md:inline",children:"|"}),u.jsx("a",{href:"#",onClick:s=>e(s,"Privacy"),className:"hover:underline",children:"Privacy"}),u.jsx("span",{className:"hidden md:inline",children:"|"}),u.jsx("a",{href:"#",onClick:s=>e(s,"Payments Terms of Use"),className:"hover:underline",children:"Payments Terms of Use"}),u.jsx("span",{className:"hidden md:inline",children:"|"}),u.jsx("a",{href:"#",onClick:s=>e(s,"Cookies"),className:"hover:underline",children:"Cookies"}),u.jsx("span",{className:"hidden md:inline",children:"|"}),u.jsx("a",{href:"#",onClick:s=>e(s,"Individual Privacy Rights"),className:"hover:underline",children:"Do not sell my personal info"})]}),u.jsx("div",{className:"flex items-center gap-1",children:u.jsxs("span",{children:["Copyright  1995-",r," LuxeMarket Inc. All Rights Reserved."]})})]})})]})})}var Ti=sv();function iw({isOpen:r,isRegister:e=!1,onClose:t,onLogin:s}){const[o,l]=J.useState(e),[h,m]=J.useState({name:"",email:"",password:""});if(J.useEffect(()=>{l(e)},[e]),!r)return null;const p=v=>{v.preventDefault();const E={name:o?h.name:h.email.split("@")[0]||"User",email:h.email};sessionStorage.setItem("luxemarket_user",JSON.stringify(E)),s(E),t(),m({name:"",email:"",password:""})};return Ti.createPortal(u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[99999] animate-[fadeIn_0.2s_ease-out] modal-overlay modal-backdrop cursor-pointer",onClick:t,children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md overflow-hidden relative m-4 cursor-default",onClick:v=>v.stopPropagation(),children:[u.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:u.jsx("div",{className:"icon-x text-xl"})}),u.jsxs("div",{className:"p-8",children:[u.jsxs("div",{className:"text-center mb-6",children:[u.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-blue-100 text-[var(--primary-color)] mb-4",children:u.jsx("div",{className:"icon-user text-2xl"})}),u.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:o?"Create Account":"Welcome Back"}),u.jsx("p",{className:"text-gray-500 text-sm mt-1",children:o?"Create an account to complete your purchase":"Sign in to add items to cart and checkout"})]}),u.jsxs("form",{onSubmit:p,className:"space-y-4",children:[o&&u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),u.jsx("input",{type:"text",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[var(--primary-color)] outline-none",value:h.name,onChange:v=>m({...h,name:v.target.value})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),u.jsx("input",{type:"email",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[var(--primary-color)] outline-none",value:h.email,onChange:v=>m({...h,email:v.target.value})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),u.jsx("input",{type:"password",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[var(--primary-color)] outline-none",value:h.password,onChange:v=>m({...h,password:v.target.value})})]}),u.jsx("button",{type:"submit",className:"w-full btn btn-primary py-2.5 mt-2",children:o?"Register":"Sign In"})]}),u.jsxs("div",{className:"mt-6 text-center text-sm",children:[u.jsx("span",{className:"text-gray-500",children:o?"Already have an account?":"New to LuxeMarket?"}),u.jsx("button",{onClick:()=>l(!o),className:"text-[var(--primary-color)] font-medium hover:underline ml-1",children:o?"Sign In":"Create account"})]}),u.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:u.jsx("button",{onClick:()=>{const v={name:"Demo User",email:"demo@luxemarket.com"};sessionStorage.setItem("luxemarket_user",JSON.stringify(v)),s(v),t()},className:"w-full text-sm text-gray-600 hover:text-gray-800 py-2 px-4 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:" Continue as Demo User (for testing)"})})]})]})}))}function ow({product:r,onClose:e,currentUser:t,onOpenAuth:s,onCartUpdate:o}){const[l,h]=J.useState(null),[m,p]=J.useState(0),[v,E]=J.useState(!1),[b,N]=J.useState(1),[L,Q]=J.useState(!1);if(J.useEffect(()=>{r&&(r.colors&&r.colors.length>0&&h(r.colors[0].name),p(0),window.WatchlistManager&&E(window.WatchlistManager.has(r.id)))},[r]),!r)return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[99999] modal-overlay modal-backdrop",onClick:e,children:u.jsxs("div",{className:"bg-white rounded-lg p-8",onClick:w=>w.stopPropagation(),children:[u.jsx("p",{children:"Product not found"}),u.jsx("button",{onClick:e,className:"btn btn-primary mt-4",children:"Close"})]})});let B=[];if(l&&r.colors){const w=r.colors.find(ie=>ie.name===l);w&&w.images&&(B=w.images)}B.length===0&&r.images&&(B=r.images.map(w=>typeof w=="string"?w:w.url)),B.length===0&&r.image&&(B=[r.image]);const O=[...B];r.videoUrl&&O.push({type:"video",url:r.videoUrl,thumbnail:B[0]||"https://via.placeholder.com/500x500?text=Video"});const U=O[m],z=U&&typeof U=="object"&&U.type==="video",Y=()=>{O.length>1&&p(w=>(w+1)%O.length)},ne=()=>{O.length>1&&p(w=>(w-1+O.length)%O.length)},W=w=>{p(w)},ce=w=>{h(w),p(0)};J.useEffect(()=>{document.body.style.overflow="hidden";const w=ie=>{ie.key==="ArrowLeft"?(ie.preventDefault(),ne()):ie.key==="ArrowRight"?(ie.preventDefault(),Y()):ie.key==="Escape"&&(ie.preventDefault(),e())};return document.addEventListener("keydown",w),()=>{document.body.style.overflow="unset",document.removeEventListener("keydown",w)}},[]);const C=()=>{if(!t){showToast("Please sign in to add items to your cart","info"),s(!1);return}if(r.stock===0){showToast("This product is out of stock","error");return}if(b>r.stock){showToast(`Only ${r.stock} items available`,"error");return}try{CartManager.add(r.id,b)?(o(),window.dispatchEvent(new CustomEvent("cartUpdated")),showToast(`Added ${b} ${r.name}${b>1?"s":""} to cart`,"success")):showToast("Failed to add item to cart","error")}catch(w){console.error("Add to cart error:",w),showToast(w.message||"Failed to add item to cart","error")}},I=()=>{if(window.WatchlistManager){const w=window.WatchlistManager.toggle(r);E(w),showToast(w?`Added ${r.name} to watchlist`:`Removed ${r.name} from watchlist`,"success")}},A=()=>{if(!t){showToast("Please sign in to purchase this item","info"),s(!0);return}if(r.stock===0){showToast("This product is out of stock","error");return}if(b>r.stock){showToast(`Only ${r.stock} items available`,"error");return}try{CartManager.add(r.id,b)?(o(),window.dispatchEvent(new CustomEvent("cartUpdated")),e(),setTimeout(()=>{window.dispatchEvent(new CustomEvent("openCheckout")),showToast(`Proceeding to checkout with ${b} ${r.name}${b>1?"s":""}`,"success")},100)):showToast("Failed to add item to cart","error")}catch(w){console.error("Buy now error:",w),showToast(w.message||"Failed to process purchase","error")}},D=200,P=r.description&&r.description.length>D,M=P&&!L?r.description.substring(0,D)+"...":r.description;return Ti.createPortal(u.jsx("div",{className:"modal-overlay fixed inset-0 bg-black bg-opacity-50 modal-backdrop flex items-center justify-center p-8 overflow-y-auto z-[99999]",onClick:e,style:{pointerEvents:"auto",cursor:"pointer"},children:u.jsxs("div",{className:"product-modal bg-white rounded-lg max-w-3xl w-full my-8 shadow-2xl relative",style:{maxWidth:"calc(100vw - 8rem)",maxHeight:"calc(100vh - 8rem)"},onClick:w=>w.stopPropagation(),children:["        ",u.jsxs("div",{className:"bg-white border-b border-gray-200 p-4 flex justify-between items-center rounded-t-lg",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Product Details"}),O.length>1&&u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Use   keys or click thumbnails to navigate"})]}),u.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 text-3xl leading-none w-8 h-8 flex items-center justify-center hover:bg-gray-100 rounded-full transition-colors",title:"Close (Esc)",children:u.jsx("div",{className:"icon-x text-2xl"})})]}),u.jsx("div",{className:"max-h-[calc(90vh-80px)] overflow-y-auto",children:u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"aspect-square rounded-lg overflow-hidden bg-gray-100 relative",children:[z?u.jsx("video",{src:U.url,controls:!0,className:"w-full h-full object-cover",poster:U.thumbnail,children:"Your browser does not support the video tag."}):u.jsx("img",{src:typeof U=="string"?U:U?.url||"https://via.placeholder.com/500x500?text=No+Image",alt:r.name,className:"w-full h-full object-cover"}),O.length>1&&u.jsxs("div",{className:"absolute top-4 right-4 bg-black bg-opacity-70 text-white text-sm px-3 py-1 rounded-full",children:[m+1," / ",O.length,z&&u.jsx("span",{className:"ml-1",children:""})]})]}),O.length>1&&u.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:O.map((w,ie)=>{const Se=typeof w=="object"&&w.type==="video",Re=Se?w.thumbnail:typeof w=="string"?w:w.url;return u.jsxs("button",{onClick:()=>W(ie),onMouseEnter:()=>W(ie),className:`flex-shrink-0 w-16 h-16 rounded-lg border-2 overflow-hidden relative transition-all hover:scale-105 ${ie===m?"border-blue-500 shadow-md":"border-gray-300 hover:border-gray-400"}`,title:Se?"Play video":`View image ${ie+1}`,children:[u.jsx("img",{src:Re,alt:Se?"Video thumbnail":`View ${ie+1}`,className:"w-full h-full object-cover"}),Se&&u.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-30 flex items-center justify-center",children:u.jsx("div",{className:"w-6 h-6 bg-white bg-opacity-90 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-black text-xs",children:""})})})]},ie)})})]}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2 break-words",children:r.name}),u.jsxs("div",{className:"text-2xl font-bold text-blue-600 mb-4",children:["$",r.price.toFixed(2)]}),u.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[u.jsx("span",{className:"inline-block px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm",children:r.category}),r.stock===0?u.jsx("span",{className:"inline-block px-4 py-2 bg-red-100 text-red-700 rounded-full text-sm font-bold border border-red-200 stock-status out-of-stock",children:" Out of Stock"}):r.stock<=5?u.jsxs("span",{className:"inline-block px-4 py-2 bg-orange-100 text-orange-700 rounded-full text-sm font-bold border border-orange-200 stock-status low-stock",children:[" Only ",r.stock," left"]}):u.jsxs("span",{className:"inline-block px-4 py-2 bg-green-100 text-green-700 rounded-full text-sm font-bold border border-green-200 stock-status",children:[" In Stock (",r.stock," available)"]})]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Description"}),u.jsx("div",{className:"text-gray-600 leading-relaxed break-words",children:M}),P&&u.jsx("button",{onClick:()=>Q(!L),className:"text-blue-600 hover:text-blue-800 font-medium text-sm mt-2 flex items-center gap-1 transition-colors",children:L?"Show Less ":"Show More "})]}),r.colors&&r.colors.length>0&&u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Colors"}),u.jsx("div",{className:"space-y-2",children:r.colors.map((w,ie)=>u.jsx("button",{onClick:()=>ce(w.name),className:`w-full p-3 rounded-lg border-2 text-left transition-all ${l===w.name?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400 hover:bg-gray-50"}`,children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-gray-400 flex-shrink-0",style:{backgroundColor:w.hex}}),u.jsxs("div",{className:"min-w-0 flex-1",children:[u.jsx("div",{className:"font-medium break-words",children:w.name}),u.jsxs("div",{className:"text-sm text-gray-500",children:[(w.images||[]).length," photos"]})]})]})},ie))})]}),r.rating&&u.jsxs("div",{className:"flex items-center gap-4 py-3 border-t border-gray-200",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"flex text-yellow-400",children:[...Array(5)].map((w,ie)=>u.jsx("span",{className:ie<Math.floor(r.rating)?"text-yellow-400":"text-gray-300",children:""},ie))}),u.jsx("span",{className:"font-semibold text-gray-900",children:r.rating})]}),r.reviews&&u.jsxs("span",{className:"text-gray-500",children:["(",r.reviews," reviews)"]})]}),r.stock>0&&u.jsxs("div",{className:"mb-6",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Quantity"}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg",children:[u.jsx("button",{onClick:()=>N(Math.max(1,b-1)),className:"px-4 py-2 text-gray-600 hover:text-gray-800 hover:bg-gray-50 transition-colors",disabled:b<=1,children:""}),u.jsx("span",{className:"px-4 py-2 font-semibold text-gray-900 min-w-[3rem] text-center",children:b}),u.jsx("button",{onClick:()=>N(Math.min(r.stock,b+1)),className:"px-4 py-2 text-gray-600 hover:text-gray-800 hover:bg-gray-50 transition-colors",disabled:b>=r.stock,children:"+"})]}),u.jsxs("span",{className:"text-sm text-gray-500",children:["Max: ",r.stock]})]})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("button",{onClick:C,disabled:r.stock===0,className:`w-full py-4 text-lg font-semibold transition-all ${r.stock===0?"bg-gray-300 text-gray-500 cursor-not-allowed":"btn btn-primary hover:shadow-lg"}`,children:r.stock===0?"Out of Stock":t?`Add ${b} to Cart - $${(r.price*b).toFixed(2)}`:"Sign In to Add to Cart"}),r.stock>0&&u.jsx("button",{onClick:A,className:"w-full py-4 text-lg font-semibold text-white rounded-lg hover:shadow-lg transition-all buy-now-btn",children:t?` Buy Now - $${(r.price*b).toFixed(2)}`:" Sign In to Buy Now"}),u.jsxs("button",{onClick:I,className:`w-full py-3 text-base font-medium rounded-lg border-2 transition-all flex items-center justify-center gap-2 ${v?"bg-red-50 border-red-500 text-red-600 hover:bg-red-100":"bg-white border-gray-300 text-gray-600 hover:border-gray-400 hover:bg-gray-50"}`,children:[u.jsx("div",{className:`icon-heart text-lg ${v?"fill-current":""}`}),v?"Remove from Watchlist":"Add to Watchlist"]})]})]})]}),u.jsx(RelatedItems,{currentProduct:r,onProductClick:async w=>{try{if(!window.ProductManager){console.error("ProductManager not initialized");return}let ie;window.ProductManager.getByIdAsync?ie=await window.ProductManager.getByIdAsync(w):ie=window.ProductManager.getById(w),ie&&(e(),setTimeout(()=>{window.dispatchEvent(new CustomEvent("openProduct",{detail:{productId:w}}))},100))}catch(ie){console.error("Error loading related product:",ie)}}})]})})]})}),document.body)}const aw=J.memo(ow),fi=(()=>{const r="luxemarket_categories",e=()=>{const h=localStorage.getItem(r);if(!h)return null;try{return JSON.parse(h)}catch{return null}},t=h=>{localStorage.setItem(r,JSON.stringify(h))},s=()=>{const h=window.ProductManager?window.ProductManager.getAll():[],m=new Set(h.map(p=>p.category));return Array.from(m)},o=["Electronics","Fashion","Furniture","Accessories"];let l=e();if(!l||l.length===0){const h=s();l=h.length>0?h:[...o],t(l)}return{getAll(){if(l.length===0){const h=s();if(h.length>0)l=h,t(l);else return[...o]}return[...l]},add(h){const m=h.trim();return m?l.includes(m)?!1:(l.push(m),t(l),!0):!1},delete(h){const m=l.filter(v=>v!==h),p=m.length!==l.length;return p&&(l=m,t(l)),p},syncWithProducts(){l=s(),t(l)}}})();window.CategoryManager=fi;const No={black:"#000000",white:"#FFFFFF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",yellow:"#FFFF00",cyan:"#00FFFF",magenta:"#FF00FF",gray:"#808080",grey:"#808080",silver:"#C0C0C0",maroon:"#800000",olive:"#808000",lime:"#00FF00",aqua:"#00FFFF",teal:"#008080",navy:"#000080",fuchsia:"#FF00FF",purple:"#800080",orange:"#FFA500",pink:"#FFC0CB",brown:"#A52A2A",beige:"#F5F5DC",tan:"#D2B48C",khaki:"#F0E68C",gold:"#FFD700",bronze:"#CD7F32",copper:"#B87333",brass:"#B5A642",crimson:"#DC143C",scarlet:"#FF2400",ruby:"#E0115F",cherry:"#DE3163",rose:"#FF007F",coral:"#FF7F50",salmon:"#FA8072",tomato:"#FF6347",azure:"#007FFF",cobalt:"#0047AB",sapphire:"#0F52BA",indigo:"#4B0082",turquoise:"#40E0D0",sky:"#87CEEB",royal:"#4169E1",midnight:"#191970",emerald:"#50C878",jade:"#00A86B",forest:"#228B22",mint:"#98FF98",sage:"#9DC183",olive:"#808000",chartreuse:"#7FFF00",amber:"#FFBF00",mustard:"#FFDB58",lemon:"#FFF700",cream:"#FFFDD0",ivory:"#FFFFF0",peach:"#FFE5B4",apricot:"#FBCEB1",violet:"#8F00FF",lavender:"#E6E6FA",plum:"#DDA0DD",mauve:"#E0B0FF",lilac:"#C8A2C8",orchid:"#DA70D6",chocolate:"#D2691E",coffee:"#6F4E37",mocha:"#967969",chestnut:"#954535",mahogany:"#C04000",walnut:"#773F1A",oak:"#806517",charcoal:"#36454F",slate:"#708090",ash:"#B2BEB5",smoke:"#738276",pearl:"#EAE0C8",platinum:"#E5E4E2",steel:"#71797E",iron:"#4C4646",titanium:"#878681",chrome:"#C0C0C0",sand:"#C2B280",stone:"#8D8D8D",clay:"#B66A50",earth:"#8B4513",moss:"#8A9A5B",grass:"#7CFC00",leaf:"#228B22","sky blue":"#87CEEB",ocean:"#006994",sea:"#2E8B57",burgundy:"#800020",wine:"#722F37",champagne:"#F7E7CE",taupe:"#483C32",nude:"#E3BC9A",blush:"#DE5D83",marigold:"#EAA221",denim:"#1560BD","charcoal gray":"#36454F","off white":"#FAF9F6"};function wh(r){if(!r)return"#000000";if(r.startsWith("#")||r.startsWith("rgb"))return r;const e=r.toLowerCase().trim();if(No[e])return No[e];const t=Object.keys(No).find(s=>e.includes(s)||s.includes(e));return t?No[t]:(console.warn(`Color "${r}" not found, using black`),"#000000")}function lw(r){if(!r)return!1;const e=r.toLowerCase().trim();return No.hasOwnProperty(e)}function cw(r){if(!r)return[];const e=r.toLowerCase().trim();return Object.keys(No).filter(t=>t.includes(e)).sort().slice(0,10)}function uw({onColorSelect:r,selectedColor:e}){const[t,s]=J.useState(!1),[o,l]=J.useState("#FF0000"),[h,m]=J.useState({r:255,g:0,b:0}),[p,v]=J.useState("visual"),[E,b]=J.useState(""),[N,L]=J.useState([]),[Q,B]=J.useState(0),[O,U]=J.useState(100),[z,Y]=J.useState(100),ne=J.useRef(null),W=J.useRef(null),ce=F=>{const X=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(F);return X?{r:parseInt(X[1],16),g:parseInt(X[2],16),b:parseInt(X[3],16)}:{r:0,g:0,b:0}},C=(F,X,R)=>{const S=le=>{const de=Math.max(0,Math.min(255,Math.round(le))).toString(16);return de.length===1?"0"+de:de};return`#${S(F)}${S(X)}${S(R)}`},I=(F,X,R)=>{X=X/100,R=R/100;const S=R*X,le=S*(1-Math.abs(F/60%2-1)),de=R-S;let fe=0,_e=0,ke=0;return F>=0&&F<60?(fe=S,_e=le,ke=0):F>=60&&F<120?(fe=le,_e=S,ke=0):F>=120&&F<180?(fe=0,_e=S,ke=le):F>=180&&F<240?(fe=0,_e=le,ke=S):F>=240&&F<300?(fe=le,_e=0,ke=S):F>=300&&F<360&&(fe=S,_e=0,ke=le),{r:Math.round((fe+de)*255),g:Math.round((_e+de)*255),b:Math.round((ke+de)*255)}},A=(F,X,R)=>{F=F/255,X=X/255,R=R/255;const S=Math.max(F,X,R),le=Math.min(F,X,R),de=S-le;let fe=0;de!==0&&(S===F?fe=60*((X-R)/de%6):S===X?fe=60*((R-F)/de+2):S===R&&(fe=60*((F-X)/de+4))),fe<0&&(fe+=360);const _e=S===0?0:de/S*100,ke=S*100;return{h:fe,s:_e,v:ke}};J.useEffect(()=>{const F=ne.current;if(!F)return;const X=F.getContext("2d"),R=F.width,S=F.height;I(Q,100,100);for(let le=0;le<R;le++){const de=le/R*100;for(let fe=0;fe<S;fe++){const _e=100-fe/S*100,ke=I(Q,de,_e);X.fillStyle=`rgb(${ke.r}, ${ke.g}, ${ke.b})`,X.fillRect(le,fe,1,1)}}},[Q]),J.useEffect(()=>{const F=I(Q,O,z);m(F),l(C(F.r,F.g,F.b))},[Q,O,z]);const D=F=>{const X=C(F.r,F.g,F.b);l(X);const R=A(F.r,F.g,F.b);B(R.h),U(R.s),Y(R.v)},P=(F,X)=>{const R=Math.max(0,Math.min(255,parseInt(X)||0)),S={...h,[F]:R};m(S),D(S)},M=F=>{const X=ne.current;if(!X)return;const R=X.getBoundingClientRect(),S=F.clientX-R.left,le=F.clientY-R.top,de=S/X.width*100,fe=100-le/X.height*100;U(de),Y(fe)},w=F=>{const X=W.current;if(!X)return;const R=X.getBoundingClientRect(),le=(F.clientX-R.left)/R.width*360;B(le)},ie=F=>{if(b(F),F.length>0){const X=cw(F);L(X)}else L([]);if(lw(F)){const X=wh(F);l(X)}},Se=F=>{b(F);const X=wh(F);l(X),L([])},Re=[{name:"Black",hex:"#000000"},{name:"White",hex:"#FFFFFF"},{name:"Gray",hex:"#808080"},{name:"Light Gray",hex:"#D3D3D3"},{name:"Dark Gray",hex:"#404040"},{name:"Red",hex:"#FF0000"},{name:"Dark Red",hex:"#DC2626"},{name:"Pink",hex:"#FFC0CB"},{name:"Hot Pink",hex:"#FF69B4"},{name:"Orange",hex:"#FFA500"},{name:"Dark Orange",hex:"#FF8C00"},{name:"Yellow",hex:"#FFFF00"},{name:"Gold",hex:"#FFD700"},{name:"Lime",hex:"#00FF00"},{name:"Green",hex:"#008000"},{name:"Forest Green",hex:"#228B22"},{name:"Teal",hex:"#008080"},{name:"Cyan",hex:"#00FFFF"},{name:"Sky Blue",hex:"#87CEEB"},{name:"Blue",hex:"#0000FF"},{name:"Navy",hex:"#000080"},{name:"Indigo",hex:"#4B0082"},{name:"Violet",hex:"#8B00FF"},{name:"Purple",hex:"#800080"},{name:"Magenta",hex:"#FF00FF"},{name:"Brown",hex:"#A52A2A"},{name:"Tan",hex:"#D2B48C"},{name:"Beige",hex:"#F5F5DC"},{name:"Maroon",hex:"#800000"},{name:"Olive",hex:"#808000"},{name:"Silver",hex:"#C0C0C0"},{name:"Coral",hex:"#FF7F50"},{name:"Crimson",hex:"#DC143C"},{name:"Turquoise",hex:"#40E0D0"},{name:"Salmon",hex:"#FA8072"},{name:"Khaki",hex:"#F0E68C"},{name:"Plum",hex:"#DDA0DD"},{name:"Orchid",hex:"#DA70D6"},{name:"Steel Blue",hex:"#4682B4"},{name:"Slate Gray",hex:"#708090"}],Le=F=>{r(F),s(!1)},oe=()=>{const F=prompt("Enter a name for this color:")||"Custom Color";r({name:F,hex:o}),s(!1)};return u.jsxs("div",{className:"relative",children:[u.jsxs("button",{type:"button",onClick:()=>s(!t),className:"flex items-center gap-2 px-3 py-2 border border-gray-300 rounded-md hover:border-gray-400 transition-colors bg-white",children:[u.jsx("div",{className:"w-6 h-6 rounded border border-gray-300",style:{backgroundColor:e?.hex||"#000000"}}),u.jsx("span",{className:"text-sm",children:e?.name||"Select Color"}),u.jsx("div",{className:`icon-chevron-down text-xs transition-transform ${t?"rotate-180":""}`})]}),t&&u.jsxs("div",{className:"absolute top-full left-0 mt-2 bg-white border border-gray-200 rounded-lg shadow-xl z-50 p-4 w-80",children:[u.jsxs("div",{className:"mb-4",children:[u.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Color Palette"}),u.jsx("div",{className:"grid grid-cols-10 gap-2",children:Re.map((F,X)=>u.jsx("button",{type:"button",onClick:()=>Le(F),className:`w-8 h-8 rounded border-2 transition-all color-picker-button ${e?.hex===F.hex?"border-[var(--primary-color)] ring-2 ring-[var(--primary-color)]/20 scale-110":"border-gray-300 hover:border-gray-400 hover:scale-110"}`,style:{backgroundColor:F.hex},title:`${F.name} (${F.hex}) - RGB(${ce(F.hex).r}, ${ce(F.hex).g}, ${ce(F.hex).b})`},X))})]}),u.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Custom Color"}),u.jsxs("div",{className:"flex bg-gray-100 rounded-md p-1",children:[u.jsx("button",{type:"button",onClick:()=>v("visual"),className:`px-2 py-1 text-xs rounded transition-colors ${p==="visual"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"VISUAL"}),u.jsx("button",{type:"button",onClick:()=>v("hex"),className:`px-2 py-1 text-xs rounded transition-colors ${p==="hex"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"HEX"}),u.jsx("button",{type:"button",onClick:()=>v("rgb"),className:`px-2 py-1 text-xs rounded transition-colors ${p==="rgb"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"RGB"}),u.jsx("button",{type:"button",onClick:()=>v("name"),className:`px-2 py-1 text-xs rounded transition-colors ${p==="name"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"NAME"})]})]}),p==="visual"?u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"relative",children:[u.jsx("canvas",{ref:ne,width:300,height:200,onClick:M,className:"w-full h-48 rounded-lg border-2 border-gray-300 cursor-crosshair",style:{imageRendering:"pixelated"}}),u.jsx("div",{className:"absolute w-4 h-4 border-2 border-white rounded-full pointer-events-none shadow-lg",style:{left:`${O}%`,top:`${100-z}%`,transform:"translate(-50%, -50%)",boxShadow:"0 0 0 1px black"}})]}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{ref:W,onClick:w,className:"w-full h-8 rounded-lg cursor-pointer border-2 border-gray-300",style:{background:"linear-gradient(to right, #ff0000 0%, #ffff00 17%, #00ff00 33%, #00ffff 50%, #0000ff 67%, #ff00ff 83%, #ff0000 100%)"}}),u.jsx("div",{className:"absolute top-0 bottom-0 w-1 bg-white border border-gray-800 pointer-events-none rounded-full",style:{left:`${Q/360*100}%`,transform:"translateX(-50%)"}})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"icon-eyedropper text-2xl text-gray-600"}),u.jsx("div",{className:"w-16 h-16 rounded-lg border-2 border-gray-300 shadow-inner",style:{backgroundColor:o}})]}),u.jsxs("div",{className:"flex-1 grid grid-cols-3 gap-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1 text-center",children:"R"}),u.jsx("input",{type:"number",min:"0",max:"255",value:h.r,onChange:F=>P("r",F.target.value),className:"w-full px-2 py-2 text-center text-lg font-bold border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1 text-center",children:"G"}),u.jsx("input",{type:"number",min:"0",max:"255",value:h.g,onChange:F=>P("g",F.target.value),className:"w-full px-2 py-2 text-center text-lg font-bold border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1 text-center",children:"B"}),u.jsx("input",{type:"number",min:"0",max:"255",value:h.b,onChange:F=>P("b",F.target.value),className:"w-full px-2 py-2 text-center text-lg font-bold border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent"})]})]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("div",{className:"text-sm font-mono text-gray-600",children:o.toUpperCase()}),u.jsx("button",{type:"button",onClick:oe,className:"btn btn-primary text-sm px-4 py-2",children:"Add Color"})]})]}):p==="hex"?u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"color",value:o,onChange:F=>l(F.target.value),className:"w-12 h-8 rounded border border-gray-300 cursor-pointer"}),u.jsx("input",{type:"text",value:o,onChange:F=>l(F.target.value),placeholder:"#000000",className:"flex-1 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent"}),u.jsx("button",{type:"button",onClick:oe,className:"btn btn-primary text-xs px-3 py-1",children:"Add"})]}):p==="rgb"?u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-12 h-8 rounded border border-gray-300",style:{backgroundColor:o}}),u.jsxs("div",{className:"flex-1 grid grid-cols-3 gap-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"R"}),u.jsx("input",{type:"number",min:"0",max:"255",value:h.r,onChange:F=>P("r",F.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"G"}),u.jsx("input",{type:"number",min:"0",max:"255",value:h.g,onChange:F=>P("g",F.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"B"}),u.jsx("input",{type:"number",min:"0",max:"255",value:h.b,onChange:F=>P("b",F.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent"})]})]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("div",{className:"text-xs text-gray-500 flex-1",children:["RGB(",h.r,", ",h.g,", ",h.b,") = ",o]}),u.jsx("button",{type:"button",onClick:oe,className:"btn btn-primary text-xs px-3 py-1",children:"Add Color"})]})]}):u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-12 h-8 rounded border border-gray-300",style:{backgroundColor:o}}),u.jsxs("div",{className:"flex-1 relative",children:[u.jsx("input",{type:"text",value:E,onChange:F=>ie(F.target.value),placeholder:"Type color name (e.g., red, blue, emerald)",className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent"}),N.length>0&&u.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-300 rounded shadow-lg max-h-40 overflow-y-auto z-10",children:N.map(F=>u.jsxs("button",{type:"button",onClick:()=>Se(F),className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 flex items-center gap-2",children:[u.jsx("div",{className:"w-4 h-4 rounded border border-gray-300",style:{backgroundColor:wh(F)}}),F]},F))})]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"text-xs text-gray-500 flex-1",children:E?`"${E}" = ${o}`:"Enter a color name"}),u.jsx("button",{type:"button",onClick:oe,disabled:!E,className:"btn btn-primary text-xs px-3 py-1 disabled:opacity-50 disabled:cursor-not-allowed",children:"Add Color"})]})]})]}),u.jsx("div",{className:"flex justify-end mt-4 pt-3 border-t border-gray-200",children:u.jsx("button",{type:"button",onClick:()=>s(!1),className:"btn btn-secondary text-sm px-4 py-1",children:"Close"})})]})]})}function dw({colors:r,onChange:e}){const[t,s]=J.useState(r||[]),[o,l]=J.useState(-1),[h,m]=J.useState(-1),[p,v]=J.useState(""),[E,b]=J.useState("");J.useEffect(()=>{e(t)},[t]),J.useEffect(()=>{s(r||[])},[r]);const N=U=>{const z={name:U.name,hex:U.hex,images:[]};s(Y=>[...Y,z])},L=(U,z,Y)=>{s(ne=>ne.map((W,ce)=>ce===U?{...W,[z]:Y}:W))},Q=U=>{s(z=>z.filter((Y,ne)=>ne!==U))},B=U=>{E.trim()&&(s(z=>z.map((Y,ne)=>ne===U?{...Y,images:[...Y.images||[],E.trim()]}:Y)),b(""))},O=(U,z)=>{s(Y=>Y.map((ne,W)=>W===U?{...ne,images:ne.images.filter((ce,C)=>C!==z)}:ne))};return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Product Colors"}),u.jsx(uw,{onColorSelect:N,selectedColor:null})]}),t.length===0?u.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[u.jsx("div",{className:"icon-palette text-3xl text-gray-400 mx-auto mb-2"}),u.jsx("p",{className:"text-gray-500",children:"No colors added yet"}),u.jsx("p",{className:"text-sm text-gray-400",children:"Use the color picker above to add colors"})]}):u.jsx("div",{className:"space-y-3",children:t.map((U,z)=>u.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-white",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[h===z?u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"color",value:U.hex,onChange:Y=>L(z,"hex",Y.target.value),className:"w-8 h-8 rounded border border-gray-300 cursor-pointer"}),u.jsx("input",{type:"text",value:U.hex,onChange:Y=>L(z,"hex",Y.target.value),onBlur:()=>m(-1),onKeyDown:Y=>Y.key==="Enter"&&m(-1),className:"px-2 py-1 border border-gray-300 rounded text-sm w-24 focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent",placeholder:"#000000",autoFocus:!0}),u.jsx("button",{type:"button",onClick:()=>m(-1),className:"text-xs text-green-600 hover:text-green-800",children:" Done"})]}):u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-8 h-8 rounded border border-gray-300 cursor-pointer hover:ring-2 hover:ring-blue-300 transition-all",style:{backgroundColor:U.hex},onClick:()=>m(z),title:"Click to edit color"}),u.jsx("button",{type:"button",onClick:()=>m(z),className:"text-xs text-blue-600 hover:text-blue-800",children:"Edit color"})]}),o===z?u.jsx("input",{type:"text",value:U.name,onChange:Y=>L(z,"name",Y.target.value),onBlur:()=>l(-1),onKeyDown:Y=>Y.key==="Enter"&&l(-1),className:"px-2 py-1 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent",autoFocus:!0}):u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"font-medium text-gray-900",children:U.name}),u.jsx("span",{className:"text-sm text-gray-500",children:U.hex}),u.jsx("button",{type:"button",onClick:()=>l(z),className:"text-xs text-blue-600 hover:text-blue-800",children:"Edit name"})]})]}),u.jsxs("button",{type:"button",onClick:()=>Q(z),className:"text-red-500 hover:text-red-700 text-sm flex items-center gap-1",children:[u.jsx("div",{className:"icon-trash text-sm"}),"Remove"]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"flex items-center gap-2 mb-2",children:u.jsxs("label",{className:"text-sm font-medium text-gray-700",children:["Images for ",U.name," (",(U.images||[]).length,")"]})}),u.jsxs("div",{className:"flex gap-2 mb-2",children:[u.jsx("input",{type:"text",value:E,onChange:Y=>b(Y.target.value),placeholder:"https://example.com/color-image.jpg",className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent"}),u.jsx("button",{type:"button",onClick:()=>B(z),className:"btn btn-secondary text-sm px-3 py-2",children:"Add Image"})]}),(U.images||[]).length===0?u.jsxs("div",{className:"text-center py-6 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[u.jsx("div",{className:"text-2xl mb-2",children:""}),u.jsxs("p",{className:"text-gray-500 text-sm",children:["No images for ",U.name," yet"]})]}):u.jsx("div",{className:"grid grid-cols-6 gap-2",children:(U.images||[]).map((Y,ne)=>u.jsxs("div",{className:"relative group",children:[u.jsx("img",{src:Y,alt:`${U.name} - Image ${ne+1}`,className:"w-full h-20 object-cover rounded border hover:border-[var(--primary-color)] transition-colors",onError:W=>{W.target.src="https://via.placeholder.com/80x80?text=Error"}}),u.jsx("button",{type:"button",onClick:()=>O(z,ne),className:"absolute top-1 right-1 w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-lg text-sm flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity shadow-lg hover:scale-110 transform",title:"Delete image",children:""}),u.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-black/70 text-white text-xs p-1 text-center opacity-0 group-hover:opacity-100 transition-opacity rounded-b",children:["#",ne+1]})]},`${Y}-${ne}`))})]})]},z))}),u.jsxs("div",{className:"text-xs text-gray-500 bg-blue-50 p-3 rounded",children:[u.jsx("strong",{children:"Tip:"})," Each color can have its own set of images. When customers select a color, they'll see the images specific to that color variant. Hover over images to see the delete button."]})]})}function hw({images:r,onUpdate:e,title:t="Product Images"}){const[s,o]=J.useState(""),[l,h]=J.useState("front"),m=[{value:"front",label:"Front View",icon:""},{value:"back",label:"Back View",icon:""},{value:"left",label:"Left Side",icon:""},{value:"right",label:"Right Side",icon:""},{value:"top",label:"Top View",icon:""},{value:"bottom",label:"Bottom View",icon:""},{value:"detail",label:"Detail Shot",icon:""},{value:"lifestyle",label:"Lifestyle",icon:""},{value:"packaging",label:"Packaging",icon:""},{value:"other",label:"Other",icon:""}],p=J.useMemo(()=>!r||r.length===0?[]:r.map((B,O)=>typeof B=="string"?{id:`img-${O}-${B.slice(-10)}`,url:B,angle:O===0?"front":"other",description:""}:B),[r]),v=()=>{if(!s.trim())return;const B={id:`img-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,url:s.trim(),angle:l,description:""},O=[...p,B];e(O),o(""),h("front")},E=B=>{const O=p.filter(U=>U.id!==B);e(O)},b=(B,O)=>{const U=p.map(z=>z.id===B?{...z,angle:O}:z);e(U)},N=(B,O)=>{const U=p.map(z=>z.id===B?{...z,description:O}:z);e(U)},L=B=>m.find(O=>O.value===B)||m.find(O=>O.value==="other"),Q=J.useMemo(()=>{const B={};return p.forEach(O=>{B[O.angle]||(B[O.angle]=[]),B[O.angle].push(O)}),B},[p]);return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border-2 border-dashed border-gray-300",children:[u.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2",children:[u.jsx("span",{className:"text-lg",children:""}),"Add New Image"]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Image URL"}),u.jsx("input",{type:"url",value:s,onChange:B=>o(B.target.value),placeholder:"https://example.com/image.jpg",className:"w-full border border-gray-300 p-2 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Angle/View"}),u.jsx("select",{value:l,onChange:B=>h(B.target.value),className:"w-full border border-gray-300 p-2 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:m.map(B=>u.jsxs("option",{value:B.value,children:[B.icon," ",B.label]},B.value))})]})]}),u.jsxs("div",{className:"flex items-center gap-3 mt-3",children:[u.jsx("button",{type:"button",onClick:v,disabled:!s.trim(),className:"btn btn-primary text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Add Image"}),s&&u.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[u.jsx("img",{src:s,alt:"Preview",className:"w-8 h-8 object-cover rounded border",onError:B=>{B.target.style.display="none"}}),u.jsx("span",{children:"Preview"})]})]})]}),p.length===0?u.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[u.jsx("div",{className:"text-4xl mb-3",children:""}),u.jsx("p",{className:"text-gray-500 font-medium",children:"No images added yet"}),u.jsx("p",{className:"text-gray-400 text-sm",children:"Add images with different angles to showcase your product"})]}):u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[u.jsx("span",{children:""}),t," (",p.length,")"]})}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:p.map((B,O)=>{const U=L(B.angle);return u.jsxs("div",{className:"relative group transition-all duration-200 bg-white rounded-lg border-2 border-gray-200 hover:border-gray-300 overflow-hidden",children:[u.jsxs("div",{className:"aspect-square overflow-hidden bg-gray-100 relative",children:[u.jsx("img",{src:B.url,alt:`${U.label} view`,className:"w-full h-full object-cover",onError:z=>{z.target.src="https://via.placeholder.com/200x200?text=Error"}}),u.jsxs("div",{className:"absolute top-2 left-2 bg-black/70 text-white text-xs px-2 py-1 rounded-full font-medium",children:["#",O+1]}),u.jsx("button",{type:"button",onClick:()=>E(B.id),className:"absolute top-2 right-2 w-10 h-10 bg-red-500 hover:bg-red-600 text-white rounded-lg text-lg flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity shadow-lg hover:scale-110 transform",title:"Delete image",children:""})]}),u.jsxs("div",{className:"p-3 space-y-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"View Angle"}),u.jsx("select",{value:B.angle,onChange:z=>b(B.id,z.target.value),className:"w-full border border-gray-300 p-1 rounded text-xs focus:ring-1 focus:ring-blue-500 focus:border-transparent",children:m.map(z=>u.jsxs("option",{value:z.value,children:[z.icon," ",z.label]},z.value))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Description (Optional)"}),u.jsx("input",{type:"text",value:B.description||"",onChange:z=>N(B.id,z.target.value),placeholder:"e.g., Close-up of texture",className:"w-full border border-gray-300 p-1 rounded text-xs focus:ring-1 focus:ring-blue-500 focus:border-transparent"})]})]})]},B.id)})}),u.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[u.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[u.jsx("span",{children:""}),"Images by Angle"]}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-2 text-xs",children:Object.entries(Q).map(([B,O])=>{const U=L(B);return u.jsxs("div",{className:"bg-white p-2 rounded border text-center",children:[u.jsx("div",{className:"text-lg mb-1",children:U.icon}),u.jsx("div",{className:"font-medium text-gray-700",children:U.label}),u.jsxs("div",{className:"text-gray-500",children:[O.length," image",O.length!==1?"s":""]})]},B)})})]}),u.jsxs("div",{className:"bg-yellow-50 p-3 rounded-lg border border-yellow-200",children:[u.jsxs("h4",{className:"text-sm font-medium text-yellow-800 mb-1 flex items-center gap-2",children:[u.jsx("span",{children:""}),"Pro Tips"]}),u.jsxs("ul",{className:"text-xs text-yellow-700 space-y-1",children:[u.jsx("li",{children:" The first image will be used as the main product image"}),u.jsx("li",{children:" Add multiple angles to give customers a complete view"}),u.jsx("li",{children:' Use descriptive angles like "Front View", "Detail Shot", etc.'}),u.jsx("li",{children:" Hover over images to see the large delete button"})]})]})]})]})}const fw=J.memo(hw);function Ig({isOpen:r,onClose:e,onConfirm:t,title:s="Confirm Action",message:o="Are you sure you want to proceed?",confirmText:l="Confirm",cancelText:h="Cancel",type:m="danger",itemDetails:p=null}){if(!r)return null;const E=(()=>{switch(m){case"danger":return{icon:"icon-triangle-alert",iconColor:"text-red-600",iconBg:"bg-red-100",confirmBtn:"bg-red-600 hover:bg-red-700 text-white",border:"border-red-200"};case"warning":return{icon:"icon-triangle-alert",iconColor:"text-yellow-600",iconBg:"bg-yellow-100",confirmBtn:"bg-yellow-600 hover:bg-yellow-700 text-white",border:"border-yellow-200"};case"info":return{icon:"icon-info-circle",iconColor:"text-blue-600",iconBg:"bg-blue-100",confirmBtn:"bg-blue-600 hover:bg-blue-700 text-white",border:"border-blue-200"};default:return{icon:"icon-triangle-alert",iconColor:"text-red-600",iconBg:"bg-red-100",confirmBtn:"bg-red-600 hover:bg-red-700 text-white",border:"border-red-200"}}})(),b=()=>{t(),e()},N=()=>{e()};return Ti.createPortal(u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 modal-backdrop flex items-center justify-center z-[99999] animate-[fadeIn_0.2s_ease-out]",onClick:e,children:u.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4 overflow-hidden modal-content",onClick:L=>L.stopPropagation(),children:[u.jsx("div",{className:`p-6 border-b ${E.border}`,children:u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:`w-12 h-12 rounded-full ${E.iconBg} flex items-center justify-center flex-shrink-0`,children:u.jsx("div",{className:`${E.icon} text-2xl ${E.iconColor}`})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s}),u.jsx("p",{className:"text-sm text-gray-600 mt-1",children:o})]})]})}),p&&u.jsx("div",{className:"p-6 bg-gray-50 border-b border-gray-200",children:u.jsxs("div",{className:"flex items-center gap-4",children:[p.image&&u.jsx("img",{src:p.image,alt:p.name,className:"w-16 h-16 object-cover rounded border",onError:L=>{L.target.src="https://via.placeholder.com/64x64?text=No+Image"}}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h4",{className:"font-semibold text-gray-900",children:p.name}),p.price&&u.jsxs("p",{className:"text-sm text-gray-600",children:["$",p.price.toFixed(2)]}),p.category&&u.jsx("p",{className:"text-xs text-gray-500",children:p.category})]})]})}),u.jsx("div",{className:"p-6",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("div",{className:"icon-triangle-alert text-yellow-500 text-lg mt-0.5"}),u.jsxs("div",{className:"text-sm text-gray-700",children:[u.jsx("p",{className:"font-medium mb-2",children:"This action cannot be undone."}),u.jsxs("ul",{className:"list-disc list-inside space-y-1 text-gray-600",children:[u.jsx("li",{children:"The product will be permanently removed from your store"}),u.jsx("li",{children:"All associated images and data will be deleted"}),u.jsx("li",{children:"This product will no longer appear in search results"}),p?.reviews>0&&u.jsxs("li",{children:["All customer reviews (",p.reviews,") will be lost"]})]})]})]})}),u.jsxs("div",{className:"p-6 bg-gray-50 flex gap-3 justify-end",children:[u.jsx("button",{onClick:N,className:"btn btn-secondary px-6 py-2",children:h}),u.jsx("button",{onClick:b,className:`btn px-6 py-2 ${E.confirmBtn}`,children:l})]})]})}),document.body)}function mw({product:r,isVisible:e}){const[t,s]=J.useState(0),[o,l]=J.useState(null),[h,m]=J.useState(!1);if(J.useEffect(()=>{r?.colors?.length>0&&!o&&l(r.colors[0].name)},[r?.colors?.length,o]),J.useEffect(()=>{s(0)},[o]),!e||!r)return null;let p=[];if(o&&r.colors){const U=r.colors.find(z=>z.name===o);U&&U.images&&(p=U.images)}p.length===0&&r.images&&(p=r.images.map(U=>typeof U=="string"?U:U.url)),p.length===0&&r.image&&(p=[r.image]);const v=p[t]||"https://via.placeholder.com/400x400?text=No+Image",E=U=>{l(U),s(0)},b=()=>{p.length>1&&s(U=>(U+1)%p.length)},N=()=>{p.length>1&&s(U=>(U-1+p.length)%p.length)},L=U=>{s(U)},Q=150,B=r.description&&r.description.length>Q,O=B&&!h?r.description.substring(0,Q)+"...":r.description;return u.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-8 border-l-4 border-blue-500",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:u.jsx("span",{className:"text-lg",children:""})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Product Preview"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Live preview of how this product will appear"})]})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"aspect-square rounded-lg overflow-hidden bg-gray-100 relative border-2 border-blue-200",children:[u.jsx("img",{src:v,alt:`${r.name} - ${o||"default"}`,className:"w-full h-full object-cover",onError:U=>{U.target.src="https://via.placeholder.com/400x400?text=No+Image"}}),p.length>1&&u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:N,className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-12 h-12 bg-red-600 hover:bg-red-700 text-white rounded-full flex items-center justify-center text-xl font-bold shadow-lg",children:""}),u.jsx("button",{onClick:b,className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-12 h-12 bg-green-600 hover:bg-green-700 text-white rounded-full flex items-center justify-center text-xl font-bold shadow-lg",children:""}),u.jsxs("div",{className:"absolute top-3 right-3 bg-black bg-opacity-80 text-white text-lg px-4 py-2 rounded",children:[t+1," / ",p.length]})]})]}),p.length>1&&u.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:p.map((U,z)=>u.jsx("button",{onClick:()=>L(z),className:`flex-shrink-0 w-20 h-20 rounded-md overflow-hidden border-2 ${z===t?"border-blue-500 shadow-lg":"border-gray-300 hover:border-gray-400"}`,children:u.jsx("img",{src:U,alt:`View ${z+1}`,className:"w-full h-full object-cover"})},z))}),p.length>1&&u.jsxs("div",{className:"flex gap-2 justify-center",children:[u.jsx("button",{onClick:N,className:"bg-red-500 text-white px-3 py-1 rounded text-sm",children:" PREV"}),u.jsx("button",{onClick:b,className:"bg-green-500 text-white px-3 py-1 rounded text-sm",children:"NEXT "}),u.jsx("button",{onClick:()=>L(0),className:"bg-blue-500 text-white px-3 py-1 rounded text-sm",children:"FIRST"})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:r.name||"Product Name"}),u.jsxs("div",{className:"text-2xl font-bold text-blue-600 mb-3",children:["$",r.price?r.price.toFixed(2):"0.00"]}),u.jsx("span",{className:"inline-block px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm",children:r.category||"No Category"})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Description"}),u.jsx("div",{className:"text-gray-600 leading-relaxed break-words",children:O}),B&&u.jsx("button",{onClick:()=>m(!h),className:"text-blue-600 hover:text-blue-800 font-medium text-sm mt-1 flex items-center gap-1 transition-colors",children:h?"Show Less ":"Show More "})]}),r.colors&&r.colors.length>0&&u.jsxs("div",{children:[u.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:["Colors (",r.colors.length,")"]}),u.jsx("div",{className:"space-y-2",children:r.colors.map((U,z)=>u.jsx("button",{onClick:()=>E(U.name),className:`w-full p-3 rounded-md border-2 text-left ${o===U.name?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-gray-400",style:{backgroundColor:U.hex}}),u.jsxs("div",{children:[u.jsx("div",{className:"font-medium",children:U.name}),u.jsxs("div",{className:"text-sm text-gray-500",children:[(U.images||[]).length," photos"]})]})]})},z))})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t border-gray-200",children:[u.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded",children:[u.jsx("div",{className:"text-lg font-semibold text-blue-600",children:p.length}),u.jsx("div",{className:"text-sm text-gray-600",children:"Images"})]}),u.jsxs("div",{className:"text-center p-3 bg-purple-50 rounded",children:[u.jsx("div",{className:"text-lg font-semibold text-purple-600",children:r.colors?.length||0}),u.jsx("div",{className:"text-sm text-gray-600",children:"Colors"})]})]})]})]})]})}const pw=J.memo(mw);function gw({products:r,onUpdate:e}){const[t,s]=J.useState([]),[o,l]=J.useState(""),[h,m]=J.useState(20);J.useEffect(()=>{p()},[]);const p=()=>{const b=ProductManager.getDailyDeals();s(b)},v=()=>{if(!o||h<=0){He("Please select a product and enter a valid discount","error");return}ProductManager.addToDailyDeals(o,h),p(),e(),l(""),m(20),He("Product added to daily deals!","success"),window.dispatchEvent(new CustomEvent("adminUpdate"))},E=b=>{ProductManager.removeFromDailyDeals(b),p(),e(),He("Product removed from daily deals","success"),window.dispatchEvent(new CustomEvent("adminUpdate"))};return u.jsxs("div",{className:"bg-gradient-to-r from-red-50 to-orange-50 p-6 rounded-lg shadow mb-8",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[u.jsx("div",{className:"icon-tag text-2xl text-red-600"}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Daily Deals Management"}),u.jsx("p",{className:"text-gray-600",children:"Add special discounts to featured products"})]})]}),u.jsxs("div",{className:"bg-white p-4 rounded-lg mb-6",children:[u.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Add Product to Daily Deals"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product"}),u.jsxs("select",{value:o,onChange:b=>l(b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",children:[u.jsx("option",{value:"",children:"Select a product..."}),r.map(b=>u.jsxs("option",{value:b.id,children:[b.name," - $",b.price.toFixed(2)]},b.id))]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Discount %"}),u.jsx("input",{type:"number",min:"1",max:"90",value:h,onChange:b=>m(parseInt(b.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500"})]}),u.jsx("div",{className:"flex items-end",children:u.jsx("button",{onClick:v,className:"w-full btn bg-red-600 text-white hover:bg-red-700 py-2 px-4 rounded-md",children:"Add to Daily Deals"})})]})]}),u.jsxs("div",{className:"bg-white p-4 rounded-lg",children:[u.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Current Daily Deals (",t.length,")"]}),t.length===0?u.jsx("p",{className:"text-gray-500 text-center py-4",children:"No daily deals active"}):u.jsx("div",{className:"space-y-3",children:t.map(b=>{const N=r.find(B=>B.id==b.productId);if(!N)return null;const L=N.price*(b.discountPercent/100),Q=N.price-L;return u.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg border border-red-200",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("img",{src:N.image,alt:N.name,className:"w-12 h-12 object-cover rounded-lg"}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold text-gray-900",children:N.name}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("span",{className:"text-lg font-bold text-red-600",children:["$",Q.toFixed(2)]}),u.jsxs("span",{className:"text-sm text-gray-500 line-through",children:["$",N.price.toFixed(2)]}),u.jsxs("span",{className:"bg-red-600 text-white px-2 py-1 rounded-full text-xs font-bold",children:[b.discountPercent,"% OFF"]})]})]})]}),u.jsx("button",{onClick:()=>E(b.productId),className:"text-red-600 hover:text-red-800 p-2 hover:bg-red-100 rounded-lg transition-colors",title:"Remove from daily deals",children:u.jsx("div",{className:"icon-trash text-lg"})})]},b.productId)})})]})]})}function yw({products:r,onUpdate:e}){const[t,s]=J.useState([]),[o,l]=J.useState([]),[h,m]=J.useState(null),[p,v]=J.useState(null);J.useEffect(()=>{E()},[r]);const E=()=>{const U=ProductManager.getHomePageProducts();s(U);const z=new Set(U.map(ne=>ne.id.toString())),Y=r.filter(ne=>!z.has(ne.id.toString()));l(Y),console.log(" Home page products:",U.length),console.log(" Available products:",Y.length)},b=(U,z,Y)=>{m(z),v(Y),U.dataTransfer.effectAllowed="move"},N=U=>{U.preventDefault(),U.dataTransfer.dropEffect="move"},L=(U,z)=>{if(U.preventDefault(),h!==null){if(p==="home"){if(h===z)return;ProductManager.reorderHomePageProducts(h,z)}else{const Y=o[h];if(t.length>=12){He("Home page can only have 12 products","error"),m(null),v(null);return}const ne=[...t];ne.splice(z,0,Y);const W=ne.map(ce=>ce.id);localStorage.setItem("luxemarket_homepage_order",JSON.stringify(W))}E(),e(),m(null),v(null),He("Home page updated!","success"),window.dispatchEvent(new CustomEvent("adminUpdate"))}},Q=U=>{if(t.length>=12){He("Home page can only have 12 products","error");return}const Y=[...t,U].map(ne=>ne.id);localStorage.setItem("luxemarket_homepage_order",JSON.stringify(Y)),E(),e(),He(`"${U.name}" added to home page`,"success"),window.dispatchEvent(new CustomEvent("adminUpdate"))},B=U=>{const Y=t.filter((ne,W)=>W!==U).map(ne=>ne.id);localStorage.setItem("luxemarket_homepage_order",JSON.stringify(Y)),E(),e(),He("Product removed from home page","success"),window.dispatchEvent(new CustomEvent("adminUpdate"))},O=()=>{localStorage.removeItem("luxemarket_homepage_order"),E(),e(),He("Reset to default order","success"),window.dispatchEvent(new CustomEvent("adminUpdate"))};return u.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-lg shadow mb-8",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"icon-home text-2xl text-blue-600"}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Home Page Product Manager"}),u.jsx("p",{className:"text-gray-600",children:"Select and arrange products for the home page (max 12)"})]})]}),u.jsx("button",{onClick:O,className:"btn btn-secondary px-4 py-2 text-sm",children:"Reset to Default"})]}),u.jsxs("div",{className:"bg-white p-4 rounded-lg mb-6",children:[u.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center justify-between",children:[u.jsxs("span",{children:["Current Home Page Products (",t.length,"/12)"]}),t.length<12&&u.jsxs("span",{className:"text-sm text-orange-600 font-normal",children:[" Add ",12-t.length," more product",12-t.length!==1?"s":""]})]}),t.length===0?u.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[u.jsx("div",{className:"text-4xl mb-3",children:""}),u.jsx("p",{className:"text-gray-500 font-medium",children:"No products on home page"}),u.jsx("p",{className:"text-gray-400 text-sm",children:"Add products from the list below"})]}):u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4",children:t.map((U,z)=>u.jsxs("div",{draggable:!0,onDragStart:Y=>b(Y,z,"home"),onDragOver:N,onDrop:Y=>L(Y,z),className:`relative bg-white border-2 rounded-lg overflow-hidden cursor-move transition-all group ${h===z&&p==="home"?"border-blue-500 opacity-50":"border-gray-200 hover:border-blue-300"}`,children:[u.jsx("div",{className:"aspect-square bg-gray-100",children:u.jsx("img",{src:U.image,alt:U.name,className:"w-full h-full object-cover"})}),u.jsxs("div",{className:"p-2",children:[u.jsx("div",{className:"absolute top-2 left-2 bg-blue-600 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold",children:z+1}),U.isDailyDeal&&u.jsxs("div",{className:"absolute top-10 left-2 bg-red-600 text-white px-1 py-0.5 rounded text-xs font-bold",children:[" ",U.discountPercent,"%"]}),u.jsx("button",{onClick:()=>B(z),className:"absolute top-2 right-2 w-6 h-6 bg-red-500 hover:bg-red-600 text-white rounded-full text-xs flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity shadow-lg",title:"Remove from home page",children:""}),u.jsx("h4",{className:"text-xs font-semibold text-gray-900 line-clamp-2",children:U.name}),u.jsx("p",{className:"text-xs text-gray-500",children:U.category})]})]},U.id))}),u.jsx("p",{className:"text-sm text-gray-500 mt-4 text-center",children:" Drag and drop to reorder  Click  to remove"})]}),u.jsxs("div",{className:"bg-white p-4 rounded-lg",children:[u.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Available Products (",o.length,")"]}),o.length===0?u.jsx("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:u.jsx("p",{className:"text-gray-500",children:"All products are on the home page"})}):u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4",children:o.map((U,z)=>u.jsxs("div",{draggable:!0,onDragStart:Y=>b(Y,z,"available"),className:`relative bg-white border-2 rounded-lg overflow-hidden cursor-move transition-all group ${h===z&&p==="available"?"border-green-500 opacity-50":"border-gray-200 hover:border-green-300"}`,children:[u.jsx("div",{className:"aspect-square bg-gray-100",children:u.jsx("img",{src:U.image,alt:U.name,className:"w-full h-full object-cover"})}),u.jsxs("div",{className:"p-2",children:[u.jsx("button",{onClick:()=>Q(U),disabled:t.length>=12,className:"absolute top-2 right-2 w-6 h-6 bg-green-500 hover:bg-green-600 text-white rounded-full text-xs flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity shadow-lg disabled:bg-gray-400 disabled:cursor-not-allowed",title:t.length>=12?"Home page is full":"Add to home page",children:"+"}),u.jsx("h4",{className:"text-xs font-semibold text-gray-900 line-clamp-2",children:U.name}),u.jsx("p",{className:"text-xs text-gray-500",children:U.category})]})]},U.id))}),u.jsx("p",{className:"text-sm text-gray-500 mt-4 text-center",children:" Drag to home page section above or click + to add"})]})]})}function vw(){const[r,e]=J.useState([]),[t,s]=J.useState([]),[o,l]=J.useState(null),[h,m]=J.useState("All Categories"),[p,v]=J.useState({name:"",price:"",category:"",image:"",images:[],description:"",videoUrl:"",colors:[],sizes:"",rating:4,reviews:0,stock:0}),[E,b]=J.useState(""),[N,L]=J.useState(!0),[Q,B]=J.useState({isOpen:!1,product:null}),[O,U]=J.useState({isOpen:!1,categoryName:null}),[z,Y]=J.useState(!0),[ne,W]=J.useState(!1);J.useEffect(()=>{C()},[]),J.useEffect(()=>{const S=()=>{W(window.scrollY>300)};return window.addEventListener("scroll",S),()=>window.removeEventListener("scroll",S)},[]);const ce=()=>{window.scrollTo({top:0,behavior:"smooth"})},C=async()=>{try{if(!window.ProductManager){console.error("ProductManager not initialized");return}console.log(" AdminDashboard: Loading products...");let S;window.ProductManager.getAllAsync?(console.log(" AdminDashboard: Using getAllAsync from Firebase..."),S=await window.ProductManager.getAllAsync()):(console.log(" AdminDashboard: Using sync method"),S=window.ProductManager.getAll()),console.log(" AdminDashboard: Total products loaded:",S.length),console.log(" AdminDashboard: First product:",S[0]),e(S),s(fi.getAll()),window.dispatchEvent(new CustomEvent("adminUpdate"))}catch(S){console.error("Error refreshing data:",S),He("Failed to load products","error")}},I=S=>{v({...p,[S.target.name]:S.target.value})},A=J.useMemo(()=>({...p,price:parseFloat(p.price)||0,rating:parseFloat(p.rating)||4,reviews:parseInt(p.reviews)||0,stock:parseInt(p.stock)||0}),[p]),D=J.useCallback(S=>{v(le=>({...le,colors:S}))},[]),P=J.useCallback(S=>{v(le=>({...le,images:S,image:S.length>0?typeof S[0]=="string"?S[0]:S[0].url:le.image}))},[]),M=()=>{v({name:"",price:"",category:"",image:"",images:[],description:"",videoUrl:"",colors:[],sizes:"",rating:4,reviews:0,stock:0}),b(""),l(null)},w=async S=>{S.preventDefault();try{if(!window.ProductManager){console.error("ProductManager not initialized");return}const le=p.sizes?p.sizes.split(",").map(_e=>_e.trim()).filter(_e=>_e):[];let de=[];p.images&&p.images.length>0?de=p.images.map(_e=>typeof _e=="string"?_e:_e.url):p.image.trim()&&(de=[p.image.trim()]);const fe={name:p.name.trim(),price:parseFloat(p.price),category:p.category.trim(),image:p.image.trim()||(de.length>0?de[0]:""),images:de,enhancedImages:p.images,description:p.description.trim(),videoUrl:p.videoUrl.trim(),colors:p.colors,sizes:le,rating:parseFloat(p.rating)||4,reviews:parseInt(p.reviews)||0,stock:parseInt(p.stock)||0};o?(await window.ProductManager.update(o.id,fe),He("Product updated successfully","success")):(await window.ProductManager.add(fe),He("Product added successfully","success")),fi.syncWithProducts(),await C(),M()}catch(le){console.error("Error saving product:",le),He("Failed to save product","error")}},ie=S=>{l(S);const le=S.sizes?S.sizes.join(", "):"";let de=[];S.enhancedImages&&S.enhancedImages.length>0?de=S.enhancedImages:S.images&&S.images.length>0&&(de=S.images.map((fe,_e)=>({id:`img-${_e}-${Date.now()}`,url:fe,angle:_e===0?"front":"other",description:""}))),v({name:S.name,price:S.price,category:S.category,image:S.image,images:de,description:S.description,videoUrl:S.videoUrl||"",colors:S.colors||[],sizes:le,rating:S.rating||4,reviews:S.reviews||0,stock:S.stock||0}),setTimeout(()=>{const fe=document.getElementById("product-form-section");fe&&(fe.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"}),fe.classList.add("highlight-form"),setTimeout(()=>{fe.classList.remove("highlight-form")},2e3))},100)},Se=()=>{E.trim()&&(v(S=>({...S,images:[...S.images,E.trim()]})),b(""))},Re=S=>{v(le=>({...le,images:le.images.filter((de,fe)=>fe!==S)}))},Le=S=>{const le=r.find(de=>de.id==S);le&&B({isOpen:!0,product:le})},oe=async()=>{if(Q.product)try{if(!window.ProductManager){console.error("ProductManager not initialized");return}await window.ProductManager.delete(Q.product.id),fi.syncWithProducts(),await C(),He(`"${Q.product.name}" deleted successfully`,"success"),o&&o.id==Q.product.id&&M()}catch(S){console.error("Error deleting product:",S),He("Error deleting product","error")}B({isOpen:!1,product:null})},F=()=>{const S=prompt("Enter new category name:");S&&(fi.add(S)?(He("Category added successfully","success"),C()):He("Category already exists","error"))},X=S=>{U({isOpen:!0,categoryName:S})},R=()=>{O.categoryName&&(fi.delete(O.categoryName),C(),He(`Category "${O.categoryName}" deleted successfully`,"success")),U({isOpen:!1,categoryName:null})};return u.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[u.jsxs("div",{className:"container-custom",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-12 h-12 admin-header rounded-lg flex items-center justify-center admin-icon",children:u.jsx("div",{className:"icon-chart-line text-2xl text-white"})}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Dashboard"}),u.jsx("p",{className:"text-gray-600",children:"Manage your products, categories, and store settings"})]})]}),u.jsxs("a",{href:"index.html",className:"btn btn-secondary flex items-center gap-2",children:[u.jsx("div",{className:"icon-arrow-left text-sm"}),"Back to Store"]})]}),u.jsxs("div",{id:"product-form-section",className:"bg-white p-6 rounded-lg shadow mb-8 transition-all duration-500",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:u.jsx("div",{className:"icon-tools text-lg text-[var(--primary-color)]"})}),u.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:o?`Edit Product: ${o.name}`:"Add New Product"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("button",{type:"button",onClick:()=>Y(!z),className:`btn text-sm flex items-center gap-2 ${z?"btn-primary":"btn-secondary"}`,children:[u.jsx("div",{className:"icon-eye text-xs"}),z?"Hide Preview":"Show Preview"]}),o&&u.jsx("button",{type:"button",onClick:()=>{M(),He("Edit cancelled","info")},className:"btn btn-secondary text-sm",children:"Cancel Edit"})]})]}),u.jsxs("form",{onSubmit:w,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name"}),u.jsx("input",{name:"name",value:p.name,onChange:I,placeholder:"Enter product name",className:"w-full border border-gray-300 p-3 rounded-md focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price ($)"}),u.jsx("input",{name:"price",type:"number",step:"0.01",value:p.price,onChange:I,placeholder:"0.00",className:"w-full border border-gray-300 p-3 rounded-md focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stock Quantity"}),u.jsx("input",{name:"stock",type:"number",min:"0",value:p.stock,onChange:I,placeholder:"0",className:"w-full border border-gray-300 p-3 rounded-md focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent",required:!0}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Number of items available for sale"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{name:"category",value:p.category,onChange:I,placeholder:"Enter or select category",className:"flex-1 border border-gray-300 p-3 rounded-md focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent",list:"category-list",required:!0}),u.jsx("button",{type:"button",onClick:()=>{const S=p.category.trim();S&&!t.includes(S)&&(fi.add(S),C(),He(`Category "${S}" added`,"success"))},className:"btn btn-secondary px-4 whitespace-nowrap",title:"Add this category if it doesn't exist",children:"+ Add"})]}),u.jsx("datalist",{id:"category-list",children:t.map(S=>u.jsx("option",{value:S},S))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Main Image URL"}),u.jsx("input",{name:"image",value:p.image,onChange:I,placeholder:"https://example.com/image.jpg",className:"w-full border border-gray-300 p-3 rounded-md focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent"}),p.image&&u.jsxs("div",{className:"mt-2",children:[u.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Main Image Preview"}),u.jsx("img",{src:p.image,alt:"Main product image preview",className:"w-24 h-24 object-cover rounded border hover:border-[var(--primary-color)] transition-colors",onError:S=>{S.target.style.display="none"}})]})]}),u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Images"}),u.jsxs("div",{className:"flex items-center gap-4 mb-4 p-3 bg-gray-50 rounded-lg",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"checkbox",id:"useEnhancedImages",checked:N,onChange:S=>L(S.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),u.jsx("label",{htmlFor:"useEnhancedImages",className:"text-sm font-medium text-gray-700",children:"Enhanced Image Management"})]}),u.jsx("div",{className:"text-xs text-gray-500",children:N?" Manage angles & descriptions":" Simple image list"})]}),N?u.jsx(fw,{images:p.images,onUpdate:P,title:"Product Images"}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex gap-2 mb-2",children:[u.jsx("input",{value:E,onChange:S=>b(S.target.value),placeholder:"https://example.com/additional-image.jpg",className:"flex-1 border border-gray-300 p-3 rounded-md focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent"}),u.jsx("button",{type:"button",onClick:Se,className:"btn btn-secondary px-4 whitespace-nowrap",children:"Add Image"})]}),p.images.length===0?u.jsxs("div",{className:"text-center py-6 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[u.jsx("div",{className:"text-2xl mb-2",children:""}),u.jsx("p",{className:"text-gray-500 text-sm",children:"No additional images yet"})]}):u.jsxs("div",{children:[u.jsx("div",{className:"flex items-center justify-between mb-2",children:u.jsxs("p",{className:"text-sm font-medium text-gray-700",children:["Additional Images (",p.images.length,")"]})}),u.jsx("div",{className:"grid grid-cols-6 gap-2",children:p.images.map((S,le)=>{const de=typeof S=="string"?S:S.url;return u.jsxs("div",{className:"relative group",children:[u.jsx("img",{src:de,alt:`Image ${le+1}`,className:"w-full h-20 object-cover rounded border hover:border-[var(--primary-color)] transition-colors",onError:fe=>{fe.target.src="https://via.placeholder.com/80x80?text=Error"}}),u.jsx("button",{type:"button",onClick:()=>Re(le),className:"absolute top-1 right-1 w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-lg text-sm flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity shadow-lg hover:scale-110 transform",title:"Delete image",children:""}),u.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-black/70 text-white text-xs p-1 text-center opacity-0 group-hover:opacity-100 transition-opacity rounded-b",children:["#",le+1]})]},`${de}-${le}`)})})]}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Add multiple images showing different angles of the product"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Video URL (Optional)"}),u.jsx("input",{name:"videoUrl",value:p.videoUrl,onChange:I,placeholder:"https://example.com/video.mp4",className:"w-full border border-gray-300 p-3 rounded-md focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Add a video URL for product demonstrations"})]}),u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Colors"}),u.jsx(dw,{colors:p.colors,onChange:D})]}),u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sizes (comma-separated)"}),u.jsx("input",{name:"sizes",value:p.sizes,onChange:I,placeholder:"S, M, L, XL or 7, 8, 9, 10, 11, 12",className:"w-full border border-gray-300 p-3 rounded-md focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter sizes separated by commas"})]}),u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),u.jsx("textarea",{name:"description",value:p.description,onChange:I,placeholder:"Enter product description",className:"w-full border border-gray-300 p-3 rounded-md focus:ring-2 focus:ring-[var(--primary-color)] focus:border-transparent",rows:"3"})]}),u.jsxs("div",{className:"md:col-span-2 flex gap-4",children:[u.jsx("button",{type:"submit",className:"btn btn-primary px-6 py-3",children:o?"Update Product":"Add Product"}),o&&u.jsx("button",{type:"button",onClick:M,className:"btn btn-secondary px-6 py-3",children:"Cancel Edit"})]})]})]}),u.jsx(pw,{product:A,isVisible:z&&(p.name||p.image||p.description||p.colors.length>0)}),u.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-8",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:u.jsx("div",{className:"icon-palette text-lg text-green-600"})}),u.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Categories"})]}),u.jsx("button",{onClick:F,className:"btn btn-primary",children:"Add Category"})]}),u.jsx("div",{className:"flex gap-3 flex-wrap",children:t.map(S=>u.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 px-4 py-2 rounded-full",children:[u.jsx("span",{className:"text-gray-700",children:S}),u.jsx("button",{onClick:()=>X(S),className:"text-red-500 hover:text-red-700 font-bold",title:"Delete category",children:""})]},S))})]}),u.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:u.jsx("div",{className:"icon-database text-lg text-purple-600"})}),u.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:["Products (",h==="All Categories"?r.length:r.filter(S=>S.category===h).length,")"]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("select",{value:h,onChange:S=>m(S.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--primary-color)] text-sm",children:[u.jsx("option",{value:"All Categories",children:"All Categories"}),t.map(S=>u.jsx("option",{value:S,children:S},S))]}),u.jsxs("button",{onClick:()=>{const S=document.getElementById("product-form-section");S&&S.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},className:"btn btn-secondary text-sm flex items-center gap-2",children:[u.jsx("div",{className:"icon-arrow-up text-xs"}),"Jump to Form"]})]})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:r.filter(S=>h==="All Categories"||S.category===h).map(S=>u.jsxs("div",{className:`border rounded-lg overflow-hidden hover:shadow-md transition-all ${o&&o.id===S.id?"border-[var(--primary-color)] ring-2 ring-[var(--primary-color)]/20 bg-blue-50/30":"border-gray-200"}`,children:[u.jsxs("div",{className:"aspect-square overflow-hidden bg-gray-100 relative",children:[o&&o.id===S.id&&u.jsx("div",{className:"absolute top-2 left-2 bg-[var(--primary-color)] text-white text-xs px-2 py-1 rounded-full font-medium",children:"Editing"}),u.jsx("img",{src:S.image,alt:S.name,className:"w-full h-full object-cover",onError:le=>{le.target.src="https://via.placeholder.com/300x300?text=No+Image"}})]}),u.jsxs("div",{className:"p-4",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:S.name}),u.jsx("div",{className:"mb-1",children:S.isDailyDeal?u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("span",{className:"text-lg font-bold text-red-600",children:["$",S.price.toFixed(2)]}),u.jsxs("span",{className:"text-sm text-gray-500 line-through",children:["$",S.originalPrice.toFixed(2)]}),u.jsxs("span",{className:"bg-red-600 text-white px-2 py-1 rounded-full text-xs font-bold",children:[S.discountPercent,"% OFF"]})]}):u.jsxs("p",{className:"text-xl font-bold text-[var(--primary-color)]",children:["$",S.price.toFixed(2)]})}),u.jsx("p",{className:"text-sm text-gray-500 mb-2",children:S.category}),u.jsx("div",{className:"mb-2",children:S.stock===0?u.jsx("span",{className:"inline-block px-2 py-1 bg-red-100 text-red-700 text-xs font-medium rounded-full",children:"Out of Stock (0)"}):S.stock<=5?u.jsxs("span",{className:"inline-block px-2 py-1 bg-orange-100 text-orange-700 text-xs font-medium rounded-full",children:["Low Stock (",S.stock,")"]}):u.jsxs("span",{className:"inline-block px-2 py-1 bg-green-100 text-green-700 text-xs font-medium rounded-full",children:["In Stock (",S.stock,")"]})}),u.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 mb-2",children:S.description}),S.videoUrl&&u.jsxs("div",{className:"flex items-center gap-1 text-xs text-blue-600 mb-4",children:[u.jsx("div",{className:"icon-play text-xs"}),u.jsx("span",{children:"Video available"})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>ie(S),className:`btn flex-1 text-sm ${o&&o.id===S.id?"btn-primary":"btn-secondary"}`,children:o&&o.id===S.id?"Editing...":"Edit"}),u.jsx("button",{onClick:()=>Le(S.id),className:"btn bg-red-600 hover:bg-red-700 text-white flex-1 text-sm",children:"Delete"})]})]})]},S.id))}),r.filter(S=>h==="All Categories"||S.category===h).length===0&&u.jsxs("div",{className:"text-center py-12",children:[u.jsx("div",{className:"icon-shopping-bag text-4xl text-gray-300 mx-auto mb-3"}),u.jsx("p",{className:"text-gray-500",children:"No products found. Add your first product above."})]})]}),u.jsx(gw,{products:r,onUpdate:C}),u.jsx(yw,{products:r,onUpdate:C})]}),u.jsx(Ig,{isOpen:Q.isOpen,onClose:()=>B({isOpen:!1,product:null}),onConfirm:oe,title:"Delete Product",message:"Are you sure you want to delete this product?",confirmText:"Delete Product",cancelText:"Keep Product",type:"danger",itemDetails:Q.product?{name:Q.product.name,price:Q.product.price,category:Q.product.category,image:Q.product.image,reviews:Q.product.reviews}:null}),u.jsx(Ig,{isOpen:O.isOpen,onClose:()=>U({isOpen:!1,categoryName:null}),onConfirm:R,title:"Delete Category",message:`Are you sure you want to delete the category "${O.categoryName}"?`,confirmText:"Delete Category",cancelText:"Keep Category",type:"warning"}),ne&&u.jsx("button",{onClick:ce,className:"fixed bottom-6 right-6 bg-[var(--primary-color)] hover:bg-[var(--primary-hover)] text-white p-3 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 z-[1000] group",title:"Go to top",children:u.jsx("div",{className:"icon-arrow-up text-lg group-hover:animate-bounce"})})]})}const xw=()=>{};var Ng={};const iv=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},_w=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const o=r[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],h=r[t++],m=r[t++],p=((o&7)<<18|(l&63)<<12|(h&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const l=r[t++],h=r[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},ov={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const l=r[o],h=o+1<r.length,m=h?r[o+1]:0,p=o+2<r.length,v=p?r[o+2]:0,E=l>>2,b=(l&3)<<4|m>>4;let N=(m&15)<<2|v>>6,L=v&63;p||(L=64,h||(N=64)),s.push(t[E],t[b],t[N],t[L])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(iv(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):_w(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],m=o<r.length?t[r.charAt(o)]:0;++o;const v=o<r.length?t[r.charAt(o)]:64;++o;const b=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||m==null||v==null||b==null)throw new ww;const N=l<<2|m>>4;if(s.push(N),v!==64){const L=m<<4&240|v>>2;if(s.push(L),b!==64){const Q=v<<6&192|b;s.push(Q)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class ww extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ew=function(r){const e=iv(r);return ov.encodeByteArray(e,!0)},su=function(r){return Ew(r).replace(/\./g,"")},av=function(r){try{return ov.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function bw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Tw=()=>bw().__FIREBASE_DEFAULTS__,Iw=()=>{if(typeof process>"u"||typeof Ng>"u")return;const r=Ng.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},Nw=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&av(r[1]);return e&&JSON.parse(e)},Iu=()=>{try{return xw()||Tw()||Iw()||Nw()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},lv=r=>Iu()?.emulatorHosts?.[r],cv=r=>{const e=lv(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},uv=()=>Iu()?.config,dv=r=>Iu()?.[`_${r}`];class Sw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}function Ii(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function df(r){return(await fetch(r,{credentials:"include"})).ok}function hv(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...r};return[su(JSON.stringify(t)),su(JSON.stringify(h)),""].join(".")}const Xa={};function Cw(){const r={prod:[],emulator:[]};for(const e of Object.keys(Xa))Xa[e]?r.emulator.push(e):r.prod.push(e);return r}function kw(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Sg=!1;function hf(r,e){if(typeof window>"u"||typeof document>"u"||!Ii(window.location.host)||Xa[r]===e||Xa[r]||Sg)return;Xa[r]=e;function t(N){return`__firebase__banner__${N}`}const s="__firebase__banner",l=Cw().prod.length>0;function h(){const N=document.getElementById(s);N&&N.remove()}function m(N){N.style.display="flex",N.style.background="#7faaf0",N.style.position="fixed",N.style.bottom="5px",N.style.left="5px",N.style.padding=".5em",N.style.borderRadius="5px",N.style.alignItems="center"}function p(N,L){N.setAttribute("width","24"),N.setAttribute("id",L),N.setAttribute("height","24"),N.setAttribute("viewBox","0 0 24 24"),N.setAttribute("fill","none"),N.style.marginLeft="-6px"}function v(){const N=document.createElement("span");return N.style.cursor="pointer",N.style.marginLeft="16px",N.style.fontSize="24px",N.innerHTML=" &times;",N.onclick=()=>{Sg=!0,h()},N}function E(N,L){N.setAttribute("id",L),N.innerText="Learn more",N.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",N.setAttribute("target","__blank"),N.style.paddingLeft="5px",N.style.textDecoration="underline"}function b(){const N=kw(s),L=t("text"),Q=document.getElementById(L)||document.createElement("span"),B=t("learnmore"),O=document.getElementById(B)||document.createElement("a"),U=t("preprendIcon"),z=document.getElementById(U)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(N.created){const Y=N.element;m(Y),E(O,B);const ne=v();p(z,U),Y.append(z,Q,O,ne),document.body.appendChild(Y)}l?(Q.innerText="Preview backend disconnected.",z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,Q.innerText="Preview backend running in this workspace."),Q.setAttribute("id",L)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}function Bt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Aw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Bt())}function Pw(){const r=Iu()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Rw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function jw(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function Dw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Vw(){const r=Bt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function Ow(){return!Pw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Mw(){try{return typeof indexedDB=="object"}catch{return!1}}function Lw(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}const Fw="FirebaseError";class fr extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=Fw,Object.setPrototypeOf(this,fr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fl.prototype.create)}}class fl{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?Uw(l,s):"Error",m=`${this.serviceName}: ${h} (${o}).`;return new fr(o,m,s)}}function Uw(r,e){return r.replace(Bw,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const Bw=/\{\$([^}]+)}/g;function zw(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function ks(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=r[o],h=e[o];if(Cg(l)&&Cg(h)){if(!ks(l,h))return!1}else if(l!==h)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function Cg(r){return r!==null&&typeof r=="object"}function ml(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function $w(r,e){const t=new Hw(r,e);return t.subscribe.bind(t)}class Hw{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");qw(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=Eh),o.error===void 0&&(o.error=Eh),o.complete===void 0&&(o.complete=Eh);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function qw(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Eh(){}function zt(r){return r&&r._delegate?r._delegate:r}class As{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const mi="[DEFAULT]";class Ww{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new Sw;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Kw(e))try{this.getOrInitializeService({instanceIdentifier:mi})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=mi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=mi){return this.instances.has(e)}getOptions(e=mi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(l);s===m&&h.resolve(o)}return o}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Gw(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=mi){return this.component?this.component.multipleInstances?e:mi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Gw(r){return r===mi?void 0:r}function Kw(r){return r.instantiationMode==="EAGER"}class Qw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Ww(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var De;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(De||(De={}));const Yw={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},Jw=De.INFO,Xw={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},Zw=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=Xw[e];if(o)console[o](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ff{constructor(e){this.name=e,this._logLevel=Jw,this._logHandler=Zw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Yw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}}const eE=(r,e)=>e.some(t=>r instanceof t);let kg,Ag;function tE(){return kg||(kg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nE(){return Ag||(Ag=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const fv=new WeakMap,Lh=new WeakMap,mv=new WeakMap,bh=new WeakMap,mf=new WeakMap;function rE(r){const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{t(Is(r.result)),o()},h=()=>{s(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&fv.set(t,r)}).catch(()=>{}),mf.set(e,r),e}function sE(r){if(Lh.has(r))return;const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});Lh.set(r,e)}let Fh={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Lh.get(r);if(e==="objectStoreNames")return r.objectStoreNames||mv.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Is(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function iE(r){Fh=r(Fh)}function oE(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(Th(this),e,...t);return mv.set(s,e.sort?e.sort():[e]),Is(s)}:nE().includes(r)?function(...e){return r.apply(Th(this),e),Is(fv.get(this))}:function(...e){return Is(r.apply(Th(this),e))}}function aE(r){return typeof r=="function"?oE(r):(r instanceof IDBTransaction&&sE(r),eE(r,tE())?new Proxy(r,Fh):r)}function Is(r){if(r instanceof IDBRequest)return rE(r);if(bh.has(r))return bh.get(r);const e=aE(r);return e!==r&&(bh.set(r,e),mf.set(e,r)),e}const Th=r=>mf.get(r);function lE(r,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const h=indexedDB.open(r,e),m=Is(h);return s&&h.addEventListener("upgradeneeded",p=>{s(Is(h.result),p.oldVersion,p.newVersion,Is(h.transaction),p)}),t&&h.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),m.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),m}const cE=["get","getKey","getAll","getAllKeys","count"],uE=["put","add","delete","clear"],Ih=new Map;function Pg(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Ih.get(e))return Ih.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=uE.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||cE.includes(t)))return;const l=async function(h,...m){const p=this.transaction(h,o?"readwrite":"readonly");let v=p.store;return s&&(v=v.index(m.shift())),(await Promise.all([v[t](...m),o&&p.done]))[0]};return Ih.set(e,l),l}iE(r=>({...r,get:(e,t,s)=>Pg(e,t)||r.get(e,t,s),has:(e,t)=>!!Pg(e,t)||r.has(e,t)}));class dE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(hE(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function hE(r){return r.getComponent()?.type==="VERSION"}const Uh="@firebase/app",Rg="0.14.7";const Mr=new ff("@firebase/app"),fE="@firebase/app-compat",mE="@firebase/analytics-compat",pE="@firebase/analytics",gE="@firebase/app-check-compat",yE="@firebase/app-check",vE="@firebase/auth",xE="@firebase/auth-compat",_E="@firebase/database",wE="@firebase/data-connect",EE="@firebase/database-compat",bE="@firebase/functions",TE="@firebase/functions-compat",IE="@firebase/installations",NE="@firebase/installations-compat",SE="@firebase/messaging",CE="@firebase/messaging-compat",kE="@firebase/performance",AE="@firebase/performance-compat",PE="@firebase/remote-config",RE="@firebase/remote-config-compat",jE="@firebase/storage",DE="@firebase/storage-compat",VE="@firebase/firestore",OE="@firebase/ai",ME="@firebase/firestore-compat",LE="firebase",FE="12.8.0";const Bh="[DEFAULT]",UE={[Uh]:"fire-core",[fE]:"fire-core-compat",[pE]:"fire-analytics",[mE]:"fire-analytics-compat",[yE]:"fire-app-check",[gE]:"fire-app-check-compat",[vE]:"fire-auth",[xE]:"fire-auth-compat",[_E]:"fire-rtdb",[wE]:"fire-data-connect",[EE]:"fire-rtdb-compat",[bE]:"fire-fn",[TE]:"fire-fn-compat",[IE]:"fire-iid",[NE]:"fire-iid-compat",[SE]:"fire-fcm",[CE]:"fire-fcm-compat",[kE]:"fire-perf",[AE]:"fire-perf-compat",[PE]:"fire-rc",[RE]:"fire-rc-compat",[jE]:"fire-gcs",[DE]:"fire-gcs-compat",[VE]:"fire-fst",[ME]:"fire-fst-compat",[OE]:"fire-vertex","fire-js":"fire-js",[LE]:"fire-js-all"};const iu=new Map,BE=new Map,zh=new Map;function jg(r,e){try{r.container.addComponent(e)}catch(t){Mr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function xi(r){const e=r.name;if(zh.has(e))return Mr.debug(`There were multiple attempts to register component ${e}.`),!1;zh.set(e,r);for(const t of iu.values())jg(t,r);for(const t of BE.values())jg(t,r);return!0}function Nu(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function jn(r){return r==null?!1:r.settings!==void 0}const zE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ns=new fl("app","Firebase",zE);class $E{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new As("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ns.create("app-deleted",{appName:this._name})}}const Ni=FE;function pv(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s={name:Bh,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw Ns.create("bad-app-name",{appName:String(o)});if(t||(t=uv()),!t)throw Ns.create("no-options");const l=iu.get(o);if(l){if(ks(t,l.options)&&ks(s,l.config))return l;throw Ns.create("duplicate-app",{appName:o})}const h=new Qw(o);for(const p of zh.values())h.addComponent(p);const m=new $E(t,s,h);return iu.set(o,m),m}function pf(r=Bh){const e=iu.get(r);if(!e&&r===Bh&&uv())return pv();if(!e)throw Ns.create("no-app",{appName:r});return e}function ir(r,e,t){let s=UE[r]??r;t&&(s+=`-${t}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const h=[`Unable to register library "${s}" with version "${e}":`];o&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Mr.warn(h.join(" "));return}xi(new As(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const HE="firebase-heartbeat-database",qE=1,sl="firebase-heartbeat-store";let Nh=null;function gv(){return Nh||(Nh=lE(HE,qE,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(sl)}catch(t){console.warn(t)}}}}).catch(r=>{throw Ns.create("idb-open",{originalErrorMessage:r.message})})),Nh}async function WE(r){try{const t=(await gv()).transaction(sl),s=await t.objectStore(sl).get(yv(r));return await t.done,s}catch(e){if(e instanceof fr)Mr.warn(e.message);else{const t=Ns.create("idb-get",{originalErrorMessage:e?.message});Mr.warn(t.message)}}}async function Dg(r,e){try{const s=(await gv()).transaction(sl,"readwrite");await s.objectStore(sl).put(e,yv(r)),await s.done}catch(t){if(t instanceof fr)Mr.warn(t.message);else{const s=Ns.create("idb-set",{originalErrorMessage:t?.message});Mr.warn(s.message)}}}function yv(r){return`${r.name}!${r.options.appId}`}const GE=1024,KE=30;class QE{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new JE(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Vg();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:t}),this._heartbeatsCache.heartbeats.length>KE){const o=XE(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Mr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Vg(),{heartbeatsToSend:t,unsentEntries:s}=YE(this._heartbeatsCache.heartbeats),o=su(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Mr.warn(e),""}}}function Vg(){return new Date().toISOString().substring(0,10)}function YE(r,e=GE){const t=[];let s=r.slice();for(const o of r){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),Og(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Og(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class JE{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Mw()?Lw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await WE(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Dg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Dg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Og(r){return su(JSON.stringify({version:2,heartbeats:r})).length}function XE(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}function ZE(r){xi(new As("platform-logger",e=>new dE(e),"PRIVATE")),xi(new As("heartbeat",e=>new QE(e),"PRIVATE")),ir(Uh,Rg,r),ir(Uh,Rg,"esm2020"),ir("fire-js","")}ZE("");var Mg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ss,vv;(function(){var r;function e(C,I){function A(){}A.prototype=I.prototype,C.F=I.prototype,C.prototype=new A,C.prototype.constructor=C,C.D=function(D,P,M){for(var w=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)w[ie-2]=arguments[ie];return I.prototype[P].apply(D,w)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(C,I,A){A||(A=0);const D=Array(16);if(typeof I=="string")for(var P=0;P<16;++P)D[P]=I.charCodeAt(A++)|I.charCodeAt(A++)<<8|I.charCodeAt(A++)<<16|I.charCodeAt(A++)<<24;else for(P=0;P<16;++P)D[P]=I[A++]|I[A++]<<8|I[A++]<<16|I[A++]<<24;I=C.g[0],A=C.g[1],P=C.g[2];let M=C.g[3],w;w=I+(M^A&(P^M))+D[0]+3614090360&4294967295,I=A+(w<<7&4294967295|w>>>25),w=M+(P^I&(A^P))+D[1]+3905402710&4294967295,M=I+(w<<12&4294967295|w>>>20),w=P+(A^M&(I^A))+D[2]+606105819&4294967295,P=M+(w<<17&4294967295|w>>>15),w=A+(I^P&(M^I))+D[3]+3250441966&4294967295,A=P+(w<<22&4294967295|w>>>10),w=I+(M^A&(P^M))+D[4]+4118548399&4294967295,I=A+(w<<7&4294967295|w>>>25),w=M+(P^I&(A^P))+D[5]+1200080426&4294967295,M=I+(w<<12&4294967295|w>>>20),w=P+(A^M&(I^A))+D[6]+2821735955&4294967295,P=M+(w<<17&4294967295|w>>>15),w=A+(I^P&(M^I))+D[7]+4249261313&4294967295,A=P+(w<<22&4294967295|w>>>10),w=I+(M^A&(P^M))+D[8]+1770035416&4294967295,I=A+(w<<7&4294967295|w>>>25),w=M+(P^I&(A^P))+D[9]+2336552879&4294967295,M=I+(w<<12&4294967295|w>>>20),w=P+(A^M&(I^A))+D[10]+4294925233&4294967295,P=M+(w<<17&4294967295|w>>>15),w=A+(I^P&(M^I))+D[11]+2304563134&4294967295,A=P+(w<<22&4294967295|w>>>10),w=I+(M^A&(P^M))+D[12]+1804603682&4294967295,I=A+(w<<7&4294967295|w>>>25),w=M+(P^I&(A^P))+D[13]+4254626195&4294967295,M=I+(w<<12&4294967295|w>>>20),w=P+(A^M&(I^A))+D[14]+2792965006&4294967295,P=M+(w<<17&4294967295|w>>>15),w=A+(I^P&(M^I))+D[15]+1236535329&4294967295,A=P+(w<<22&4294967295|w>>>10),w=I+(P^M&(A^P))+D[1]+4129170786&4294967295,I=A+(w<<5&4294967295|w>>>27),w=M+(A^P&(I^A))+D[6]+3225465664&4294967295,M=I+(w<<9&4294967295|w>>>23),w=P+(I^A&(M^I))+D[11]+643717713&4294967295,P=M+(w<<14&4294967295|w>>>18),w=A+(M^I&(P^M))+D[0]+3921069994&4294967295,A=P+(w<<20&4294967295|w>>>12),w=I+(P^M&(A^P))+D[5]+3593408605&4294967295,I=A+(w<<5&4294967295|w>>>27),w=M+(A^P&(I^A))+D[10]+38016083&4294967295,M=I+(w<<9&4294967295|w>>>23),w=P+(I^A&(M^I))+D[15]+3634488961&4294967295,P=M+(w<<14&4294967295|w>>>18),w=A+(M^I&(P^M))+D[4]+3889429448&4294967295,A=P+(w<<20&4294967295|w>>>12),w=I+(P^M&(A^P))+D[9]+568446438&4294967295,I=A+(w<<5&4294967295|w>>>27),w=M+(A^P&(I^A))+D[14]+3275163606&4294967295,M=I+(w<<9&4294967295|w>>>23),w=P+(I^A&(M^I))+D[3]+4107603335&4294967295,P=M+(w<<14&4294967295|w>>>18),w=A+(M^I&(P^M))+D[8]+1163531501&4294967295,A=P+(w<<20&4294967295|w>>>12),w=I+(P^M&(A^P))+D[13]+2850285829&4294967295,I=A+(w<<5&4294967295|w>>>27),w=M+(A^P&(I^A))+D[2]+4243563512&4294967295,M=I+(w<<9&4294967295|w>>>23),w=P+(I^A&(M^I))+D[7]+1735328473&4294967295,P=M+(w<<14&4294967295|w>>>18),w=A+(M^I&(P^M))+D[12]+2368359562&4294967295,A=P+(w<<20&4294967295|w>>>12),w=I+(A^P^M)+D[5]+4294588738&4294967295,I=A+(w<<4&4294967295|w>>>28),w=M+(I^A^P)+D[8]+2272392833&4294967295,M=I+(w<<11&4294967295|w>>>21),w=P+(M^I^A)+D[11]+1839030562&4294967295,P=M+(w<<16&4294967295|w>>>16),w=A+(P^M^I)+D[14]+4259657740&4294967295,A=P+(w<<23&4294967295|w>>>9),w=I+(A^P^M)+D[1]+2763975236&4294967295,I=A+(w<<4&4294967295|w>>>28),w=M+(I^A^P)+D[4]+1272893353&4294967295,M=I+(w<<11&4294967295|w>>>21),w=P+(M^I^A)+D[7]+4139469664&4294967295,P=M+(w<<16&4294967295|w>>>16),w=A+(P^M^I)+D[10]+3200236656&4294967295,A=P+(w<<23&4294967295|w>>>9),w=I+(A^P^M)+D[13]+681279174&4294967295,I=A+(w<<4&4294967295|w>>>28),w=M+(I^A^P)+D[0]+3936430074&4294967295,M=I+(w<<11&4294967295|w>>>21),w=P+(M^I^A)+D[3]+3572445317&4294967295,P=M+(w<<16&4294967295|w>>>16),w=A+(P^M^I)+D[6]+76029189&4294967295,A=P+(w<<23&4294967295|w>>>9),w=I+(A^P^M)+D[9]+3654602809&4294967295,I=A+(w<<4&4294967295|w>>>28),w=M+(I^A^P)+D[12]+3873151461&4294967295,M=I+(w<<11&4294967295|w>>>21),w=P+(M^I^A)+D[15]+530742520&4294967295,P=M+(w<<16&4294967295|w>>>16),w=A+(P^M^I)+D[2]+3299628645&4294967295,A=P+(w<<23&4294967295|w>>>9),w=I+(P^(A|~M))+D[0]+4096336452&4294967295,I=A+(w<<6&4294967295|w>>>26),w=M+(A^(I|~P))+D[7]+1126891415&4294967295,M=I+(w<<10&4294967295|w>>>22),w=P+(I^(M|~A))+D[14]+2878612391&4294967295,P=M+(w<<15&4294967295|w>>>17),w=A+(M^(P|~I))+D[5]+4237533241&4294967295,A=P+(w<<21&4294967295|w>>>11),w=I+(P^(A|~M))+D[12]+1700485571&4294967295,I=A+(w<<6&4294967295|w>>>26),w=M+(A^(I|~P))+D[3]+2399980690&4294967295,M=I+(w<<10&4294967295|w>>>22),w=P+(I^(M|~A))+D[10]+4293915773&4294967295,P=M+(w<<15&4294967295|w>>>17),w=A+(M^(P|~I))+D[1]+2240044497&4294967295,A=P+(w<<21&4294967295|w>>>11),w=I+(P^(A|~M))+D[8]+1873313359&4294967295,I=A+(w<<6&4294967295|w>>>26),w=M+(A^(I|~P))+D[15]+4264355552&4294967295,M=I+(w<<10&4294967295|w>>>22),w=P+(I^(M|~A))+D[6]+2734768916&4294967295,P=M+(w<<15&4294967295|w>>>17),w=A+(M^(P|~I))+D[13]+1309151649&4294967295,A=P+(w<<21&4294967295|w>>>11),w=I+(P^(A|~M))+D[4]+4149444226&4294967295,I=A+(w<<6&4294967295|w>>>26),w=M+(A^(I|~P))+D[11]+3174756917&4294967295,M=I+(w<<10&4294967295|w>>>22),w=P+(I^(M|~A))+D[2]+718787259&4294967295,P=M+(w<<15&4294967295|w>>>17),w=A+(M^(P|~I))+D[9]+3951481745&4294967295,C.g[0]=C.g[0]+I&4294967295,C.g[1]=C.g[1]+(P+(w<<21&4294967295|w>>>11))&4294967295,C.g[2]=C.g[2]+P&4294967295,C.g[3]=C.g[3]+M&4294967295}s.prototype.v=function(C,I){I===void 0&&(I=C.length);const A=I-this.blockSize,D=this.C;let P=this.h,M=0;for(;M<I;){if(P==0)for(;M<=A;)o(this,C,M),M+=this.blockSize;if(typeof C=="string"){for(;M<I;)if(D[P++]=C.charCodeAt(M++),P==this.blockSize){o(this,D),P=0;break}}else for(;M<I;)if(D[P++]=C[M++],P==this.blockSize){o(this,D),P=0;break}}this.h=P,this.o+=I},s.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var I=1;I<C.length-8;++I)C[I]=0;I=this.o*8;for(var A=C.length-8;A<C.length;++A)C[A]=I&255,I/=256;for(this.v(C),C=Array(16),I=0,A=0;A<4;++A)for(let D=0;D<32;D+=8)C[I++]=this.g[A]>>>D&255;return C};function l(C,I){var A=m;return Object.prototype.hasOwnProperty.call(A,C)?A[C]:A[C]=I(C)}function h(C,I){this.h=I;const A=[];let D=!0;for(let P=C.length-1;P>=0;P--){const M=C[P]|0;D&&M==I||(A[P]=M,D=!1)}this.g=A}var m={};function p(C){return-128<=C&&C<128?l(C,function(I){return new h([I|0],I<0?-1:0)}):new h([C|0],C<0?-1:0)}function v(C){if(isNaN(C)||!isFinite(C))return b;if(C<0)return O(v(-C));const I=[];let A=1;for(let D=0;C>=A;D++)I[D]=C/A|0,A*=4294967296;return new h(I,0)}function E(C,I){if(C.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(C.charAt(0)=="-")return O(E(C.substring(1),I));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=v(Math.pow(I,8));let D=b;for(let M=0;M<C.length;M+=8){var P=Math.min(8,C.length-M);const w=parseInt(C.substring(M,M+P),I);P<8?(P=v(Math.pow(I,P)),D=D.j(P).add(v(w))):(D=D.j(A),D=D.add(v(w)))}return D}var b=p(0),N=p(1),L=p(16777216);r=h.prototype,r.m=function(){if(B(this))return-O(this).m();let C=0,I=1;for(let A=0;A<this.g.length;A++){const D=this.i(A);C+=(D>=0?D:4294967296+D)*I,I*=4294967296}return C},r.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(Q(this))return"0";if(B(this))return"-"+O(this).toString(C);const I=v(Math.pow(C,6));var A=this;let D="";for(;;){const P=ne(A,I).g;A=U(A,P.j(I));let M=((A.g.length>0?A.g[0]:A.h)>>>0).toString(C);if(A=P,Q(A))return M+D;for(;M.length<6;)M="0"+M;D=M+D}},r.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function Q(C){if(C.h!=0)return!1;for(let I=0;I<C.g.length;I++)if(C.g[I]!=0)return!1;return!0}function B(C){return C.h==-1}r.l=function(C){return C=U(this,C),B(C)?-1:Q(C)?0:1};function O(C){const I=C.g.length,A=[];for(let D=0;D<I;D++)A[D]=~C.g[D];return new h(A,~C.h).add(N)}r.abs=function(){return B(this)?O(this):this},r.add=function(C){const I=Math.max(this.g.length,C.g.length),A=[];let D=0;for(let P=0;P<=I;P++){let M=D+(this.i(P)&65535)+(C.i(P)&65535),w=(M>>>16)+(this.i(P)>>>16)+(C.i(P)>>>16);D=w>>>16,M&=65535,w&=65535,A[P]=w<<16|M}return new h(A,A[A.length-1]&-2147483648?-1:0)};function U(C,I){return C.add(O(I))}r.j=function(C){if(Q(this)||Q(C))return b;if(B(this))return B(C)?O(this).j(O(C)):O(O(this).j(C));if(B(C))return O(this.j(O(C)));if(this.l(L)<0&&C.l(L)<0)return v(this.m()*C.m());const I=this.g.length+C.g.length,A=[];for(var D=0;D<2*I;D++)A[D]=0;for(D=0;D<this.g.length;D++)for(let P=0;P<C.g.length;P++){const M=this.i(D)>>>16,w=this.i(D)&65535,ie=C.i(P)>>>16,Se=C.i(P)&65535;A[2*D+2*P]+=w*Se,z(A,2*D+2*P),A[2*D+2*P+1]+=M*Se,z(A,2*D+2*P+1),A[2*D+2*P+1]+=w*ie,z(A,2*D+2*P+1),A[2*D+2*P+2]+=M*ie,z(A,2*D+2*P+2)}for(C=0;C<I;C++)A[C]=A[2*C+1]<<16|A[2*C];for(C=I;C<2*I;C++)A[C]=0;return new h(A,0)};function z(C,I){for(;(C[I]&65535)!=C[I];)C[I+1]+=C[I]>>>16,C[I]&=65535,I++}function Y(C,I){this.g=C,this.h=I}function ne(C,I){if(Q(I))throw Error("division by zero");if(Q(C))return new Y(b,b);if(B(C))return I=ne(O(C),I),new Y(O(I.g),O(I.h));if(B(I))return I=ne(C,O(I)),new Y(O(I.g),I.h);if(C.g.length>30){if(B(C)||B(I))throw Error("slowDivide_ only works with positive integers.");for(var A=N,D=I;D.l(C)<=0;)A=W(A),D=W(D);var P=ce(A,1),M=ce(D,1);for(D=ce(D,2),A=ce(A,2);!Q(D);){var w=M.add(D);w.l(C)<=0&&(P=P.add(A),M=w),D=ce(D,1),A=ce(A,1)}return I=U(C,P.j(I)),new Y(P,I)}for(P=b;C.l(I)>=0;){for(A=Math.max(1,Math.floor(C.m()/I.m())),D=Math.ceil(Math.log(A)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),M=v(A),w=M.j(I);B(w)||w.l(C)>0;)A-=D,M=v(A),w=M.j(I);Q(M)&&(M=N),P=P.add(M),C=U(C,w)}return new Y(P,C)}r.B=function(C){return ne(this,C).h},r.and=function(C){const I=Math.max(this.g.length,C.g.length),A=[];for(let D=0;D<I;D++)A[D]=this.i(D)&C.i(D);return new h(A,this.h&C.h)},r.or=function(C){const I=Math.max(this.g.length,C.g.length),A=[];for(let D=0;D<I;D++)A[D]=this.i(D)|C.i(D);return new h(A,this.h|C.h)},r.xor=function(C){const I=Math.max(this.g.length,C.g.length),A=[];for(let D=0;D<I;D++)A[D]=this.i(D)^C.i(D);return new h(A,this.h^C.h)};function W(C){const I=C.g.length+1,A=[];for(let D=0;D<I;D++)A[D]=C.i(D)<<1|C.i(D-1)>>>31;return new h(A,C.h)}function ce(C,I){const A=I>>5;I%=32;const D=C.g.length-A,P=[];for(let M=0;M<D;M++)P[M]=I>0?C.i(M+A)>>>I|C.i(M+A+1)<<32-I:C.i(M+A);return new h(P,C.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,vv=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=v,h.fromString=E,Ss=h}).apply(typeof Mg<"u"?Mg:typeof self<"u"?self:typeof window<"u"?window:{});var Uc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var xv,Wa,_v,Kc,$h,wv,Ev,bv;(function(){var r,e=Object.defineProperty;function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Uc=="object"&&Uc];for(var y=0;y<c.length;++y){var x=c[y];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var s=t(this);function o(c,y){if(y)e:{var x=s;c=c.split(".");for(var T=0;T<c.length-1;T++){var H=c[T];if(!(H in x))break e;x=x[H]}c=c[c.length-1],T=x[c],y=y(T),y!=T&&y!=null&&e(x,c,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(c){return c||function(y){var x=[],T;for(T in y)Object.prototype.hasOwnProperty.call(y,T)&&x.push([T,y[T]]);return x}});var l=l||{},h=this||self;function m(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function p(c,y,x){return c.call.apply(c.bind,arguments)}function v(c,y,x){return v=p,v.apply(null,arguments)}function E(c,y){var x=Array.prototype.slice.call(arguments,1);return function(){var T=x.slice();return T.push.apply(T,arguments),c.apply(this,T)}}function b(c,y){function x(){}x.prototype=y.prototype,c.Z=y.prototype,c.prototype=new x,c.prototype.constructor=c,c.Ob=function(T,H,K){for(var ue=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)ue[Ae-2]=arguments[Ae];return y.prototype[H].apply(T,ue)}}var N=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function L(c){const y=c.length;if(y>0){const x=Array(y);for(let T=0;T<y;T++)x[T]=c[T];return x}return[]}function Q(c,y){for(let T=1;T<arguments.length;T++){const H=arguments[T];var x=typeof H;if(x=x!="object"?x:H?Array.isArray(H)?"array":x:"null",x=="array"||x=="object"&&typeof H.length=="number"){x=c.length||0;const K=H.length||0;c.length=x+K;for(let ue=0;ue<K;ue++)c[x+ue]=H[ue]}else c.push(H)}}class B{constructor(y,x){this.i=y,this.j=x,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function O(c){h.setTimeout(()=>{throw c},0)}function U(){var c=C;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class z{constructor(){this.h=this.g=null}add(y,x){const T=Y.get();T.set(y,x),this.h?this.h.next=T:this.g=T,this.h=T}}var Y=new B(()=>new ne,c=>c.reset());class ne{constructor(){this.next=this.g=this.h=null}set(y,x){this.h=y,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let W,ce=!1,C=new z,I=()=>{const c=Promise.resolve(void 0);W=()=>{c.then(A)}};function A(){for(var c;c=U();){try{c.h.call(c.g)}catch(x){O(x)}var y=Y;y.j(c),y.h<100&&(y.h++,c.next=y.g,y.g=c)}ce=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var M=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const x=()=>{};h.addEventListener("test",x,y),h.removeEventListener("test",x,y)}catch{}return c})();function w(c){return/^[\s\xa0]*$/.test(c)}function ie(c,y){P.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,y)}b(ie,P),ie.prototype.init=function(c,y){const x=this.type=c.type,T=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget,y||(x=="mouseover"?y=c.fromElement:x=="mouseout"&&(y=c.toElement)),this.relatedTarget=y,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&ie.Z.h.call(this)},ie.prototype.h=function(){ie.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Se="closure_listenable_"+(Math.random()*1e6|0),Re=0;function Le(c,y,x,T,H){this.listener=c,this.proxy=null,this.src=y,this.type=x,this.capture=!!T,this.ha=H,this.key=++Re,this.da=this.fa=!1}function oe(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function F(c,y,x){for(const T in c)y.call(x,c[T],T,c)}function X(c,y){for(const x in c)y.call(void 0,c[x],x,c)}function R(c){const y={};for(const x in c)y[x]=c[x];return y}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function le(c,y){let x,T;for(let H=1;H<arguments.length;H++){T=arguments[H];for(x in T)c[x]=T[x];for(let K=0;K<S.length;K++)x=S[K],Object.prototype.hasOwnProperty.call(T,x)&&(c[x]=T[x])}}function de(c){this.src=c,this.g={},this.h=0}de.prototype.add=function(c,y,x,T,H){const K=c.toString();c=this.g[K],c||(c=this.g[K]=[],this.h++);const ue=_e(c,y,T,H);return ue>-1?(y=c[ue],x||(y.fa=!1)):(y=new Le(y,this.src,K,!!T,H),y.fa=x,c.push(y)),y};function fe(c,y){const x=y.type;if(x in c.g){var T=c.g[x],H=Array.prototype.indexOf.call(T,y,void 0),K;(K=H>=0)&&Array.prototype.splice.call(T,H,1),K&&(oe(y),c.g[x].length==0&&(delete c.g[x],c.h--))}}function _e(c,y,x,T){for(let H=0;H<c.length;++H){const K=c[H];if(!K.da&&K.listener==y&&K.capture==!!x&&K.ha==T)return H}return-1}var ke="closure_lm_"+(Math.random()*1e6|0),Ue={};function Ge(c,y,x,T,H){if(Array.isArray(y)){for(let K=0;K<y.length;K++)Ge(c,y[K],x,T,H);return null}return x=Yo(x),c&&c[Se]?c.J(y,x,m(T)?!!T.capture:!1,H):$t(c,y,x,!1,T,H)}function $t(c,y,x,T,H,K){if(!y)throw Error("Invalid event type");const ue=m(H)?!!H.capture:!!H;let Ae=Ri(c);if(Ae||(c[ke]=Ae=new de(c)),x=Ae.add(y,x,T,ue,K),x.proxy)return x;if(T=Ai(),x.proxy=T,T.src=c,T.listener=x,c.addEventListener)M||(H=ue),H===void 0&&(H=!1),c.addEventListener(y.toString(),T,H);else if(c.attachEvent)c.attachEvent(Pi(y.toString()),T);else if(c.addListener&&c.removeListener)c.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return x}function Ai(){function c(x){return y.call(c.src,c.listener,x)}const y=Tl;return c}function Qo(c,y,x,T,H){if(Array.isArray(y))for(var K=0;K<y.length;K++)Qo(c,y[K],x,T,H);else T=m(T)?!!T.capture:!!T,x=Yo(x),c&&c[Se]?(c=c.i,K=String(y).toString(),K in c.g&&(y=c.g[K],x=_e(y,x,T,H),x>-1&&(oe(y[x]),Array.prototype.splice.call(y,x,1),y.length==0&&(delete c.g[K],c.h--)))):c&&(c=Ri(c))&&(y=c.g[y.toString()],c=-1,y&&(c=_e(y,x,T,H)),(x=c>-1?y[c]:null)&&zr(x))}function zr(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[Se])fe(y.i,c);else{var x=c.type,T=c.proxy;y.removeEventListener?y.removeEventListener(x,T,c.capture):y.detachEvent?y.detachEvent(Pi(x),T):y.addListener&&y.removeListener&&y.removeListener(T),(x=Ri(y))?(fe(x,c),x.h==0&&(x.src=null,y[ke]=null)):oe(c)}}}function Pi(c){return c in Ue?Ue[c]:Ue[c]="on"+c}function Tl(c,y){if(c.da)c=!0;else{y=new ie(y,this);const x=c.listener,T=c.ha||c.src;c.fa&&zr(c),c=x.call(T,y)}return c}function Ri(c){return c=c[ke],c instanceof de?c:null}var Us="__closure_events_fn_"+(Math.random()*1e9>>>0);function Yo(c){return typeof c=="function"?c:(c[Us]||(c[Us]=function(y){return c.handleEvent(y)}),c[Us])}function ht(){D.call(this),this.i=new de(this),this.M=this,this.G=null}b(ht,D),ht.prototype[Se]=!0,ht.prototype.removeEventListener=function(c,y,x,T){Qo(this,c,y,x,T)};function at(c,y){var x,T=c.G;if(T)for(x=[];T;T=T.G)x.push(T);if(c=c.M,T=y.type||y,typeof y=="string")y=new P(y,c);else if(y instanceof P)y.target=y.target||c;else{var H=y;y=new P(T,c),le(y,H)}H=!0;let K,ue;if(x)for(ue=x.length-1;ue>=0;ue--)K=y.g=x[ue],H=bn(K,T,!0,y)&&H;if(K=y.g=c,H=bn(K,T,!0,y)&&H,H=bn(K,T,!1,y)&&H,x)for(ue=0;ue<x.length;ue++)K=y.g=x[ue],H=bn(K,T,!1,y)&&H}ht.prototype.N=function(){if(ht.Z.N.call(this),this.i){var c=this.i;for(const y in c.g){const x=c.g[y];for(let T=0;T<x.length;T++)oe(x[T]);delete c.g[y],c.h--}}this.G=null},ht.prototype.J=function(c,y,x,T){return this.i.add(String(c),y,!1,x,T)},ht.prototype.K=function(c,y,x,T){return this.i.add(String(c),y,!0,x,T)};function bn(c,y,x,T){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();let H=!0;for(let K=0;K<y.length;++K){const ue=y[K];if(ue&&!ue.da&&ue.capture==x){const Ae=ue.listener,lt=ue.ha||ue.src;ue.fa&&fe(c.i,ue),H=Ae.call(lt,T)!==!1&&H}}return H&&!T.defaultPrevented}function Jo(c,y){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=v(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:h.setTimeout(c,y||0)}function Xo(c){c.g=Jo(()=>{c.g=null,c.i&&(c.i=!1,Xo(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class Il extends D{constructor(y,x){super(),this.m=y,this.l=x,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Xo(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $r(c){D.call(this),this.h=c,this.g={}}b($r,D);var Zo=[];function ji(c){F(c.g,function(y,x){this.g.hasOwnProperty(x)&&zr(y)},c),c.g={}}$r.prototype.N=function(){$r.Z.N.call(this),ji(this)},$r.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Hr=h.JSON.stringify,Nl=h.JSON.parse,Bs=class{stringify(c){return h.JSON.stringify(c,void 0)}parse(c){return h.JSON.parse(c,void 0)}};function qr(){}function Sl(){}var Wr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Di(){P.call(this,"d")}b(Di,P);function ea(){P.call(this,"c")}b(ea,P);var Tn={},Vi=null;function Gr(){return Vi=Vi||new ht}Tn.Ia="serverreachability";function Oi(c){P.call(this,Tn.Ia,c)}b(Oi,P);function pr(c){const y=Gr();at(y,new Oi(y))}Tn.STAT_EVENT="statevent";function gr(c,y){P.call(this,Tn.STAT_EVENT,c),this.stat=y}b(gr,P);function it(c){const y=Gr();at(y,new gr(y,c))}Tn.Ja="timingevent";function ta(c,y){P.call(this,Tn.Ja,c),this.size=y}b(ta,P);function Kr(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){c()},y)}function Qr(){this.g=!0}Qr.prototype.ua=function(){this.g=!1};function Cl(c,y,x,T,H,K){c.info(function(){if(c.g)if(K){var ue="",Ae=K.split("&");for(let We=0;We<Ae.length;We++){var lt=Ae[We].split("=");if(lt.length>1){const ft=lt[0];lt=lt[1];const an=ft.split("_");ue=an.length>=2&&an[1]=="type"?ue+(ft+"="+lt+"&"):ue+(ft+"=redacted&")}}}else ue=null;else ue=K;return"XMLHTTP REQ ("+T+") [attempt "+H+"]: "+y+`
`+x+`
`+ue})}function kl(c,y,x,T,H,K,ue){c.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+H+"]: "+y+`
`+x+`
`+K+" "+ue})}function Fn(c,y,x,T){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+zs(c,x)+(T?" "+T:"")})}function Al(c,y){c.info(function(){return"TIMEOUT: "+y})}Qr.prototype.info=function(){};function zs(c,y){if(!c.g)return y;if(!y)return null;try{const K=JSON.parse(y);if(K){for(c=0;c<K.length;c++)if(Array.isArray(K[c])){var x=K[c];if(!(x.length<2)){var T=x[1];if(Array.isArray(T)&&!(T.length<1)){var H=T[0];if(H!="noop"&&H!="stop"&&H!="close")for(let ue=1;ue<T.length;ue++)T[ue]=""}}}}return Hr(K)}catch{return y}}var Yr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Jr={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Pl;function yr(){}b(yr,qr),yr.prototype.g=function(){return new XMLHttpRequest},Pl=new yr;function Un(c){return encodeURIComponent(String(c))}function Mi(c){var y=1;c=c.split(":");const x=[];for(;y>0&&c.length;)x.push(c.shift()),y--;return c.length&&x.push(c.join(":")),x}function fn(c,y,x,T){this.j=c,this.i=y,this.l=x,this.S=T||1,this.V=new $r(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Rl}function Rl(){this.i=null,this.g="",this.h=!1}var jl={},na={};function In(c,y,x){c.M=1,c.A=xr(mn(y)),c.u=x,c.R=!0,ra(c,null)}function ra(c,y){c.F=Date.now(),$s(c),c.B=mn(c.A);var x=c.B,T=c.S;Array.isArray(T)||(T=[String(T)]),fa(x.i,"t",T),c.C=0,x=c.j.L,c.h=new Rl,c.g=$l(c.j,x?y:null,!c.u),c.P>0&&(c.O=new Il(v(c.Y,c,c.g),c.P)),y=c.V,x=c.g,T=c.ba;var H="readystatechange";Array.isArray(H)||(H&&(Zo[0]=H.toString()),H=Zo);for(let K=0;K<H.length;K++){const ue=Ge(x,H[K],T||y.handleEvent,!1,y.h||y);if(!ue)break;y.g[ue.key]=ue}y=c.J?R(c.J):{},c.u?(c.v||(c.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,y)):(c.v="GET",c.g.ea(c.B,c.v,null,y)),pr(),Cl(c.i,c.v,c.B,c.l,c.S,c.u)}fn.prototype.ba=function(c){c=c.target;const y=this.O;y&&Gn(c)==3?y.j():this.Y(c)},fn.prototype.Y=function(c){try{if(c==this.g)e:{const Ae=Gn(this.g),lt=this.g.ya(),We=this.g.ca();if(!(Ae<3)&&(Ae!=3||this.g&&(this.h.h||this.g.la()||Bl(this.g)))){this.K||Ae!=4||lt==7||(lt==8||We<=0?pr(3):pr(2)),Li(this);var y=this.g.ca();this.X=y;var x=Dl(this);if(this.o=y==200,kl(this.i,this.v,this.B,this.l,this.S,Ae,y),this.o){if(this.U&&!this.L){t:{if(this.g){var T,H=this.g;if((T=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(T)){var K=T;break t}}K=null}if(c=K)Fn(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Je(this,c);else{this.o=!1,this.m=3,it(12),vr(this),Hs(this);break e}}if(this.R){c=!0;let ft;for(;!this.K&&this.C<x.length;)if(ft=Ol(this,x),ft==na){Ae==4&&(this.m=4,it(14),c=!1),Fn(this.i,this.l,null,"[Incomplete Response]");break}else if(ft==jl){this.m=4,it(15),Fn(this.i,this.l,x,"[Invalid Chunk]"),c=!1;break}else Fn(this.i,this.l,ft,null),Je(this,ft);if(Vl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ae!=4||x.length!=0||this.h.h||(this.m=1,it(16),c=!1),this.o=this.o&&c,!c)Fn(this.i,this.l,x,"[Invalid Chunked Response]"),vr(this),Hs(this);else if(x.length>0&&!this.W){this.W=!0;var ue=this.j;ue.g==this&&ue.aa&&!ue.P&&(ue.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),Zs(ue),ue.P=!0,it(11))}}else Fn(this.i,this.l,x,null),Je(this,x);Ae==4&&vr(this),this.o&&!this.K&&(Ae==4?Ki(this.j,this):(this.o=!1,$s(this)))}else pa(this.g),y==400&&x.indexOf("Unknown SID")>0?(this.m=3,it(12)):(this.m=0,it(13)),vr(this),Hs(this)}}}catch{}};function Dl(c){if(!Vl(c))return c.g.la();const y=Bl(c.g);if(y==="")return"";let x="";const T=y.length,H=Gn(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return vr(c),Hs(c),"";c.h.i=new h.TextDecoder}for(let K=0;K<T;K++)c.h.h=!0,x+=c.h.i.decode(y[K],{stream:!(H&&K==T-1)});return y.length=0,c.h.g+=x,c.C=0,c.h.g}function Vl(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function Ol(c,y){var x=c.C,T=y.indexOf(`
`,x);return T==-1?na:(x=Number(y.substring(x,T)),isNaN(x)?jl:(T+=1,T+x>y.length?na:(y=y.slice(T,T+x),c.C=T+x,y)))}fn.prototype.cancel=function(){this.K=!0,vr(this)};function $s(c){c.T=Date.now()+c.H,sa(c,c.H)}function sa(c,y){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Kr(v(c.aa,c),y)}function Li(c){c.D&&(h.clearTimeout(c.D),c.D=null)}fn.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(Al(this.i,this.B),this.M!=2&&(pr(),it(17)),vr(this),this.m=2,Hs(this)):sa(this,this.T-c)};function Hs(c){c.j.I==0||c.K||Ki(c.j,c)}function vr(c){Li(c);var y=c.O;y&&typeof y.dispose=="function"&&y.dispose(),c.O=null,ji(c.V),c.g&&(y=c.g,c.g=null,y.abort(),y.dispose())}function Je(c,y){try{var x=c.j;if(x.I!=0&&(x.g==c||oa(x.h,c))){if(!c.L&&oa(x.h,c)&&x.I==3){try{var T=x.Ba.g.parse(y)}catch{T=null}if(Array.isArray(T)&&T.length==3){var H=T;if(H[0]==0){e:if(!x.v){if(x.g)if(x.g.F+3e3<c.F)Gi(x),sn(x);else break e;Yn(x),it(18)}}else x.xa=H[1],0<x.xa-x.K&&H[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=Kr(v(x.Va,x),6e3));qs(x.h)<=1&&x.ta&&(x.ta=void 0)}else on(x,11)}else if((c.L||x.g==c)&&Gi(x),!w(y))for(H=x.Ba.g.parse(y),y=0;y<H.length;y++){let We=H[y];const ft=We[0];if(!(ft<=x.K))if(x.K=ft,We=We[1],x.I==2)if(We[0]=="c"){x.M=We[1],x.ba=We[2];const an=We[3];an!=null&&(x.ka=an,x.j.info("VER="+x.ka));const Tr=We[4];Tr!=null&&(x.za=Tr,x.j.info("SVER="+x.za));const Jn=We[5];Jn!=null&&typeof Jn=="number"&&Jn>0&&(T=1.5*Jn,x.O=T,x.j.info("backChannelRequestTimeoutMs_="+T)),T=x;const Xn=c.g;if(Xn){const Ji=Xn.g?Xn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ji){var K=T.h;K.g||Ji.indexOf("spdy")==-1&&Ji.indexOf("quic")==-1&&Ji.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(Ui(K,K.h),K.h=null))}if(T.G){const va=Xn.g?Xn.g.getResponseHeader("X-HTTP-Session-Id"):null;va&&(T.wa=va,$e(T.J,T.G,va))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-c.F,x.j.info("Handshake RTT: "+x.T+"ms")),T=x;var ue=c;if(T.na=ya(T,T.L?T.ba:null,T.W),ue.L){Ws(T.h,ue);var Ae=ue,lt=T.O;lt&&(Ae.H=lt),Ae.D&&(Li(Ae),$s(Ae)),T.g=ue}else Rt(T);x.i.length>0&&br(x)}else We[0]!="stop"&&We[0]!="close"||on(x,7);else x.I==3&&(We[0]=="stop"||We[0]=="close"?We[0]=="stop"?on(x,7):qi(x):We[0]!="noop"&&x.l&&x.l.qa(We),x.A=0)}}pr(4)}catch{}}var Gu=class{constructor(c,y){this.g=c,this.map=y}};function Fi(c){this.l=c||10,h.PerformanceNavigationTiming?(c=h.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ia(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function qs(c){return c.h?1:c.g?c.g.size:0}function oa(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function Ui(c,y){c.g?c.g.add(y):c.h=y}function Ws(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}Fi.prototype.cancel=function(){if(this.i=tn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function tn(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const x of c.g.values())y=y.concat(x.G);return y}return L(c.i)}var Ml=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function nn(c,y){if(c){c=c.split("&");for(let x=0;x<c.length;x++){const T=c[x].indexOf("=");let H,K=null;T>=0?(H=c[x].substring(0,T),K=c[x].substring(T+1)):H=c[x],y(H,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function Bn(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;c instanceof Bn?(this.l=c.l,Gs(this,c.j),this.o=c.o,this.g=c.g,zn(this,c.u),this.h=c.h,Xr(this,ma(c.i)),this.m=c.m):c&&(y=String(c).match(Ml))?(this.l=!1,Gs(this,y[1]||"",!0),this.o=Ks(y[2]||""),this.g=Ks(y[3]||"",!0),zn(this,y[4]),this.h=Ks(y[5]||"",!0),Xr(this,y[6]||"",!0),this.m=Ks(y[7]||"")):(this.l=!1,this.i=new Me(null,this.l))}Bn.prototype.toString=function(){const c=[];var y=this.j;y&&c.push(Qs(y,la,!0),":");var x=this.g;return(x||y=="file")&&(c.push("//"),(y=this.o)&&c.push(Qs(y,la,!0),"@"),c.push(Un(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&c.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&c.push("/"),c.push(Qs(x,x.charAt(0)=="/"?Ys:ca,!0))),(x=this.i.toString())&&c.push("?",x),(x=this.m)&&c.push("#",Qs(x,ua)),c.join("")},Bn.prototype.resolve=function(c){const y=mn(this);let x=!!c.j;x?Gs(y,c.j):x=!!c.o,x?y.o=c.o:x=!!c.g,x?y.g=c.g:x=c.u!=null;var T=c.h;if(x)zn(y,c.u);else if(x=!!c.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var H=y.h.lastIndexOf("/");H!=-1&&(T=y.h.slice(0,H+1)+T)}if(H=T,H==".."||H==".")T="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){T=H.lastIndexOf("/",0)==0,H=H.split("/");const K=[];for(let ue=0;ue<H.length;){const Ae=H[ue++];Ae=="."?T&&ue==H.length&&K.push(""):Ae==".."?((K.length>1||K.length==1&&K[0]!="")&&K.pop(),T&&ue==H.length&&K.push("")):(K.push(Ae),T=!0)}T=K.join("/")}else T=H}return x?y.h=T:x=c.i.toString()!=="",x?Xr(y,ma(c.i)):x=!!c.m,x&&(y.m=c.m),y};function mn(c){return new Bn(c)}function Gs(c,y,x){c.j=x?Ks(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function zn(c,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);c.u=y}else c.u=null}function Xr(c,y,x){y instanceof Me?(c.i=y,zi(c.i,c.l)):(x||(y=Qs(y,Ku)),c.i=new Me(y,c.l))}function $e(c,y,x){c.i.set(y,x)}function xr(c){return $e(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function Ks(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Qs(c,y,x){return typeof c=="string"?(c=encodeURI(c).replace(y,aa),x&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function aa(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var la=/[#\/\?@]/g,ca=/[#\?:]/g,Ys=/[#\?]/g,Ku=/[#\?@]/g,ua=/#/g;function Me(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function $n(c){c.g||(c.g=new Map,c.h=0,c.i&&nn(c.i,function(y,x){c.add(decodeURIComponent(y.replace(/\+/g," ")),x)}))}r=Me.prototype,r.add=function(c,y){$n(this),this.i=null,c=Hn(this,c);let x=this.g.get(c);return x||this.g.set(c,x=[]),x.push(y),this.h+=1,this};function da(c,y){$n(c),y=Hn(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function Bi(c,y){return $n(c),y=Hn(c,y),c.g.has(y)}r.forEach=function(c,y){$n(this),this.g.forEach(function(x,T){x.forEach(function(H){c.call(y,H,T,this)},this)},this)};function ha(c,y){$n(c);let x=[];if(typeof y=="string")Bi(c,y)&&(x=x.concat(c.g.get(Hn(c,y))));else for(c=Array.from(c.g.values()),y=0;y<c.length;y++)x=x.concat(c[y]);return x}r.set=function(c,y){return $n(this),this.i=null,c=Hn(this,c),Bi(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},r.get=function(c,y){return c?(c=ha(this,c),c.length>0?String(c[0]):y):y};function fa(c,y,x){da(c,y),x.length>0&&(c.i=null,c.g.set(Hn(c,y),L(x)),c.h+=x.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(let T=0;T<y.length;T++){var x=y[T];const H=Un(x);x=ha(this,x);for(let K=0;K<x.length;K++){let ue=H;x[K]!==""&&(ue+="="+Un(x[K])),c.push(ue)}}return this.i=c.join("&")};function ma(c){const y=new Me;return y.i=c.i,c.g&&(y.g=new Map(c.g),y.h=c.h),y}function Hn(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function zi(c,y){y&&!c.j&&($n(c),c.i=null,c.g.forEach(function(x,T){const H=T.toLowerCase();T!=H&&(da(this,T),fa(this,H,x))},c)),c.j=y}function qn(c,y){const x=new Qr;if(h.Image){const T=new Image;T.onload=E(It,x,"TestLoadImage: loaded",!0,y,T),T.onerror=E(It,x,"TestLoadImage: error",!1,y,T),T.onabort=E(It,x,"TestLoadImage: abort",!1,y,T),T.ontimeout=E(It,x,"TestLoadImage: timeout",!1,y,T),h.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=c}else y(!1)}function Wn(c,y){const x=new Qr,T=new AbortController,H=setTimeout(()=>{T.abort(),It(x,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:T.signal}).then(K=>{clearTimeout(H),K.ok?It(x,"TestPingServer: ok",!0,y):It(x,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(H),It(x,"TestPingServer: error",!1,y)})}function It(c,y,x,T,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),T(x)}catch{}}function Js(){this.g=new Bs}function _r(c){this.i=c.Sb||null,this.h=c.ab||!1}b(_r,qr),_r.prototype.g=function(){return new rn(this.i,this.h)};function rn(c,y){ht.call(this),this.H=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}b(rn,ht),r=rn.prototype,r.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=y,this.readyState=1,Nn(this)},r.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(y.body=c),(this.H||h).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Zr(this)),this.readyState=0},r.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Nn(this)),this.g&&(this.readyState=3,Nn(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ll(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ll(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}r.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?Zr(this):Nn(this),this.readyState==3&&Ll(this)}},r.Oa=function(c){this.g&&(this.response=this.responseText=c,Zr(this))},r.Na=function(c){this.g&&(this.response=c,Zr(this))},r.ga=function(){this.g&&Zr(this)};function Zr(c){c.readyState=4,c.l=null,c.j=null,c.B=null,Nn(c)}r.setRequestHeader=function(c,y){this.A.append(c,y)},r.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var x=y.next();!x.done;)x=x.value,c.push(x[0]+": "+x[1]),x=y.next();return c.join(`\r
`)};function Nn(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(rn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Fl(c){let y="";return F(c,function(x,T){y+=T,y+=":",y+=x,y+=`\r
`}),y}function $i(c,y,x){e:{for(T in x){var T=!1;break e}T=!0}T||(x=Fl(x),typeof c=="string"?x!=null&&Un(x):$e(c,y,x))}function Ke(c){ht.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}b(Ke,ht);var Ul=/^https?$/i,Qu=["POST","PUT"];r=Ke.prototype,r.Fa=function(c){this.H=c},r.ea=function(c,y,x,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Pl.g(),this.g.onreadystatechange=N(v(this.Ca,this));try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch(K){es(this,K);return}if(c=x||"",x=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var H in T)x.set(H,T[H]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const K of T.keys())x.set(K,T.get(K));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(x.keys()).find(K=>K.toLowerCase()=="content-type"),H=h.FormData&&c instanceof h.FormData,!(Array.prototype.indexOf.call(Qu,y,void 0)>=0)||T||H||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,ue]of x)this.g.setRequestHeader(K,ue);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(K){es(this,K)}};function es(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.o=5,ts(c),Er(c)}function ts(c){c.A||(c.A=!0,at(c,"complete"),at(c,"error"))}r.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,at(this,"complete"),at(this,"abort"),Er(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Er(this,!0)),Ke.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?wr(this):this.Xa())},r.Xa=function(){wr(this)};function wr(c){if(c.h&&typeof l<"u"){if(c.v&&Gn(c)==4)setTimeout(c.Ca.bind(c),0);else if(at(c,"readystatechange"),Gn(c)==4){c.h=!1;try{const K=c.ca();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var x;if(!(x=y)){var T;if(T=K===0){let ue=String(c.D).match(Ml)[1]||null;!ue&&h.self&&h.self.location&&(ue=h.self.location.protocol.slice(0,-1)),T=!Ul.test(ue?ue.toLowerCase():"")}x=T}if(x)at(c,"complete"),at(c,"success");else{c.o=6;try{var H=Gn(c)>2?c.g.statusText:""}catch{H=""}c.l=H+" ["+c.ca()+"]",ts(c)}}finally{Er(c)}}}}function Er(c,y){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const x=c.g;c.g=null,y||at(c,"ready");try{x.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Gn(c){return c.g?c.g.readyState:0}r.ca=function(){try{return Gn(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),Nl(y)}};function Bl(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function pa(c){const y={};c=(c.g&&Gn(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<c.length;T++){if(w(c[T]))continue;var x=Mi(c[T]);const H=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const K=y[H]||[];y[H]=K,K.push(x)}X(y,function(T){return T.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Kn(c,y,x){return x&&x.internalChannelParams&&x.internalChannelParams[c]||y}function Hi(c){this.za=0,this.i=[],this.j=new Qr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Kn("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Kn("baseRetryDelayMs",5e3,c),this.Za=Kn("retryDelaySeedMs",1e4,c),this.Ta=Kn("forwardChannelMaxRetries",2,c),this.va=Kn("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new Fi(c&&c.concurrentRequestLimit),this.Ba=new Js,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Hi.prototype,r.ka=8,r.I=1,r.connect=function(c,y,x,T){it(0),this.W=c,this.H=y||{},x&&T!==void 0&&(this.H.OSID=x,this.H.OAID=T),this.F=this.X,this.J=ya(this,null,this.W),br(this)};function qi(c){if(Wi(c),c.I==3){var y=c.V++,x=mn(c.J);if($e(x,"SID",c.M),$e(x,"RID",y),$e(x,"TYPE","terminate"),Qn(c,x),y=new fn(c,c.j,y),y.M=2,y.A=xr(mn(x)),x=!1,h.navigator&&h.navigator.sendBeacon)try{x=h.navigator.sendBeacon(y.A.toString(),"")}catch{}!x&&h.Image&&(new Image().src=y.A,x=!0),x||(y.g=$l(y.j,null),y.g.ea(y.A)),y.F=Date.now(),$s(y)}ei(c)}function sn(c){c.g&&(Zs(c),c.g.cancel(),c.g=null)}function Wi(c){sn(c),c.v&&(h.clearTimeout(c.v),c.v=null),Gi(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&h.clearTimeout(c.m),c.m=null)}function br(c){if(!ia(c.h)&&!c.m){c.m=!0;var y=c.Ea;W||I(),ce||(W(),ce=!0),C.add(y,c),c.D=0}}function zl(c,y){return qs(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=y.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Kr(v(c.Ea,c,y),Qi(c,c.D)),c.D++,!0)}r.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const H=new fn(this,this.j,c);let K=this.o;if(this.U&&(K?(K=R(K),le(K,this.U)):K=this.U),this.u!==null||this.R||(H.J=K,K=null),this.S)e:{for(var y=0,x=0;x<this.i.length;x++){t:{var T=this.i[x];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(y+=T,y>4096){y=x;break e}if(y===4096||x===this.i.length-1){y=x+1;break e}}y=1e3}else y=1e3;y=ga(this,H,y),x=mn(this.J),$e(x,"RID",c),$e(x,"CVER",22),this.G&&$e(x,"X-HTTP-Session-Id",this.G),Qn(this,x),K&&(this.R?y="headers="+Un(Fl(K))+"&"+y:this.u&&$i(x,this.u,K)),Ui(this.h,H),this.Ra&&$e(x,"TYPE","init"),this.S?($e(x,"$req",y),$e(x,"SID","null"),H.U=!0,In(H,x,null)):In(H,x,y),this.I=2}}else this.I==3&&(c?Xs(this,c):this.i.length==0||ia(this.h)||Xs(this))};function Xs(c,y){var x;y?x=y.l:x=c.V++;const T=mn(c.J);$e(T,"SID",c.M),$e(T,"RID",x),$e(T,"AID",c.K),Qn(c,T),c.u&&c.o&&$i(T,c.u,c.o),x=new fn(c,c.j,x,c.D+1),c.u===null&&(x.J=c.o),y&&(c.i=y.G.concat(c.i)),y=ga(c,x,1e3),x.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Ui(c.h,x),In(x,T,y)}function Qn(c,y){c.H&&F(c.H,function(x,T){$e(y,T,x)}),c.l&&F({},function(x,T){$e(y,T,x)})}function ga(c,y,x){x=Math.min(c.i.length,x);const T=c.l?v(c.l.Ka,c.l,c):null;e:{var H=c.i;let Ae=-1;for(;;){const lt=["count="+x];Ae==-1?x>0?(Ae=H[0].g,lt.push("ofs="+Ae)):Ae=0:lt.push("ofs="+Ae);let We=!0;for(let ft=0;ft<x;ft++){var K=H[ft].g;const an=H[ft].map;if(K-=Ae,K<0)Ae=Math.max(0,H[ft].g-100),We=!1;else try{K="req"+K+"_"||"";try{var ue=an instanceof Map?an:Object.entries(an);for(const[Tr,Jn]of ue){let Xn=Jn;m(Jn)&&(Xn=Hr(Jn)),lt.push(K+Tr+"="+encodeURIComponent(Xn))}}catch(Tr){throw lt.push(K+"type="+encodeURIComponent("_badmap")),Tr}}catch{T&&T(an)}}if(We){ue=lt.join("&");break e}}ue=void 0}return c=c.i.splice(0,x),y.G=c,ue}function Rt(c){if(!c.g&&!c.v){c.Y=1;var y=c.Da;W||I(),ce||(W(),ce=!0),C.add(y,c),c.A=0}}function Yn(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Kr(v(c.Da,c),Qi(c,c.A)),c.A++,!0)}r.Da=function(){if(this.v=null,ns(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Kr(v(this.Wa,this),c)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,it(10),sn(this),ns(this))};function Zs(c){c.B!=null&&(h.clearTimeout(c.B),c.B=null)}function ns(c){c.g=new fn(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var y=mn(c.na);$e(y,"RID","rpc"),$e(y,"SID",c.M),$e(y,"AID",c.K),$e(y,"CI",c.F?"0":"1"),!c.F&&c.ia&&$e(y,"TO",c.ia),$e(y,"TYPE","xmlhttp"),Qn(c,y),c.u&&c.o&&$i(y,c.u,c.o),c.O&&(c.g.H=c.O);var x=c.g;c=c.ba,x.M=1,x.A=xr(mn(y)),x.u=null,x.R=!0,ra(x,c)}r.Va=function(){this.C!=null&&(this.C=null,sn(this),Yn(this),it(19))};function Gi(c){c.C!=null&&(h.clearTimeout(c.C),c.C=null)}function Ki(c,y){var x=null;if(c.g==y){Gi(c),Zs(c),c.g=null;var T=2}else if(oa(c.h,y))x=y.G,Ws(c.h,y),T=1;else return;if(c.I!=0){if(y.o)if(T==1){x=y.u?y.u.length:0,y=Date.now()-y.F;var H=c.D;T=Gr(),at(T,new ta(T,x)),br(c)}else Rt(c);else if(H=y.m,H==3||H==0&&y.X>0||!(T==1&&zl(c,y)||T==2&&Yn(c)))switch(x&&x.length>0&&(y=c.h,y.i=y.i.concat(x)),H){case 1:on(c,5);break;case 4:on(c,10);break;case 3:on(c,6);break;default:on(c,2)}}}function Qi(c,y){let x=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(x*=2),x*y}function on(c,y){if(c.j.info("Error code "+y),y==2){var x=v(c.bb,c),T=c.Ua;const H=!T;T=new Bn(T||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Gs(T,"https"),xr(T),H?qn(T.toString(),x):Wn(T.toString(),x)}else it(2);c.I=0,c.l&&c.l.pa(y),ei(c),Wi(c)}r.bb=function(c){c?(this.j.info("Successfully pinged google.com"),it(2)):(this.j.info("Failed to ping google.com"),it(1))};function ei(c){if(c.I=0,c.ja=[],c.l){const y=tn(c.h);(y.length!=0||c.i.length!=0)&&(Q(c.ja,y),Q(c.ja,c.i),c.h.i.length=0,L(c.i),c.i.length=0),c.l.oa()}}function ya(c,y,x){var T=x instanceof Bn?mn(x):new Bn(x);if(T.g!="")y&&(T.g=y+"."+T.g),zn(T,T.u);else{var H=h.location;T=H.protocol,y=y?y+"."+H.hostname:H.hostname,H=+H.port;const K=new Bn(null);T&&Gs(K,T),y&&(K.g=y),H&&zn(K,H),x&&(K.h=x),T=K}return x=c.G,y=c.wa,x&&y&&$e(T,x,y),$e(T,"VER",c.ka),Qn(c,T),T}function $l(c,y,x){if(y&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Aa&&!c.ma?new Ke(new _r({ab:x})):new Ke(c.ma),y.Fa(c.L),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Hl(){}r=Hl.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Yi(){}Yi.prototype.g=function(c,y){return new Nt(c,y)};function Nt(c,y){ht.call(this),this.g=new Hi(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(c?c["X-WebChannel-Client-Profile"]=y.sa:c={"X-WebChannel-Client-Profile":y.sa}),this.g.U=c,(c=y&&y.Qb)&&!w(c)&&(this.g.u=c),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!w(y)&&(this.g.G=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new rs(this)}b(Nt,ht),Nt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Nt.prototype.close=function(){qi(this.g)},Nt.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var x={};x.__data__=c,c=x}else this.v&&(x={},x.__data__=Hr(c),c=x);y.i.push(new Gu(y.Ya++,c)),y.I==3&&br(y)},Nt.prototype.N=function(){this.g.l=null,delete this.j,qi(this.g),delete this.g,Nt.Z.N.call(this)};function ql(c){Di.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const x in y){c=x;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}b(ql,Di);function Wl(){ea.call(this),this.status=1}b(Wl,ea);function rs(c){this.g=c}b(rs,Hl),rs.prototype.ra=function(){at(this.g,"a")},rs.prototype.qa=function(c){at(this.g,new ql(c))},rs.prototype.pa=function(c){at(this.g,new Wl)},rs.prototype.oa=function(){at(this.g,"b")},Yi.prototype.createWebChannel=Yi.prototype.g,Nt.prototype.send=Nt.prototype.o,Nt.prototype.open=Nt.prototype.m,Nt.prototype.close=Nt.prototype.close,bv=function(){return new Yi},Ev=function(){return Gr()},wv=Tn,$h={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Yr.NO_ERROR=0,Yr.TIMEOUT=8,Yr.HTTP_ERROR=6,Kc=Yr,Jr.COMPLETE="complete",_v=Jr,Sl.EventType=Wr,Wr.OPEN="a",Wr.CLOSE="b",Wr.ERROR="c",Wr.MESSAGE="d",ht.prototype.listen=ht.prototype.J,Wa=Sl,Ke.prototype.listenOnce=Ke.prototype.K,Ke.prototype.getLastError=Ke.prototype.Ha,Ke.prototype.getLastErrorCode=Ke.prototype.ya,Ke.prototype.getStatus=Ke.prototype.ca,Ke.prototype.getResponseJson=Ke.prototype.La,Ke.prototype.getResponseText=Ke.prototype.la,Ke.prototype.send=Ke.prototype.ea,Ke.prototype.setWithCredentials=Ke.prototype.Fa,xv=Ke}).apply(typeof Uc<"u"?Uc:typeof self<"u"?self:typeof window<"u"?window:{});class Ft{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ft.UNAUTHENTICATED=new Ft(null),Ft.GOOGLE_CREDENTIALS=new Ft("google-credentials-uid"),Ft.FIRST_PARTY=new Ft("first-party-uid"),Ft.MOCK_USER=new Ft("mock-user");let zo="12.8.0";function eb(r){zo=r}const _i=new ff("@firebase/firestore");function Eo(){return _i.logLevel}function pe(r,...e){if(_i.logLevel<=De.DEBUG){const t=e.map(gf);_i.debug(`Firestore (${zo}): ${r}`,...t)}}function Lr(r,...e){if(_i.logLevel<=De.ERROR){const t=e.map(gf);_i.error(`Firestore (${zo}): ${r}`,...t)}}function Do(r,...e){if(_i.logLevel<=De.WARN){const t=e.map(gf);_i.warn(`Firestore (${zo}): ${r}`,...t)}}function gf(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}function Te(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,Tv(r,s,t)}function Tv(r,e,t){let s=`FIRESTORE (${zo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Lr(s),new Error(s)}function qe(r,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,r||Tv(e,o,s)}function Pe(r,e){return r}const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends fr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Or{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Iv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class tb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ft.UNAUTHENTICATED)))}shutdown(){}}class nb{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class rb{constructor(e){this.t=e,this.currentUser=Ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){qe(this.o===void 0,42304);let s=this.i;const o=p=>this.i!==s?(s=this.i,t(p)):Promise.resolve();let l=new Or;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Or,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},m=p=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((p=>m(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Or)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(qe(typeof s.accessToken=="string",31837,{l:s}),new Iv(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return qe(e===null||typeof e=="string",2055,{h:e}),new Ft(e)}}class sb{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Ft.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class ib{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new sb(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Ft.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Lg{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ob{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,jn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){qe(this.o===void 0,3512);const s=l=>{l.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,pe("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const o=l=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Lg(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(qe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Lg(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function ab(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}class yf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=ab(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%62))}return s}}function Ve(r,e){return r<e?-1:r>e?1:0}function Hh(r,e){const t=Math.min(r.length,e.length);for(let s=0;s<t;s++){const o=r.charAt(s),l=e.charAt(s);if(o!==l)return Sh(o)===Sh(l)?Ve(o,l):Sh(o)?1:-1}return Ve(r.length,e.length)}const lb=55296,cb=57343;function Sh(r){const e=r.charCodeAt(0);return e>=lb&&e<=cb}function Vo(r,e,t){return r.length===e.length&&r.every(((s,o)=>t(s,e[o])))}const Fg="__name__";class rr{constructor(e,t,s){t===void 0?t=0:t>e.length&&Te(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Te(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return rr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof rr?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=rr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Ve(e.length,t.length)}static compareSegments(e,t){const s=rr.isNumericId(e),o=rr.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?rr.extractNumericId(e).compare(rr.extractNumericId(t)):Hh(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ss.fromString(e.substring(4,e.length-2))}}class Ye extends rr{construct(e,t,s){return new Ye(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new he(Z.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new Ye(t)}static emptyPath(){return new Ye([])}}const ub=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class At extends rr{construct(e,t,s){return new At(e,t,s)}static isValidIdentifier(e){return ub.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),At.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Fg}static keyField(){return new At([Fg])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new he(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let h=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new he(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new he(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else m==="`"?(h=!h,o++):m!=="."||h?(s+=m,o++):(l(),o++)}if(l(),h)throw new he(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new At(t)}static emptyPath(){return new At([])}}class we{constructor(e){this.path=e}static fromPath(e){return new we(Ye.fromString(e))}static fromName(e){return new we(Ye.fromString(e).popFirst(5))}static empty(){return new we(Ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ye.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new we(new Ye(e.slice()))}}function Nv(r,e,t){if(!t)throw new he(Z.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function db(r,e,t,s){if(e===!0&&s===!0)throw new he(Z.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Ug(r){if(!we.isDocumentKey(r))throw new he(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Bg(r){if(we.isDocumentKey(r))throw new he(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Sv(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Su(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Te(12329,{type:typeof r})}function Mn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new he(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Su(r);throw new he(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function hb(r,e){if(e<=0)throw new he(Z.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}function yt(r,e){const t={typeString:r};return e&&(t.value=e),t}function pl(r,e){if(!Sv(r))throw new he(Z.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){t=`JSON missing required field: '${s}'`;break}const h=r[s];if(o&&typeof h!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(l!==void 0&&h!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new he(Z.INVALID_ARGUMENT,t);return!0}const zg=-62135596800,$g=1e6;class et{static now(){return et.fromMillis(Date.now())}static fromDate(e){return et.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*$g);return new et(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new he(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new he(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<zg)throw new he(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/$g}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:et._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(pl(e,et._jsonSchema))return new et(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-zg;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}et._jsonSchemaVersion="firestore/timestamp/1.0",et._jsonSchema={type:yt("string",et._jsonSchemaVersion),seconds:yt("number"),nanoseconds:yt("number")};class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new et(0,0))}static max(){return new Ce(new et(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const il=-1;function fb(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Ce.fromTimestamp(s===1e9?new et(t+1,0):new et(t,s));return new Ps(o,we.empty(),e)}function mb(r){return new Ps(r.readTime,r.key,il)}class Ps{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Ps(Ce.min(),we.empty(),il)}static max(){return new Ps(Ce.max(),we.empty(),il)}}function pb(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=we.comparator(r.documentKey,e.documentKey),t!==0?t:Ve(r.largestBatchId,e.largestBatchId))}const gb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class yb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function $o(r){if(r.code!==Z.FAILED_PRECONDITION||r.message!==gb)throw r;pe("LocalStore","Unexpectedly lost primary lease")}class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ee(((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ee?t:ee.resolve(t)}catch(t){return ee.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ee.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ee.reject(t)}static resolve(e){return new ee(((t,s)=>{t(e)}))}static reject(e){return new ee(((t,s)=>{s(e)}))}static waitFor(e){return new ee(((t,s)=>{let o=0,l=0,h=!1;e.forEach((m=>{++o,m.next((()=>{++l,h&&l===o&&t()}),(p=>s(p)))})),h=!0,l===o&&t()}))}static or(e){let t=ee.resolve(!1);for(const s of e)t=t.next((o=>o?ee.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,l)=>{s.push(t.call(this,o,l))})),this.waitFor(s)}static mapArray(e,t){return new ee(((s,o)=>{const l=e.length,h=new Array(l);let m=0;for(let p=0;p<l;p++){const v=p;t(e[v]).next((E=>{h[v]=E,++m,m===l&&s(h)}),(E=>o(E)))}}))}static doWhile(e,t){return new ee(((s,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):s()};l()}))}}function vb(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ho(r){return r.name==="IndexedDbTransactionError"}class Cu{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Cu.ce=-1;const vf=-1;function ku(r){return r==null}function ou(r){return r===0&&1/r==-1/0}function xb(r){return typeof r=="number"&&Number.isInteger(r)&&!ou(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const Cv="";function _b(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Hg(e)),e=wb(r.get(t),e);return Hg(e)}function wb(r,e){let t=e;const s=r.length;for(let o=0;o<s;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case Cv:t+="";break;default:t+=l}}return t}function Hg(r){return r+Cv+""}function qg(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Ms(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function kv(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class st{constructor(e,t){this.comparator=e,this.root=t||kt.EMPTY}insert(e,t){return new st(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,kt.BLACK,null,null))}remove(e){return new st(this.comparator,this.root.remove(e,this.comparator).copy(null,null,kt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bc(this.root,e,this.comparator,!0)}}class Bc{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class kt{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??kt.RED,this.left=o??kt.EMPTY,this.right=l??kt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new kt(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return kt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return kt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Te(27949);return e+(this.isRed()?0:1)}}kt.EMPTY=null,kt.RED=!0,kt.BLACK=!1;kt.EMPTY=new class{constructor(){this.size=0}get key(){throw Te(57766)}get value(){throw Te(16141)}get color(){throw Te(16727)}get left(){throw Te(29726)}get right(){throw Te(36894)}copy(e,t,s,o,l){return this}insert(e,t,s){return new kt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class _t{constructor(e){this.comparator=e,this.data=new st(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Wg(this.data.getIterator())}getIteratorFrom(e){return new Wg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof _t)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new _t(this.comparator);return t.data=e,t}}class Wg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class hn{constructor(e){this.fields=e,e.sort(At.comparator)}static empty(){return new hn([])}unionWith(e){let t=new _t(At.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new hn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Vo(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}class Av extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Pt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Av("Invalid base64 string: "+l):l}})(e);return new Pt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l})(e);return new Pt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pt.EMPTY_BYTE_STRING=new Pt("");const Eb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rs(r){if(qe(!!r,39018),typeof r=="string"){let e=0;const t=Eb.exec(r);if(qe(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:ut(r.seconds),nanos:ut(r.nanos)}}function ut(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function js(r){return typeof r=="string"?Pt.fromBase64String(r):Pt.fromUint8Array(r)}const Pv="server_timestamp",Rv="__type__",jv="__previous_value__",Dv="__local_write_time__";function xf(r){return(r?.mapValue?.fields||{})[Rv]?.stringValue===Pv}function Au(r){const e=r.mapValue.fields[jv];return xf(e)?Au(e):e}function ol(r){const e=Rs(r.mapValue.fields[Dv].timestampValue);return new et(e.seconds,e.nanos)}class bb{constructor(e,t,s,o,l,h,m,p,v,E,b){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=v,this.isUsingEmulator=E,this.apiKey=b}}const au="(default)";class al{constructor(e,t){this.projectId=e,this.database=t||au}static empty(){return new al("","")}get isDefaultDatabase(){return this.database===au}isEqual(e){return e instanceof al&&e.projectId===this.projectId&&e.database===this.database}}function Tb(r,e){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new he(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new al(r.options.projectId,e)}const Vv="__type__",Ib="__max__",zc={mapValue:{}},Ov="__vector__",lu="value";function Ds(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?xf(r)?4:Sb(r)?9007199254740991:Nb(r)?10:11:Te(28295,{value:r})}function dr(r,e){if(r===e)return!0;const t=Ds(r);if(t!==Ds(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return ol(r).isEqual(ol(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=Rs(o.timestampValue),m=Rs(l.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,l){return js(o.bytesValue).isEqual(js(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,l){return ut(o.geoPointValue.latitude)===ut(l.geoPointValue.latitude)&&ut(o.geoPointValue.longitude)===ut(l.geoPointValue.longitude)})(r,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return ut(o.integerValue)===ut(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=ut(o.doubleValue),m=ut(l.doubleValue);return h===m?ou(h)===ou(m):isNaN(h)&&isNaN(m)}return!1})(r,e);case 9:return Vo(r.arrayValue.values||[],e.arrayValue.values||[],dr);case 10:case 11:return(function(o,l){const h=o.mapValue.fields||{},m=l.mapValue.fields||{};if(qg(h)!==qg(m))return!1;for(const p in h)if(h.hasOwnProperty(p)&&(m[p]===void 0||!dr(h[p],m[p])))return!1;return!0})(r,e);default:return Te(52216,{left:r})}}function ll(r,e){return(r.values||[]).find((t=>dr(t,e)))!==void 0}function Oo(r,e){if(r===e)return 0;const t=Ds(r),s=Ds(e);if(t!==s)return Ve(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ve(r.booleanValue,e.booleanValue);case 2:return(function(l,h){const m=ut(l.integerValue||l.doubleValue),p=ut(h.integerValue||h.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1})(r,e);case 3:return Gg(r.timestampValue,e.timestampValue);case 4:return Gg(ol(r),ol(e));case 5:return Hh(r.stringValue,e.stringValue);case 6:return(function(l,h){const m=js(l),p=js(h);return m.compareTo(p)})(r.bytesValue,e.bytesValue);case 7:return(function(l,h){const m=l.split("/"),p=h.split("/");for(let v=0;v<m.length&&v<p.length;v++){const E=Ve(m[v],p[v]);if(E!==0)return E}return Ve(m.length,p.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,h){const m=Ve(ut(l.latitude),ut(h.latitude));return m!==0?m:Ve(ut(l.longitude),ut(h.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Kg(r.arrayValue,e.arrayValue);case 10:return(function(l,h){const m=l.fields||{},p=h.fields||{},v=m[lu]?.arrayValue,E=p[lu]?.arrayValue,b=Ve(v?.values?.length||0,E?.values?.length||0);return b!==0?b:Kg(v,E)})(r.mapValue,e.mapValue);case 11:return(function(l,h){if(l===zc.mapValue&&h===zc.mapValue)return 0;if(l===zc.mapValue)return 1;if(h===zc.mapValue)return-1;const m=l.fields||{},p=Object.keys(m),v=h.fields||{},E=Object.keys(v);p.sort(),E.sort();for(let b=0;b<p.length&&b<E.length;++b){const N=Hh(p[b],E[b]);if(N!==0)return N;const L=Oo(m[p[b]],v[E[b]]);if(L!==0)return L}return Ve(p.length,E.length)})(r.mapValue,e.mapValue);default:throw Te(23264,{he:t})}}function Gg(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Ve(r,e);const t=Rs(r),s=Rs(e),o=Ve(t.seconds,s.seconds);return o!==0?o:Ve(t.nanos,s.nanos)}function Kg(r,e){const t=r.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=Oo(t[o],s[o]);if(l)return l}return Ve(t.length,s.length)}function Mo(r){return qh(r)}function qh(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const s=Rs(t);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return js(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return we.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=qh(l);return s+"]"})(r.arrayValue):"mapValue"in r?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of s)l?l=!1:o+=",",o+=`${h}:${qh(t.fields[h])}`;return o+"}"})(r.mapValue):Te(61005,{value:r})}function Qc(r){switch(Ds(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Au(r);return e?16+Qc(e):16;case 5:return 2*r.stringValue.length;case 6:return js(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,l)=>o+Qc(l)),0)})(r.arrayValue);case 10:case 11:return(function(s){let o=0;return Ms(s.fields,((l,h)=>{o+=l.length+Qc(h)})),o})(r.mapValue);default:throw Te(13486,{value:r})}}function Qg(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Wh(r){return!!r&&"integerValue"in r}function _f(r){return!!r&&"arrayValue"in r}function Yg(r){return!!r&&"nullValue"in r}function Jg(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Yc(r){return!!r&&"mapValue"in r}function Nb(r){return(r?.mapValue?.fields||{})[Vv]?.stringValue===Ov}function Za(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Ms(r.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Za(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Za(r.arrayValue.values[t]);return e}return{...r}}function Sb(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===Ib}class en{constructor(e){this.value=e}static empty(){return new en({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Yc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Za(t)}setAll(e){let t=At.emptyPath(),s={},o=[];e.forEach(((h,m)=>{if(!t.isImmediateParentOf(m)){const p=this.getFieldsMap(t);this.applyChanges(p,s,o),s={},o=[],t=m.popLast()}h?s[m.lastSegment()]=Za(h):o.push(m.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());Yc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return dr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];Yc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){Ms(t,((o,l)=>e[o]=l));for(const o of s)delete e[o]}clone(){return new en(Za(this.value))}}function Mv(r){const e=[];return Ms(r.fields,((t,s)=>{const o=new At([t]);if(Yc(s)){const l=Mv(s.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)})),new hn(e)}class Ut{constructor(e,t,s,o,l,h,m){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=h,this.documentState=m}static newInvalidDocument(e){return new Ut(e,0,Ce.min(),Ce.min(),Ce.min(),en.empty(),0)}static newFoundDocument(e,t,s,o){return new Ut(e,1,t,Ce.min(),s,o,0)}static newNoDocument(e,t){return new Ut(e,2,t,Ce.min(),Ce.min(),en.empty(),0)}static newUnknownDocument(e,t){return new Ut(e,3,t,Ce.min(),Ce.min(),en.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=en.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=en.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class cu{constructor(e,t){this.position=e,this.inclusive=t}}function Xg(r,e,t){let s=0;for(let o=0;o<r.position.length;o++){const l=e[o],h=r.position[o];if(l.field.isKeyField()?s=we.comparator(we.fromName(h.referenceValue),t.key):s=Oo(h,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function Zg(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!dr(r.position[t],e.position[t]))return!1;return!0}class cl{constructor(e,t="asc"){this.field=e,this.dir=t}}function Cb(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class Lv{}class gt extends Lv{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new Ab(e,t,s):t==="array-contains"?new jb(e,s):t==="in"?new Db(e,s):t==="not-in"?new Vb(e,s):t==="array-contains-any"?new Ob(e,s):new gt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new Pb(e,s):new Rb(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Oo(t,this.value)):t!==null&&Ds(this.value)===Ds(t)&&this.matchesComparison(Oo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ln extends Lv{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ln(e,t)}matches(e){return Fv(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Fv(r){return r.op==="and"}function Uv(r){return kb(r)&&Fv(r)}function kb(r){for(const e of r.filters)if(e instanceof Ln)return!1;return!0}function Gh(r){if(r instanceof gt)return r.field.canonicalString()+r.op.toString()+Mo(r.value);if(Uv(r))return r.filters.map((e=>Gh(e))).join(",");{const e=r.filters.map((t=>Gh(t))).join(",");return`${r.op}(${e})`}}function Bv(r,e){return r instanceof gt?(function(s,o){return o instanceof gt&&s.op===o.op&&s.field.isEqual(o.field)&&dr(s.value,o.value)})(r,e):r instanceof Ln?(function(s,o){return o instanceof Ln&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((l,h,m)=>l&&Bv(h,o.filters[m])),!0):!1})(r,e):void Te(19439)}function zv(r){return r instanceof gt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Mo(t.value)}`})(r):r instanceof Ln?(function(t){return t.op.toString()+" {"+t.getFilters().map(zv).join(" ,")+"}"})(r):"Filter"}class Ab extends gt{constructor(e,t,s){super(e,t,s),this.key=we.fromName(s.referenceValue)}matches(e){const t=we.comparator(e.key,this.key);return this.matchesComparison(t)}}class Pb extends gt{constructor(e,t){super(e,"in",t),this.keys=$v("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Rb extends gt{constructor(e,t){super(e,"not-in",t),this.keys=$v("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function $v(r,e){return(e.arrayValue?.values||[]).map((t=>we.fromName(t.referenceValue)))}class jb extends gt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return _f(t)&&ll(t.arrayValue,this.value)}}class Db extends gt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ll(this.value.arrayValue,t)}}class Vb extends gt{constructor(e,t){super(e,"not-in",t)}matches(e){if(ll(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ll(this.value.arrayValue,t)}}class Ob extends gt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!_f(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>ll(this.value.arrayValue,s)))}}class Mb{constructor(e,t=null,s=[],o=[],l=null,h=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=h,this.endAt=m,this.Te=null}}function ey(r,e=null,t=[],s=[],o=null,l=null,h=null){return new Mb(r,e,t,s,o,l,h)}function wf(r){const e=Pe(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Gh(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),ku(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Mo(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Mo(s))).join(",")),e.Te=t}return e.Te}function Ef(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!Cb(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!Bv(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Zg(r.startAt,e.startAt)&&Zg(r.endAt,e.endAt)}function Kh(r){return we.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}class qo{constructor(e,t=null,s=[],o=[],l=null,h="F",m=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=h,this.startAt=m,this.endAt=p,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function Lb(r,e,t,s,o,l,h,m){return new qo(r,e,t,s,o,l,h,m)}function bf(r){return new qo(r)}function ty(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function Fb(r){return we.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function Hv(r){return r.collectionGroup!==null}function el(r){const e=Pe(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new _t(At.comparator);return h.filters.forEach((p=>{p.getFlattenedFilters().forEach((v=>{v.isInequality()&&(m=m.add(v.field))}))})),m})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new cl(l,s))})),t.has(At.keyField().canonicalString())||e.Ie.push(new cl(At.keyField(),s))}return e.Ie}function or(r){const e=Pe(r);return e.Ee||(e.Ee=Ub(e,el(r))),e.Ee}function Ub(r,e){if(r.limitType==="F")return ey(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new cl(o.field,l)}));const t=r.endAt?new cu(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new cu(r.startAt.position,r.startAt.inclusive):null;return ey(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function Qh(r,e){const t=r.filters.concat([e]);return new qo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Bb(r,e){const t=r.explicitOrderBy.concat([e]);return new qo(r.path,r.collectionGroup,t,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}function uu(r,e,t){return new qo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Pu(r,e){return Ef(or(r),or(e))&&r.limitType===e.limitType}function qv(r){return`${wf(or(r))}|lt:${r.limitType}`}function bo(r){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>zv(o))).join(", ")}]`),ku(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>Mo(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>Mo(o))).join(",")),`Target(${s})`})(or(r))}; limitType=${r.limitType})`}function Ru(r,e){return e.isFoundDocument()&&(function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):we.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(r,e)&&(function(s,o){for(const l of el(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0})(r,e)&&(function(s,o){return!(s.startAt&&!(function(h,m,p){const v=Xg(h,m,p);return h.inclusive?v<=0:v<0})(s.startAt,el(s),o)||s.endAt&&!(function(h,m,p){const v=Xg(h,m,p);return h.inclusive?v>=0:v>0})(s.endAt,el(s),o))})(r,e)}function zb(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Wv(r){return(e,t)=>{let s=!1;for(const o of el(r)){const l=$b(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function $b(r,e,t){const s=r.field.isKeyField()?we.comparator(e.key,t.key):(function(l,h,m){const p=h.data.field(l),v=m.data.field(l);return p!==null&&v!==null?Oo(p,v):Te(42886)})(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Te(19790,{direction:r.dir})}}class Si{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ms(this.inner,((t,s)=>{for(const[o,l]of s)e(o,l)}))}isEmpty(){return kv(this.inner)}size(){return this.innerSize}}const Hb=new st(we.comparator);function Fr(){return Hb}const Gv=new st(we.comparator);function Ga(...r){let e=Gv;for(const t of r)e=e.insert(t.key,t);return e}function Kv(r){let e=Gv;return r.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function pi(){return tl()}function Qv(){return tl()}function tl(){return new Si((r=>r.toString()),((r,e)=>r.isEqual(e)))}const qb=new st(we.comparator),Wb=new _t(we.comparator);function Oe(...r){let e=Wb;for(const t of r)e=e.add(t);return e}const Gb=new _t(Ve);function Kb(){return Gb}function Tf(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ou(e)?"-0":e}}function Yv(r){return{integerValue:""+r}}function Qb(r,e){return xb(e)?Yv(e):Tf(r,e)}class ju{constructor(){this._=void 0}}function Yb(r,e,t){return r instanceof ul?(function(o,l){const h={fields:{[Rv]:{stringValue:Pv},[Dv]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&xf(l)&&(l=Au(l)),l&&(h.fields[jv]=l),{mapValue:h}})(t,e):r instanceof Lo?Xv(r,e):r instanceof dl?Zv(r,e):(function(o,l){const h=Jv(o,l),m=ny(h)+ny(o.Ae);return Wh(h)&&Wh(o.Ae)?Yv(m):Tf(o.serializer,m)})(r,e)}function Jb(r,e,t){return r instanceof Lo?Xv(r,e):r instanceof dl?Zv(r,e):t}function Jv(r,e){return r instanceof du?(function(s){return Wh(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class ul extends ju{}class Lo extends ju{constructor(e){super(),this.elements=e}}function Xv(r,e){const t=e0(e);for(const s of r.elements)t.some((o=>dr(o,s)))||t.push(s);return{arrayValue:{values:t}}}class dl extends ju{constructor(e){super(),this.elements=e}}function Zv(r,e){let t=e0(e);for(const s of r.elements)t=t.filter((o=>!dr(o,s)));return{arrayValue:{values:t}}}class du extends ju{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function ny(r){return ut(r.integerValue||r.doubleValue)}function e0(r){return _f(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class t0{constructor(e,t){this.field=e,this.transform=t}}function Xb(r,e){return r.field.isEqual(e.field)&&(function(s,o){return s instanceof Lo&&o instanceof Lo||s instanceof dl&&o instanceof dl?Vo(s.elements,o.elements,dr):s instanceof du&&o instanceof du?dr(s.Ae,o.Ae):s instanceof ul&&o instanceof ul})(r.transform,e.transform)}class Zb{constructor(e,t){this.version=e,this.transformResults=t}}class En{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new En}static exists(e){return new En(void 0,e)}static updateTime(e){return new En(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Jc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Du{}function n0(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new If(r.key,En.none()):new gl(r.key,r.data,En.none());{const t=r.data,s=en.empty();let o=new _t(At.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?s.delete(l):s.set(l,h),o=o.add(l)}return new Ls(r.key,s,new hn(o.toArray()),En.none())}}function eT(r,e,t){r instanceof gl?(function(o,l,h){const m=o.value.clone(),p=sy(o.fieldTransforms,l,h.transformResults);m.setAll(p),l.convertToFoundDocument(h.version,m).setHasCommittedMutations()})(r,e,t):r instanceof Ls?(function(o,l,h){if(!Jc(o.precondition,l))return void l.convertToUnknownDocument(h.version);const m=sy(o.fieldTransforms,l,h.transformResults),p=l.data;p.setAll(r0(o)),p.setAll(m),l.convertToFoundDocument(h.version,p).setHasCommittedMutations()})(r,e,t):(function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function nl(r,e,t,s){return r instanceof gl?(function(l,h,m,p){if(!Jc(l.precondition,h))return m;const v=l.value.clone(),E=iy(l.fieldTransforms,p,h);return v.setAll(E),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),null})(r,e,t,s):r instanceof Ls?(function(l,h,m,p){if(!Jc(l.precondition,h))return m;const v=iy(l.fieldTransforms,p,h),E=h.data;return E.setAll(r0(l)),E.setAll(v),h.convertToFoundDocument(h.version,E).setHasLocalMutations(),m===null?null:m.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((b=>b.field)))})(r,e,t,s):(function(l,h,m){return Jc(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m})(r,e,t)}function tT(r,e){let t=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),l=Jv(s.transform,o||null);l!=null&&(t===null&&(t=en.empty()),t.set(s.field,l))}return t||null}function ry(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Vo(s,o,((l,h)=>Xb(l,h)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class gl extends Du{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ls extends Du{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function r0(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}})),e}function sy(r,e,t){const s=new Map;qe(r.length===t.length,32656,{Ve:t.length,de:r.length});for(let o=0;o<t.length;o++){const l=r[o],h=l.transform,m=e.data.field(l.field);s.set(l.field,Jb(h,m,t[o]))}return s}function iy(r,e,t){const s=new Map;for(const o of r){const l=o.transform,h=t.data.field(o.field);s.set(o.field,Yb(l,h,e))}return s}class If extends Du{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class nT extends Du{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class rT{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&eT(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=nl(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=nl(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Qv();return this.mutations.forEach((o=>{const l=e.get(o.key),h=l.overlayedDocument;let m=this.applyToLocalView(h,l.mutatedFields);m=t.has(o.key)?null:m;const p=n0(h,m);p!==null&&s.set(o.key,p),h.isValidDocument()||h.convertToNoDocument(Ce.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Oe())}isEqual(e){return this.batchId===e.batchId&&Vo(this.mutations,e.mutations,((t,s)=>ry(t,s)))&&Vo(this.baseMutations,e.baseMutations,((t,s)=>ry(t,s)))}}class Nf{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){qe(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return qb})();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,s[h].version);return new Nf(e,t,s,o)}}class sT{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class iT{constructor(e,t){this.count=e,this.unchangedNames=t}}var pt,Fe;function oT(r){switch(r){case Z.OK:return Te(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return Te(15467,{code:r})}}function s0(r){if(r===void 0)return Lr("GRPC error has no .code"),Z.UNKNOWN;switch(r){case pt.OK:return Z.OK;case pt.CANCELLED:return Z.CANCELLED;case pt.UNKNOWN:return Z.UNKNOWN;case pt.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case pt.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case pt.INTERNAL:return Z.INTERNAL;case pt.UNAVAILABLE:return Z.UNAVAILABLE;case pt.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case pt.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case pt.NOT_FOUND:return Z.NOT_FOUND;case pt.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case pt.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case pt.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case pt.ABORTED:return Z.ABORTED;case pt.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case pt.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case pt.DATA_LOSS:return Z.DATA_LOSS;default:return Te(39323,{code:r})}}(Fe=pt||(pt={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";function aT(){return new TextEncoder}const lT=new Ss([4294967295,4294967295],0);function oy(r){const e=aT().encode(r),t=new vv;return t.update(e),new Uint8Array(t.digest())}function ay(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ss([t,s],0),new Ss([o,l],0)]}class Sf{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Ka(`Invalid padding: ${t}`);if(s<0)throw new Ka(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Ka(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Ka(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ss.fromNumber(this.ge)}ye(e,t,s){let o=e.add(t.multiply(Ss.fromNumber(s)));return o.compare(lT)===1&&(o=new Ss([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=oy(e),[s,o]=ay(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(s,o,l);if(!this.we(h))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new Sf(l,o,t);return s.forEach((m=>h.insert(m))),h}insert(e){if(this.ge===0)return;const t=oy(e),[s,o]=ay(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(s,o,l);this.be(h)}}be(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Ka extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Vu{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,yl.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Vu(Ce.min(),o,new st(Ve),Fr(),Oe())}}class yl{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new yl(s,t,Oe(),Oe(),Oe())}}class Xc{constructor(e,t,s,o){this.Se=e,this.removedTargetIds=t,this.key=s,this.De=o}}class i0{constructor(e,t){this.targetId=e,this.Ce=t}}class o0{constructor(e,t,s=Pt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class ly{constructor(){this.ve=0,this.Fe=cy(),this.Me=Pt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Oe(),t=Oe(),s=Oe();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:Te(38017,{changeType:l})}})),new yl(this.Me,this.xe,e,t,s)}Ke(){this.Oe=!1,this.Fe=cy()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,qe(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class cT{constructor(e){this.Ge=e,this.ze=new Map,this.je=Fr(),this.He=$c(),this.Je=$c(),this.Ze=new st(Ve)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.We(),s.Ne||s.Ke(),s.Le(e.resumeToken);break;case 2:s.We(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.Qe(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Te(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,s=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(Kh(l))if(s===0){const h=new we(l.path);this.et(t,h,Ut.newNoDocument(h,Ce.min()))}else qe(s===1,20013,{expectedCount:s});else{const h=this._t(t);if(h!==s){const m=this.ut(e),p=m?this.ct(m,e,h):1;if(p!==0){this.it(t);const v=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,v)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let h,m;try{h=js(s).toUint8Array()}catch(p){if(p instanceof Av)return Do("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new Sf(h,o,l)}catch(p){return Do(p instanceof Ka?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.ge===0?null:m}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let o=0;return s.forEach((l=>{const h=this.Ge.ht(),m=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(m)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,h)=>{const m=this.ot(h);if(m){if(l.current&&Kh(m.target)){const p=new we(m.target.path);this.It(p).has(h)||this.Et(h,p)||this.et(h,p,Ut.newNoDocument(p,e))}l.Be&&(t.set(h,l.ke()),l.Ke())}}));let s=Oe();this.Je.forEach(((l,h)=>{let m=!0;h.forEachWhile((p=>{const v=this.ot(p);return!v||v.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(l))})),this.je.forEach(((l,h)=>h.setReadTime(e)));const o=new Vu(e,t,this.Ze,this.je,s);return this.je=Fr(),this.He=$c(),this.Je=$c(),this.Ze=new st(Ve),o}Ye(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,s),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.qe(t,1):o.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new ly,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new _t(Ve),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new _t(Ve),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||pe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ly),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function $c(){return new st(we.comparator)}function cy(){return new st(we.comparator)}const uT={asc:"ASCENDING",desc:"DESCENDING"},dT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hT={and:"AND",or:"OR"};class fT{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Yh(r,e){return r.useProto3Json||ku(e)?e:{value:e}}function hu(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function a0(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function mT(r,e){return hu(r,e.toTimestamp())}function ar(r){return qe(!!r,49232),Ce.fromTimestamp((function(t){const s=Rs(t);return new et(s.seconds,s.nanos)})(r))}function Cf(r,e){return Jh(r,e).canonicalString()}function Jh(r,e){const t=(function(o){return new Ye(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function l0(r){const e=Ye.fromString(r);return qe(f0(e),10190,{key:e.toString()}),e}function Xh(r,e){return Cf(r.databaseId,e.path)}function Ch(r,e){const t=l0(e);if(t.get(1)!==r.databaseId.projectId)throw new he(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new he(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new we(u0(t))}function c0(r,e){return Cf(r.databaseId,e)}function pT(r){const e=l0(r);return e.length===4?Ye.emptyPath():u0(e)}function Zh(r){return new Ye(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function u0(r){return qe(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function uy(r,e,t){return{name:Xh(r,e),fields:t.value.mapValue.fields}}function gT(r,e){let t;if("targetChange"in e){e.targetChange;const s=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:Te(39313,{state:v})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(v,E){return v.useProto3Json?(qe(E===void 0||typeof E=="string",58123),Pt.fromBase64String(E||"")):(qe(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),Pt.fromUint8Array(E||new Uint8Array))})(r,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&(function(v){const E=v.code===void 0?Z.UNKNOWN:s0(v.code);return new he(E,v.message||"")})(h);t=new o0(s,o,l,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Ch(r,s.document.name),l=ar(s.document.updateTime),h=s.document.createTime?ar(s.document.createTime):Ce.min(),m=new en({mapValue:{fields:s.document.fields}}),p=Ut.newFoundDocument(o,l,h,m),v=s.targetIds||[],E=s.removedTargetIds||[];t=new Xc(v,E,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Ch(r,s.document),l=s.readTime?ar(s.readTime):Ce.min(),h=Ut.newNoDocument(o,l),m=s.removedTargetIds||[];t=new Xc([],m,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Ch(r,s.document),l=s.removedTargetIds||[];t=new Xc([],l,o,null)}else{if(!("filter"in e))return Te(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,h=new iT(o,l),m=s.targetId;t=new i0(m,h)}}return t}function yT(r,e){let t;if(e instanceof gl)t={update:uy(r,e.key,e.value)};else if(e instanceof If)t={delete:Xh(r,e.key)};else if(e instanceof Ls)t={update:uy(r,e.key,e.data),updateMask:NT(e.fieldMask)};else{if(!(e instanceof nT))return Te(16599,{dt:e.type});t={verify:Xh(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,h){const m=h.transform;if(m instanceof ul)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Lo)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof dl)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof du)return{fieldPath:h.field.canonicalString(),increment:m.Ae};throw Te(20930,{transform:h.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:mT(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Te(27497)})(r,e.precondition)),t}function vT(r,e){return r&&r.length>0?(qe(e!==void 0,14353),r.map((t=>(function(o,l){let h=o.updateTime?ar(o.updateTime):ar(l);return h.isEqual(Ce.min())&&(h=ar(l)),new Zb(h,o.transformResults||[])})(t,e)))):[]}function xT(r,e){return{documents:[c0(r,e.path)]}}function _T(r,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=c0(r,o);const l=(function(v){if(v.length!==0)return h0(Ln.create(v,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const h=(function(v){if(v.length!==0)return v.map((E=>(function(N){return{field:To(N.field),direction:bT(N.dir)}})(E)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const m=Yh(r,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(e.endAt)),{ft:t,parent:o}}function wT(r){let e=pT(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){qe(s===1,65062);const E=t.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let l=[];t.where&&(l=(function(b){const N=d0(b);return N instanceof Ln&&Uv(N)?N.getFilters():[N]})(t.where));let h=[];t.orderBy&&(h=(function(b){return b.map((N=>(function(Q){return new cl(Io(Q.field),(function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(Q.direction))})(N)))})(t.orderBy));let m=null;t.limit&&(m=(function(b){let N;return N=typeof b=="object"?b.value:b,ku(N)?null:N})(t.limit));let p=null;t.startAt&&(p=(function(b){const N=!!b.before,L=b.values||[];return new cu(L,N)})(t.startAt));let v=null;return t.endAt&&(v=(function(b){const N=!b.before,L=b.values||[];return new cu(L,N)})(t.endAt)),Lb(e,o,h,l,m,"F",p,v)}function ET(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function d0(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Io(t.unaryFilter.field);return gt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Io(t.unaryFilter.field);return gt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Io(t.unaryFilter.field);return gt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Io(t.unaryFilter.field);return gt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Te(61313);default:return Te(60726)}})(r):r.fieldFilter!==void 0?(function(t){return gt.create(Io(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Te(58110);default:return Te(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return Ln.create(t.compositeFilter.filters.map((s=>d0(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Te(1026)}})(t.compositeFilter.op))})(r):Te(30097,{filter:r})}function bT(r){return uT[r]}function TT(r){return dT[r]}function IT(r){return hT[r]}function To(r){return{fieldPath:r.canonicalString()}}function Io(r){return At.fromServerFormat(r.fieldPath)}function h0(r){return r instanceof gt?(function(t){if(t.op==="=="){if(Jg(t.value))return{unaryFilter:{field:To(t.field),op:"IS_NAN"}};if(Yg(t.value))return{unaryFilter:{field:To(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Jg(t.value))return{unaryFilter:{field:To(t.field),op:"IS_NOT_NAN"}};if(Yg(t.value))return{unaryFilter:{field:To(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:To(t.field),op:TT(t.op),value:t.value}}})(r):r instanceof Ln?(function(t){const s=t.getFilters().map((o=>h0(o)));return s.length===1?s[0]:{compositeFilter:{op:IT(t.op),filters:s}}})(r):Te(54877,{filter:r})}function NT(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function f0(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}function m0(r){return!!r&&typeof r._toProto=="function"&&r._protoValueType==="ProtoValue"}class Ts{constructor(e,t,s,o,l=Ce.min(),h=Ce.min(),m=Pt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new Ts(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ts(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class ST{constructor(e){this.yt=e}}function CT(r){const e=wT({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?uu(e,e.limit,"L"):e}class kT{constructor(){this.Sn=new AT}addToCollectionParentIndex(e,t){return this.Sn.add(t),ee.resolve()}getCollectionParents(e,t){return ee.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return ee.resolve()}deleteFieldIndex(e,t){return ee.resolve()}deleteAllFieldIndexes(e){return ee.resolve()}createTargetIndexes(e,t){return ee.resolve()}getDocumentsMatchingTarget(e,t){return ee.resolve(null)}getIndexType(e,t){return ee.resolve(0)}getFieldIndexes(e,t){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,t){return ee.resolve(Ps.min())}getMinOffsetFromCollectionGroup(e,t){return ee.resolve(Ps.min())}updateCollectionGroup(e,t,s){return ee.resolve()}updateIndexEntries(e,t){return ee.resolve()}}class AT{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new _t(Ye.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new _t(Ye.comparator)).toArray()}}const dy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},p0=41943040;class Zt{static withCacheSize(e){return new Zt(e,Zt.DEFAULT_COLLECTION_PERCENTILE,Zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}Zt.DEFAULT_COLLECTION_PERCENTILE=10,Zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zt.DEFAULT=new Zt(p0,Zt.DEFAULT_COLLECTION_PERCENTILE,Zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zt.DISABLED=new Zt(-1,0,0);class Fo{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Fo(0)}static ar(){return new Fo(-1)}}const hy="LruGarbageCollector",PT=1048576;function fy([r,e],[t,s]){const o=Ve(r,t);return o===0?Ve(e,s):o}class RT{constructor(e){this.Pr=e,this.buffer=new _t(fy),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();fy(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class jT{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){pe(hy,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ho(t)?pe(hy,"Ignoring IndexedDB error during garbage collection: ",t):await $o(t)}await this.Ar(3e5)}))}}class DT{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return ee.resolve(Cu.ce);const s=new RT(t);return this.Vr.forEachTarget(e,(o=>s.Er(o.sequenceNumber))).next((()=>this.Vr.mr(e,(o=>s.Er(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.Vr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(pe("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(dy)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),dy):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let s,o,l,h,m,p,v;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),o=this.params.maximumSequenceNumbersToCollect):o=b,h=Date.now(),this.nthSequenceNumber(e,o)))).next((b=>(s=b,m=Date.now(),this.removeTargets(e,s,t)))).next((b=>(l=b,p=Date.now(),this.removeOrphanedDocuments(e,s)))).next((b=>(v=Date.now(),Eo()<=De.DEBUG&&pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-E}ms
	Determined least recently used ${o} in `+(m-h)+`ms
	Removed ${l} targets in `+(p-m)+`ms
	Removed ${b} documents in `+(v-p)+`ms
Total Duration: ${v-E}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:b}))))}}function VT(r,e){return new DT(r,e)}class OT{constructor(){this.changes=new Si((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ut.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?ee.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class MT{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class LT{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&nl(s.mutation,o,hn.empty(),et.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Oe()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Oe()){const o=pi();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((l=>{let h=Ga();return l.forEach(((m,p)=>{h=h.insert(m,p.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const s=pi();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Oe())))}populateOverlays(e,t,s){const o=[];return s.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((h,m)=>{t.set(h,m)}))}))}computeViews(e,t,s,o){let l=Fr();const h=tl(),m=(function(){return tl()})();return t.forEach(((p,v)=>{const E=s.get(v.key);o.has(v.key)&&(E===void 0||E.mutation instanceof Ls)?l=l.insert(v.key,v):E!==void 0?(h.set(v.key,E.mutation.getFieldMask()),nl(E.mutation,v,E.mutation.getFieldMask(),et.now())):h.set(v.key,hn.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((v,E)=>h.set(v,E))),t.forEach(((v,E)=>m.set(v,new MT(E,h.get(v)??null)))),m)))}recalculateAndSaveOverlays(e,t){const s=tl();let o=new st(((h,m)=>h-m)),l=Oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const m of h)m.keys().forEach((p=>{const v=t.get(p);if(v===null)return;let E=s.get(p)||hn.empty();E=m.applyToLocalView(v,E),s.set(p,E);const b=(o.get(m.batchId)||Oe()).add(p);o=o.insert(m.batchId,b)}))})).next((()=>{const h=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),v=p.key,E=p.value,b=Qv();E.forEach((N=>{if(!l.has(N)){const L=n0(t.get(N),s.get(N));L!==null&&b.set(N,L),l=l.add(N)}})),h.push(this.documentOverlayCache.saveOverlays(e,v,b))}return ee.waitFor(h)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return Fb(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Hv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):ee.resolve(pi());let m=il,p=l;return h.next((v=>ee.forEach(v,((E,b)=>(m<b.largestBatchId&&(m=b.largestBatchId),l.get(E)?ee.resolve():this.remoteDocumentCache.getEntry(e,E).next((N=>{p=p.insert(E,N)}))))).next((()=>this.populateOverlays(e,v,l))).next((()=>this.computeViews(e,p,v,Oe()))).next((E=>({batchId:m,changes:Kv(E)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new we(t)).next((s=>{let o=Ga();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let h=Ga();return this.indexManager.getCollectionParents(e,l).next((m=>ee.forEach(m,(p=>{const v=(function(b,N){return new qo(N,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,v,s,o).next((E=>{E.forEach(((b,N)=>{h=h.insert(b,N)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o)))).next((h=>{l.forEach(((p,v)=>{const E=v.getKey();h.get(E)===null&&(h=h.insert(E,Ut.newInvalidDocument(E)))}));let m=Ga();return h.forEach(((p,v)=>{const E=l.get(p);E!==void 0&&nl(E.mutation,v,hn.empty(),et.now()),Ru(t,v)&&(m=m.insert(p,v))})),m}))}}class FT{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return ee.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:ar(o.createTime)}})(t)),ee.resolve()}getNamedQuery(e,t){return ee.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(o){return{name:o.name,query:CT(o.bundledQuery),readTime:ar(o.readTime)}})(t)),ee.resolve()}}class UT{constructor(){this.overlays=new st(we.comparator),this.Lr=new Map}getOverlay(e,t){return ee.resolve(this.overlays.get(t))}getOverlays(e,t){const s=pi();return ee.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&s.set(o,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,l)=>{this.bt(e,t,l)})),ee.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.Lr.get(s);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(s)),ee.resolve()}getOverlaysForCollection(e,t,s){const o=pi(),l=t.length+1,h=new we(t.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const p=m.getNext().value,v=p.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===l&&p.largestBatchId>s&&o.set(p.getKey(),p)}return ee.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new st(((v,E)=>v-E));const h=this.overlays.getIterator();for(;h.hasNext();){const v=h.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>s){let E=l.get(v.largestBatchId);E===null&&(E=pi(),l=l.insert(v.largestBatchId,E)),E.set(v.getKey(),v)}}const m=pi(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((v,E)=>m.set(v,E))),!(m.size()>=o)););return ee.resolve(m)}bt(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.Lr.get(o.largestBatchId).delete(s.key);this.Lr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new sT(t,s));let l=this.Lr.get(t);l===void 0&&(l=Oe(),this.Lr.set(t,l)),this.Lr.set(t,l.add(s.key))}}class BT{constructor(){this.sessionToken=Pt.EMPTY_BYTE_STRING}getSessionToken(e){return ee.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ee.resolve()}}class kf{constructor(){this.kr=new _t(Tt.Kr),this.qr=new _t(Tt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const s=new Tt(e,t);this.kr=this.kr.add(s),this.qr=this.qr.add(s)}$r(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Wr(new Tt(e,t))}Qr(e,t){e.forEach((s=>this.removeReference(s,t)))}Gr(e){const t=new we(new Ye([])),s=new Tt(t,e),o=new Tt(t,e+1),l=[];return this.qr.forEachInRange([s,o],(h=>{this.Wr(h),l.push(h.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new we(new Ye([])),s=new Tt(t,e),o=new Tt(t,e+1);let l=Oe();return this.qr.forEachInRange([s,o],(h=>{l=l.add(h.key)})),l}containsKey(e){const t=new Tt(e,0),s=this.kr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Tt{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return we.comparator(e.key,t.key)||Ve(e.Hr,t.Hr)}static Ur(e,t){return Ve(e.Hr,t.Hr)||we.comparator(e.key,t.key)}}class zT{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new _t(Tt.Kr)}checkEmpty(e){return ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new rT(l,t,s,o);this.mutationQueue.push(h);for(const m of o)this.Jr=this.Jr.add(new Tt(m.key,l)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ee.resolve(h)}lookupMutationBatch(e,t){return ee.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.Xr(s),l=o<0?0:o;return ee.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(this.mutationQueue.length===0?vf:this.Yn-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Tt(t,0),o=new Tt(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([s,o],(h=>{const m=this.Zr(h.Hr);l.push(m)})),ee.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new _t(Ve);return t.forEach((o=>{const l=new Tt(o,0),h=new Tt(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,h],(m=>{s=s.add(m.Hr)}))})),ee.resolve(this.Yr(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;we.isDocumentKey(l)||(l=l.child(""));const h=new Tt(new we(l),0);let m=new _t(Ve);return this.Jr.forEachWhile((p=>{const v=p.key.path;return!!s.isPrefixOf(v)&&(v.length===o&&(m=m.add(p.Hr)),!0)}),h),ee.resolve(this.Yr(m))}Yr(e){const t=[];return e.forEach((s=>{const o=this.Zr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){qe(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Jr;return ee.forEach(t.mutations,(o=>{const l=new Tt(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Jr=s}))}nr(e){}containsKey(e,t){const s=new Tt(t,0),o=this.Jr.firstAfterOrEqual(s);return ee.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ee.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class $T{constructor(e){this.ti=e,this.docs=(function(){return new st(we.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,h=this.ti(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return ee.resolve(s?s.document.mutableCopy():Ut.newInvalidDocument(t))}getEntries(e,t){let s=Fr();return t.forEach((o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():Ut.newInvalidDocument(o))})),ee.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=Fr();const h=t.path,m=new we(h.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:v,value:{document:E}}=p.getNext();if(!h.isPrefixOf(v.path))break;v.path.length>h.length+1||pb(mb(E),s)<=0||(o.has(E.key)||Ru(t,E))&&(l=l.insert(E.key,E.mutableCopy()))}return ee.resolve(l)}getAllFromCollectionGroup(e,t,s,o){Te(9500)}ni(e,t){return ee.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new HT(this)}getSize(e){return ee.resolve(this.size)}}class HT extends OT{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(s)})),ee.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class qT{constructor(e){this.persistence=e,this.ri=new Si((t=>wf(t)),Ef),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.ii=0,this.si=new kf,this.targetCount=0,this.oi=Fo._r()}forEachTarget(e,t){return this.ri.forEach(((s,o)=>t(o))),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.ii&&(this.ii=t),ee.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Fo(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,ee.resolve()}updateTargetData(e,t){return this.lr(t),ee.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.ri.forEach(((h,m)=>{m.sequenceNumber<=t&&s.get(m.targetId)===null&&(this.ri.delete(h),l.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),ee.waitFor(l).next((()=>o))}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,t){const s=this.ri.get(t)||null;return ee.resolve(s)}addMatchingKeys(e,t,s){return this.si.$r(t,s),ee.resolve()}removeMatchingKeys(e,t,s){this.si.Qr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((h=>{l.push(o.markPotentiallyOrphaned(e,h))})),ee.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),ee.resolve()}getMatchingKeysForTargetId(e,t){const s=this.si.jr(t);return ee.resolve(s)}containsKey(e,t){return ee.resolve(this.si.containsKey(t))}}class g0{constructor(e,t){this._i={},this.overlays={},this.ai=new Cu(0),this.ui=!1,this.ui=!0,this.ci=new BT,this.referenceDelegate=e(this),this.li=new qT(this),this.indexManager=new kT,this.remoteDocumentCache=(function(o){return new $T(o)})((s=>this.referenceDelegate.hi(s))),this.serializer=new ST(t),this.Pi=new FT(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new UT,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this._i[e.toKey()];return s||(s=new zT(t,this.referenceDelegate),this._i[e.toKey()]=s),s}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,s){pe("MemoryPersistence","Starting transaction:",e);const o=new WT(this.ai.next());return this.referenceDelegate.Ti(),s(o).next((l=>this.referenceDelegate.Ii(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ei(e,t){return ee.or(Object.values(this._i).map((s=>()=>s.containsKey(e,t))))}}class WT extends yb{constructor(e){super(),this.currentSequenceNumber=e}}class Af{constructor(e){this.persistence=e,this.Ri=new kf,this.Ai=null}static Vi(e){return new Af(e)}get di(){if(this.Ai)return this.Ai;throw Te(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.di.delete(s.toString()),ee.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.di.add(s.toString()),ee.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),ee.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((o=>this.di.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.di.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.di,(s=>{const o=we.fromPath(s);return this.mi(e,o).next((l=>{l||t.removeEntry(o,Ce.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((s=>{s?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return ee.or([()=>ee.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class fu{constructor(e,t){this.persistence=e,this.fi=new Si((s=>_b(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=VT(this,t)}static Vi(e,t){return new fu(e,t)}Ti(){}Ii(e){return ee.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}pr(e){let t=0;return this.mr(e,(s=>{t++})).next((()=>t))}mr(e,t){return ee.forEach(this.fi,((s,o)=>this.wr(e,s,o).next((l=>l?ee.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ni(e,(h=>this.wr(e,h,t).next((m=>{m||(s++,l.removeEntry(h,Ce.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),ee.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.fi.set(s,e.currentSequenceNumber),ee.resolve()}removeReference(e,t,s){return this.fi.set(s,e.currentSequenceNumber),ee.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),ee.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Qc(e.data.value)),t}wr(e,t,s){return ee.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.fi.get(t);return ee.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Pf{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Ts=s,this.Is=o}static Es(e,t){let s=Oe(),o=Oe();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Pf(e,t.fromCache,s,o)}}class GT{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class KT{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return Ow()?8:vb(Bt())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.gs(e,t).next((h=>{l.result=h})).next((()=>{if(!l.result)return this.ps(e,t,o,s).next((h=>{l.result=h}))})).next((()=>{if(l.result)return;const h=new GT;return this.ys(e,t,h).next((m=>{if(l.result=m,this.As)return this.ws(e,t,h,m.size)}))})).next((()=>l.result))}ws(e,t,s,o){return s.documentReadCount<this.Vs?(Eo()<=De.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",bo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ee.resolve()):(Eo()<=De.DEBUG&&pe("QueryEngine","Query:",bo(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.ds*o?(Eo()<=De.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",bo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,or(t))):ee.resolve())}gs(e,t){if(ty(t))return ee.resolve(null);let s=or(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=uu(t,null,"F"),s=or(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const h=Oe(...l);return this.fs.getDocuments(e,h).next((m=>this.indexManager.getMinOffset(e,s).next((p=>{const v=this.bs(t,m);return this.Ss(t,v,h,p.readTime)?this.gs(e,uu(t,null,"F")):this.Ds(e,v,t,p)}))))})))))}ps(e,t,s,o){return ty(t)||o.isEqual(Ce.min())?ee.resolve(null):this.fs.getDocuments(e,s).next((l=>{const h=this.bs(t,l);return this.Ss(t,h,s,o)?ee.resolve(null):(Eo()<=De.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),bo(t)),this.Ds(e,h,t,fb(o,il)).next((m=>m)))}))}bs(e,t){let s=new _t(Wv(e));return t.forEach(((o,l)=>{Ru(e,l)&&(s=s.add(l))})),s}Ss(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ys(e,t,s){return Eo()<=De.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",bo(t)),this.fs.getDocumentsMatchingQuery(e,t,Ps.min(),s)}Ds(e,t,s,o){return this.fs.getDocumentsMatchingQuery(e,s,o).next((l=>(t.forEach((h=>{l=l.insert(h.key,h)})),l)))}}const Rf="LocalStore",QT=3e8;class YT{constructor(e,t,s,o){this.persistence=e,this.Cs=t,this.serializer=o,this.vs=new st(Ve),this.Fs=new Si((l=>wf(l)),Ef),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(s)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new LT(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function JT(r,e,t,s){return new YT(r,e,t,s)}async function y0(r,e){const t=Pe(r);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((l=>(o=l,t.Os(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const h=[],m=[];let p=Oe();for(const v of o){h.push(v.batchId);for(const E of v.mutations)p=p.add(E.key)}for(const v of l){m.push(v.batchId);for(const E of v.mutations)p=p.add(E.key)}return t.localDocuments.getDocuments(s,p).next((v=>({Ns:v,removedBatchIds:h,addedBatchIds:m})))}))}))}function XT(r,e){const t=Pe(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(m,p,v,E){const b=v.batch,N=b.keys();let L=ee.resolve();return N.forEach((Q=>{L=L.next((()=>E.getEntry(p,Q))).next((B=>{const O=v.docVersions.get(Q);qe(O!==null,48541),B.version.compareTo(O)<0&&(b.applyToRemoteDocument(B,v),B.isValidDocument()&&(B.setReadTime(v.commitVersion),E.addEntry(B)))}))})),L.next((()=>m.mutationQueue.removeMutationBatch(p,b)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let p=Oe();for(let v=0;v<m.mutationResults.length;++v)m.mutationResults[v].transformResults.length>0&&(p=p.add(m.batch.mutations[v].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function v0(r){const e=Pe(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function ZT(r,e){const t=Pe(r),s=e.snapshotVersion;let o=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const h=t.xs.newChangeBuffer({trackRemovals:!0});o=t.vs;const m=[];e.targetChanges.forEach(((E,b)=>{const N=o.get(b);if(!N)return;m.push(t.li.removeMatchingKeys(l,E.removedDocuments,b).next((()=>t.li.addMatchingKeys(l,E.addedDocuments,b))));let L=N.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(b)!==null?L=L.withResumeToken(Pt.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):E.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(E.resumeToken,s)),o=o.insert(b,L),(function(B,O,U){return B.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=QT?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0})(N,L,E)&&m.push(t.li.updateTargetData(l,L))}));let p=Fr(),v=Oe();if(e.documentUpdates.forEach((E=>{e.resolvedLimboDocuments.has(E)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(l,E))})),m.push(eI(l,h,e.documentUpdates).next((E=>{p=E.Bs,v=E.Ls}))),!s.isEqual(Ce.min())){const E=t.li.getLastRemoteSnapshotVersion(l).next((b=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,s)));m.push(E)}return ee.waitFor(m).next((()=>h.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,v))).next((()=>p))})).then((l=>(t.vs=o,l)))}function eI(r,e,t){let s=Oe(),o=Oe();return t.forEach((l=>s=s.add(l))),e.getEntries(r,s).next((l=>{let h=Fr();return t.forEach(((m,p)=>{const v=l.get(m);p.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(Ce.min())?(e.removeEntry(m,p.readTime),h=h.insert(m,p)):!v.isValidDocument()||p.version.compareTo(v.version)>0||p.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(p),h=h.insert(m,p)):pe(Rf,"Ignoring outdated watch update for ",m,". Current version:",v.version," Watch version:",p.version)})),{Bs:h,Ls:o}}))}function tI(r,e){const t=Pe(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=vf),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function nI(r,e){const t=Pe(r);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.li.getTargetData(s,e).next((l=>l?(o=l,ee.resolve(o)):t.li.allocateTargetId(s).next((h=>(o=new Ts(e,h,"TargetPurposeListen",s.currentSequenceNumber),t.li.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.vs.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.vs=t.vs.insert(s.targetId,s),t.Fs.set(e,s.targetId)),s}))}async function ef(r,e,t){const s=Pe(r),o=s.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(h=>s.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!Ho(h))throw h;pe(Rf,`Failed to update sequence numbers for target ${e}: ${h}`)}s.vs=s.vs.remove(e),s.Fs.delete(o.target)}function my(r,e,t){const s=Pe(r);let o=Ce.min(),l=Oe();return s.persistence.runTransaction("Execute query","readwrite",(h=>(function(p,v,E){const b=Pe(p),N=b.Fs.get(E);return N!==void 0?ee.resolve(b.vs.get(N)):b.li.getTargetData(v,E)})(s,h,or(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.li.getMatchingKeysForTargetId(h,m.targetId).next((p=>{l=p}))})).next((()=>s.Cs.getDocumentsMatchingQuery(h,e,t?o:Ce.min(),t?l:Oe()))).next((m=>(rI(s,zb(e),m),{documents:m,ks:l})))))}function rI(r,e,t){let s=r.Ms.get(e)||Ce.min();t.forEach(((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),r.Ms.set(e,s)}class py{constructor(){this.activeTargetIds=Kb()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class sI{constructor(){this.vo=new py,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,s){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new py,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class iI{Mo(e){}shutdown(){}}const gy="ConnectivityMonitor";class yy{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){pe(gy,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){pe(gy,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Hc=null;function tf(){return Hc===null?Hc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Hc++,"0x"+Hc.toString(16)}const kh="RestConnection",oI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class aI{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${s}/databases/${o}`,this.$o=this.databaseId.database===au?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Wo(e,t,s,o,l){const h=tf(),m=this.Qo(e,t.toUriEncodedString());pe(kh,`Sending RPC '${e}' ${h}:`,m,s);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(p,o,l);const{host:v}=new URL(m),E=Ii(v);return this.zo(e,m,p,s,E).then((b=>(pe(kh,`Received RPC '${e}' ${h}: `,b),b)),(b=>{throw Do(kh,`RPC '${e}' ${h} failed with error: `,b,"url: ",m,"request:",s),b}))}jo(e,t,s,o,l,h){return this.Wo(e,t,s,o,l)}Go(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+zo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),s&&s.headers.forEach(((o,l)=>e[l]=o))}Qo(e,t){const s=oI[e];let o=`${this.qo}/v1/${t}:${s}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}class lI{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const Mt="WebChannelConnection",Ha=(r,e,t)=>{r.listen(e,(s=>{try{t(s)}catch(o){setTimeout((()=>{throw o}),0)}}))};class Co extends aI{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Co.c_){const e=Ev();Ha(e,wv.STAT_EVENT,(t=>{t.stat===$h.PROXY?pe(Mt,"STAT_EVENT: detected buffering proxy"):t.stat===$h.NOPROXY&&pe(Mt,"STAT_EVENT: detected no buffering proxy")})),Co.c_=!0}}zo(e,t,s,o,l){const h=tf();return new Promise(((m,p)=>{const v=new xv;v.setWithCredentials(!0),v.listenOnce(_v.COMPLETE,(()=>{try{switch(v.getLastErrorCode()){case Kc.NO_ERROR:const b=v.getResponseJson();pe(Mt,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(b)),m(b);break;case Kc.TIMEOUT:pe(Mt,`RPC '${e}' ${h} timed out`),p(new he(Z.DEADLINE_EXCEEDED,"Request time out"));break;case Kc.HTTP_ERROR:const N=v.getStatus();if(pe(Mt,`RPC '${e}' ${h} failed with status:`,N,"response text:",v.getResponseText()),N>0){let L=v.getResponseJson();Array.isArray(L)&&(L=L[0]);const Q=L?.error;if(Q&&Q.status&&Q.message){const B=(function(U){const z=U.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(z)>=0?z:Z.UNKNOWN})(Q.status);p(new he(B,Q.message))}else p(new he(Z.UNKNOWN,"Server responded with status "+v.getStatus()))}else p(new he(Z.UNAVAILABLE,"Connection failed."));break;default:Te(9055,{l_:e,streamId:h,h_:v.getLastErrorCode(),P_:v.getLastError()})}}finally{pe(Mt,`RPC '${e}' ${h} completed.`)}}));const E=JSON.stringify(o);pe(Mt,`RPC '${e}' ${h} sending request:`,o),v.send(t,"POST",E,s,15)}))}T_(e,t,s){const o=tf(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=this.createWebChannelTransport(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(m.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Go(m.initMessageHeaders,t,s),m.encodeInitMessageHeaders=!0;const v=l.join("");pe(Mt,`Creating RPC '${e}' stream ${o}: ${v}`,m);const E=h.createWebChannel(v,m);this.I_(E);let b=!1,N=!1;const L=new lI({Ho:Q=>{N?pe(Mt,`Not sending because RPC '${e}' stream ${o} is closed:`,Q):(b||(pe(Mt,`Opening RPC '${e}' stream ${o} transport.`),E.open(),b=!0),pe(Mt,`RPC '${e}' stream ${o} sending:`,Q),E.send(Q))},Jo:()=>E.close()});return Ha(E,Wa.EventType.OPEN,(()=>{N||(pe(Mt,`RPC '${e}' stream ${o} transport opened.`),L.i_())})),Ha(E,Wa.EventType.CLOSE,(()=>{N||(N=!0,pe(Mt,`RPC '${e}' stream ${o} transport closed`),L.o_(),this.E_(E))})),Ha(E,Wa.EventType.ERROR,(Q=>{N||(N=!0,Do(Mt,`RPC '${e}' stream ${o} transport errored. Name:`,Q.name,"Message:",Q.message),L.o_(new he(Z.UNAVAILABLE,"The operation could not be completed")))})),Ha(E,Wa.EventType.MESSAGE,(Q=>{if(!N){const B=Q.data[0];qe(!!B,16349);const O=B,U=O?.error||O[0]?.error;if(U){pe(Mt,`RPC '${e}' stream ${o} received error:`,U);const z=U.status;let Y=(function(ce){const C=pt[ce];if(C!==void 0)return s0(C)})(z),ne=U.message;Y===void 0&&(Y=Z.INTERNAL,ne="Unknown error status: "+z+" with message "+U.message),N=!0,L.o_(new he(Y,ne)),E.close()}else pe(Mt,`RPC '${e}' stream ${o} received:`,B),L.__(B)}})),Co.u_(),setTimeout((()=>{L.s_()}),0),L}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,s){super.Go(e,t,s),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return bv()}}function cI(r){return new Co(r)}function Ah(){return typeof document<"u"?document:null}function Ou(r){return new fT(r,!0)}Co.c_=!1;class x0{constructor(e,t,s=1e3,o=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=s,this.A_=o,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-s);o>0&&pe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const vy="PersistentStream";class _0{constructor(e,t,s,o,l,h,m,p){this.Ci=e,this.b_=s,this.S_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new x0(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Z.RESOURCE_EXHAUSTED?(Lr(t.toString()),Lr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===t&&this.G_(s,o)}),(s=>{e((()=>{const o=new he(Z.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,t){const s=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{s((()=>this.listener.Zo()))})),this.stream.Yo((()=>{s((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return pe(vy,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(pe(vy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class uI extends _0{constructor(e,t,s,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,h),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=gT(this.serializer,e),s=(function(l){if(!("targetChange"in l))return Ce.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Ce.min():h.readTime?ar(h.readTime):Ce.min()})(e);return this.listener.J_(t,s)}Z_(e){const t={};t.database=Zh(this.serializer),t.addTarget=(function(l,h){let m;const p=h.target;if(m=Kh(p)?{documents:xT(l,p)}:{query:_T(l,p).ft},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=a0(l,h.resumeToken);const v=Yh(l,h.expectedCount);v!==null&&(m.expectedCount=v)}else if(h.snapshotVersion.compareTo(Ce.min())>0){m.readTime=hu(l,h.snapshotVersion.toTimestamp());const v=Yh(l,h.expectedCount);v!==null&&(m.expectedCount=v)}return m})(this.serializer,e);const s=ET(this.serializer,e);s&&(t.labels=s),this.K_(t)}X_(e){const t={};t.database=Zh(this.serializer),t.removeTarget=e,this.K_(t)}}class dI extends _0{constructor(e,t,s,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,h),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=vT(e.writeResults,e.commitTime),s=ar(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Zh(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>yT(this.serializer,s)))};this.K_(t)}}class hI{}class fI extends hI{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new he(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Wo(e,Jh(t,s),o,l,h))).catch((l=>{throw l.name==="FirebaseError"?(l.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new he(Z.UNKNOWN,l.toString())}))}jo(e,t,s,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,m])=>this.connection.jo(e,Jh(t,s),o,h,m,l))).catch((h=>{throw h.name==="FirebaseError"?(h.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new he(Z.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function mI(r,e,t,s){return new fI(r,e,t,s)}class pI{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Lr(t),this.aa=!1):pe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const wi="RemoteStore";class gI{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((h=>{s.enqueueAndForget((async()=>{Ci(this)&&(pe(wi,"Restarting streams for network reachability change."),await(async function(p){const v=Pe(p);v.Ea.add(4),await vl(v),v.Va.set("Unknown"),v.Ea.delete(4),await Mu(v)})(this))}))})),this.Va=new pI(s,o)}}async function Mu(r){if(Ci(r))for(const e of r.Ra)await e(!0)}async function vl(r){for(const e of r.Ra)await e(!1)}function w0(r,e){const t=Pe(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Of(t)?Vf(t):Wo(t).O_()&&Df(t,e))}function jf(r,e){const t=Pe(r),s=Wo(t);t.Ia.delete(e),s.O_()&&E0(t,e),t.Ia.size===0&&(s.O_()?s.L_():Ci(t)&&t.Va.set("Unknown"))}function Df(r,e){if(r.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Wo(r).Z_(e)}function E0(r,e){r.da.$e(e),Wo(r).X_(e)}function Vf(r){r.da=new cT({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Wo(r).start(),r.Va.ua()}function Of(r){return Ci(r)&&!Wo(r).x_()&&r.Ia.size>0}function Ci(r){return Pe(r).Ea.size===0}function b0(r){r.da=void 0}async function yI(r){r.Va.set("Online")}async function vI(r){r.Ia.forEach(((e,t)=>{Df(r,e)}))}async function xI(r,e){b0(r),Of(r)?(r.Va.ha(e),Vf(r)):r.Va.set("Unknown")}async function _I(r,e,t){if(r.Va.set("Online"),e instanceof o0&&e.state===2&&e.cause)try{await(async function(o,l){const h=l.cause;for(const m of l.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,h),o.Ia.delete(m),o.da.removeTarget(m))})(r,e)}catch(s){pe(wi,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await mu(r,s)}else if(e instanceof Xc?r.da.Xe(e):e instanceof i0?r.da.st(e):r.da.tt(e),!t.isEqual(Ce.min()))try{const s=await v0(r.localStore);t.compareTo(s)>=0&&await(function(l,h){const m=l.da.Tt(h);return m.targetChanges.forEach(((p,v)=>{if(p.resumeToken.approximateByteSize()>0){const E=l.Ia.get(v);E&&l.Ia.set(v,E.withResumeToken(p.resumeToken,h))}})),m.targetMismatches.forEach(((p,v)=>{const E=l.Ia.get(p);if(!E)return;l.Ia.set(p,E.withResumeToken(Pt.EMPTY_BYTE_STRING,E.snapshotVersion)),E0(l,p);const b=new Ts(E.target,p,v,E.sequenceNumber);Df(l,b)})),l.remoteSyncer.applyRemoteEvent(m)})(r,t)}catch(s){pe(wi,"Failed to raise snapshot:",s),await mu(r,s)}}async function mu(r,e,t){if(!Ho(e))throw e;r.Ea.add(1),await vl(r),r.Va.set("Offline"),t||(t=()=>v0(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{pe(wi,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Mu(r)}))}function T0(r,e){return e().catch((t=>mu(r,t,e)))}async function Lu(r){const e=Pe(r),t=Vs(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:vf;for(;wI(e);)try{const o=await tI(e.localStore,s);if(o===null){e.Ta.length===0&&t.L_();break}s=o.batchId,EI(e,o)}catch(o){await mu(e,o)}I0(e)&&N0(e)}function wI(r){return Ci(r)&&r.Ta.length<10}function EI(r,e){r.Ta.push(e);const t=Vs(r);t.O_()&&t.Y_&&t.ea(e.mutations)}function I0(r){return Ci(r)&&!Vs(r).x_()&&r.Ta.length>0}function N0(r){Vs(r).start()}async function bI(r){Vs(r).ra()}async function TI(r){const e=Vs(r);for(const t of r.Ta)e.ea(t.mutations)}async function II(r,e,t){const s=r.Ta.shift(),o=Nf.from(s,e,t);await T0(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Lu(r)}async function NI(r,e){e&&Vs(r).Y_&&await(async function(s,o){if((function(h){return oT(h)&&h!==Z.ABORTED})(o.code)){const l=s.Ta.shift();Vs(s).B_(),await T0(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o))),await Lu(s)}})(r,e),I0(r)&&N0(r)}async function xy(r,e){const t=Pe(r);t.asyncQueue.verifyOperationInProgress(),pe(wi,"RemoteStore received new credentials");const s=Ci(t);t.Ea.add(3),await vl(t),s&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Mu(t)}async function SI(r,e){const t=Pe(r);e?(t.Ea.delete(2),await Mu(t)):e||(t.Ea.add(2),await vl(t),t.Va.set("Unknown"))}function Wo(r){return r.ma||(r.ma=(function(t,s,o){const l=Pe(t);return l.sa(),new uI(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Zo:yI.bind(null,r),Yo:vI.bind(null,r),t_:xI.bind(null,r),J_:_I.bind(null,r)}),r.Ra.push((async e=>{e?(r.ma.B_(),Of(r)?Vf(r):r.Va.set("Unknown")):(await r.ma.stop(),b0(r))}))),r.ma}function Vs(r){return r.fa||(r.fa=(function(t,s,o){const l=Pe(t);return l.sa(),new dI(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),Yo:bI.bind(null,r),t_:NI.bind(null,r),ta:TI.bind(null,r),na:II.bind(null,r)}),r.Ra.push((async e=>{e?(r.fa.B_(),await Lu(r)):(await r.fa.stop(),r.Ta.length>0&&(pe(wi,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class Mf{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new Or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const h=Date.now()+s,m=new Mf(e,t,h,o,l);return m.start(s),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Lf(r,e){if(Lr("AsyncQueue",`${e}: ${r}`),Ho(r))return new he(Z.UNAVAILABLE,`${e}: ${r}`);throw r}class ko{static emptySet(e){return new ko(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||we.comparator(t.key,s.key):(t,s)=>we.comparator(t.key,s.key),this.keyedMap=Ga(),this.sortedSet=new st(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ko)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new ko;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class _y{constructor(){this.ga=new st(we.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Te(63341,{Vt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class Uo{constructor(e,t,s,o,l,h,m,p,v){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=v}static fromInitialDocuments(e,t,s,o,l){const h=[];return t.forEach((m=>{h.push({type:0,doc:m})})),new Uo(e,t,ko.emptySet(t),h,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}class CI{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class kI{constructor(){this.queries=wy(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const o=Pe(t),l=o.queries;o.queries=wy(),l.forEach(((h,m)=>{for(const p of m.ba)p.onError(s)}))})(this,new he(Z.ABORTED,"Firestore shutting down"))}}function wy(){return new Si((r=>qv(r)),Pu)}async function S0(r,e){const t=Pe(r);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.Sa()&&e.Da()&&(s=2):(l=new CI,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const m=Lf(h,`Initialization of query '${bo(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Ff(t)}async function C0(r,e){const t=Pe(r),s=e.query;let o=3;const l=t.queries.get(s);if(l){const h=l.ba.indexOf(e);h>=0&&(l.ba.splice(h,1),l.ba.length===0?o=e.Da()?0:1:!l.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function AI(r,e){const t=Pe(r);let s=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const m of h.ba)m.Fa(o)&&(s=!0);h.wa=o}}s&&Ff(t)}function PI(r,e,t){const s=Pe(r),o=s.queries.get(e);if(o)for(const l of o.ba)l.onError(t);s.queries.delete(e)}function Ff(r){r.Ca.forEach((e=>{e.next()}))}var nf,Ey;(Ey=nf||(nf={})).Ma="default",Ey.Cache="cache";class k0{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Uo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.Ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Uo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==nf.Cache}}class A0{constructor(e){this.key=e}}class P0{constructor(e){this.key=e}}class RI{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Oe(),this.mutatedKeys=Oe(),this.eu=Wv(e),this.tu=new ko(this.eu)}get nu(){return this.Za}ru(e,t){const s=t?t.iu:new _y,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((E,b)=>{const N=o.get(E),L=Ru(this.query,b)?b:null,Q=!!N&&this.mutatedKeys.has(N.key),B=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let O=!1;N&&L?N.data.isEqual(L.data)?Q!==B&&(s.track({type:3,doc:L}),O=!0):this.su(N,L)||(s.track({type:2,doc:L}),O=!0,(p&&this.eu(L,p)>0||v&&this.eu(L,v)<0)&&(m=!0)):!N&&L?(s.track({type:0,doc:L}),O=!0):N&&!L&&(s.track({type:1,doc:N}),O=!0,(p||v)&&(m=!0)),O&&(L?(h=h.add(L),l=B?l.add(E):l.delete(E)):(h=h.delete(E),l=l.delete(E)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const E=this.query.limitType==="F"?h.last():h.first();h=h.delete(E.key),l=l.delete(E.key),s.track({type:1,doc:E})}return{tu:h,iu:s,Ss:m,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((E,b)=>(function(L,Q){const B=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te(20277,{Vt:O})}};return B(L)-B(Q)})(E.type,b.type)||this.eu(E.doc,b.doc))),this.ou(s),o=o??!1;const m=t&&!o?this._u():[],p=this.Ya.size===0&&this.current&&!o?1:0,v=p!==this.Xa;return this.Xa=p,h.length!==0||v?{snapshot:new Uo(this.query,e.tu,l,h,e.mutatedKeys,p===0,v,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new _y,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Oe(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Ya=this.Ya.add(s.key))}));const t=[];return e.forEach((s=>{this.Ya.has(s)||t.push(new P0(s))})),this.Ya.forEach((s=>{e.has(s)||t.push(new A0(s))})),t}cu(e){this.Za=e.ks,this.Ya=Oe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Uo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Uf="SyncEngine";class jI{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class DI{constructor(e){this.key=e,this.hu=!1}}class VI{constructor(e,t,s,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new Si((m=>qv(m)),Pu),this.Iu=new Map,this.Eu=new Set,this.Ru=new st(we.comparator),this.Au=new Map,this.Vu=new kf,this.du={},this.mu=new Map,this.fu=Fo.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function OI(r,e,t=!0){const s=M0(r);let o;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await R0(s,e,t,!0),o}async function MI(r,e){const t=M0(r);await R0(t,e,!0,!1)}async function R0(r,e,t,s){const o=await nI(r.localStore,or(e)),l=o.targetId,h=r.sharedClientState.addLocalQueryTarget(l,t);let m;return s&&(m=await LI(r,e,l,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&w0(r.remoteStore,o),m}async function LI(r,e,t,s,o){r.pu=(b,N,L)=>(async function(B,O,U,z){let Y=O.view.ru(U);Y.Ss&&(Y=await my(B.localStore,O.query,!1).then((({documents:C})=>O.view.ru(C,Y))));const ne=z&&z.targetChanges.get(O.targetId),W=z&&z.targetMismatches.get(O.targetId)!=null,ce=O.view.applyChanges(Y,B.isPrimaryClient,ne,W);return Ty(B,O.targetId,ce.au),ce.snapshot})(r,b,N,L);const l=await my(r.localStore,e,!0),h=new RI(e,l.ks),m=h.ru(l.documents),p=yl.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",o),v=h.applyChanges(m,r.isPrimaryClient,p);Ty(r,t,v.au);const E=new jI(e,t,h);return r.Tu.set(e,E),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),v.snapshot}async function FI(r,e,t){const s=Pe(r),o=s.Tu.get(e),l=s.Iu.get(o.targetId);if(l.length>1)return s.Iu.set(o.targetId,l.filter((h=>!Pu(h,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await ef(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&jf(s.remoteStore,o.targetId),rf(s,o.targetId)})).catch($o)):(rf(s,o.targetId),await ef(s.localStore,o.targetId,!0))}async function UI(r,e){const t=Pe(r),s=t.Tu.get(e),o=t.Iu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),jf(t.remoteStore,s.targetId))}async function BI(r,e,t){const s=KI(r);try{const o=await(function(h,m){const p=Pe(h),v=et.now(),E=m.reduce(((L,Q)=>L.add(Q.key)),Oe());let b,N;return p.persistence.runTransaction("Locally write mutations","readwrite",(L=>{let Q=Fr(),B=Oe();return p.xs.getEntries(L,E).next((O=>{Q=O,Q.forEach(((U,z)=>{z.isValidDocument()||(B=B.add(U))}))})).next((()=>p.localDocuments.getOverlayedDocuments(L,Q))).next((O=>{b=O;const U=[];for(const z of m){const Y=tT(z,b.get(z.key).overlayedDocument);Y!=null&&U.push(new Ls(z.key,Y,Mv(Y.value.mapValue),En.exists(!0)))}return p.mutationQueue.addMutationBatch(L,v,U,m)})).next((O=>{N=O;const U=O.applyToLocalDocumentSet(b,B);return p.documentOverlayCache.saveOverlays(L,O.batchId,U)}))})).then((()=>({batchId:N.batchId,changes:Kv(b)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(h,m,p){let v=h.du[h.currentUser.toKey()];v||(v=new st(Ve)),v=v.insert(m,p),h.du[h.currentUser.toKey()]=v})(s,o.batchId,t),await xl(s,o.changes),await Lu(s.remoteStore)}catch(o){const l=Lf(o,"Failed to persist write");t.reject(l)}}async function j0(r,e){const t=Pe(r);try{const s=await ZT(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const h=t.Au.get(l);h&&(qe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?qe(h.hu,14607):o.removedDocuments.size>0&&(qe(h.hu,42227),h.hu=!1))})),await xl(t,s,e)}catch(s){await $o(s)}}function by(r,e,t){const s=Pe(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Tu.forEach(((l,h)=>{const m=h.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(h,m){const p=Pe(h);p.onlineState=m;let v=!1;p.queries.forEach(((E,b)=>{for(const N of b.ba)N.va(m)&&(v=!0)})),v&&Ff(p)})(s.eventManager,e),o.length&&s.Pu.J_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function zI(r,e,t){const s=Pe(r);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Au.get(e),l=o&&o.key;if(l){let h=new st(we.comparator);h=h.insert(l,Ut.newNoDocument(l,Ce.min()));const m=Oe().add(l),p=new Vu(Ce.min(),new Map,new st(Ve),h,m);await j0(s,p),s.Ru=s.Ru.remove(l),s.Au.delete(e),Bf(s)}else await ef(s.localStore,e,!1).then((()=>rf(s,e,t))).catch($o)}async function $I(r,e){const t=Pe(r),s=e.batch.batchId;try{const o=await XT(t.localStore,e);V0(t,s,null),D0(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await xl(t,o)}catch(o){await $o(o)}}async function HI(r,e,t){const s=Pe(r);try{const o=await(function(h,m){const p=Pe(h);return p.persistence.runTransaction("Reject batch","readwrite-primary",(v=>{let E;return p.mutationQueue.lookupMutationBatch(v,m).next((b=>(qe(b!==null,37113),E=b.keys(),p.mutationQueue.removeMutationBatch(v,b)))).next((()=>p.mutationQueue.performConsistencyCheck(v))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(v,E,m))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,E))).next((()=>p.localDocuments.getDocuments(v,E)))}))})(s.localStore,e);V0(s,e,t),D0(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await xl(s,o)}catch(o){await $o(o)}}function D0(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function V0(r,e,t){const s=Pe(r);let o=s.du[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.du[s.currentUser.toKey()]=o}}function rf(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),t&&r.Pu.yu(s,t);r.Iu.delete(e),r.isPrimaryClient&&r.Vu.Gr(e).forEach((s=>{r.Vu.containsKey(s)||O0(r,s)}))}function O0(r,e){r.Eu.delete(e.path.canonicalString());const t=r.Ru.get(e);t!==null&&(jf(r.remoteStore,t),r.Ru=r.Ru.remove(e),r.Au.delete(t),Bf(r))}function Ty(r,e,t){for(const s of t)s instanceof A0?(r.Vu.addReference(s.key,e),qI(r,s)):s instanceof P0?(pe(Uf,"Document no longer in limbo: "+s.key),r.Vu.removeReference(s.key,e),r.Vu.containsKey(s.key)||O0(r,s.key)):Te(19791,{wu:s})}function qI(r,e){const t=e.key,s=t.path.canonicalString();r.Ru.get(t)||r.Eu.has(s)||(pe(Uf,"New document in limbo: "+t),r.Eu.add(s),Bf(r))}function Bf(r){for(;r.Eu.size>0&&r.Ru.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new we(Ye.fromString(e)),s=r.fu.next();r.Au.set(s,new DI(t)),r.Ru=r.Ru.insert(t,s),w0(r.remoteStore,new Ts(or(bf(t.path)),s,"TargetPurposeLimboResolution",Cu.ce))}}async function xl(r,e,t){const s=Pe(r),o=[],l=[],h=[];s.Tu.isEmpty()||(s.Tu.forEach(((m,p)=>{h.push(s.pu(p,e,t).then((v=>{if((v||t)&&s.isPrimaryClient){const E=v?!v.fromCache:t?.targetChanges.get(p.targetId)?.current;s.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(v){o.push(v);const E=Pf.Es(p.targetId,v);l.push(E)}})))})),await Promise.all(h),s.Pu.J_(o),await(async function(p,v){const E=Pe(p);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>ee.forEach(v,(N=>ee.forEach(N.Ts,(L=>E.persistence.referenceDelegate.addReference(b,N.targetId,L))).next((()=>ee.forEach(N.Is,(L=>E.persistence.referenceDelegate.removeReference(b,N.targetId,L)))))))))}catch(b){if(!Ho(b))throw b;pe(Rf,"Failed to update sequence numbers: "+b)}for(const b of v){const N=b.targetId;if(!b.fromCache){const L=E.vs.get(N),Q=L.snapshotVersion,B=L.withLastLimboFreeSnapshotVersion(Q);E.vs=E.vs.insert(N,B)}}})(s.localStore,l))}async function WI(r,e){const t=Pe(r);if(!t.currentUser.isEqual(e)){pe(Uf,"User change. New user:",e.toKey());const s=await y0(t.localStore,e);t.currentUser=e,(function(l,h){l.mu.forEach((m=>{m.forEach((p=>{p.reject(new he(Z.CANCELLED,h))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await xl(t,s.Ns)}}function GI(r,e){const t=Pe(r),s=t.Au.get(e);if(s&&s.hu)return Oe().add(s.key);{let o=Oe();const l=t.Iu.get(e);if(!l)return o;for(const h of l){const m=t.Tu.get(h);o=o.unionWith(m.view.nu)}return o}}function M0(r){const e=Pe(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=j0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=GI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zI.bind(null,e),e.Pu.J_=AI.bind(null,e.eventManager),e.Pu.yu=PI.bind(null,e.eventManager),e}function KI(r){const e=Pe(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$I.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=HI.bind(null,e),e}class pu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ou(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return JT(this.persistence,new KT,e.initialUser,this.serializer)}Cu(e){return new g0(Af.Vi,this.serializer)}Du(e){return new sI}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}pu.provider={build:()=>new pu};class QI extends pu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){qe(this.persistence.referenceDelegate instanceof fu,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new jT(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Zt.withCacheSize(this.cacheSizeBytes):Zt.DEFAULT;return new g0((s=>fu.Vi(s,t)),this.serializer)}}class sf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>by(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=WI.bind(null,this.syncEngine),await SI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new kI})()}createDatastore(e){const t=Ou(e.databaseInfo.databaseId),s=cI(e.databaseInfo);return mI(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,l,h,m){return new gI(s,o,l,h,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>by(this.syncEngine,t,0)),(function(){return yy.v()?new yy:new iI})())}createSyncEngine(e,t){return(function(o,l,h,m,p,v,E){const b=new VI(o,l,h,m,p,v);return E&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const s=Pe(t);pe(wi,"RemoteStore shutting down."),s.Ea.add(5),await vl(s),s.Aa.shutdown(),s.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}sf.provider={build:()=>new sf};class L0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Lr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Os="FirestoreClient";class YI{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this._databaseInfo=o,this.user=Ft.UNAUTHENTICATED,this.clientId=yf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async h=>{pe(Os,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(s,(h=>(pe(Os,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Lf(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Ph(r,e){r.asyncQueue.verifyOperationInProgress(),pe(Os,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener((async o=>{s.isEqual(o)||(await y0(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function Iy(r,e){r.asyncQueue.verifyOperationInProgress();const t=await JI(r);pe(Os,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((s=>xy(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,o)=>xy(e.remoteStore,o))),r._onlineComponents=e}async function JI(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){pe(Os,"Using user provided OfflineComponentProvider");try{await Ph(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===Z.FAILED_PRECONDITION||o.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Do("Error using user provided cache. Falling back to memory cache: "+t),await Ph(r,new pu)}}else pe(Os,"Using default OfflineComponentProvider"),await Ph(r,new QI(void 0));return r._offlineComponents}async function F0(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(pe(Os,"Using user provided OnlineComponentProvider"),await Iy(r,r._uninitializedComponentsProvider._online)):(pe(Os,"Using default OnlineComponentProvider"),await Iy(r,new sf))),r._onlineComponents}function XI(r){return F0(r).then((e=>e.syncEngine))}async function U0(r){const e=await F0(r),t=e.eventManager;return t.onListen=OI.bind(null,e.syncEngine),t.onUnlisten=FI.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=MI.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=UI.bind(null,e.syncEngine),t}function ZI(r,e,t={}){const s=new Or;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,m,p,v){const E=new L0({next:N=>{E.Nu(),h.enqueueAndForget((()=>C0(l,b)));const L=N.docs.has(m);!L&&N.fromCache?v.reject(new he(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&N.fromCache&&p&&p.source==="server"?v.reject(new he(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(N)},error:N=>v.reject(N)}),b=new k0(bf(m.path),E,{includeMetadataChanges:!0,Ka:!0});return S0(l,b)})(await U0(r),r.asyncQueue,e,t,s))),s.promise}function e1(r,e,t={}){const s=new Or;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,m,p,v){const E=new L0({next:N=>{E.Nu(),h.enqueueAndForget((()=>C0(l,b))),N.fromCache&&p.source==="server"?v.reject(new he(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(N)},error:N=>v.reject(N)}),b=new k0(m,E,{includeMetadataChanges:!0,Ka:!0});return S0(l,b)})(await U0(r),r.asyncQueue,e,t,s))),s.promise}function t1(r,e){const t=new Or;return r.asyncQueue.enqueueAndForget((async()=>BI(await XI(r),e,t))),t.promise}function B0(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const n1="ComponentProvider",Ny=new Map;function r1(r,e,t,s,o){return new bb(r,e,t,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,B0(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,s)}const z0="firestore.googleapis.com",Sy=!0;class Cy{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new he(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=z0,this.ssl=Sy}else this.host=e.host,this.ssl=e.ssl??Sy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=p0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<PT)throw new he(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}db("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=B0(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new he(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new he(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new he(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Fu{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Cy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Cy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new tb;switch(s.type){case"firstParty":return new ib(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new he(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=Ny.get(t);s&&(pe(n1,"Removing Datastore"),Ny.delete(t),s.terminate())})(this),Promise.resolve()}}function s1(r,e,t,s={}){r=Mn(r,Fu);const o=Ii(e),l=r._getSettings(),h={...l,emulatorOptions:r._getEmulatorOptions()},m=`${e}:${t}`;o&&(df(`https://${m}`),hf("Firestore",!0)),l.host!==z0&&l.host!==m&&Do("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...l,host:m,ssl:o,emulatorOptions:s};if(!ks(p,h)&&(r._setSettings(p),s.mockUserToken)){let v,E;if(typeof s.mockUserToken=="string")v=s.mockUserToken,E=Ft.MOCK_USER;else{v=hv(s.mockUserToken,r._app?.options.projectId);const b=s.mockUserToken.sub||s.mockUserToken.user_id;if(!b)throw new he(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new Ft(b)}r._authCredentials=new nb(new Iv(v,E))}}class Fs{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Fs(this.firestore,e,this._query)}}class dt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new dt(this.firestore,e,this._key)}toJSON(){return{type:dt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(pl(t,dt._jsonSchema))return new dt(e,s||null,new we(Ye.fromString(t.referencePath)))}}dt._jsonSchemaVersion="firestore/documentReference/1.0",dt._jsonSchema={type:yt("string",dt._jsonSchemaVersion),referencePath:yt("string")};class Cs extends Fs{constructor(e,t,s){super(e,t,bf(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new dt(this.firestore,null,new we(e))}withConverter(e){return new Cs(this.firestore,e,this._path)}}function _o(r,e,...t){if(r=zt(r),Nv("collection","path",e),r instanceof Fu){const s=Ye.fromString(e,...t);return Bg(s),new Cs(r,null,s)}{if(!(r instanceof dt||r instanceof Cs))throw new he(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Ye.fromString(e,...t));return Bg(s),new Cs(r.firestore,null,s)}}function sr(r,e,...t){if(r=zt(r),arguments.length===1&&(e=yf.newId()),Nv("doc","path",e),r instanceof Fu){const s=Ye.fromString(e,...t);return Ug(s),new dt(r,null,new we(s))}{if(!(r instanceof dt||r instanceof Cs))throw new he(Z.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Ye.fromString(e,...t));return Ug(s),new dt(r.firestore,r instanceof Cs?r.converter:null,new we(s))}}const ky="AsyncQueue";class Ay{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new x0(this,"async_queue_retry"),this._c=()=>{const s=Ah();s&&pe(ky,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=Ah();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Ah();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Or;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Ho(e))throw e;pe(ky,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Lr("INTERNAL UNHANDLED ERROR: ",Py(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Mf.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&Te(47125,{Pc:Py(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Py(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class ki extends Fu{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new Ay,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ay(e),this._firestoreClient=void 0,await e}}}function i1(r,e){const t=typeof r=="object"?r:pf(),s=typeof r=="string"?r:au,o=Nu(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=cv("firestore");l&&s1(o,...l)}return o}function zf(r){if(r._terminated)throw new he(Z.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||o1(r),r._firestoreClient}function o1(r){const e=r._freezeSettings(),t=r1(r._databaseId,r._app?.options.appId||"",r._persistenceKey,r._app?.options.apiKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new YI(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(o){const l=o?._online.build();return{_offline:o?._offline.build(l),_online:l}})(r._componentsProvider))}class wn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wn(Pt.fromBase64String(e))}catch(t){throw new he(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new wn(Pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:wn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(pl(e,wn._jsonSchema))return wn.fromBase64String(e.bytes)}}wn._jsonSchemaVersion="firestore/bytes/1.0",wn._jsonSchema={type:yt("string",wn._jsonSchemaVersion),bytes:yt("string")};class $f{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new he(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new At(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class _l{constructor(e){this._methodName=e}}class lr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new he(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new he(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:lr._jsonSchemaVersion}}static fromJSON(e){if(pl(e,lr._jsonSchema))return new lr(e.latitude,e.longitude)}}lr._jsonSchemaVersion="firestore/geoPoint/1.0",lr._jsonSchema={type:yt("string",lr._jsonSchemaVersion),latitude:yt("number"),longitude:yt("number")};class On{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:On._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(pl(e,On._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new On(e.vectorValues);throw new he(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}On._jsonSchemaVersion="firestore/vectorValue/1.0",On._jsonSchema={type:yt("string",On._jsonSchemaVersion),vectorValues:yt("object")};const a1=/^__.*__$/;class l1{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Ls(e,this.data,this.fieldMask,t,this.fieldTransforms):new gl(e,this.data,t,this.fieldTransforms)}}class $0{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Ls(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function H0(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te(40011,{dataSource:r})}}class Uu{constructor(e,t,s,o,l,h){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Uu({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const t=this.path?.child(e),s=this.contextWith({path:t,arrayElement:!1});return s.validatePathSegment(e),s}childContextForFieldPath(e){const t=this.path?.child(e),s=this.contextWith({path:t,arrayElement:!1});return s.validatePath(),s}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return gu(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(H0(this.dataSource)&&a1.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class c1{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Ou(e)}createContext(e,t,s,o=!1){return new Uu({dataSource:e,methodName:t,targetDoc:s,path:At.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Bu(r){const e=r._freezeSettings(),t=Ou(r._databaseId);return new c1(r._databaseId,!!e.ignoreUndefinedProperties,t)}function q0(r,e,t,s,o,l={}){const h=r.createContext(l.merge||l.mergeFields?2:0,e,t,o);Wf("Data must be an object, but it was:",h,s);const m=W0(s,h);let p,v;if(l.merge)p=new hn(h.fieldMask),v=h.fieldTransforms;else if(l.mergeFields){const E=[];for(const b of l.mergeFields){const N=Ei(e,b,t);if(!h.contains(N))throw new he(Z.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);Q0(E,N)||E.push(N)}p=new hn(E),v=h.fieldTransforms.filter((b=>p.covers(b.field)))}else p=null,v=h.fieldTransforms;return new l1(new en(m),p,v)}class zu extends _l{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zu}}function u1(r,e,t){return new Uu({dataSource:3,targetDoc:e.settings.targetDoc,methodName:r._methodName,arrayElement:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Hf extends _l{_toFieldTransform(e){return new t0(e.path,new ul)}isEqual(e){return e instanceof Hf}}class qf extends _l{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=u1(this,e,!0),s=this.Ac.map((l=>Go(l,t))),o=new Lo(s);return new t0(e.path,o)}isEqual(e){return e instanceof qf&&ks(this.Ac,e.Ac)}}function d1(r,e,t,s){const o=r.createContext(1,e,t);Wf("Data must be an object, but it was:",o,s);const l=[],h=en.empty();Ms(s,((p,v)=>{const E=K0(e,p,t);v=zt(v);const b=o.childContextForFieldPath(E);if(v instanceof zu)l.push(E);else{const N=Go(v,b);N!=null&&(l.push(E),h.set(E,N))}}));const m=new hn(l);return new $0(h,m,o.fieldTransforms)}function h1(r,e,t,s,o,l){const h=r.createContext(1,e,t),m=[Ei(e,s,t)],p=[o];if(l.length%2!=0)throw new he(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<l.length;N+=2)m.push(Ei(e,l[N])),p.push(l[N+1]);const v=[],E=en.empty();for(let N=m.length-1;N>=0;--N)if(!Q0(v,m[N])){const L=m[N];let Q=p[N];Q=zt(Q);const B=h.childContextForFieldPath(L);if(Q instanceof zu)v.push(L);else{const O=Go(Q,B);O!=null&&(v.push(L),E.set(L,O))}}const b=new hn(v);return new $0(E,b,h.fieldTransforms)}function f1(r,e,t,s=!1){return Go(t,r.createContext(s?4:3,e))}function Go(r,e){if(G0(r=zt(r)))return Wf("Unsupported field value:",e,r),W0(r,e);if(r instanceof _l)return(function(s,o){if(!H0(o.dataSource))throw o.createError(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(s,o){const l=[];let h=0;for(const m of s){let p=Go(m,o.childContextForArray(h));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),h++}return{arrayValue:{values:l}}})(r,e)}return(function(s,o){if((s=zt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return Qb(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=et.fromDate(s);return{timestampValue:hu(o.serializer,l)}}if(s instanceof et){const l=new et(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:hu(o.serializer,l)}}if(s instanceof lr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof wn)return{bytesValue:a0(o.serializer,s._byteString)};if(s instanceof dt){const l=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(l))throw o.createError(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Cf(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof On)return(function(h,m){const p=h instanceof On?h.toArray():h;return{mapValue:{fields:{[Vv]:{stringValue:Ov},[lu]:{arrayValue:{values:p.map((E=>{if(typeof E!="number")throw m.createError("VectorValues must only contain numeric values.");return Tf(m.serializer,E)}))}}}}}})(s,o);if(m0(s))return s._toProto(o.serializer);throw o.createError(`Unsupported field value: ${Su(s)}`)})(r,e)}function W0(r,e){const t={};return kv(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ms(r,((s,o)=>{const l=Go(o,e.childContextForField(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function G0(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof et||r instanceof lr||r instanceof wn||r instanceof dt||r instanceof _l||r instanceof On||m0(r))}function Wf(r,e,t){if(!G0(t)||!Sv(t)){const s=Su(t);throw s==="an object"?e.createError(r+" a custom object"):e.createError(r+" "+s)}}function Ei(r,e,t){if((e=zt(e))instanceof $f)return e._internalPath;if(typeof e=="string")return K0(r,e);throw gu("Field path arguments must be of type string or ",r,!1,void 0,t)}const m1=new RegExp("[~\\*/\\[\\]]");function K0(r,e,t){if(e.search(m1)>=0)throw gu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new $f(...e.split("."))._internalPath}catch{throw gu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function gu(r,e,t,s,o){const l=s&&!s.isEmpty(),h=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(l||h)&&(p+=" (found",l&&(p+=` in field ${s}`),h&&(p+=` in document ${o}`),p+=")"),new he(Z.INVALID_ARGUMENT,m+r+p)}function Q0(r,e){return r.some((t=>t.isEqual(e)))}class p1{convertValue(e,t="none"){switch(Ds(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(js(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Te(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Ms(e,((o,l)=>{s[o]=this.convertValue(l,t)})),s}convertVectorValue(e){const t=e.fields?.[lu].arrayValue?.values?.map((s=>ut(s.doubleValue)));return new On(t)}convertGeoPoint(e){return new lr(ut(e.latitude),ut(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Au(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(ol(e));default:return null}}convertTimestamp(e){const t=Rs(e);return new et(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Ye.fromString(e);qe(f0(s),9688,{name:e});const o=new al(s.get(1),s.get(3)),l=new we(s.popFirst(5));return o.isEqual(t)||Lr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}class Y0 extends p1{constructor(e){super(),this.firestore=e}convertBytes(e){return new wn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new dt(this.firestore,null,t)}}function gi(){return new Hf("serverTimestamp")}function g1(...r){return new qf("arrayUnion",r)}const Ry="@firebase/firestore",jy="4.10.0";class J0{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new dt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new y1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const t=this._document.data.field(Ei("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class y1 extends J0{data(){return super.data()}}function v1(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new he(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Gf{}class Kf extends Gf{}function qc(r,e,...t){let s=[];e instanceof Gf&&s.push(e),s=s.concat(t),(function(l){const h=l.filter((p=>p instanceof Qf)).length,m=l.filter((p=>p instanceof $u)).length;if(h>1||h>0&&m>0)throw new he(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)r=o._apply(r);return r}class $u extends Kf{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new $u(e,t,s)}_apply(e){const t=this._parse(e);return X0(e._query,t),new Fs(e.firestore,e.converter,Qh(e._query,t))}_parse(e){const t=Bu(e.firestore);return(function(l,h,m,p,v,E,b){let N;if(v.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new he(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){Vy(b,E);const Q=[];for(const B of b)Q.push(Dy(p,l,B));N={arrayValue:{values:Q}}}else N=Dy(p,l,b)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||Vy(b,E),N=f1(m,h,b,E==="in"||E==="not-in");return gt.create(v,E,N)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Rh(r,e,t){const s=e,o=Ei("where",r);return $u._create(o,s,t)}class Qf extends Gf{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Qf(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:Ln.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let h=o;const m=l.getFlattenedFilters();for(const p of m)X0(h,p),h=Qh(h,p)})(e._query,t),new Fs(e.firestore,e.converter,Qh(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Yf extends Kf{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Yf(e,t)}_apply(e){const t=(function(o,l,h){if(o.startAt!==null)throw new he(Z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new he(Z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new cl(l,h)})(e._query,this._field,this._direction);return new Fs(e.firestore,e.converter,Bb(e._query,t))}}function x1(r,e="asc"){const t=e,s=Ei("orderBy",r);return Yf._create(s,t)}class Jf extends Kf{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new Jf(e,t,s)}_apply(e){return new Fs(e.firestore,e.converter,uu(e._query,this._limit,this._limitType))}}function _1(r){return hb("limit",r),Jf._create("limit",r,"F")}function Dy(r,e,t){if(typeof(t=zt(t))=="string"){if(t==="")throw new he(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Hv(e)&&t.indexOf("/")!==-1)throw new he(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Ye.fromString(t));if(!we.isDocumentKey(s))throw new he(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Qg(r,new we(s))}if(t instanceof dt)return Qg(r,t._key);throw new he(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Su(t)}.`)}function Vy(r,e){if(!Array.isArray(r)||r.length===0)throw new he(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function X0(r,e){const t=(function(o,l){for(const h of o)for(const m of h.getFlattenedFilters())if(l.indexOf(m.op)>=0)return m.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new he(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Z0(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}class Qa{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class yi extends J0{constructor(e,t,s,o,l,h){super(e,t,s,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Zc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Ei("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=yi._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}yi._jsonSchemaVersion="firestore/documentSnapshot/1.0",yi._jsonSchema={type:yt("string",yi._jsonSchemaVersion),bundleSource:yt("string","DocumentSnapshot"),bundleName:yt("string"),bundle:yt("string")};class Zc extends yi{data(e={}){return super.data(e)}}class Ao{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Qa(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new Zc(this._firestore,this._userDataWriter,s.key,s,new Qa(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new he(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((m=>{const p=new Zc(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Qa(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>l||m.type!==3)).map((m=>{const p=new Zc(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Qa(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,E=-1;return m.type!==0&&(v=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),E=h.indexOf(m.doc.key)),{type:w1(m.type),doc:p,oldIndex:v,newIndex:E}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ao._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=yf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function w1(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te(61501,{type:r})}}Ao._jsonSchemaVersion="firestore/querySnapshot/1.0",Ao._jsonSchema={type:yt("string",Ao._jsonSchemaVersion),bundleSource:yt("string","QuerySnapshot"),bundleName:yt("string"),bundle:yt("string")};function Ya(r){r=Mn(r,dt);const e=Mn(r.firestore,ki),t=zf(e);return ZI(t,r._key).then((s=>T1(e,r,s)))}function qa(r){r=Mn(r,Fs);const e=Mn(r.firestore,ki),t=zf(e),s=new Y0(e);return v1(r._query),e1(t,r._query).then((o=>new Ao(e,s,r,o)))}function jh(r,e,t){r=Mn(r,dt);const s=Mn(r.firestore,ki),o=Z0(r.converter,e,t),l=Bu(s);return Hu(s,[q0(l,"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,En.none())])}function ex(r,e,t,...s){r=Mn(r,dt);const o=Mn(r.firestore,ki),l=Bu(o);let h;return h=typeof(e=zt(e))=="string"||e instanceof $f?h1(l,"updateDoc",r._key,e,t,s):d1(l,"updateDoc",r._key,e),Hu(o,[h.toMutation(r._key,En.exists(!0))])}function E1(r){return Hu(Mn(r.firestore,ki),[new If(r._key,En.none())])}function b1(r,e){const t=Mn(r.firestore,ki),s=sr(r),o=Z0(r.converter,e),l=Bu(r.firestore);return Hu(t,[q0(l,"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,En.exists(!1))]).then((()=>s))}function Hu(r,e){const t=zf(r);return t1(t,e)}function T1(r,e,t){const s=t.docs.get(e._key),o=new Y0(r);return new yi(r,o,e._key,s,new Qa(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){eb(Ni),xi(new As("firestore",((s,{instanceIdentifier:o,options:l})=>{const h=s.getProvider("app").getImmediate(),m=new ki(new rb(s.getProvider("auth-internal")),new ob(h,s.getProvider("app-check-internal")),Tb(h,o),h);return l={useFetchStreams:t,...l},m._setSettings(l),m}),"PUBLIC").setMultipleInstances(!0)),ir(Ry,jy,e),ir(Ry,jy,"esm2020")})();var I1="firebase",N1="12.8.0";ir(I1,N1,"app");function tx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const S1=tx,nx=new fl("auth","Firebase",tx());const yu=new ff("@firebase/auth");function C1(r,...e){yu.logLevel<=De.WARN&&yu.warn(`Auth (${Ni}): ${r}`,...e)}function eu(r,...e){yu.logLevel<=De.ERROR&&yu.error(`Auth (${Ni}): ${r}`,...e)}function Ur(r,...e){throw Xf(r,...e)}function cr(r,...e){return Xf(r,...e)}function rx(r,e,t){const s={...S1(),[e]:t};return new fl("auth","Firebase",s).create(e,{appName:r.name})}function vi(r){return rx(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Xf(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return nx.create(r,...e)}function Ne(r,e,...t){if(!r)throw Xf(e,...t)}function Dr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw eu(e),new Error(e)}function Br(r,e){r||Dr(e)}function of(){return typeof self<"u"&&self.location?.href||""}function k1(){return Oy()==="http:"||Oy()==="https:"}function Oy(){return typeof self<"u"&&self.location?.protocol||null}function A1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(k1()||jw()||"connection"in navigator)?navigator.onLine:!0}function P1(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class wl{constructor(e,t){this.shortDelay=e,this.longDelay=t,Br(t>e,"Short delay should be less than long delay!"),this.isMobile=Aw()||Dw()}get(){return A1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Zf(r,e){Br(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class sx{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Dr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Dr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Dr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const R1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const j1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],D1=new wl(3e4,6e4);function em(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Ko(r,e,t,s,o={}){return ix(r,o,async()=>{let l={},h={};s&&(e==="GET"?h=s:l={body:JSON.stringify(s)});const m=ml({key:r.config.apiKey,...h}).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const v={method:e,headers:p,...l};return Rw()||(v.referrerPolicy="no-referrer"),r.emulatorConfig&&Ii(r.emulatorConfig.host)&&(v.credentials="include"),sx.fetch()(await ox(r,r.config.apiHost,t,m),v)})}async function ix(r,e,t){r._canInitEmulator=!1;const s={...R1,...e};try{const o=new O1(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw Wc(r,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const m=l.ok?h.errorMessage:h.error.message,[p,v]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wc(r,"credential-already-in-use",h);if(p==="EMAIL_EXISTS")throw Wc(r,"email-already-in-use",h);if(p==="USER_DISABLED")throw Wc(r,"user-disabled",h);const E=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw rx(r,E,v);Ur(r,E)}}catch(o){if(o instanceof fr)throw o;Ur(r,"network-request-failed",{message:String(o)})}}async function V1(r,e,t,s,o={}){const l=await Ko(r,e,t,s,o);return"mfaPendingCredential"in l&&Ur(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function ox(r,e,t,s){const o=`${e}${t}?${s}`,l=r,h=l.config.emulator?Zf(r.config,o):`${r.config.apiScheme}://${o}`;return j1.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}class O1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(cr(this.auth,"network-request-failed")),D1.get())})}}function Wc(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=cr(r,e,s);return o.customData._tokenResponse=t,o}async function M1(r,e){return Ko(r,"POST","/v1/accounts:delete",e)}async function vu(r,e){return Ko(r,"POST","/v1/accounts:lookup",e)}function rl(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function L1(r,e=!1){const t=zt(r),s=await t.getIdToken(e),o=tm(s);Ne(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l?.sign_in_provider;return{claims:o,token:s,authTime:rl(Dh(o.auth_time)),issuedAtTime:rl(Dh(o.iat)),expirationTime:rl(Dh(o.exp)),signInProvider:h||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Dh(r){return Number(r)*1e3}function tm(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return eu("JWT malformed, contained fewer than 3 sections"),null;try{const o=av(t);return o?JSON.parse(o):(eu("Failed to decode base64 JWT payload"),null)}catch(o){return eu("Caught error parsing JWT payload as JSON",o?.toString()),null}}function My(r){const e=tm(r);return Ne(e,"internal-error"),Ne(typeof e.exp<"u","internal-error"),Ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function hl(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof fr&&F1(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function F1({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class U1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class af{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=rl(this.lastLoginAt),this.creationTime=rl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function xu(r){const e=r.auth,t=await r.getIdToken(),s=await hl(r,vu(e,{idToken:t}));Ne(s?.users.length,e,"internal-error");const o=s.users[0];r._notifyReloadListener(o);const l=o.providerUserInfo?.length?ax(o.providerUserInfo):[],h=z1(r.providerData,l),m=r.isAnonymous,p=!(r.email&&o.passwordHash)&&!h?.length,v=m?p:!1,E={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new af(o.createdAt,o.lastLoginAt),isAnonymous:v};Object.assign(r,E)}async function B1(r){const e=zt(r);await xu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function z1(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function ax(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function $1(r,e){const t=await ix(r,{},async()=>{const s=ml({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,h=await ox(r,o,"/v1/token",`key=${l}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:m,body:s};return r.emulatorConfig&&Ii(r.emulatorConfig.host)&&(p.credentials="include"),sx.fetch()(h,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function H1(r,e){return Ko(r,"POST","/v2/accounts:revokeToken",em(r,e))}class Po{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ne(e.idToken,"internal-error"),Ne(typeof e.idToken<"u","internal-error"),Ne(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):My(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ne(e.length!==0,"internal-error");const t=My(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await $1(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,h=new Po;return s&&(Ne(typeof s=="string","internal-error",{appName:e}),h.refreshToken=s),o&&(Ne(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(Ne(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Po,this.toJSON())}_performRefresh(){return Dr("not implemented")}}function vs(r,e){Ne(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Dn{constructor({uid:e,auth:t,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new U1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new af(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await hl(this,this.stsTokenManager.getToken(this.auth,e));return Ne(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return L1(this,e)}reload(){return B1(this)}_assign(e){this!==e&&(Ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Dn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await xu(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jn(this.auth.app))return Promise.reject(vi(this.auth));const e=await this.getIdToken();return await hl(this,M1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,h=t.photoURL??void 0,m=t.tenantId??void 0,p=t._redirectEventId??void 0,v=t.createdAt??void 0,E=t.lastLoginAt??void 0,{uid:b,emailVerified:N,isAnonymous:L,providerData:Q,stsTokenManager:B}=t;Ne(b&&B,e,"internal-error");const O=Po.fromJSON(this.name,B);Ne(typeof b=="string",e,"internal-error"),vs(s,e.name),vs(o,e.name),Ne(typeof N=="boolean",e,"internal-error"),Ne(typeof L=="boolean",e,"internal-error"),vs(l,e.name),vs(h,e.name),vs(m,e.name),vs(p,e.name),vs(v,e.name),vs(E,e.name);const U=new Dn({uid:b,auth:e,email:o,emailVerified:N,displayName:s,isAnonymous:L,photoURL:h,phoneNumber:l,tenantId:m,stsTokenManager:O,createdAt:v,lastLoginAt:E});return Q&&Array.isArray(Q)&&(U.providerData=Q.map(z=>({...z}))),p&&(U._redirectEventId=p),U}static async _fromIdTokenResponse(e,t,s=!1){const o=new Po;o.updateFromServerResponse(t);const l=new Dn({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await xu(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];Ne(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?ax(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!l?.length,m=new Po;m.updateFromIdToken(s);const p=new Dn({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:h}),v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new af(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!l?.length};return Object.assign(p,v),p}}const Ly=new Map;function Vr(r){Br(r instanceof Function,"Expected a class definition");let e=Ly.get(r);return e?(Br(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Ly.set(r,e),e)}class lx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}lx.type="NONE";const Fy=lx;function tu(r,e,t){return`firebase:${r}:${e}:${t}`}class Ro{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=tu(this.userKey,o.apiKey,l),this.fullPersistenceKey=tu("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await vu(this.auth,{idToken:e}).catch(()=>{});return t?Dn._fromGetAccountInfoResponse(this.auth,t,e):null}return Dn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Ro(Vr(Fy),e,s);const o=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let l=o[0]||Vr(Fy);const h=tu(s,e.config.apiKey,e.name);let m=null;for(const v of t)try{const E=await v._get(h);if(E){let b;if(typeof E=="string"){const N=await vu(e,{idToken:E}).catch(()=>{});if(!N)break;b=await Dn._fromGetAccountInfoResponse(e,N,E)}else b=Dn._fromJSON(e,E);v!==l&&(m=b),l=v;break}}catch{}const p=o.filter(v=>v._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new Ro(l,e,s):(l=p[0],m&&await l._set(h,m.toJSON()),await Promise.all(t.map(async v=>{if(v!==l)try{await v._remove(h)}catch{}})),new Ro(l,e,s))}}function Uy(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(hx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(cx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(mx(e))return"Blackberry";if(px(e))return"Webos";if(ux(e))return"Safari";if((e.includes("chrome/")||dx(e))&&!e.includes("edge/"))return"Chrome";if(fx(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if(s?.length===2)return s[1]}return"Other"}function cx(r=Bt()){return/firefox\//i.test(r)}function ux(r=Bt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function dx(r=Bt()){return/crios\//i.test(r)}function hx(r=Bt()){return/iemobile/i.test(r)}function fx(r=Bt()){return/android/i.test(r)}function mx(r=Bt()){return/blackberry/i.test(r)}function px(r=Bt()){return/webos/i.test(r)}function nm(r=Bt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function q1(r=Bt()){return nm(r)&&!!window.navigator?.standalone}function W1(){return Vw()&&document.documentMode===10}function gx(r=Bt()){return nm(r)||fx(r)||px(r)||mx(r)||/windows phone/i.test(r)||hx(r)}function yx(r,e=[]){let t;switch(r){case"Browser":t=Uy(Bt());break;case"Worker":t=`${Uy(Bt())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ni}/${s}`}class G1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((h,m)=>{try{const p=e(l);h(p)}catch(p){m(p)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function K1(r,e={}){return Ko(r,"GET","/v2/passwordPolicy",em(r,e))}const Q1=6;class Y1{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Q1,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class J1{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new By(this),this.idTokenSubscription=new By(this),this.beforeStateQueue=new G1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Vr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ro.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await vu(this,{idToken:e}),s=await Dn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(jn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,h=s?._redirectEventId,m=await this.tryRedirectSignIn(e);(!l||l===h)&&m?.user&&(s=m.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await xu(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=P1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(jn(this.app))return Promise.reject(vi(this));const t=e?zt(e):null;return t&&Ne(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return jn(this.app)?Promise.reject(vi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return jn(this.app)?Promise.reject(vi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Vr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await K1(this),t=new Y1(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new fl("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await H1(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Vr(e)||this._popupRedirectResolver;Ne(t,this,"argument-error"),this.redirectPersistenceManager=await Ro.create(this,[Vr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ne(m,this,"internal-error"),m.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,s,o);return()=>{h=!0,p()}}else{const p=e.addObserver(t);return()=>{h=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(jn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&C1(`Error while retrieving App Check token: ${e.error}`),e?.token}}function rm(r){return zt(r)}class By{constructor(e){this.auth=e,this.observer=null,this.addObserver=$w(t=>this.observer=t)}get next(){return Ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let sm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function X1(r){sm=r}function Z1(r){return sm.loadJS(r)}function eN(){return sm.gapiScript}function tN(r){return`__${r}${Math.floor(Math.random()*1e6)}`}function nN(r,e){const t=Nu(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(ks(l,e??{}))return o;Ur(o,"already-initialized")}return t.initialize({options:e})}function rN(r,e){const t=e?.persistence||[],s=(Array.isArray(t)?t:[t]).map(Vr);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e?.popupRedirectResolver)}function sN(r,e,t){const s=rm(r);Ne(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=vx(e),{host:h,port:m}=iN(e),p=m===null?"":`:${m}`,v={url:`${l}//${h}${p}/`},E=Object.freeze({host:h,port:m,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Ne(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ne(ks(v,s.config.emulator)&&ks(E,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=v,s.emulatorConfig=E,s.settings.appVerificationDisabledForTesting=!0,Ii(h)?(df(`${l}//${h}${p}`),hf("Auth",!0)):oN()}function vx(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function iN(r){const e=vx(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:zy(s.substr(l.length+1))}}else{const[l,h]=s.split(":");return{host:l,port:zy(h)}}}function zy(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function oN(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class xx{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Dr("not implemented")}_getIdTokenResponse(e){return Dr("not implemented")}_linkToIdToken(e,t){return Dr("not implemented")}_getReauthenticationResolver(e){return Dr("not implemented")}}async function jo(r,e){return V1(r,"POST","/v1/accounts:signInWithIdp",em(r,e))}const aN="http://localhost";class bi extends xx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new bi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ur("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...l}=t;if(!s||!o)return null;const h=new bi(s,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return jo(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,jo(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,jo(e,t)}buildRequest(){const e={requestUri:aN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ml(t)}return e}}class _x{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class El extends _x{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class xs extends El{constructor(){super("facebook.com")}static credential(e){return bi._fromParams({providerId:xs.PROVIDER_ID,signInMethod:xs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xs.credentialFromTaggedObject(e)}static credentialFromError(e){return xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xs.credential(e.oauthAccessToken)}catch{return null}}}xs.FACEBOOK_SIGN_IN_METHOD="facebook.com";xs.PROVIDER_ID="facebook.com";class _s extends El{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return bi._fromParams({providerId:_s.PROVIDER_ID,signInMethod:_s.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return _s.credentialFromTaggedObject(e)}static credentialFromError(e){return _s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return _s.credential(t,s)}catch{return null}}}_s.GOOGLE_SIGN_IN_METHOD="google.com";_s.PROVIDER_ID="google.com";class ws extends El{constructor(){super("github.com")}static credential(e){return bi._fromParams({providerId:ws.PROVIDER_ID,signInMethod:ws.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ws.credentialFromTaggedObject(e)}static credentialFromError(e){return ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ws.credential(e.oauthAccessToken)}catch{return null}}}ws.GITHUB_SIGN_IN_METHOD="github.com";ws.PROVIDER_ID="github.com";class Es extends El{constructor(){super("twitter.com")}static credential(e,t){return bi._fromParams({providerId:Es.PROVIDER_ID,signInMethod:Es.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Es.credentialFromTaggedObject(e)}static credentialFromError(e){return Es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Es.credential(t,s)}catch{return null}}}Es.TWITTER_SIGN_IN_METHOD="twitter.com";Es.PROVIDER_ID="twitter.com";class Bo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await Dn._fromIdTokenResponse(e,s,o),h=$y(s);return new Bo({user:l,providerId:h,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=$y(s);return new Bo({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function $y(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}class _u extends fr{constructor(e,t,s,o){super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,_u.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new _u(e,t,s,o)}}function wx(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?_u._fromErrorAndOperation(r,l,e,s):l})}async function lN(r,e,t=!1){const s=await hl(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Bo._forOperation(r,"link",s)}async function cN(r,e,t=!1){const{auth:s}=r;if(jn(s.app))return Promise.reject(vi(s));const o="reauthenticate";try{const l=await hl(r,wx(s,o,e,r),t);Ne(l.idToken,s,"internal-error");const h=tm(l.idToken);Ne(h,s,"internal-error");const{sub:m}=h;return Ne(r.uid===m,s,"user-mismatch"),Bo._forOperation(r,o,l)}catch(l){throw l?.code==="auth/user-not-found"&&Ur(s,"user-mismatch"),l}}async function uN(r,e,t=!1){if(jn(r.app))return Promise.reject(vi(r));const s="signIn",o=await wx(r,s,e),l=await Bo._fromIdTokenResponse(r,s,o);return t||await r._updateCurrentUser(l.user),l}function dN(r,e,t,s){return zt(r).onIdTokenChanged(e,t,s)}function hN(r,e,t){return zt(r).beforeAuthStateChanged(e,t)}const wu="__sak";class Ex{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(wu,"1"),this.storage.removeItem(wu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const fN=1e3,mN=10;class bx extends Ex{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=gx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,m,p)=>{this.notifyListeners(h,p)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(s);!t&&this.localCache[s]===h||this.notifyListeners(s,h)},l=this.storage.getItem(s);W1()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,mN):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},fN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}bx.type="LOCAL";const pN=bx;class Tx extends Ex{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Tx.type="SESSION";const Ix=Tx;function gN(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class qu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new qu(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!h?.size)return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(h).map(async v=>v(t.origin,l)),p=await gN(m);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}qu.receivers=[];function im(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}class yN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((m,p)=>{const v=im("",20);o.port1.start();const E=setTimeout(()=>{p(new Error("unsupported_event"))},s);h={messageChannel:o,onMessage(b){const N=b;if(N.data.eventId===v)switch(N.data.status){case"ack":clearTimeout(E),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),m(N.data.response);break;default:clearTimeout(E),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}function ur(){return window}function vN(r){ur().location.href=r}function Nx(){return typeof ur().WorkerGlobalScope<"u"&&typeof ur().importScripts=="function"}async function xN(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _N(){return navigator?.serviceWorker?.controller||null}function wN(){return Nx()?self:null}const Sx="firebaseLocalStorageDb",EN=1,Eu="firebaseLocalStorage",Cx="fbase_key";class bl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Wu(r,e){return r.transaction([Eu],e?"readwrite":"readonly").objectStore(Eu)}function bN(){const r=indexedDB.deleteDatabase(Sx);return new bl(r).toPromise()}function lf(){const r=indexedDB.open(Sx,EN);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Eu,{keyPath:Cx})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Eu)?e(s):(s.close(),await bN(),e(await lf()))})})}async function Hy(r,e,t){const s=Wu(r,!0).put({[Cx]:e,value:t});return new bl(s).toPromise()}async function TN(r,e){const t=Wu(r,!1).get(e),s=await new bl(t).toPromise();return s===void 0?null:s.value}function qy(r,e){const t=Wu(r,!0).delete(e);return new bl(t).toPromise()}const IN=800,NN=3;class kx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await lf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>NN)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Nx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=qu._getInstance(wN()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await xN(),!this.activeServiceWorker)return;this.sender=new yN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_N()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await lf();return await Hy(e,wu,"1"),await qy(e,wu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>Hy(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>TN(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>qy(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Wu(o,!1).getAll();return new bl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),IN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}kx.type="LOCAL";const SN=kx;new wl(3e4,6e4);function CN(r,e){return e?Vr(e):(Ne(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class om extends xx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return jo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return jo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return jo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function kN(r){return uN(r.auth,new om(r),r.bypassAuthState)}function AN(r){const{auth:e,user:t}=r;return Ne(t,e,"internal-error"),cN(t,new om(r),r.bypassAuthState)}async function PN(r){const{auth:e,user:t}=r;return Ne(t,e,"internal-error"),lN(t,new om(r),r.bypassAuthState)}class Ax{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:h,type:m}=e;if(h){this.reject(h);return}const p={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return kN;case"linkViaPopup":case"linkViaRedirect":return PN;case"reauthViaPopup":case"reauthViaRedirect":return AN;default:Ur(this.auth,"internal-error")}}resolve(e){Br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const RN=new wl(2e3,1e4);class So extends Ax{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,So.currentPopupAction&&So.currentPopupAction.cancel(),So.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ne(e,this.auth,"internal-error"),e}async onExecution(){Br(this.filter.length===1,"Popup operations only handle one event");const e=im();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(cr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(cr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,So.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(cr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,RN.get())};e()}}So.currentPopupAction=null;const jN="pendingRedirect",nu=new Map;class DN extends Ax{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=nu.get(this.auth._key());if(!e){try{const s=await VN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}nu.set(this.auth._key(),e)}return this.bypassAuthState||nu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function VN(r,e){const t=LN(e),s=MN(r);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function ON(r,e){nu.set(r._key(),e)}function MN(r){return Vr(r._redirectPersistence)}function LN(r){return tu(jN,r.config.apiKey,r.name)}async function FN(r,e,t=!1){if(jn(r.app))return Promise.reject(vi(r));const s=rm(r),o=CN(s,e),h=await new DN(s,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await s._persistUserIfCurrent(h.user),await s._setRedirectUser(null,e)),h}const UN=600*1e3;class BN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!zN(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Px(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";t.onError(cr(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=UN&&this.cachedEventUids.clear(),this.cachedEventUids.has(Wy(e))}saveEventToCache(e){this.cachedEventUids.add(Wy(e)),this.lastProcessedEventTime=Date.now()}}function Wy(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Px({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function zN(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Px(r);default:return!1}}async function $N(r,e={}){return Ko(r,"GET","/v1/projects",e)}const HN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qN=/^https?/;async function WN(r){if(r.config.emulator)return;const{authorizedDomains:e}=await $N(r);for(const t of e)try{if(GN(t))return}catch{}Ur(r,"unauthorized-domain")}function GN(r){const e=of(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===s}if(!qN.test(t))return!1;if(HN.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const KN=new wl(3e4,6e4);function Gy(){const r=ur().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function QN(r){return new Promise((e,t)=>{function s(){Gy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Gy(),t(cr(r,"network-request-failed"))},timeout:KN.get()})}if(ur().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ur().gapi?.load)s();else{const o=tN("iframefcb");return ur()[o]=()=>{gapi.load?s():t(cr(r,"network-request-failed"))},Z1(`${eN()}?onload=${o}`).catch(l=>t(l))}}).catch(e=>{throw ru=null,e})}let ru=null;function YN(r){return ru=ru||QN(r),ru}const JN=new wl(5e3,15e3),XN="__/auth/iframe",ZN="emulator/auth/iframe",eS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nS(r){const e=r.config;Ne(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Zf(e,ZN):`https://${r.config.authDomain}/${XN}`,s={apiKey:e.apiKey,appName:r.name,v:Ni},o=tS.get(r.config.apiHost);o&&(s.eid=o);const l=r._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${ml(s).slice(1)}`}async function rS(r){const e=await YN(r),t=ur().gapi;return Ne(t,r,"internal-error"),e.open({where:document.body,url:nS(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:eS,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const h=cr(r,"network-request-failed"),m=ur().setTimeout(()=>{l(h)},JN.get());function p(){ur().clearTimeout(m),o(s)}s.ping(p).then(p,()=>{l(h)})}))}const sS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},iS=500,oS=600,aS="_blank",lS="http://localhost";class Ky{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function cS(r,e,t,s=iS,o=oS){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const p={...sS,width:s.toString(),height:o.toString(),top:l,left:h},v=Bt().toLowerCase();t&&(m=dx(v)?aS:t),cx(v)&&(e=e||lS,p.scrollbars="yes");const E=Object.entries(p).reduce((N,[L,Q])=>`${N}${L}=${Q},`,"");if(q1(v)&&m!=="_self")return uS(e||"",m),new Ky(null);const b=window.open(e||"",m,E);Ne(b,r,"popup-blocked");try{b.focus()}catch{}return new Ky(b)}function uS(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}const dS="__/auth/handler",hS="emulator/auth/handler",fS=encodeURIComponent("fac");async function Qy(r,e,t,s,o,l){Ne(r.config.authDomain,r,"auth-domain-config-required"),Ne(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:Ni,eventId:o};if(e instanceof _x){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",zw(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,b]of Object.entries({}))h[E]=b}if(e instanceof El){const E=e.getScopes().filter(b=>b!=="");E.length>0&&(h.scopes=E.join(","))}r.tenantId&&(h.tid=r.tenantId);const m=h;for(const E of Object.keys(m))m[E]===void 0&&delete m[E];const p=await r._getAppCheckToken(),v=p?`#${fS}=${encodeURIComponent(p)}`:"";return`${mS(r)}?${ml(m).slice(1)}${v}`}function mS({config:r}){return r.emulator?Zf(r,hS):`https://${r.authDomain}/${dS}`}const Vh="webStorageSupport";class pS{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ix,this._completeRedirectFn=FN,this._overrideRedirectResult=ON}async _openPopup(e,t,s,o){Br(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await Qy(e,t,s,of(),o);return cS(e,l,im())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await Qy(e,t,s,of(),o);return vN(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Br(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await rS(e),s=new BN(e);return t.register("authEvent",o=>(Ne(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Vh,{type:Vh},o=>{const l=o?.[0]?.[Vh];l!==void 0&&t(!!l),Ur(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=WN(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return gx()||ux()||nm()}}const gS=pS;var Yy="@firebase/auth",Jy="1.12.0";class yS{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function vS(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function xS(r){xi(new As("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:m}=s.options;Ne(h&&!h.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:h,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yx(r)},v=new J1(s,o,l,p);return rN(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),xi(new As("auth-internal",e=>{const t=rm(e.getProvider("auth").getImmediate());return(s=>new yS(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ir(Yy,Jy,vS(r)),ir(Yy,Jy,"esm2020")}const _S=300,wS=dv("authIdTokenMaxAge")||_S;let Xy=null;const ES=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>wS)return;const o=t?.token;Xy!==o&&(Xy=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function bS(r=pf()){const e=Nu(r,"auth");if(e.isInitialized())return e.getImmediate();const t=nN(r,{popupRedirectResolver:gS,persistence:[SN,pN,Ix]}),s=dv("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const h=ES(l.toString());hN(t,h,()=>h(t.currentUser)),dN(t,m=>h(m))}}const o=lv("auth");return o&&sN(t,`http://${o}`),t}function TS(){return document.getElementsByTagName("head")?.[0]??document}X1({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const l=cr("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",TS().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});xS("Browser");const Rx="firebasestorage.googleapis.com",IS="storageBucket",NS=120*1e3,SS=600*1e3;class mr extends fr{constructor(e,t,s=0){super(Oh(e),`Firebase Storage: ${t} (${Oh(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,mr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Oh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var hr;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(hr||(hr={}));function Oh(r){return"storage/"+r}function CS(){const r="An unknown error occurred, please check the error payload for server response.";return new mr(hr.UNKNOWN,r)}function kS(){return new mr(hr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function AS(){return new mr(hr.CANCELED,"User canceled the upload/download.")}function PS(r){return new mr(hr.INVALID_URL,"Invalid URL '"+r+"'.")}function RS(r){return new mr(hr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function Zy(r){return new mr(hr.INVALID_ARGUMENT,r)}function jx(){return new mr(hr.APP_DELETED,"The Firebase app was deleted.")}function jS(r){return new mr(hr.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class Vn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let s;try{s=Vn.makeFromUrl(e,t)}catch{return new Vn(e,"")}if(s.path==="")return s;throw RS(e)}static makeFromUrl(e,t){let s=null;const o="([A-Za-z0-9.\\-_]+)";function l(ne){ne.path.charAt(ne.path.length-1)==="/"&&(ne.path_=ne.path_.slice(0,-1))}const h="(/(.*))?$",m=new RegExp("^gs://"+o+h,"i"),p={bucket:1,path:3};function v(ne){ne.path_=decodeURIComponent(ne.path)}const E="v[A-Za-z0-9_]+",b=t.replace(/[.]/g,"\\."),N="(/([^?#]*).*)?$",L=new RegExp(`^https?://${b}/${E}/b/${o}/o${N}`,"i"),Q={bucket:1,path:3},B=t===Rx?"(?:storage.googleapis.com|storage.cloud.google.com)":t,O="([^?#]*)",U=new RegExp(`^https?://${B}/${o}/${O}`,"i"),Y=[{regex:m,indices:p,postModify:l},{regex:L,indices:Q,postModify:v},{regex:U,indices:{bucket:1,path:2},postModify:v}];for(let ne=0;ne<Y.length;ne++){const W=Y[ne],ce=W.regex.exec(e);if(ce){const C=ce[W.indices.bucket];let I=ce[W.indices.path];I||(I=""),s=new Vn(C,I),W.postModify(s);break}}if(s==null)throw PS(e);return s}}class DS{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function VS(r,e,t){let s=1,o=null,l=null,h=!1,m=0;function p(){return m===2}let v=!1;function E(...O){v||(v=!0,e.apply(null,O))}function b(O){o=setTimeout(()=>{o=null,r(L,p())},O)}function N(){l&&clearTimeout(l)}function L(O,...U){if(v){N();return}if(O){N(),E.call(null,O,...U);return}if(p()||h){N(),E.call(null,O,...U);return}s<64&&(s*=2);let Y;m===1?(m=2,Y=0):Y=(s+Math.random())*1e3,b(Y)}let Q=!1;function B(O){Q||(Q=!0,N(),!v&&(o!==null?(O||(m=2),clearTimeout(o),b(0)):O||(m=1)))}return b(0),l=setTimeout(()=>{h=!0,B(!0)},t),B}function OS(r){r(!1)}function MS(r){return r!==void 0}function ev(r,e,t,s){if(s<e)throw Zy(`Invalid value for '${r}'. Expected ${e} or greater.`);if(s>t)throw Zy(`Invalid value for '${r}'. Expected ${t} or less.`)}function LS(r){const e=encodeURIComponent;let t="?";for(const s in r)if(r.hasOwnProperty(s)){const o=e(s)+"="+e(r[s]);t=t+o+"&"}return t=t.slice(0,-1),t}var bu;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(bu||(bu={}));function FS(r,e){const t=r>=500&&r<600,o=[408,429].indexOf(r)!==-1,l=e.indexOf(r)!==-1;return t||o||l}class US{constructor(e,t,s,o,l,h,m,p,v,E,b,N=!0,L=!1){this.url_=e,this.method_=t,this.headers_=s,this.body_=o,this.successCodes_=l,this.additionalRetryCodes_=h,this.callback_=m,this.errorCallback_=p,this.timeout_=v,this.progressCallback_=E,this.connectionFactory_=b,this.retry=N,this.isUsingEmulator=L,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Q,B)=>{this.resolve_=Q,this.reject_=B,this.start_()})}start_(){const e=(s,o)=>{if(o){s(!1,new Gc(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const h=m=>{const p=m.loaded,v=m.lengthComputable?m.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,v)};this.progressCallback_!==null&&l.addUploadProgressListener(h),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(h),this.pendingConnection_=null;const m=l.getErrorCode()===bu.NO_ERROR,p=l.getStatus();if(!m||FS(p,this.additionalRetryCodes_)&&this.retry){const E=l.getErrorCode()===bu.ABORT;s(!1,new Gc(!1,null,E));return}const v=this.successCodes_.indexOf(p)!==-1;s(!0,new Gc(v,l))})},t=(s,o)=>{const l=this.resolve_,h=this.reject_,m=o.connection;if(o.wasSuccessCode)try{const p=this.callback_(m,m.getResponse());MS(p)?l(p):l()}catch(p){h(p)}else if(m!==null){const p=CS();p.serverResponse=m.getErrorText(),this.errorCallback_?h(this.errorCallback_(m,p)):h(p)}else if(o.canceled){const p=this.appDelete_?jx():AS();h(p)}else{const p=kS();h(p)}};this.canceled_?t(!1,new Gc(!1,null,!0)):this.backoffId_=VS(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&OS(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Gc{constructor(e,t,s){this.wasSuccessCode=e,this.connection=t,this.canceled=!!s}}function BS(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function zS(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function $S(r,e){e&&(r["X-Firebase-GMPID"]=e)}function HS(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function qS(r,e,t,s,o,l,h=!0,m=!1){const p=LS(r.urlParams),v=r.url+p,E=Object.assign({},r.headers);return $S(E,e),BS(E,t),zS(E,l),HS(E,s),new US(v,r.method,E,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,o,h,m)}function WS(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function GS(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}class Tu{constructor(e,t){this._service=e,t instanceof Vn?this._location=t:this._location=Vn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Tu(e,t)}get root(){const e=new Vn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return GS(this._location.path)}get storage(){return this._service}get parent(){const e=WS(this._location.path);if(e===null)return null;const t=new Vn(this._location.bucket,e);return new Tu(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw jS(e)}}function tv(r,e){const t=e?.[IS];return t==null?null:Vn.makeFromBucketSpec(t,r)}function KS(r,e,t,s={}){r.host=`${e}:${t}`;const o=Ii(e);o&&(df(`https://${r.host}/b`),hf("Storage",!0)),r._isUsingEmulator=!0,r._protocol=o?"https":"http";const{mockUserToken:l}=s;l&&(r._overrideAuthToken=typeof l=="string"?l:hv(l,r.app.options.projectId))}class QS{constructor(e,t,s,o,l,h=!1){this.app=e,this._authProvider=t,this._appCheckProvider=s,this._url=o,this._firebaseVersion=l,this._isUsingEmulator=h,this._bucket=null,this._host=Rx,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=NS,this._maxUploadRetryTime=SS,this._requests=new Set,o!=null?this._bucket=Vn.makeFromBucketSpec(o,this._host):this._bucket=tv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Vn.makeFromBucketSpec(this._url,e):this._bucket=tv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){ev("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){ev("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(jn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Tu(this,e)}_makeRequest(e,t,s,o,l=!0){if(this._deleted)return new DS(jx());{const h=qS(e,this._appId,s,o,t,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(h),h.getPromise().then(()=>this._requests.delete(h),()=>this._requests.delete(h)),h}}async makeRequestWithTokens(e,t){const[s,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,s,o).getPromise()}}const nv="@firebase/storage",rv="0.14.0";const Dx="storage";function YS(r=pf(),e){r=zt(r);const s=Nu(r,Dx).getImmediate({identifier:e}),o=cv("storage");return o&&JS(s,...o),s}function JS(r,e,t,s={}){KS(r,e,t,s)}function XS(r,{instanceIdentifier:e}){const t=r.getProvider("app").getImmediate(),s=r.getProvider("auth-internal"),o=r.getProvider("app-check-internal");return new QS(t,s,o,e,Ni)}function ZS(){xi(new As(Dx,XS,"PUBLIC").setMultipleInstances(!0)),ir(nv,rv,""),ir(nv,rv,"esm2020")}ZS();const eC={apiKey:"AIzaSyDisIltlN9rR-tltlJaClGBld9usTYLmxM",authDomain:"luxemarket-7c4c0.firebaseapp.com",projectId:"luxemarket-7c4c0",storageBucket:"luxemarket-7c4c0.firebasestorage.app",messagingSenderId:"81635666948",appId:"1:81635666948:web:867963294814113a645951",measurementId:"G-0QQKRWXKDC"},am=pv(eC),Wt=i1(am),tC=bS(am);YS(am);const jr="products";class nC{async create(e){return{id:(await b1(_o(Wt,jr),{...e,createdAt:gi(),updatedAt:gi()})).id,...e}}async getAll(){return(await qa(_o(Wt,jr))).docs.map(t=>({id:t.id,...t.data()}))}async getById(e){const t=sr(Wt,jr,e),s=await Ya(t);return s.exists()?{id:s.id,...s.data()}:null}async getByCategory(e){const t=qc(_o(Wt,jr),Rh("category","==",e));return(await qa(t)).docs.map(o=>({id:o.id,...o.data()}))}async getFeatured(){const e=qc(_o(Wt,jr),Rh("featured","==",!0));return(await qa(e)).docs.map(s=>({id:s.id,...s.data()}))}async getDailyDeals(){const e=qc(_o(Wt,jr),Rh("dailyDeal","==",!0));return(await qa(e)).docs.map(s=>({id:s.id,...s.data()}))}async search(e){const t=await this.getAll(),s=e.toLowerCase();return t.filter(o=>o.name.toLowerCase().includes(s)||o.description?.toLowerCase().includes(s)||o.category.toLowerCase().includes(s))}async update(e,t){const s=sr(Wt,jr,e);return await ex(s,{...t,updatedAt:gi()}),this.getById(e)}async delete(e){const t=sr(Wt,jr,e);await E1(t)}async bulkCreate(e){const t=e.map(s=>this.create(s));return await Promise.all(t)}async getPaginated(e=20){const t=qc(_o(Wt,jr),x1("createdAt","desc"),_1(e));return(await qa(t)).docs.map(o=>({id:o.id,...o.data()}))}}const bs=new nC;async function Vx(){try{console.log(" Starting Firebase migration...");const r=localStorage.getItem("luxemarket_products");if(!r){console.log(" No products found in localStorage");return}const e=JSON.parse(r);console.log(` Found ${e.length} products to migrate`);const t=await bs.getAll();if(t.length>0&&(console.log(` Firebase already has ${t.length} products`),!confirm(`Firebase already has ${t.length} products.
Do you want to add ${e.length} more products from localStorage?`))){console.log(" Migration cancelled");return}console.log(" Uploading products to Firebase...");let s=0,o=0;for(const l of e)try{const{id:h,...m}=l;await bs.create(m),s++,console.log(` Uploaded: ${l.name}`)}catch(h){o++,console.error(` Failed to upload ${l.name}:`,h)}console.log(`
 Migration complete!`),console.log(` Success: ${s} products`),o>0&&console.log(` Failed: ${o} products`),alert(`Migration complete!

 Uploaded: ${s} products
${o>0?` Failed: ${o} products`:""}`)}catch(r){console.error(" Migration failed:",r),alert(`Migration failed: ${r.message}`)}}typeof window<"u"&&(window.migrateToFirebase=Vx);function rC(){const[r,e]=Ja.useState("idle"),[t,s]=Ja.useState(""),[o,l]=Ja.useState(null),h=async()=>{e("checking"),s("Checking Firebase connection...");try{const v=await bs.getAll();l(v.length),e("success"),s(` Connected! Found ${v.length} products in Firebase.`)}catch(v){e("error"),v.message.includes("apiKey")?s(" Firebase not configured. Please update src/firebase/config.js with your Firebase credentials."):s(` Connection failed: ${v.message}`)}},m=async()=>{e("migrating"),s("Migrating products to Firebase...");try{await Vx(),await h()}catch(v){e("error"),s(` Migration failed: ${v.message}`)}},p=()=>{const v=localStorage.getItem("luxemarket_products");return v?JSON.parse(v).length:0};return u.jsx("div",{className:"min-h-screen bg-gray-100 py-8",children:u.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[u.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[u.jsx("h1",{className:"text-3xl font-bold mb-2",children:" Firebase Setup"}),u.jsx("p",{className:"text-gray-600",children:"Set up Firebase to share products with all users"})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[u.jsx("h2",{className:"text-xl font-bold mb-4",children:"Setup Steps"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("div",{className:"w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center flex-shrink-0 font-bold",children:"1"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold",children:"Create Firebase Project"}),u.jsxs("p",{className:"text-sm text-gray-600",children:["Go to ",u.jsx("a",{href:"https://console.firebase.google.com/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:"Firebase Console"})," and create a new project"]})]})]}),u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("div",{className:"w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center flex-shrink-0 font-bold",children:"2"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold",children:"Enable Firestore Database"}),u.jsx("p",{className:"text-sm text-gray-600",children:'In Firebase Console, enable Firestore Database in "test mode"'})]})]}),u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("div",{className:"w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center flex-shrink-0 font-bold",children:"3"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold",children:"Configure Your App"}),u.jsxs("p",{className:"text-sm text-gray-600",children:["Update ",u.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded",children:"src/firebase/config.js"})," with your Firebase credentials"]})]})]}),u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("div",{className:"w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center flex-shrink-0 font-bold",children:"4"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold",children:"Test Connection & Migrate"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Use the buttons below to test and migrate your data"})]})]})]})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[u.jsx("h2",{className:"text-xl font-bold mb-4",children:"Status"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex justify-between items-center p-4 bg-gray-50 rounded",children:[u.jsx("span",{className:"font-semibold",children:"Local Products:"}),u.jsx("span",{className:"text-2xl font-bold text-blue-600",children:p()})]}),o!==null&&u.jsxs("div",{className:"flex justify-between items-center p-4 bg-gray-50 rounded",children:[u.jsx("span",{className:"font-semibold",children:"Firebase Products:"}),u.jsx("span",{className:"text-2xl font-bold text-green-600",children:o})]}),t&&u.jsx("div",{className:`p-4 rounded ${r==="success"?"bg-green-50 text-green-800":r==="error"?"bg-red-50 text-red-800":"bg-blue-50 text-blue-800"}`,children:t})]})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[u.jsx("h2",{className:"text-xl font-bold mb-4",children:"Actions"}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("button",{onClick:h,disabled:r==="checking"||r==="migrating",className:"w-full bg-blue-500 text-white py-3 px-4 rounded-lg hover:bg-blue-600 disabled:opacity-50 font-semibold",children:r==="checking"?" Checking...":" Test Firebase Connection"}),u.jsx("button",{onClick:m,disabled:r==="checking"||r==="migrating"||p()===0,className:"w-full bg-green-500 text-white py-3 px-4 rounded-lg hover:bg-green-600 disabled:opacity-50 font-semibold",children:r==="migrating"?" Migrating...":" Migrate Products to Firebase"}),u.jsx("a",{href:"https://console.firebase.google.com/",target:"_blank",rel:"noopener noreferrer",className:"block w-full bg-orange-500 text-white py-3 px-4 rounded-lg hover:bg-orange-600 text-center font-semibold",children:" Open Firebase Console"})]})]}),u.jsx("div",{className:"mt-6 text-center",children:u.jsxs("p",{className:"text-gray-600",children:["Need help? Check the ",u.jsx("a",{href:"/FIREBASE_SETUP.md",className:"text-blue-500 hover:underline",children:"complete setup guide"})]})})]})})}function sC({isOpen:r,onClose:e,onCartUpdate:t,onCheckout:s}){const[o,l]=J.useState([]),[h,m]=J.useState(0),p=J.useCallback(()=>{try{if(window.CartManager){const b=window.CartManager.getItems();l(b),m(window.CartManager.getTotal())}}catch(b){console.error("Error loading cart items:",b)}},[]);J.useEffect(()=>{r&&p()},[r,p]);const v=(b,N)=>{window.CartManager&&(window.CartManager.updateQuantity(b,N),p(),t&&t())},E=b=>{window.CartManager&&(window.CartManager.removeItem(b),p(),t&&t(),He("Item removed from cart","info"))};return J.useEffect(()=>{const b=N=>{N.key==="Escape"&&r&&e()};return r&&(document.addEventListener("keydown",b),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",b),document.body.style.overflow="unset"}},[r,e]),r?Ti.createPortal(u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[99999] flex items-center justify-center p-4 modal-overlay modal-backdrop cart-modal cursor-pointer",onClick:e,children:u.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-hidden shadow-2xl relative cursor-default",onClick:b=>b.stopPropagation(),children:[u.jsxs("div",{className:"bg-white border-b border-gray-200 p-6 flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[u.jsx("div",{className:"icon-shopping-cart text-[var(--primary-color)]"}),"Shopping Cart"]}),u.jsxs("p",{className:"text-gray-500 text-sm mt-1",children:[o.length," items in your basket"]})]}),u.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-full transition-colors text-gray-400 hover:text-gray-600",children:u.jsx("div",{className:"icon-x text-2xl"})})]}),u.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:o.length===0?u.jsxs("div",{className:"text-center py-12",children:[u.jsx("div",{className:"icon-shopping-bag text-gray-200 text-6xl mb-4 mx-auto"}),u.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Your basket is empty"}),u.jsx("p",{className:"text-gray-500 mt-2",children:"Go ahead and explore our premium collection."}),u.jsx("button",{onClick:e,className:"btn btn-primary mt-6",children:"Go Shopping"})]}):u.jsx("div",{className:"space-y-4",children:o.map(b=>u.jsxs("div",{className:"flex gap-4 p-4 border border-gray-100 rounded-xl hover:bg-gray-50 transition-colors cart-item",children:[u.jsx("div",{className:"w-20 h-20 rounded-lg overflow-hidden flex-shrink-0 border border-gray-200 bg-white",children:u.jsx("img",{src:b.image,alt:b.name,className:"w-full h-full object-cover"})}),u.jsxs("div",{className:"flex-grow min-w-0",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsx("h4",{className:"font-bold text-gray-900 truncate pr-2",children:b.name}),u.jsx("button",{onClick:()=>E(b.id),className:"text-gray-400 hover:text-red-500 transition-colors",children:u.jsx("div",{className:"icon-x"})})]}),u.jsxs("div",{className:"flex justify-between items-center mt-2",children:[u.jsxs("div",{className:"flex items-center gap-3 bg-gray-100 px-3 py-1 rounded-full border border-gray-200 shadow-inner",children:[u.jsx("button",{onClick:()=>v(b.id,-1),className:"hover:text-[var(--primary-color)] transition-colors w-6 h-6 flex items-center justify-center font-bold",children:"-"}),u.jsx("span",{className:"text-sm font-bold min-w-[20px] text-center",children:b.quantity}),u.jsx("button",{onClick:()=>v(b.id,1),className:"hover:text-[var(--primary-color)] transition-colors w-6 h-6 flex items-center justify-center font-bold",children:"+"})]}),u.jsxs("div",{className:"text-right",children:[b.originalPrice>b.price&&u.jsxs("p",{className:"text-sm text-gray-500 line-through",children:["$",b.originalPrice.toFixed(2)]}),u.jsxs("p",{className:"font-bold text-gray-900 text-lg",children:["$",b.price.toFixed(2)]})]})]})]})]},b.id))})}),o.length>0&&u.jsxs("div",{className:"bg-gray-50 p-6 border-t border-gray-200",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("span",{className:"text-gray-600 font-medium",children:"Subtotal"}),u.jsxs("span",{className:"text-2xl font-black text-gray-900",children:["$",h.toFixed(2)]})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:e,className:"btn btn-secondary flex-1 py-3",children:"Continue Shopping"}),u.jsxs("button",{onClick:s,className:"btn btn-primary flex-1 py-3 text-lg font-bold shadow-lg shadow-blue-200 hover:shadow-xl transition-shadow flex items-center justify-center gap-2",children:["Checkout ",u.jsx("div",{className:"icon-arrow-right"})]})]})]})]})}),document.body):null}function iC({isOpen:r,onClose:e,onOrderComplete:t}){const[s,o]=J.useState([]),[l,h]=J.useState(!0),[m,p]=J.useState(1),[v,E]=J.useState({shipping:{firstName:"",lastName:"",email:"",phone:"",address:"",city:"",state:"",zipCode:"",country:"United States"},payment:{cardNumber:"",expiryDate:"",cvv:"",cardName:"",billingAddress:"",billingCity:"",billingState:"",billingZip:"",sameAsShipping:!0}});J.useEffect(()=>{r&&b()},[r]);const b=()=>{try{if(window.CartManager&&window.ProductManager){const ce=window.CartManager.getCart().map(C=>{const I=window.ProductManager.getById(C.id);return{...C,product:I}}).filter(C=>C.product);o(ce)}}catch(W){console.error("Error loading cart items:",W),showToast("Error loading cart","error")}finally{h(!1)}},N=()=>s.reduce((W,ce)=>W+ce.product.price*ce.quantity,0),L=()=>N()*.08,Q=()=>N()>50?0:9.99,B=()=>N()+L()+Q(),O=(W,ce,C)=>{E(I=>({...I,[W]:{...I[W],[ce]:C}}))},U=W=>{switch(W){case 1:return s.length>0;case 2:const{shipping:ce}=v;return ce.firstName&&ce.lastName&&ce.email&&ce.address&&ce.city&&ce.state&&ce.zipCode;case 3:const{payment:C}=v;return C.cardNumber&&C.expiryDate&&C.cvv&&C.cardName;default:return!0}},z=()=>{U(m)?p(m+1):showToast("Please fill in all required fields","error")},Y=()=>{p(m-1)},ne=async()=>{try{h(!0),await new Promise(ce=>setTimeout(ce,2e3)),window.CartManager.clear();const W="LM"+Date.now().toString().slice(-6);p(4),t(W),showToast("Order placed successfully!","success")}catch(W){console.error("Error placing order:",W),showToast("Error placing order. Please try again.","error")}finally{h(!1)}};return J.useEffect(()=>{const W=ce=>{ce.key==="Escape"&&r&&e()};return r&&(document.addEventListener("keydown",W),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",W),document.body.style.overflow="unset"}},[r,e]),r?Ti.createPortal(u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[99999] flex items-center justify-center p-4 modal-overlay modal-backdrop",onClick:e,children:u.jsxs("div",{className:"bg-white rounded-lg max-w-6xl w-full max-h-[95vh] overflow-hidden shadow-2xl relative",onClick:W=>W.stopPropagation(),children:[u.jsxs("div",{className:"bg-white border-b border-gray-200 p-6 flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Checkout"}),u.jsx("div",{className:"flex items-center mt-2 space-x-4",children:[1,2,3,4].map(W=>u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${m>=W?"bg-blue-600 text-white":"bg-gray-200 text-gray-600"}`,children:W}),u.jsxs("span",{className:`ml-2 text-sm ${m>=W?"text-blue-600 font-medium":"text-gray-500"}`,children:[W===1&&"Review",W===2&&"Shipping",W===3&&"Payment",W===4&&"Complete"]}),W<4&&u.jsx("div",{className:"w-8 h-0.5 bg-gray-200 mx-2"})]},W))})]}),u.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 text-3xl leading-none w-8 h-8 flex items-center justify-center hover:bg-gray-100 rounded-full transition-colors",title:"Close (Esc)",children:u.jsx("div",{className:"icon-x text-2xl"})})]}),u.jsx("div",{className:"flex-1 overflow-y-auto max-h-[calc(95vh-200px)]",children:l&&m!==4?u.jsx("div",{className:"flex items-center justify-center py-12",children:u.jsx("div",{className:"text-gray-500",children:"Loading..."})}):u.jsx("div",{className:"p-6",children:u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[u.jsxs("div",{className:"lg:col-span-2",children:[m===1&&u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-bold mb-4",children:"Review Your Order"}),u.jsx("div",{className:"space-y-4",children:s.map(W=>u.jsxs("div",{className:"flex items-center gap-4 p-4 border border-gray-200 rounded-lg",children:[u.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-lg overflow-hidden",children:u.jsx("img",{src:W.product.image,alt:W.product.name,className:"w-full h-full object-cover"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h4",{className:"font-semibold",children:W.product.name}),u.jsx("p",{className:"text-sm text-gray-500",children:W.product.category}),u.jsxs("p",{className:"text-sm",children:["Qty: ",W.quantity]})]}),u.jsx("div",{className:"text-right",children:u.jsxs("p",{className:"font-bold",children:["$",(W.product.price*W.quantity).toFixed(2)]})})]},W.id))})]}),m===2&&u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-bold mb-4",children:"Shipping Information"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"}),u.jsx("input",{type:"text",value:v.shipping.firstName,onChange:W=>O("shipping","firstName",W.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"}),u.jsx("input",{type:"text",value:v.shipping.lastName,onChange:W=>O("shipping","lastName",W.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),u.jsx("input",{type:"email",value:v.shipping.email,onChange:W=>O("shipping","email",W.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),u.jsx("input",{type:"tel",value:v.shipping.phone,onChange:W=>O("shipping","phone",W.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address *"}),u.jsx("input",{type:"text",value:v.shipping.address,onChange:W=>O("shipping","address",W.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"}),u.jsx("input",{type:"text",value:v.shipping.city,onChange:W=>O("shipping","city",W.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State *"}),u.jsx("input",{type:"text",value:v.shipping.state,onChange:W=>O("shipping","state",W.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ZIP Code *"}),u.jsx("input",{type:"text",value:v.shipping.zipCode,onChange:W=>O("shipping","zipCode",W.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country"}),u.jsxs("select",{value:v.shipping.country,onChange:W=>O("shipping","country",W.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[u.jsx("option",{value:"United States",children:"United States"}),u.jsx("option",{value:"Canada",children:"Canada"}),u.jsx("option",{value:"United Kingdom",children:"United Kingdom"}),u.jsx("option",{value:"Australia",children:"Australia"})]})]})]})]}),m===3&&u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-bold mb-4",children:"Payment Information"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Card Number *"}),u.jsx("input",{type:"text",value:v.payment.cardNumber,onChange:W=>O("payment","cardNumber",W.target.value),placeholder:"1234 5678 9012 3456",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expiry Date *"}),u.jsx("input",{type:"text",value:v.payment.expiryDate,onChange:W=>O("payment","expiryDate",W.target.value),placeholder:"MM/YY",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CVV *"}),u.jsx("input",{type:"text",value:v.payment.cvv,onChange:W=>O("payment","cvv",W.target.value),placeholder:"123",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cardholder Name *"}),u.jsx("input",{type:"text",value:v.payment.cardName,onChange:W=>O("payment","cardName",W.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("input",{type:"checkbox",id:"sameAsShipping",checked:v.payment.sameAsShipping,onChange:W=>O("payment","sameAsShipping",W.target.checked),className:"mr-2"}),u.jsx("label",{htmlFor:"sameAsShipping",className:"text-sm text-gray-700",children:"Billing address same as shipping"})]})]})]}),m===4&&u.jsxs("div",{className:"text-center py-8",children:[u.jsx("div",{className:"text-6xl text-green-500 mb-4",children:""}),u.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Order Placed Successfully!"}),u.jsx("p",{className:"text-gray-600 mb-4",children:"Thank you for your purchase. You will receive a confirmation email shortly."}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 inline-block",children:[u.jsx("p",{className:"text-sm text-gray-500",children:"Order Number"}),u.jsxs("p",{className:"text-lg font-bold text-gray-900",children:["LM",Date.now().toString().slice(-6)]})]})]})]}),u.jsx("div",{className:"lg:col-span-1",children:u.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 sticky top-0",children:[u.jsx("h3",{className:"text-lg font-bold mb-4",children:"Order Summary"}),u.jsxs("div",{className:"space-y-2 mb-4",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Subtotal:"}),u.jsxs("span",{children:["$",N().toFixed(2)]})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Tax:"}),u.jsxs("span",{children:["$",L().toFixed(2)]})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Shipping:"}),u.jsx("span",{children:Q()===0?"FREE":`$${Q().toFixed(2)}`})]}),u.jsx("div",{className:"border-t border-gray-200 pt-2",children:u.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[u.jsx("span",{children:"Total:"}),u.jsxs("span",{children:["$",B().toFixed(2)]})]})})]}),N()<50&&m<4&&u.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:u.jsxs("p",{className:"text-sm text-blue-800",children:["Add $",(50-N()).toFixed(2)," more for free shipping!"]})})]})})]})})}),m<4&&u.jsxs("div",{className:"bg-gray-50 border-t border-gray-200 p-6 flex justify-between",children:[u.jsx("div",{children:m>1&&u.jsx("button",{onClick:Y,className:"btn btn-secondary px-6 py-3",children:"Back"})}),u.jsxs("div",{className:"flex gap-4",children:[u.jsx("button",{onClick:e,className:"btn btn-ghost px-6 py-3",children:"Cancel"}),m<3?u.jsx("button",{onClick:z,className:"btn btn-primary px-6 py-3",disabled:!U(m),children:"Continue"}):u.jsx("button",{onClick:ne,className:"btn btn-primary px-8 py-3",disabled:l||!U(m),children:l?"Processing...":"Place Order"})]})]}),m===4&&u.jsx("div",{className:"bg-gray-50 border-t border-gray-200 p-6 flex justify-center",children:u.jsx("button",{onClick:e,className:"btn btn-primary px-8 py-3",children:"Continue Shopping"})})]})}),document.body):null}function oC({isOpen:r,onClose:e}){const[t,s]=J.useState([]);J.useEffect(()=>{const m=()=>{window.WatchlistManager&&s(window.WatchlistManager.getAll())};return m(),window.addEventListener("watchlistUpdated",m),()=>window.removeEventListener("watchlistUpdated",m)},[]);const o=m=>{window.WatchlistManager&&window.WatchlistManager.remove(m)},l=m=>{window.CartManager&&(window.CartManager.add(m.id,1),window.dispatchEvent(new Event("cartUpdated")),He(`${m.name} added to cart!`,"success"))},h=m=>{e(),window.dispatchEvent(new CustomEvent("openProduct",{detail:{productId:m}}))};return J.useEffect(()=>{const m=p=>{p.key==="Escape"&&r&&e()};return r&&(document.addEventListener("keydown",m),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",m),document.body.style.overflow="unset"}},[r,e]),r?Ti.createPortal(u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[99999] flex items-center justify-center p-4 modal-overlay modal-backdrop cursor-pointer",onClick:e,children:u.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col animate-[fadeIn_0.2s_ease-out] cursor-default",onClick:m=>m.stopPropagation(),children:[u.jsxs("div",{className:"bg-white border-b border-gray-200 p-6 flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[u.jsx("div",{className:"icon-heart text-red-500"}),"Saved Items"]}),u.jsxs("p",{className:"text-gray-500 text-sm mt-1",children:[t.length," items in your watchlist"]})]}),u.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-full transition-colors text-gray-400 hover:text-gray-600",children:u.jsx("div",{className:"icon-x text-2xl"})})]}),u.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:t.length===0?u.jsxs("div",{className:"text-center py-12",children:[u.jsx("div",{className:"icon-heart text-gray-200 text-6xl mb-4 mx-auto"}),u.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Your watchlist is empty"}),u.jsx("p",{className:"text-gray-500 mt-2",children:"Save items you're interested in to keep track of them."}),u.jsx("button",{onClick:e,className:"btn btn-primary mt-6",children:"Start Shopping"})]}):u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.map(m=>u.jsxs("div",{className:"flex gap-4 p-4 border border-gray-100 rounded-xl hover:shadow-md transition-shadow bg-gray-50/30 group",children:[u.jsx("div",{className:"w-24 h-24 rounded-lg overflow-hidden flex-shrink-0 cursor-pointer",onClick:()=>h(m.id),children:u.jsx("img",{src:m.image,alt:m.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"})}),u.jsxs("div",{className:"flex-grow min-w-0",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsx("h4",{className:"font-bold text-gray-900 truncate pr-2 cursor-pointer hover:text-[var(--primary-color)]",onClick:()=>h(m.id),children:m.name}),u.jsx("button",{onClick:()=>o(m.id),className:"text-gray-400 hover:text-red-500 transition-colors",title:"Remove from watchlist",children:u.jsx("div",{className:"icon-x"})})]}),u.jsxs("p",{className:"text-[var(--primary-color)] font-bold mt-1",children:["$",m.price.toFixed(2)]}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:m.category}),u.jsxs("div",{className:"flex gap-2 mt-3",children:[u.jsx("button",{onClick:()=>l(m),className:"btn btn-primary text-xs py-1.5 px-3 flex-grow",children:"Add to Cart"}),u.jsx("button",{onClick:()=>h(m.id),className:"btn btn-secondary text-xs py-1.5 px-3",children:"View"})]})]})]},m.id))})}),t.length>0&&u.jsx("div",{className:"bg-gray-50 p-6 border-t border-gray-200 flex justify-end",children:u.jsx("button",{onClick:e,className:"btn btn-secondary",children:"Close"})})]})}),document.body):null}function aC({isOpen:r,onClose:e,currentUser:t}){const[s,o]=J.useState([]),[l,h]=J.useState({totalOrders:0,totalSpent:0,savedItems:0,recentActivity:[]});J.useEffect(()=>{r&&m()},[r]);const m=()=>{try{const p=[{id:"LM123456",date:"2024-01-15",total:299.99,status:"Delivered",items:3},{id:"LM123457",date:"2024-01-10",total:149.5,status:"Shipped",items:2},{id:"LM123458",date:"2024-01-05",total:89.99,status:"Processing",items:1}];o(p);const v=p.reduce((b,N)=>b+N.total,0),E=JSON.parse(localStorage.getItem("luxemarket_watchlist")||"[]");h({totalOrders:p.length,totalSpent:v,savedItems:E.length,recentActivity:["Added Premium Headphones to cart","Saved Luxury Watch to watchlist","Completed order LM123456","Updated shipping address"]})}catch(p){console.error("Error loading account data:",p),showToast("Error loading account data","error")}};return J.useEffect(()=>{const p=v=>{v.key==="Escape"&&r&&e()};return r&&(document.addEventListener("keydown",p),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",p),document.body.style.overflow="unset"}},[r,e]),!r||!r?null:Ti.createPortal(u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[99999] flex items-center justify-center p-4 modal-overlay modal-backdrop",onClick:e,children:u.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col animate-[fadeIn_0.2s_ease-out]",onClick:p=>p.stopPropagation(),children:[u.jsxs("div",{className:"bg-white border-b border-gray-200 p-6 flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Account Summary"}),u.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Welcome back, ",t?.name||"User","!"]})]}),u.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 text-3xl leading-none w-8 h-8 flex items-center justify-center hover:bg-gray-100 rounded-full transition-colors",title:"Close (Esc)",children:u.jsx("div",{className:"icon-x text-2xl"})})]}),u.jsx("div",{className:"flex-1 overflow-y-auto max-h-[calc(95vh-200px)]",children:u.jsx("div",{className:"p-6",children:u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[u.jsx("div",{className:"lg:col-span-3",children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[u.jsx("div",{className:"bg-blue-50 rounded-lg p-6",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"icon-shopping-bag text-2xl text-blue-600 mr-3"}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Total Orders"}),u.jsx("p",{className:"text-2xl font-bold text-blue-900",children:l.totalOrders})]})]})}),u.jsx("div",{className:"bg-green-50 rounded-lg p-6",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"icon-dollar-sign text-2xl text-green-600 mr-3"}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Total Spent"}),u.jsxs("p",{className:"text-2xl font-bold text-green-900",children:["$",l.totalSpent.toFixed(2)]})]})]})}),u.jsx("div",{className:"bg-purple-50 rounded-lg p-6",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"icon-heart text-2xl text-purple-600 mr-3"}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-purple-600 font-medium",children:"Saved Items"}),u.jsx("p",{className:"text-2xl font-bold text-purple-900",children:l.savedItems})]})]})})]})}),u.jsxs("div",{className:"lg:col-span-2",children:[u.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Recent Orders"}),u.jsx("div",{className:"space-y-4",children:s.map(p=>u.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-sm transition-shadow",children:[u.jsxs("div",{className:"flex justify-between items-start mb-2",children:[u.jsxs("div",{children:[u.jsxs("p",{className:"font-semibold text-gray-900",children:["Order #",p.id]}),u.jsx("p",{className:"text-sm text-gray-500",children:p.date})]}),u.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${p.status==="Delivered"?"bg-green-100 text-green-800":p.status==="Shipped"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:p.status})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("p",{className:"text-sm text-gray-600",children:[p.items," items"]}),u.jsxs("p",{className:"font-bold text-gray-900",children:["$",p.total.toFixed(2)]})]})]},p.id))})]}),u.jsxs("div",{className:"lg:col-span-1",children:[u.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Recent Activity"}),u.jsx("div",{className:"space-y-3",children:l.recentActivity.map((p,v)=>u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full mt-2 flex-shrink-0"}),u.jsx("p",{className:"text-sm text-gray-600",children:p})]},v))})]})]})})}),u.jsx("div",{className:"bg-gray-50 border-t border-gray-200 p-6 flex justify-center",children:u.jsx("button",{onClick:e,className:"btn btn-primary px-8 py-3",children:"Continue Shopping"})})]})}),document.body)}class dn extends J.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t)}render(){return this.state.hasError?u.jsxs("div",{style:{padding:"2rem",textAlign:"center",backgroundColor:"#fee2e2",border:"1px solid #fecaca",borderRadius:"8px",margin:"1rem"},children:[u.jsx("h2",{style:{color:"#dc2626",marginBottom:"1rem"},children:"Something went wrong"}),u.jsx("p",{style:{color:"#7f1d1d",marginBottom:"1rem"},children:this.state.error?.message||"An unexpected error occurred"}),u.jsx("button",{onClick:()=>this.setState({hasError:!1,error:null}),style:{padding:"0.5rem 1rem",backgroundColor:"#dc2626",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",marginRight:"0.5rem"},children:"Try Again"}),u.jsx("button",{onClick:()=>window.location.reload(),style:{padding:"0.5rem 1rem",backgroundColor:"#6b7280",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Reload Page"})]}):this.props.children}}const cf=(()=>{const r="luxemarket_cart",e=()=>{try{const o=localStorage.getItem(r);return o?JSON.parse(o):[]}catch(o){return console.error("Error loading cart from storage:",o),[]}},t=o=>{try{localStorage.setItem(r,JSON.stringify(o)),window.dispatchEvent(new Event("cartUpdated"))}catch(l){console.error("Error saving cart to storage:",l)}};let s=e();return{getCart(){return[...s]},getCount(){return s.reduce((o,l)=>o+l.quantity,0)},getItemCount(){return this.getCount()},getTotal(){return s.reduce((o,l)=>{const h=window.ProductManager?window.ProductManager.getById(l.id):null;return h?o+h.price*l.quantity:o},0)},add(o,l=1){if(window.ProductManager){const m=window.ProductManager.getById(o);if(!m)throw new Error("Product not found");if(!window.ProductManager.isInStock(o))throw new Error("Product is out of stock");const p=s.find(E=>E.id===o)?.quantity||0;if(p+l>m.stock)throw new Error(`Only ${m.stock} items available (${p} already in cart)`)}const h=s.find(m=>m.id===o);return h?h.quantity+=l:s.push({id:o,quantity:l}),t(s),!0},update(o,l){const h=s.find(m=>m.id===o);if(!h)return!1;if(l<=0)return this.remove(o),!0;if(window.ProductManager){const m=window.ProductManager.getById(o);if(m&&l>m.stock)throw new Error(`Only ${m.stock} items available`)}return h.quantity=l,t(s),!0},remove(o){const l=s.filter(m=>m.id!==o),h=l.length!==s.length;return h&&(s=l,t(s)),h},clear(){s=[],t(s)},enableAutoSave(o=3e4){return this._autoSaveInterval&&clearInterval(this._autoSaveInterval),this._autoSaveInterval=setInterval(()=>{try{t(s),console.log(" Auto-saved cart data")}catch(l){console.error(" Cart auto-save failed:",l)}},o),this._autoSaveInterval},disableAutoSave(){this._autoSaveInterval&&(clearInterval(this._autoSaveInterval),this._autoSaveInterval=null)},forceSave(){try{return t(s),console.log(" Force saved cart data"),!0}catch(o){return console.error(" Cart force save failed:",o),!1}}}})();window.CartManager=cf;const wo="users";class lC{async getUserProfile(e){const t=sr(Wt,wo,e),s=await Ya(t);return s.exists()?{id:s.id,...s.data()}:null}async updateUserProfile(e,t){const s=sr(Wt,wo,e);return await jh(s,{...t,updatedAt:gi()},{merge:!0}),{id:e,...t}}async getWatchlist(e){const t=sr(Wt,wo,e),s=await Ya(t);return s.exists()?s.data().watchlist||[]:[]}async addToWatchlist(e,t){const s=sr(Wt,wo,e);return await jh(s,{watchlist:g1(t),updatedAt:gi()},{merge:!0}),!0}async removeFromWatchlist(e,t){const s=sr(Wt,wo,e),o=await Ya(s);if(o.exists()){const m=(o.data().watchlist||[]).filter(p=>p.id!==t.id);return await ex(s,{watchlist:m,updatedAt:gi()}),!0}return!1}async syncWatchlist(e,t){if(!t||t.length===0)return;const s=sr(Wt,wo,e),o=await Ya(s);let l=[];o.exists()&&(l=o.data().watchlist||[]);const h=new Map;l.forEach(p=>h.set(p.id,p));let m=!1;if(t.forEach(p=>{h.has(p.id)||(h.set(p.id,p),m=!0)}),m){const p=Array.from(h.values());return await jh(s,{watchlist:p,updatedAt:gi()},{merge:!0}),p}return l}}const Mh=new lC,Ox=(()=>{const r="luxemarket_watchlist";let e=null,t=!1;const s=()=>{try{const l=localStorage.getItem(r);return l?JSON.parse(l):[]}catch(l){return console.error("Error loading local watchlist:",l),[]}},o=l=>{try{localStorage.setItem(r,JSON.stringify(l))}catch(h){console.error("Error saving local watchlist:",h)}};return{init(){t||(tC.onAuthStateChanged(async l=>{if(e=l,l){console.log(" WatchlistManager: User logged in, syncing...");const h=s();if(h.length>0)try{await Mh.syncWatchlist(l.uid,h)}catch(m){console.error("Watchlist sync error:",m)}window.dispatchEvent(new Event("watchlistUpdated"))}else console.log(" WatchlistManager: User logged out"),window.dispatchEvent(new Event("watchlistUpdated"))}),t=!0,console.log(" WatchlistManager initialized"))},getAll(){return s()},has(l){return this.getAll().some(m=>m.id===l)},isInWatchlist(l){return this.has(l)},add(l){try{const h=s();return h.some(m=>m.id===l.id)?!1:(h.push(l),o(h),e&&Mh.addToWatchlist(e.uid,l).catch(console.error),window.dispatchEvent(new Event("watchlistUpdated")),!0)}catch(h){return console.error("Error adding to watchlist:",h),!1}},remove(l){try{const h=s(),m=h.find(v=>v.id===l),p=h.filter(v=>v.id!==l);return p.length!==h.length?(o(p),e&&m&&Mh.removeFromWatchlist(e.uid,m).catch(console.error),window.dispatchEvent(new Event("watchlistUpdated")),!0):!1}catch(h){return console.error("Error removing from watchlist:",h),!1}},toggle(l){return this.has(l.id)?(this.remove(l.id),!1):(this.add(l),!0)},toggleWatchlist(l){return typeof l=="object"?this.toggle(l):this.has(l)?(this.remove(l),!1):(console.error("Cannot add to watchlist with ID only. Need full product object."),!1)},count(){return this.getAll().length},clear(){try{return localStorage.removeItem(r),window.dispatchEvent(new Event("watchlistUpdated")),!0}catch{return!1}}}})();Ox.init();window.WatchlistManager=Ox;console.log(" FullApp component loading...");function cC(){const[r,e]=J.useState("home"),[t,s]=J.useState(0),[o,l]=J.useState(!1),[h,m]=J.useState(null),[p,v]=J.useState({isOpen:!1,isRegister:!1}),[E,b]=J.useState(null),[N,L]=J.useState(!1),[Q,B]=J.useState(!1),[O,U]=J.useState(!1),[z,Y]=J.useState(!1);J.useEffect(()=>{const F=()=>{try{const X=cf.getItemCount();s(X)}catch(X){console.error("Cart count error:",X)}};return F(),window.addEventListener("cartUpdated",F),()=>{window.removeEventListener("cartUpdated",F)}},[]),J.useEffect(()=>{const F=()=>{const X=window.location.hash.slice(1);e(X==="admin"?"admin":X==="firebase"?"firebase":"home")};return F(),window.addEventListener("hashchange",F),()=>{window.removeEventListener("hashchange",F)}},[]),J.useEffect(()=>{const F=async X=>{try{if(!window.ProductManager){console.error("ProductManager not initialized");return}let R;window.ProductManager.getByIdAsync?R=await window.ProductManager.getByIdAsync(X.detail.productId):R=window.ProductManager.getById(X.detail.productId),R&&b(R)}catch(R){console.error("Product open error:",R)}};return window.addEventListener("openProduct",F),()=>{window.removeEventListener("openProduct",F)}},[]),J.useEffect(()=>{const F=()=>{B(!0)};return window.addEventListener("openCheckout",F),()=>{window.removeEventListener("openCheckout",F)}},[]);const ne=(F=!1)=>{v({isOpen:!0,isRegister:F})},W=()=>{v({isOpen:!1,isRegister:!1})},ce=F=>{m(F),W(),He(`Welcome back, ${F.name}!`,"success")},C=F=>{m(F),W(),He(`Welcome to LuxeMarket, ${F.name}!`,"success")},I=()=>{m(null),He("You have been logged out","info")},A=()=>{const F=cf.getItemCount();s(F)},D=()=>{L(!0)},P=()=>{L(!1)},M=()=>{L(!1),B(!0)},w=()=>{B(!1)},ie=F=>{A(),He(`Order ${F} completed successfully!`,"success")},Se=()=>{U(!0)},Re=()=>{U(!1)},Le=()=>{Y(!0)},oe=()=>{Y(!1)};return r==="admin"?u.jsx(dn,{children:u.jsx(vw,{})}):r==="firebase"?u.jsx(dn,{children:u.jsx(rC,{})}):u.jsx(dn,{children:u.jsxs("div",{className:"min-h-screen bg-gray-50",children:[u.jsx(dn,{children:u.jsx(Z_,{cartCount:t,isMenuOpen:o,setIsMenuOpen:l,currentUser:h,onOpenAuth:ne,onLogout:I,onOpenCart:D,onOpenWatchlist:Se,onOpenAccountSummary:Le})}),u.jsxs("main",{children:[u.jsx(dn,{children:u.jsx(ew,{})}),u.jsx(dn,{children:u.jsx(rw,{})})]}),u.jsx(dn,{children:u.jsx(sw,{})}),p.isOpen&&u.jsx(dn,{children:u.jsx(iw,{isOpen:p.isOpen,isRegister:p.isRegister,onClose:W,onLogin:ce,onRegister:C})}),E&&u.jsx(dn,{children:u.jsx(aw,{product:E,onClose:()=>b(null),currentUser:h,onOpenAuth:ne,onCartUpdate:A})}),N&&u.jsx(dn,{children:u.jsx(sC,{isOpen:N,onClose:P,onCartUpdate:A,onCheckout:M})}),Q&&u.jsx(dn,{children:u.jsx(iC,{isOpen:Q,onClose:w,onOrderComplete:ie})}),O&&u.jsx(dn,{children:u.jsx(oC,{isOpen:O,onClose:Re})}),z&&u.jsx(dn,{children:u.jsx(aC,{isOpen:z,onClose:oe,currentUser:h})})]})})}console.log(" LuxeMarket App loading...");function uC(){return u.jsx(J.Suspense,{fallback:u.jsx("div",{style:{minHeight:"100vh",backgroundColor:"#f3f4f6",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"Inter, sans-serif"},children:u.jsxs("div",{style:{textAlign:"center"},children:[u.jsx("h1",{style:{fontSize:"3rem",color:"#111827",marginBottom:"1rem",fontWeight:"bold"},children:"LuxeMarket"}),u.jsx("p",{style:{color:"#6b7280",fontSize:"1.2rem"},children:"Loading your premium shopping experience..."}),u.jsx("div",{style:{marginTop:"2rem",width:"200px",height:"4px",backgroundColor:"#e5e7eb",borderRadius:"2px",overflow:"hidden",margin:"2rem auto"},children:u.jsx("div",{style:{width:"100%",height:"100%",backgroundColor:"#2563eb",borderRadius:"2px",animation:"loading 2s ease-in-out infinite"}})}),u.jsx("style",{children:`
            @keyframes loading {
              0% { transform: translateX(-100%); }
              50% { transform: translateX(0%); }
              100% { transform: translateX(100%); }
            }
          `})]})}),children:u.jsx(cC,{})})}const Lt=(()=>{let r=[],e=!1;const t=async()=>{if(!e)try{console.log(" Initializing Firebase ProductManager..."),r=await bs.getAll(),e=!0,console.log(` Loaded ${r.length} products from Firebase`),r.length>0?console.log(" Sample product:",r[0]):console.warn(" No products found in Firebase!")}catch(z){console.error(" Failed to initialize Firebase ProductManager:",z),r=[]}};return{init:t,getAll:async()=>(e||await t(),r),getById:async z=>(e||await t(),r.find(Y=>Y.id===z)),getByCategory:async z=>(e||await t(),r.filter(Y=>Y.category===z)),getFeatured:async()=>(e||await t(),r.filter(z=>z.featured===!0)),getDailyDeals:async()=>(e||await t(),r.filter(z=>z.dailyDeal===!0)),search:async z=>{e||await t();const Y=z.toLowerCase();return r.filter(ne=>ne.name.toLowerCase().includes(Y)||ne.description?.toLowerCase().includes(Y)||ne.category.toLowerCase().includes(Y))},add:async z=>{try{const Y=await bs.create(z);return r.push(Y),console.log(" Product added to Firebase:",Y.name),Y}catch(Y){throw console.error(" Failed to add product:",Y),Y}},update:async(z,Y)=>{try{const ne=await bs.update(z,Y),W=r.findIndex(ce=>ce.id===z);return W!==-1&&(r[W]=ne),console.log(" Product updated in Firebase:",z),ne}catch(ne){throw console.error(" Failed to update product:",ne),ne}},remove:async z=>{try{return await bs.delete(z),r=r.filter(Y=>Y.id!==z),console.log(" Product deleted from Firebase:",z),!0}catch(Y){throw console.error(" Failed to delete product:",Y),Y}},refresh:async()=>{try{return r=await bs.getAll(),console.log(" Products refreshed from Firebase"),r}catch(z){throw console.error(" Failed to refresh products:",z),z}},getAllSync:()=>r,getByIdSync:z=>r.find(Y=>Y.id===z),getByCategorySync:z=>r.filter(Y=>Y.category===z),getFeaturedSync:()=>r.filter(z=>z.featured===!0),getDailyDealsSync:()=>r.filter(z=>z.dailyDeal===!0)}})();Lt.init().catch(console.error);typeof window<"u"&&(window.FirebaseProductManager=Lt);const dC="luxemarket_data_reset_v5";typeof Storage<"u"&&(localStorage.getItem(dC)||(console.log(" LuxeMarket: Running AGGRESSIVE one-time data cleanup (v5)..."),Object.keys(localStorage).forEach(e=>{e.startsWith("luxemarket")&&localStorage.removeItem(e)}),sessionStorage.clear(),typeof indexedDB<"u"&&(indexedDB.deleteDatabase("LuxeMarketDB"),console.log(" IndexedDB: LuxeMarketDB scheduled for deletion")),"caches"in window&&(caches.keys().then(e=>{for(let t of e)caches.delete(t)}),console.log(" Cache API: All caches scheduled for deletion")),localStorage.setItem(MIGRATION_KEY,"done"),console.log(" Data cleared. Forcing refresh for a clean session..."),window.location.reload()));typeof Storage<"u"&&localStorage.removeItem("luxemarket_products");"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(r=>{for(let e of r)e.unregister()});window.ProductManager={getAll:()=>Lt.getAllSync(),getById:r=>Lt.getByIdSync(r),getByCategory:r=>Lt.getByCategorySync(r),getFeatured:()=>Lt.getFeaturedSync(),getDailyDeals:()=>{try{const r=localStorage.getItem("luxemarket_daily_deals");let e=[];r?e=JSON.parse(r):e=Lt.getDailyDealsSync().map(s=>({productId:s.id,discountPercent:s.discountPercent||20})),Array.isArray(e)||(e=[]);const t=new Map;return e.forEach(s=>{s&&s.productId&&t.set(s.productId.toString(),s)}),Array.from(t.values())}catch(r){return console.error(" Error parsing daily deals:",r),[]}},getAllWithDeals:()=>{const r=Lt.getAllSync(),e=window.ProductManager.getDailyDeals();return r.map(t=>{const s=e.find(o=>o.productId==t.id);if(s){const o=t.price*(s.discountPercent/100);return{...t,originalPrice:t.price,price:t.price-o,discountPercent:s.discountPercent,isDailyDeal:!0}}return t})},addToDailyDeals:(r,e)=>{const t=window.ProductManager.getDailyDeals(),s=t.findIndex(l=>l.productId==r),o={productId:r,discountPercent:Math.max(0,Math.min(90,e)),addedDate:new Date().toISOString()};return s>=0?t[s]=o:t.push(o),localStorage.setItem("luxemarket_daily_deals",JSON.stringify(t)),!0},removeFromDailyDeals:r=>{const t=window.ProductManager.getDailyDeals().filter(s=>s.productId!=r);return localStorage.setItem("luxemarket_daily_deals",JSON.stringify(t)),!0},getHomePageOrder:()=>{try{const r=localStorage.getItem("luxemarket_homepage_order");return r?JSON.parse(r):[]}catch(r){return console.error(" Error parsing homepage order:",r),[]}},getHomePageProducts:(r=12,e=null)=>{const t=window.ProductManager.getHomePageOrder(),s=e||window.ProductManager.getAllWithDeals();if(t.length>0){const o=[];if(t.forEach(l=>{const h=s.find(m=>m.id==l);h&&o.push(h)}),o.length>0)return o.slice(0,r)}return s.slice(0,r)},reorderHomePageProducts:(r,e)=>{const t=window.ProductManager.getHomePageOrder(),s=Lt.getAllSync();let o=t.length>0?[...t]:s.slice(0,12).map(h=>h.id);const[l]=o.splice(r,1);return o.splice(e,0,l),localStorage.setItem("luxemarket_homepage_order",JSON.stringify(o)),o},getAllAsync:()=>Lt.getAll(),getAllWithDealsAsync:async()=>{const r=await Lt.getAll(),e=window.ProductManager.getDailyDeals();return r.map(t=>{const s=e.find(o=>o.productId==t.id);if(s){const o=t.price*(s.discountPercent/100);return{...t,originalPrice:t.price,price:t.price-o,discountPercent:s.discountPercent,isDailyDeal:!0}}return t})},getByIdAsync:r=>Lt.getById(r),add:r=>Lt.add(r),update:(r,e)=>Lt.update(r,e),delete:r=>Lt.remove(r),refresh:()=>Lt.refresh()};console.log(" Firebase ProductManager initialized");J_.createRoot(document.getElementById("root")).render(u.jsx(Ja.StrictMode,{children:u.jsx(uC,{})}));
